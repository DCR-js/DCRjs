(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function I_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Ny={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(e){(function(t,n){e.exports=t.document?n(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:Be,function(t,n){var r=[],o=Object.getPrototypeOf,i=r.slice,a=r.flat?function(c){return r.flat.call(c)}:function(c){return r.concat.apply([],c)},s=r.push,u=r.indexOf,f={},l=f.toString,p=f.hasOwnProperty,y=p.toString,g=y.call(Object),v={},S=function(h){return typeof h=="function"&&typeof h.nodeType!="number"&&typeof h.item!="function"},M=function(h){return h!=null&&h===h.window},P=t.document,T={type:!0,src:!0,nonce:!0,noModule:!0};function m(c,h,_){_=_||P;var E,O,N=_.createElement("script");if(N.text=c,h)for(E in T)O=h[E]||h.getAttribute&&h.getAttribute(E),O&&N.setAttribute(E,O);_.head.appendChild(N).parentNode.removeChild(N)}function x(c){return c==null?c+"":typeof c=="object"||typeof c=="function"?f[l.call(c)]||"object":typeof c}var b="3.7.1",I=/HTML$/i,d=function(c,h){return new d.fn.init(c,h)};d.fn=d.prototype={jquery:b,constructor:d,length:0,toArray:function(){return i.call(this)},get:function(c){return c==null?i.call(this):c<0?this[c+this.length]:this[c]},pushStack:function(c){var h=d.merge(this.constructor(),c);return h.prevObject=this,h},each:function(c){return d.each(this,c)},map:function(c){return this.pushStack(d.map(this,function(h,_){return c.call(h,_,h)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(d.grep(this,function(c,h){return(h+1)%2}))},odd:function(){return this.pushStack(d.grep(this,function(c,h){return h%2}))},eq:function(c){var h=this.length,_=+c+(c<0?h:0);return this.pushStack(_>=0&&_<h?[this[_]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},d.extend=d.fn.extend=function(){var c,h,_,E,O,N,k=arguments[0]||{},K=1,X=arguments.length,te=!1;for(typeof k=="boolean"&&(te=k,k=arguments[K]||{},K++),typeof k!="object"&&!S(k)&&(k={}),K===X&&(k=this,K--);K<X;K++)if((c=arguments[K])!=null)for(h in c)E=c[h],!(h==="__proto__"||k===E)&&(te&&E&&(d.isPlainObject(E)||(O=Array.isArray(E)))?(_=k[h],O&&!Array.isArray(_)?N=[]:!O&&!d.isPlainObject(_)?N={}:N=_,O=!1,k[h]=d.extend(te,N,E)):E!==void 0&&(k[h]=E));return k},d.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw new Error(c)},noop:function(){},isPlainObject:function(c){var h,_;return!c||l.call(c)!=="[object Object]"?!1:(h=o(c),h?(_=p.call(h,"constructor")&&h.constructor,typeof _=="function"&&y.call(_)===g):!0)},isEmptyObject:function(c){var h;for(h in c)return!1;return!0},globalEval:function(c,h,_){m(c,{nonce:h&&h.nonce},_)},each:function(c,h){var _,E=0;if(L(c))for(_=c.length;E<_&&h.call(c[E],E,c[E])!==!1;E++);else for(E in c)if(h.call(c[E],E,c[E])===!1)break;return c},text:function(c){var h,_="",E=0,O=c.nodeType;if(!O)for(;h=c[E++];)_+=d.text(h);return O===1||O===11?c.textContent:O===9?c.documentElement.textContent:O===3||O===4?c.nodeValue:_},makeArray:function(c,h){var _=h||[];return c!=null&&(L(Object(c))?d.merge(_,typeof c=="string"?[c]:c):s.call(_,c)),_},inArray:function(c,h,_){return h==null?-1:u.call(h,c,_)},isXMLDoc:function(c){var h=c&&c.namespaceURI,_=c&&(c.ownerDocument||c).documentElement;return!I.test(h||_&&_.nodeName||"HTML")},merge:function(c,h){for(var _=+h.length,E=0,O=c.length;E<_;E++)c[O++]=h[E];return c.length=O,c},grep:function(c,h,_){for(var E,O=[],N=0,k=c.length,K=!_;N<k;N++)E=!h(c[N],N),E!==K&&O.push(c[N]);return O},map:function(c,h,_){var E,O,N=0,k=[];if(L(c))for(E=c.length;N<E;N++)O=h(c[N],N,_),O!=null&&k.push(O);else for(N in c)O=h(c[N],N,_),O!=null&&k.push(O);return a(k)},guid:1,support:v}),typeof Symbol=="function"&&(d.fn[Symbol.iterator]=r[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(c,h){f["[object "+h+"]"]=h.toLowerCase()});function L(c){var h=!!c&&"length"in c&&c.length,_=x(c);return S(c)||M(c)?!1:_==="array"||h===0||typeof h=="number"&&h>0&&h-1 in c}function w(c,h){return c.nodeName&&c.nodeName.toLowerCase()===h.toLowerCase()}var U=r.pop,G=r.sort,Y=r.splice,q="[\\x20\\t\\r\\n\\f]",fe=new RegExp("^"+q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+q+"+$","g");d.contains=function(c,h){var _=h&&h.parentNode;return c===_||!!(_&&_.nodeType===1&&(c.contains?c.contains(_):c.compareDocumentPosition&&c.compareDocumentPosition(_)&16))};var Te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function we(c,h){return h?c==="\0"?"ï¿½":c.slice(0,-1)+"\\"+c.charCodeAt(c.length-1).toString(16)+" ":"\\"+c}d.escapeSelector=function(c){return(c+"").replace(Te,we)};var ye=P,Ue=s;(function(){var c,h,_,E,O,N=Ue,k,K,X,te,le,ge=d.expando,ae=0,be=0,He=ns(),st=ns(),Ge=ns(),qt=ns(),kt=function(W,J){return W===J&&(O=!0),0},Kn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Zn="(?:\\\\[\\da-fA-F]{1,6}"+q+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",it="\\["+q+"*("+Zn+")(?:"+q+"*([*^$|!~]?=)"+q+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Zn+"))|)"+q+"*\\]",ki=":("+Zn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+it+")*)|.*)\\)|)",ut=new RegExp(q+"+","g"),Et=new RegExp("^"+q+"*,"+q+"*"),zo=new RegExp("^"+q+"*([>+~]|"+q+")"+q+"*"),ac=new RegExp(q+"|>"),Qn=new RegExp(ki),Vo=new RegExp("^"+Zn+"$"),Jn={ID:new RegExp("^#("+Zn+")"),CLASS:new RegExp("^\\.("+Zn+")"),TAG:new RegExp("^("+Zn+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+ki),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+q+"*(even|odd|(([+-]|)(\\d*)n|)"+q+"*(?:([+-]|)"+q+"*(\\d+)|))"+q+"*\\)|)","i"),bool:new RegExp("^(?:"+Kn+")$","i"),needsContext:new RegExp("^"+q+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+q+"*((?:-\\d)?\\d*)"+q+"*\\)|)(?=[^-]|$)","i")},Jr=/^(?:input|select|textarea|button)$/i,ei=/^h\d$/i,bn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sc=/[+~]/,xr=new RegExp("\\\\[\\da-fA-F]{1,6}"+q+"?|\\\\([^\\r\\n\\f])","g"),wr=function(W,J){var oe="0x"+W.slice(1)-65536;return J||(oe<0?String.fromCharCode(oe+65536):String.fromCharCode(oe>>10|55296,oe&1023|56320))},M_=function(){ti()},R_=is(function(W){return W.disabled===!0&&w(W,"fieldset")},{dir:"parentNode",next:"legend"});function P_(){try{return k.activeElement}catch{}}try{N.apply(r=i.call(ye.childNodes),ye.childNodes),r[ye.childNodes.length].nodeType}catch{N={apply:function(J,oe){Ue.apply(J,i.call(oe))},call:function(J){Ue.apply(J,i.call(arguments,1))}}}function ht(W,J,oe,ce){var pe,Se,Me,Ae,Re,et,je,qe=J&&J.ownerDocument,tt=J?J.nodeType:9;if(oe=oe||[],typeof W!="string"||!W||tt!==1&&tt!==9&&tt!==11)return oe;if(!ce&&(ti(J),J=J||k,X)){if(tt!==11&&(Re=bn.exec(W)))if(pe=Re[1]){if(tt===9)if(Me=J.getElementById(pe)){if(Me.id===pe)return N.call(oe,Me),oe}else return oe;else if(qe&&(Me=qe.getElementById(pe))&&ht.contains(J,Me)&&Me.id===pe)return N.call(oe,Me),oe}else{if(Re[2])return N.apply(oe,J.getElementsByTagName(W)),oe;if((pe=Re[3])&&J.getElementsByClassName)return N.apply(oe,J.getElementsByClassName(pe)),oe}if(!qt[W+" "]&&(!te||!te.test(W))){if(je=W,qe=J,tt===1&&(ac.test(W)||zo.test(W))){for(qe=sc.test(W)&&uc(J.parentNode)||J,(qe!=J||!v.scope)&&((Ae=J.getAttribute("id"))?Ae=d.escapeSelector(Ae):J.setAttribute("id",Ae=ge)),et=Xo(W),Se=et.length;Se--;)et[Se]=(Ae?"#"+Ae:":scope")+" "+rs(et[Se]);je=et.join(",")}try{return N.apply(oe,qe.querySelectorAll(je)),oe}catch{qt(W,!0)}finally{Ae===ge&&J.removeAttribute("id")}}}return tp(W.replace(fe,"$1"),J,oe,ce)}function ns(){var W=[];function J(oe,ce){return W.push(oe+" ")>h.cacheLength&&delete J[W.shift()],J[oe+" "]=ce}return J}function Un(W){return W[ge]=!0,W}function co(W){var J=k.createElement("fieldset");try{return!!W(J)}catch{return!1}finally{J.parentNode&&J.parentNode.removeChild(J),J=null}}function A_(W){return function(J){return w(J,"input")&&J.type===W}}function O_(W){return function(J){return(w(J,"input")||w(J,"button"))&&J.type===W}}function Jh(W){return function(J){return"form"in J?J.parentNode&&J.disabled===!1?"label"in J?"label"in J.parentNode?J.parentNode.disabled===W:J.disabled===W:J.isDisabled===W||J.isDisabled!==!W&&R_(J)===W:J.disabled===W:"label"in J?J.disabled===W:!1}}function Bi(W){return Un(function(J){return J=+J,Un(function(oe,ce){for(var pe,Se=W([],oe.length,J),Me=Se.length;Me--;)oe[pe=Se[Me]]&&(oe[pe]=!(ce[pe]=oe[pe]))})})}function uc(W){return W&&typeof W.getElementsByTagName<"u"&&W}function ti(W){var J,oe=W?W.ownerDocument||W:ye;return oe==k||oe.nodeType!==9||!oe.documentElement||(k=oe,K=k.documentElement,X=!d.isXMLDoc(k),le=K.matches||K.webkitMatchesSelector||K.msMatchesSelector,K.msMatchesSelector&&ye!=k&&(J=k.defaultView)&&J.top!==J&&J.addEventListener("unload",M_),v.getById=co(function(ce){return K.appendChild(ce).id=d.expando,!k.getElementsByName||!k.getElementsByName(d.expando).length}),v.disconnectedMatch=co(function(ce){return le.call(ce,"*")}),v.scope=co(function(){return k.querySelectorAll(":scope")}),v.cssHas=co(function(){try{return k.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),v.getById?(h.filter.ID=function(ce){var pe=ce.replace(xr,wr);return function(Se){return Se.getAttribute("id")===pe}},h.find.ID=function(ce,pe){if(typeof pe.getElementById<"u"&&X){var Se=pe.getElementById(ce);return Se?[Se]:[]}}):(h.filter.ID=function(ce){var pe=ce.replace(xr,wr);return function(Se){var Me=typeof Se.getAttributeNode<"u"&&Se.getAttributeNode("id");return Me&&Me.value===pe}},h.find.ID=function(ce,pe){if(typeof pe.getElementById<"u"&&X){var Se,Me,Ae,Re=pe.getElementById(ce);if(Re){if(Se=Re.getAttributeNode("id"),Se&&Se.value===ce)return[Re];for(Ae=pe.getElementsByName(ce),Me=0;Re=Ae[Me++];)if(Se=Re.getAttributeNode("id"),Se&&Se.value===ce)return[Re]}return[]}}),h.find.TAG=function(ce,pe){return typeof pe.getElementsByTagName<"u"?pe.getElementsByTagName(ce):pe.querySelectorAll(ce)},h.find.CLASS=function(ce,pe){if(typeof pe.getElementsByClassName<"u"&&X)return pe.getElementsByClassName(ce)},te=[],co(function(ce){var pe;K.appendChild(ce).innerHTML="<a id='"+ge+"' href='' disabled='disabled'></a><select id='"+ge+"-\r\\' disabled='disabled'><option selected=''></option></select>",ce.querySelectorAll("[selected]").length||te.push("\\["+q+"*(?:value|"+Kn+")"),ce.querySelectorAll("[id~="+ge+"-]").length||te.push("~="),ce.querySelectorAll("a#"+ge+"+*").length||te.push(".#.+[+~]"),ce.querySelectorAll(":checked").length||te.push(":checked"),pe=k.createElement("input"),pe.setAttribute("type","hidden"),ce.appendChild(pe).setAttribute("name","D"),K.appendChild(ce).disabled=!0,ce.querySelectorAll(":disabled").length!==2&&te.push(":enabled",":disabled"),pe=k.createElement("input"),pe.setAttribute("name",""),ce.appendChild(pe),ce.querySelectorAll("[name='']").length||te.push("\\["+q+"*name"+q+"*="+q+`*(?:''|"")`)}),v.cssHas||te.push(":has"),te=te.length&&new RegExp(te.join("|")),kt=function(ce,pe){if(ce===pe)return O=!0,0;var Se=!ce.compareDocumentPosition-!pe.compareDocumentPosition;return Se||(Se=(ce.ownerDocument||ce)==(pe.ownerDocument||pe)?ce.compareDocumentPosition(pe):1,Se&1||!v.sortDetached&&pe.compareDocumentPosition(ce)===Se?ce===k||ce.ownerDocument==ye&&ht.contains(ye,ce)?-1:pe===k||pe.ownerDocument==ye&&ht.contains(ye,pe)?1:E?u.call(E,ce)-u.call(E,pe):0:Se&4?-1:1)}),k}ht.matches=function(W,J){return ht(W,null,null,J)},ht.matchesSelector=function(W,J){if(ti(W),X&&!qt[J+" "]&&(!te||!te.test(J)))try{var oe=le.call(W,J);if(oe||v.disconnectedMatch||W.document&&W.document.nodeType!==11)return oe}catch{qt(J,!0)}return ht(J,k,null,[W]).length>0},ht.contains=function(W,J){return(W.ownerDocument||W)!=k&&ti(W),d.contains(W,J)},ht.attr=function(W,J){(W.ownerDocument||W)!=k&&ti(W);var oe=h.attrHandle[J.toLowerCase()],ce=oe&&p.call(h.attrHandle,J.toLowerCase())?oe(W,J,!X):void 0;return ce!==void 0?ce:W.getAttribute(J)},ht.error=function(W){throw new Error("Syntax error, unrecognized expression: "+W)},d.uniqueSort=function(W){var J,oe=[],ce=0,pe=0;if(O=!v.sortStable,E=!v.sortStable&&i.call(W,0),G.call(W,kt),O){for(;J=W[pe++];)J===W[pe]&&(ce=oe.push(pe));for(;ce--;)Y.call(W,oe[ce],1)}return E=null,W},d.fn.uniqueSort=function(){return this.pushStack(d.uniqueSort(i.apply(this)))},h=d.expr={cacheLength:50,createPseudo:Un,match:Jn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(W){return W[1]=W[1].replace(xr,wr),W[3]=(W[3]||W[4]||W[5]||"").replace(xr,wr),W[2]==="~="&&(W[3]=" "+W[3]+" "),W.slice(0,4)},CHILD:function(W){return W[1]=W[1].toLowerCase(),W[1].slice(0,3)==="nth"?(W[3]||ht.error(W[0]),W[4]=+(W[4]?W[5]+(W[6]||1):2*(W[3]==="even"||W[3]==="odd")),W[5]=+(W[7]+W[8]||W[3]==="odd")):W[3]&&ht.error(W[0]),W},PSEUDO:function(W){var J,oe=!W[6]&&W[2];return Jn.CHILD.test(W[0])?null:(W[3]?W[2]=W[4]||W[5]||"":oe&&Qn.test(oe)&&(J=Xo(oe,!0))&&(J=oe.indexOf(")",oe.length-J)-oe.length)&&(W[0]=W[0].slice(0,J),W[2]=oe.slice(0,J)),W.slice(0,3))}},filter:{TAG:function(W){var J=W.replace(xr,wr).toLowerCase();return W==="*"?function(){return!0}:function(oe){return w(oe,J)}},CLASS:function(W){var J=He[W+" "];return J||(J=new RegExp("(^|"+q+")"+W+"("+q+"|$)"))&&He(W,function(oe){return J.test(typeof oe.className=="string"&&oe.className||typeof oe.getAttribute<"u"&&oe.getAttribute("class")||"")})},ATTR:function(W,J,oe){return function(ce){var pe=ht.attr(ce,W);return pe==null?J==="!=":J?(pe+="",J==="="?pe===oe:J==="!="?pe!==oe:J==="^="?oe&&pe.indexOf(oe)===0:J==="*="?oe&&pe.indexOf(oe)>-1:J==="$="?oe&&pe.slice(-oe.length)===oe:J==="~="?(" "+pe.replace(ut," ")+" ").indexOf(oe)>-1:J==="|="?pe===oe||pe.slice(0,oe.length+1)===oe+"-":!1):!0}},CHILD:function(W,J,oe,ce,pe){var Se=W.slice(0,3)!=="nth",Me=W.slice(-4)!=="last",Ae=J==="of-type";return ce===1&&pe===0?function(Re){return!!Re.parentNode}:function(Re,et,je){var qe,tt,Ne,dt,an,Yt=Se!==Me?"nextSibling":"previousSibling",Tn=Re.parentNode,er=Ae&&Re.nodeName.toLowerCase(),fo=!je&&!Ae,Jt=!1;if(Tn){if(Se){for(;Yt;){for(Ne=Re;Ne=Ne[Yt];)if(Ae?w(Ne,er):Ne.nodeType===1)return!1;an=Yt=W==="only"&&!an&&"nextSibling"}return!0}if(an=[Me?Tn.firstChild:Tn.lastChild],Me&&fo){for(tt=Tn[ge]||(Tn[ge]={}),qe=tt[W]||[],dt=qe[0]===ae&&qe[1],Jt=dt&&qe[2],Ne=dt&&Tn.childNodes[dt];Ne=++dt&&Ne&&Ne[Yt]||(Jt=dt=0)||an.pop();)if(Ne.nodeType===1&&++Jt&&Ne===Re){tt[W]=[ae,dt,Jt];break}}else if(fo&&(tt=Re[ge]||(Re[ge]={}),qe=tt[W]||[],dt=qe[0]===ae&&qe[1],Jt=dt),Jt===!1)for(;(Ne=++dt&&Ne&&Ne[Yt]||(Jt=dt=0)||an.pop())&&!((Ae?w(Ne,er):Ne.nodeType===1)&&++Jt&&(fo&&(tt=Ne[ge]||(Ne[ge]={}),tt[W]=[ae,Jt]),Ne===Re)););return Jt-=pe,Jt===ce||Jt%ce===0&&Jt/ce>=0}}},PSEUDO:function(W,J){var oe,ce=h.pseudos[W]||h.setFilters[W.toLowerCase()]||ht.error("unsupported pseudo: "+W);return ce[ge]?ce(J):ce.length>1?(oe=[W,W,"",J],h.setFilters.hasOwnProperty(W.toLowerCase())?Un(function(pe,Se){for(var Me,Ae=ce(pe,J),Re=Ae.length;Re--;)Me=u.call(pe,Ae[Re]),pe[Me]=!(Se[Me]=Ae[Re])}):function(pe){return ce(pe,0,oe)}):ce}},pseudos:{not:Un(function(W){var J=[],oe=[],ce=hc(W.replace(fe,"$1"));return ce[ge]?Un(function(pe,Se,Me,Ae){for(var Re,et=ce(pe,null,Ae,[]),je=pe.length;je--;)(Re=et[je])&&(pe[je]=!(Se[je]=Re))}):function(pe,Se,Me){return J[0]=pe,ce(J,null,Me,oe),J[0]=null,!oe.pop()}}),has:Un(function(W){return function(J){return ht(W,J).length>0}}),contains:Un(function(W){return W=W.replace(xr,wr),function(J){return(J.textContent||d.text(J)).indexOf(W)>-1}}),lang:Un(function(W){return Vo.test(W||"")||ht.error("unsupported lang: "+W),W=W.replace(xr,wr).toLowerCase(),function(J){var oe;do if(oe=X?J.lang:J.getAttribute("xml:lang")||J.getAttribute("lang"))return oe=oe.toLowerCase(),oe===W||oe.indexOf(W+"-")===0;while((J=J.parentNode)&&J.nodeType===1);return!1}}),target:function(W){var J=t.location&&t.location.hash;return J&&J.slice(1)===W.id},root:function(W){return W===K},focus:function(W){return W===P_()&&k.hasFocus()&&!!(W.type||W.href||~W.tabIndex)},enabled:Jh(!1),disabled:Jh(!0),checked:function(W){return w(W,"input")&&!!W.checked||w(W,"option")&&!!W.selected},selected:function(W){return W.parentNode&&W.parentNode.selectedIndex,W.selected===!0},empty:function(W){for(W=W.firstChild;W;W=W.nextSibling)if(W.nodeType<6)return!1;return!0},parent:function(W){return!h.pseudos.empty(W)},header:function(W){return ei.test(W.nodeName)},input:function(W){return Jr.test(W.nodeName)},button:function(W){return w(W,"input")&&W.type==="button"||w(W,"button")},text:function(W){var J;return w(W,"input")&&W.type==="text"&&((J=W.getAttribute("type"))==null||J.toLowerCase()==="text")},first:Bi(function(){return[0]}),last:Bi(function(W,J){return[J-1]}),eq:Bi(function(W,J,oe){return[oe<0?oe+J:oe]}),even:Bi(function(W,J){for(var oe=0;oe<J;oe+=2)W.push(oe);return W}),odd:Bi(function(W,J){for(var oe=1;oe<J;oe+=2)W.push(oe);return W}),lt:Bi(function(W,J,oe){var ce;for(oe<0?ce=oe+J:oe>J?ce=J:ce=oe;--ce>=0;)W.push(ce);return W}),gt:Bi(function(W,J,oe){for(var ce=oe<0?oe+J:oe;++ce<J;)W.push(ce);return W})}},h.pseudos.nth=h.pseudos.eq;for(c in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h.pseudos[c]=A_(c);for(c in{submit:!0,reset:!0})h.pseudos[c]=O_(c);function ep(){}ep.prototype=h.filters=h.pseudos,h.setFilters=new ep;function Xo(W,J){var oe,ce,pe,Se,Me,Ae,Re,et=st[W+" "];if(et)return J?0:et.slice(0);for(Me=W,Ae=[],Re=h.preFilter;Me;){(!oe||(ce=Et.exec(Me)))&&(ce&&(Me=Me.slice(ce[0].length)||Me),Ae.push(pe=[])),oe=!1,(ce=zo.exec(Me))&&(oe=ce.shift(),pe.push({value:oe,type:ce[0].replace(fe," ")}),Me=Me.slice(oe.length));for(Se in h.filter)(ce=Jn[Se].exec(Me))&&(!Re[Se]||(ce=Re[Se](ce)))&&(oe=ce.shift(),pe.push({value:oe,type:Se,matches:ce}),Me=Me.slice(oe.length));if(!oe)break}return J?Me.length:Me?ht.error(W):st(W,Ae).slice(0)}function rs(W){for(var J=0,oe=W.length,ce="";J<oe;J++)ce+=W[J].value;return ce}function is(W,J,oe){var ce=J.dir,pe=J.next,Se=pe||ce,Me=oe&&Se==="parentNode",Ae=be++;return J.first?function(Re,et,je){for(;Re=Re[ce];)if(Re.nodeType===1||Me)return W(Re,et,je);return!1}:function(Re,et,je){var qe,tt,Ne=[ae,Ae];if(je){for(;Re=Re[ce];)if((Re.nodeType===1||Me)&&W(Re,et,je))return!0}else for(;Re=Re[ce];)if(Re.nodeType===1||Me)if(tt=Re[ge]||(Re[ge]={}),pe&&w(Re,pe))Re=Re[ce]||Re;else{if((qe=tt[Se])&&qe[0]===ae&&qe[1]===Ae)return Ne[2]=qe[2];if(tt[Se]=Ne,Ne[2]=W(Re,et,je))return!0}return!1}}function cc(W){return W.length>1?function(J,oe,ce){for(var pe=W.length;pe--;)if(!W[pe](J,oe,ce))return!1;return!0}:W[0]}function D_(W,J,oe){for(var ce=0,pe=J.length;ce<pe;ce++)ht(W,J[ce],oe);return oe}function os(W,J,oe,ce,pe){for(var Se,Me=[],Ae=0,Re=W.length,et=J!=null;Ae<Re;Ae++)(Se=W[Ae])&&(!oe||oe(Se,ce,pe))&&(Me.push(Se),et&&J.push(Ae));return Me}function fc(W,J,oe,ce,pe,Se){return ce&&!ce[ge]&&(ce=fc(ce)),pe&&!pe[ge]&&(pe=fc(pe,Se)),Un(function(Me,Ae,Re,et){var je,qe,tt,Ne,dt=[],an=[],Yt=Ae.length,Tn=Me||D_(J||"*",Re.nodeType?[Re]:Re,[]),er=W&&(Me||!J)?os(Tn,dt,W,Re,et):Tn;if(oe?(Ne=pe||(Me?W:Yt||ce)?[]:Ae,oe(er,Ne,Re,et)):Ne=er,ce)for(je=os(Ne,an),ce(je,[],Re,et),qe=je.length;qe--;)(tt=je[qe])&&(Ne[an[qe]]=!(er[an[qe]]=tt));if(Me){if(pe||W){if(pe){for(je=[],qe=Ne.length;qe--;)(tt=Ne[qe])&&je.push(er[qe]=tt);pe(null,Ne=[],je,et)}for(qe=Ne.length;qe--;)(tt=Ne[qe])&&(je=pe?u.call(Me,tt):dt[qe])>-1&&(Me[je]=!(Ae[je]=tt))}}else Ne=os(Ne===Ae?Ne.splice(Yt,Ne.length):Ne),pe?pe(null,Ae,Ne,et):N.apply(Ae,Ne)})}function lc(W){for(var J,oe,ce,pe=W.length,Se=h.relative[W[0].type],Me=Se||h.relative[" "],Ae=Se?1:0,Re=is(function(qe){return qe===J},Me,!0),et=is(function(qe){return u.call(J,qe)>-1},Me,!0),je=[function(qe,tt,Ne){var dt=!Se&&(Ne||tt!=_)||((J=tt).nodeType?Re(qe,tt,Ne):et(qe,tt,Ne));return J=null,dt}];Ae<pe;Ae++)if(oe=h.relative[W[Ae].type])je=[is(cc(je),oe)];else{if(oe=h.filter[W[Ae].type].apply(null,W[Ae].matches),oe[ge]){for(ce=++Ae;ce<pe&&!h.relative[W[ce].type];ce++);return fc(Ae>1&&cc(je),Ae>1&&rs(W.slice(0,Ae-1).concat({value:W[Ae-2].type===" "?"*":""})).replace(fe,"$1"),oe,Ae<ce&&lc(W.slice(Ae,ce)),ce<pe&&lc(W=W.slice(ce)),ce<pe&&rs(W))}je.push(oe)}return cc(je)}function N_(W,J){var oe=J.length>0,ce=W.length>0,pe=function(Se,Me,Ae,Re,et){var je,qe,tt,Ne=0,dt="0",an=Se&&[],Yt=[],Tn=_,er=Se||ce&&h.find.TAG("*",et),fo=ae+=Tn==null?1:Math.random()||.1,Jt=er.length;for(et&&(_=Me==k||Me||et);dt!==Jt&&(je=er[dt])!=null;dt++){if(ce&&je){for(qe=0,!Me&&je.ownerDocument!=k&&(ti(je),Ae=!X);tt=W[qe++];)if(tt(je,Me||k,Ae)){N.call(Re,je);break}et&&(ae=fo)}oe&&((je=!tt&&je)&&Ne--,Se&&an.push(je))}if(Ne+=dt,oe&&dt!==Ne){for(qe=0;tt=J[qe++];)tt(an,Yt,Me,Ae);if(Se){if(Ne>0)for(;dt--;)an[dt]||Yt[dt]||(Yt[dt]=U.call(Re));Yt=os(Yt)}N.apply(Re,Yt),et&&!Se&&Yt.length>0&&Ne+J.length>1&&d.uniqueSort(Re)}return et&&(ae=fo,_=Tn),an};return oe?Un(pe):pe}function hc(W,J){var oe,ce=[],pe=[],Se=Ge[W+" "];if(!Se){for(J||(J=Xo(W)),oe=J.length;oe--;)Se=lc(J[oe]),Se[ge]?ce.push(Se):pe.push(Se);Se=Ge(W,N_(pe,ce)),Se.selector=W}return Se}function tp(W,J,oe,ce){var pe,Se,Me,Ae,Re,et=typeof W=="function"&&W,je=!ce&&Xo(W=et.selector||W);if(oe=oe||[],je.length===1){if(Se=je[0]=je[0].slice(0),Se.length>2&&(Me=Se[0]).type==="ID"&&J.nodeType===9&&X&&h.relative[Se[1].type]){if(J=(h.find.ID(Me.matches[0].replace(xr,wr),J)||[])[0],J)et&&(J=J.parentNode);else return oe;W=W.slice(Se.shift().value.length)}for(pe=Jn.needsContext.test(W)?0:Se.length;pe--&&(Me=Se[pe],!h.relative[Ae=Me.type]);)if((Re=h.find[Ae])&&(ce=Re(Me.matches[0].replace(xr,wr),sc.test(Se[0].type)&&uc(J.parentNode)||J))){if(Se.splice(pe,1),W=ce.length&&rs(Se),!W)return N.apply(oe,ce),oe;break}}return(et||hc(W,je))(ce,J,!X,oe,!J||sc.test(W)&&uc(J.parentNode)||J),oe}v.sortStable=ge.split("").sort(kt).join("")===ge,ti(),v.sortDetached=co(function(W){return W.compareDocumentPosition(k.createElement("fieldset"))&1}),d.find=ht,d.expr[":"]=d.expr.pseudos,d.unique=d.uniqueSort,ht.compile=hc,ht.select=tp,ht.setDocument=ti,ht.tokenize=Xo,ht.escape=d.escapeSelector,ht.getText=d.text,ht.isXML=d.isXMLDoc,ht.selectors=d.expr,ht.support=d.support,ht.uniqueSort=d.uniqueSort})();var Xe=function(c,h,_){for(var E=[],O=_!==void 0;(c=c[h])&&c.nodeType!==9;)if(c.nodeType===1){if(O&&d(c).is(_))break;E.push(c)}return E},ot=function(c,h){for(var _=[];c;c=c.nextSibling)c.nodeType===1&&c!==h&&_.push(c);return _},$e=d.expr.match.needsContext,Ze=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function gt(c,h,_){return S(h)?d.grep(c,function(E,O){return!!h.call(E,O,E)!==_}):h.nodeType?d.grep(c,function(E){return E===h!==_}):typeof h!="string"?d.grep(c,function(E){return u.call(h,E)>-1!==_}):d.filter(h,c,_)}d.filter=function(c,h,_){var E=h[0];return _&&(c=":not("+c+")"),h.length===1&&E.nodeType===1?d.find.matchesSelector(E,c)?[E]:[]:d.find.matches(c,d.grep(h,function(O){return O.nodeType===1}))},d.fn.extend({find:function(c){var h,_,E=this.length,O=this;if(typeof c!="string")return this.pushStack(d(c).filter(function(){for(h=0;h<E;h++)if(d.contains(O[h],this))return!0}));for(_=this.pushStack([]),h=0;h<E;h++)d.find(c,O[h],_);return E>1?d.uniqueSort(_):_},filter:function(c){return this.pushStack(gt(this,c||[],!1))},not:function(c){return this.pushStack(gt(this,c||[],!0))},is:function(c){return!!gt(this,typeof c=="string"&&$e.test(c)?d(c):c||[],!1).length}});var xt,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,se=d.fn.init=function(c,h,_){var E,O;if(!c)return this;if(_=_||xt,typeof c=="string")if(c[0]==="<"&&c[c.length-1]===">"&&c.length>=3?E=[null,c,null]:E=lt.exec(c),E&&(E[1]||!h))if(E[1]){if(h=h instanceof d?h[0]:h,d.merge(this,d.parseHTML(E[1],h&&h.nodeType?h.ownerDocument||h:P,!0)),Ze.test(E[1])&&d.isPlainObject(h))for(E in h)S(this[E])?this[E](h[E]):this.attr(E,h[E]);return this}else return O=P.getElementById(E[2]),O&&(this[0]=O,this.length=1),this;else return!h||h.jquery?(h||_).find(c):this.constructor(h).find(c);else{if(c.nodeType)return this[0]=c,this.length=1,this;if(S(c))return _.ready!==void 0?_.ready(c):c(d)}return d.makeArray(c,this)};se.prototype=d.fn,xt=d(P);var A=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({has:function(c){var h=d(c,this),_=h.length;return this.filter(function(){for(var E=0;E<_;E++)if(d.contains(this,h[E]))return!0})},closest:function(c,h){var _,E=0,O=this.length,N=[],k=typeof c!="string"&&d(c);if(!$e.test(c)){for(;E<O;E++)for(_=this[E];_&&_!==h;_=_.parentNode)if(_.nodeType<11&&(k?k.index(_)>-1:_.nodeType===1&&d.find.matchesSelector(_,c))){N.push(_);break}}return this.pushStack(N.length>1?d.uniqueSort(N):N)},index:function(c){return c?typeof c=="string"?u.call(d(c),this[0]):u.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(c,h){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(c,h))))},addBack:function(c){return this.add(c==null?this.prevObject:this.prevObject.filter(c))}});function ee(c,h){for(;(c=c[h])&&c.nodeType!==1;);return c}d.each({parent:function(c){var h=c.parentNode;return h&&h.nodeType!==11?h:null},parents:function(c){return Xe(c,"parentNode")},parentsUntil:function(c,h,_){return Xe(c,"parentNode",_)},next:function(c){return ee(c,"nextSibling")},prev:function(c){return ee(c,"previousSibling")},nextAll:function(c){return Xe(c,"nextSibling")},prevAll:function(c){return Xe(c,"previousSibling")},nextUntil:function(c,h,_){return Xe(c,"nextSibling",_)},prevUntil:function(c,h,_){return Xe(c,"previousSibling",_)},siblings:function(c){return ot((c.parentNode||{}).firstChild,c)},children:function(c){return ot(c.firstChild)},contents:function(c){return c.contentDocument!=null&&o(c.contentDocument)?c.contentDocument:(w(c,"template")&&(c=c.content||c),d.merge([],c.childNodes))}},function(c,h){d.fn[c]=function(_,E){var O=d.map(this,h,_);return c.slice(-5)!=="Until"&&(E=_),E&&typeof E=="string"&&(O=d.filter(E,O)),this.length>1&&(D[c]||d.uniqueSort(O),A.test(c)&&O.reverse()),this.pushStack(O)}});var V=/[^\x20\t\r\n\f]+/g;function $(c){var h={};return d.each(c.match(V)||[],function(_,E){h[E]=!0}),h}d.Callbacks=function(c){c=typeof c=="string"?$(c):d.extend({},c);var h,_,E,O,N=[],k=[],K=-1,X=function(){for(O=O||c.once,E=h=!0;k.length;K=-1)for(_=k.shift();++K<N.length;)N[K].apply(_[0],_[1])===!1&&c.stopOnFalse&&(K=N.length,_=!1);c.memory||(_=!1),h=!1,O&&(_?N=[]:N="")},te={add:function(){return N&&(_&&!h&&(K=N.length-1,k.push(_)),function le(ge){d.each(ge,function(ae,be){S(be)?(!c.unique||!te.has(be))&&N.push(be):be&&be.length&&x(be)!=="string"&&le(be)})}(arguments),_&&!h&&X()),this},remove:function(){return d.each(arguments,function(le,ge){for(var ae;(ae=d.inArray(ge,N,ae))>-1;)N.splice(ae,1),ae<=K&&K--}),this},has:function(le){return le?d.inArray(le,N)>-1:N.length>0},empty:function(){return N&&(N=[]),this},disable:function(){return O=k=[],N=_="",this},disabled:function(){return!N},lock:function(){return O=k=[],!_&&!h&&(N=_=""),this},locked:function(){return!!O},fireWith:function(le,ge){return O||(ge=ge||[],ge=[le,ge.slice?ge.slice():ge],k.push(ge),h||X()),this},fire:function(){return te.fireWith(this,arguments),this},fired:function(){return!!E}};return te};function H(c){return c}function re(c){throw c}function ve(c,h,_,E){var O;try{c&&S(O=c.promise)?O.call(c).done(h).fail(_):c&&S(O=c.then)?O.call(c,h,_):h.apply(void 0,[c].slice(E))}catch(N){_.apply(void 0,[N])}}d.extend({Deferred:function(c){var h=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],_="pending",E={state:function(){return _},always:function(){return O.done(arguments).fail(arguments),this},catch:function(N){return E.then(null,N)},pipe:function(){var N=arguments;return d.Deferred(function(k){d.each(h,function(K,X){var te=S(N[X[4]])&&N[X[4]];O[X[1]](function(){var le=te&&te.apply(this,arguments);le&&S(le.promise)?le.promise().progress(k.notify).done(k.resolve).fail(k.reject):k[X[0]+"With"](this,te?[le]:arguments)})}),N=null}).promise()},then:function(N,k,K){var X=0;function te(le,ge,ae,be){return function(){var He=this,st=arguments,Ge=function(){var kt,Kn;if(!(le<X)){if(kt=ae.apply(He,st),kt===ge.promise())throw new TypeError("Thenable self-resolution");Kn=kt&&(typeof kt=="object"||typeof kt=="function")&&kt.then,S(Kn)?be?Kn.call(kt,te(X,ge,H,be),te(X,ge,re,be)):(X++,Kn.call(kt,te(X,ge,H,be),te(X,ge,re,be),te(X,ge,H,ge.notifyWith))):(ae!==H&&(He=void 0,st=[kt]),(be||ge.resolveWith)(He,st))}},qt=be?Ge:function(){try{Ge()}catch(kt){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(kt,qt.error),le+1>=X&&(ae!==re&&(He=void 0,st=[kt]),ge.rejectWith(He,st))}};le?qt():(d.Deferred.getErrorHook?qt.error=d.Deferred.getErrorHook():d.Deferred.getStackHook&&(qt.error=d.Deferred.getStackHook()),t.setTimeout(qt))}}return d.Deferred(function(le){h[0][3].add(te(0,le,S(K)?K:H,le.notifyWith)),h[1][3].add(te(0,le,S(N)?N:H)),h[2][3].add(te(0,le,S(k)?k:re))}).promise()},promise:function(N){return N!=null?d.extend(N,E):E}},O={};return d.each(h,function(N,k){var K=k[2],X=k[5];E[k[1]]=K.add,X&&K.add(function(){_=X},h[3-N][2].disable,h[3-N][3].disable,h[0][2].lock,h[0][3].lock),K.add(k[3].fire),O[k[0]]=function(){return O[k[0]+"With"](this===O?void 0:this,arguments),this},O[k[0]+"With"]=K.fireWith}),E.promise(O),c&&c.call(O,O),O},when:function(c){var h=arguments.length,_=h,E=Array(_),O=i.call(arguments),N=d.Deferred(),k=function(K){return function(X){E[K]=this,O[K]=arguments.length>1?i.call(arguments):X,--h||N.resolveWith(E,O)}};if(h<=1&&(ve(c,N.done(k(_)).resolve,N.reject,!h),N.state()==="pending"||S(O[_]&&O[_].then)))return N.then();for(;_--;)ve(O[_],k(_),N.reject);return N.promise()}});var Le=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(c,h){t.console&&t.console.warn&&c&&Le.test(c.name)&&t.console.warn("jQuery.Deferred exception: "+c.message,c.stack,h)},d.readyException=function(c){t.setTimeout(function(){throw c})};var F=d.Deferred();d.fn.ready=function(c){return F.then(c).catch(function(h){d.readyException(h)}),this},d.extend({isReady:!1,readyWait:1,ready:function(c){(c===!0?--d.readyWait:d.isReady)||(d.isReady=!0,!(c!==!0&&--d.readyWait>0)&&F.resolveWith(P,[d]))}}),d.ready.then=F.then;function C(){P.removeEventListener("DOMContentLoaded",C),t.removeEventListener("load",C),d.ready()}P.readyState==="complete"||P.readyState!=="loading"&&!P.documentElement.doScroll?t.setTimeout(d.ready):(P.addEventListener("DOMContentLoaded",C),t.addEventListener("load",C));var R=function(c,h,_,E,O,N,k){var K=0,X=c.length,te=_==null;if(x(_)==="object"){O=!0;for(K in _)R(c,h,K,_[K],!0,N,k)}else if(E!==void 0&&(O=!0,S(E)||(k=!0),te&&(k?(h.call(c,E),h=null):(te=h,h=function(le,ge,ae){return te.call(d(le),ae)})),h))for(;K<X;K++)h(c[K],_,k?E:E.call(c[K],K,h(c[K],_)));return O?c:te?h.call(c):X?h(c[0],_):N},z=/^-ms-/,Q=/-([a-z])/g;function he(c,h){return h.toUpperCase()}function me(c){return c.replace(z,"ms-").replace(Q,he)}var Oe=function(c){return c.nodeType===1||c.nodeType===9||!+c.nodeType};function Ee(){this.expando=d.expando+Ee.uid++}Ee.uid=1,Ee.prototype={cache:function(c){var h=c[this.expando];return h||(h={},Oe(c)&&(c.nodeType?c[this.expando]=h:Object.defineProperty(c,this.expando,{value:h,configurable:!0}))),h},set:function(c,h,_){var E,O=this.cache(c);if(typeof h=="string")O[me(h)]=_;else for(E in h)O[me(E)]=h[E];return O},get:function(c,h){return h===void 0?this.cache(c):c[this.expando]&&c[this.expando][me(h)]},access:function(c,h,_){return h===void 0||h&&typeof h=="string"&&_===void 0?this.get(c,h):(this.set(c,h,_),_!==void 0?_:h)},remove:function(c,h){var _,E=c[this.expando];if(E!==void 0){if(h!==void 0)for(Array.isArray(h)?h=h.map(me):(h=me(h),h=h in E?[h]:h.match(V)||[]),_=h.length;_--;)delete E[h[_]];(h===void 0||d.isEmptyObject(E))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){var h=c[this.expando];return h!==void 0&&!d.isEmptyObject(h)}};var de=new Ee,Qe=new Ee,at=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Xt=/[A-Z]/g;function Ai(c){return c==="true"?!0:c==="false"?!1:c==="null"?null:c===+c+""?+c:at.test(c)?JSON.parse(c):c}function Vr(c,h,_){var E;if(_===void 0&&c.nodeType===1)if(E="data-"+h.replace(Xt,"-$&").toLowerCase(),_=c.getAttribute(E),typeof _=="string"){try{_=Ai(_)}catch{}Qe.set(c,h,_)}else _=void 0;return _}d.extend({hasData:function(c){return Qe.hasData(c)||de.hasData(c)},data:function(c,h,_){return Qe.access(c,h,_)},removeData:function(c,h){Qe.remove(c,h)},_data:function(c,h,_){return de.access(c,h,_)},_removeData:function(c,h){de.remove(c,h)}}),d.fn.extend({data:function(c,h){var _,E,O,N=this[0],k=N&&N.attributes;if(c===void 0){if(this.length&&(O=Qe.get(N),N.nodeType===1&&!de.get(N,"hasDataAttrs"))){for(_=k.length;_--;)k[_]&&(E=k[_].name,E.indexOf("data-")===0&&(E=me(E.slice(5)),Vr(N,E,O[E])));de.set(N,"hasDataAttrs",!0)}return O}return typeof c=="object"?this.each(function(){Qe.set(this,c)}):R(this,function(K){var X;if(N&&K===void 0)return X=Qe.get(N,c),X!==void 0||(X=Vr(N,c),X!==void 0)?X:void 0;this.each(function(){Qe.set(this,c,K)})},null,h,arguments.length>1,null,!0)},removeData:function(c){return this.each(function(){Qe.remove(this,c)})}}),d.extend({queue:function(c,h,_){var E;if(c)return h=(h||"fx")+"queue",E=de.get(c,h),_&&(!E||Array.isArray(_)?E=de.access(c,h,d.makeArray(_)):E.push(_)),E||[]},dequeue:function(c,h){h=h||"fx";var _=d.queue(c,h),E=_.length,O=_.shift(),N=d._queueHooks(c,h),k=function(){d.dequeue(c,h)};O==="inprogress"&&(O=_.shift(),E--),O&&(h==="fx"&&_.unshift("inprogress"),delete N.stop,O.call(c,k,N)),!E&&N&&N.empty.fire()},_queueHooks:function(c,h){var _=h+"queueHooks";return de.get(c,_)||de.access(c,_,{empty:d.Callbacks("once memory").add(function(){de.remove(c,[h+"queue",_])})})}}),d.fn.extend({queue:function(c,h){var _=2;return typeof c!="string"&&(h=c,c="fx",_--),arguments.length<_?d.queue(this[0],c):h===void 0?this:this.each(function(){var E=d.queue(this,c,h);d._queueHooks(this,c),c==="fx"&&E[0]!=="inprogress"&&d.dequeue(this,c)})},dequeue:function(c){return this.each(function(){d.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,h){var _,E=1,O=d.Deferred(),N=this,k=this.length,K=function(){--E||O.resolveWith(N,[N])};for(typeof c!="string"&&(h=c,c=void 0),c=c||"fx";k--;)_=de.get(N[k],c+"queueHooks"),_&&_.empty&&(E++,_.empty.add(K));return K(),O.promise(h)}});var Oi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,hr=new RegExp("^(?:([+-])=|)("+Oi+")([a-z%]*)$","i"),Bn=["Top","Right","Bottom","Left"],pr=P.documentElement,Xr=function(c){return d.contains(c.ownerDocument,c)},Ku={composed:!0};pr.getRootNode&&(Xr=function(c){return d.contains(c.ownerDocument,c)||c.getRootNode(Ku)===c.ownerDocument});var io=function(c,h){return c=h||c,c.style.display==="none"||c.style.display===""&&Xr(c)&&d.css(c,"display")==="none"};function Di(c,h,_,E){var O,N,k=20,K=E?function(){return E.cur()}:function(){return d.css(c,h,"")},X=K(),te=_&&_[3]||(d.cssNumber[h]?"":"px"),le=c.nodeType&&(d.cssNumber[h]||te!=="px"&&+X)&&hr.exec(d.css(c,h));if(le&&le[3]!==te){for(X=X/2,te=te||le[3],le=+X||1;k--;)d.style(c,h,le+te),(1-N)*(1-(N=K()/X||.5))<=0&&(k=0),le=le/N;le=le*2,d.style(c,h,le+te),_=_||[]}return _&&(le=+le||+X||0,O=_[1]?le+(_[1]+1)*_[2]:+_[2],E&&(E.unit=te,E.start=le,E.end=O)),O}var za={};function Zu(c){var h,_=c.ownerDocument,E=c.nodeName,O=za[E];return O||(h=_.body.appendChild(_.createElement(E)),O=d.css(h,"display"),h.parentNode.removeChild(h),O==="none"&&(O="block"),za[E]=O,O)}function dr(c,h){for(var _,E,O=[],N=0,k=c.length;N<k;N++)E=c[N],E.style&&(_=E.style.display,h?(_==="none"&&(O[N]=de.get(E,"display")||null,O[N]||(E.style.display="")),E.style.display===""&&io(E)&&(O[N]=Zu(E))):_!=="none"&&(O[N]="none",de.set(E,"display",_)));for(N=0;N<k;N++)O[N]!=null&&(c[N].style.display=O[N]);return c}d.fn.extend({show:function(){return dr(this,!0)},hide:function(){return dr(this)},toggle:function(c){return typeof c=="boolean"?c?this.show():this.hide():this.each(function(){io(this)?d(this).show():d(this).hide()})}});var Gr=/^(?:checkbox|radio)$/i,oo=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Va=/^$|^module$|\/(?:java|ecma)script/i;(function(){var c=P.createDocumentFragment(),h=c.appendChild(P.createElement("div")),_=P.createElement("input");_.setAttribute("type","radio"),_.setAttribute("checked","checked"),_.setAttribute("name","t"),h.appendChild(_),v.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",v.option=!!h.lastChild})();var rn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};rn.tbody=rn.tfoot=rn.colgroup=rn.caption=rn.thead,rn.th=rn.td,v.option||(rn.optgroup=rn.option=[1,"<select multiple='multiple'>","</select>"]);function Gt(c,h){var _;return typeof c.getElementsByTagName<"u"?_=c.getElementsByTagName(h||"*"):typeof c.querySelectorAll<"u"?_=c.querySelectorAll(h||"*"):_=[],h===void 0||h&&w(c,h)?d.merge([c],_):_}function ao(c,h){for(var _=0,E=c.length;_<E;_++)de.set(c[_],"globalEval",!h||de.get(h[_],"globalEval"))}var Qu=/<|&#?\w+;/;function Xa(c,h,_,E,O){for(var N,k,K,X,te,le,ge=h.createDocumentFragment(),ae=[],be=0,He=c.length;be<He;be++)if(N=c[be],N||N===0)if(x(N)==="object")d.merge(ae,N.nodeType?[N]:N);else if(!Qu.test(N))ae.push(h.createTextNode(N));else{for(k=k||ge.appendChild(h.createElement("div")),K=(oo.exec(N)||["",""])[1].toLowerCase(),X=rn[K]||rn._default,k.innerHTML=X[1]+d.htmlPrefilter(N)+X[2],le=X[0];le--;)k=k.lastChild;d.merge(ae,k.childNodes),k=ge.firstChild,k.textContent=""}for(ge.textContent="",be=0;N=ae[be++];){if(E&&d.inArray(N,E)>-1){O&&O.push(N);continue}if(te=Xr(N),k=Gt(ge.appendChild(N),"script"),te&&ao(k),_)for(le=0;N=k[le++];)Va.test(N.type||"")&&_.push(N)}return ge}var Ga=/^([^.]*)(?:\.(.+)|)/;function Fn(){return!0}function Yr(){return!1}function Lo(c,h,_,E,O,N){var k,K;if(typeof h=="object"){typeof _!="string"&&(E=E||_,_=void 0);for(K in h)Lo(c,K,_,E,h[K],N);return c}if(E==null&&O==null?(O=_,E=_=void 0):O==null&&(typeof _=="string"?(O=E,E=void 0):(O=E,E=_,_=void 0)),O===!1)O=Yr;else if(!O)return c;return N===1&&(k=O,O=function(X){return d().off(X),k.apply(this,arguments)},O.guid=k.guid||(k.guid=d.guid++)),c.each(function(){d.event.add(this,h,O,E,_)})}d.event={global:{},add:function(c,h,_,E,O){var N,k,K,X,te,le,ge,ae,be,He,st,Ge=de.get(c);if(Oe(c))for(_.handler&&(N=_,_=N.handler,O=N.selector),O&&d.find.matchesSelector(pr,O),_.guid||(_.guid=d.guid++),(X=Ge.events)||(X=Ge.events=Object.create(null)),(k=Ge.handle)||(k=Ge.handle=function(qt){return typeof d<"u"&&d.event.triggered!==qt.type?d.event.dispatch.apply(c,arguments):void 0}),h=(h||"").match(V)||[""],te=h.length;te--;)K=Ga.exec(h[te])||[],be=st=K[1],He=(K[2]||"").split(".").sort(),be&&(ge=d.event.special[be]||{},be=(O?ge.delegateType:ge.bindType)||be,ge=d.event.special[be]||{},le=d.extend({type:be,origType:st,data:E,handler:_,guid:_.guid,selector:O,needsContext:O&&d.expr.match.needsContext.test(O),namespace:He.join(".")},N),(ae=X[be])||(ae=X[be]=[],ae.delegateCount=0,(!ge.setup||ge.setup.call(c,E,He,k)===!1)&&c.addEventListener&&c.addEventListener(be,k)),ge.add&&(ge.add.call(c,le),le.handler.guid||(le.handler.guid=_.guid)),O?ae.splice(ae.delegateCount++,0,le):ae.push(le),d.event.global[be]=!0)},remove:function(c,h,_,E,O){var N,k,K,X,te,le,ge,ae,be,He,st,Ge=de.hasData(c)&&de.get(c);if(!(!Ge||!(X=Ge.events))){for(h=(h||"").match(V)||[""],te=h.length;te--;){if(K=Ga.exec(h[te])||[],be=st=K[1],He=(K[2]||"").split(".").sort(),!be){for(be in X)d.event.remove(c,be+h[te],_,E,!0);continue}for(ge=d.event.special[be]||{},be=(E?ge.delegateType:ge.bindType)||be,ae=X[be]||[],K=K[2]&&new RegExp("(^|\\.)"+He.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=N=ae.length;N--;)le=ae[N],(O||st===le.origType)&&(!_||_.guid===le.guid)&&(!K||K.test(le.namespace))&&(!E||E===le.selector||E==="**"&&le.selector)&&(ae.splice(N,1),le.selector&&ae.delegateCount--,ge.remove&&ge.remove.call(c,le));k&&!ae.length&&((!ge.teardown||ge.teardown.call(c,He,Ge.handle)===!1)&&d.removeEvent(c,be,Ge.handle),delete X[be])}d.isEmptyObject(X)&&de.remove(c,"handle events")}},dispatch:function(c){var h,_,E,O,N,k,K=new Array(arguments.length),X=d.event.fix(c),te=(de.get(this,"events")||Object.create(null))[X.type]||[],le=d.event.special[X.type]||{};for(K[0]=X,h=1;h<arguments.length;h++)K[h]=arguments[h];if(X.delegateTarget=this,!(le.preDispatch&&le.preDispatch.call(this,X)===!1)){for(k=d.event.handlers.call(this,X,te),h=0;(O=k[h++])&&!X.isPropagationStopped();)for(X.currentTarget=O.elem,_=0;(N=O.handlers[_++])&&!X.isImmediatePropagationStopped();)(!X.rnamespace||N.namespace===!1||X.rnamespace.test(N.namespace))&&(X.handleObj=N,X.data=N.data,E=((d.event.special[N.origType]||{}).handle||N.handler).apply(O.elem,K),E!==void 0&&(X.result=E)===!1&&(X.preventDefault(),X.stopPropagation()));return le.postDispatch&&le.postDispatch.call(this,X),X.result}},handlers:function(c,h){var _,E,O,N,k,K=[],X=h.delegateCount,te=c.target;if(X&&te.nodeType&&!(c.type==="click"&&c.button>=1)){for(;te!==this;te=te.parentNode||this)if(te.nodeType===1&&!(c.type==="click"&&te.disabled===!0)){for(N=[],k={},_=0;_<X;_++)E=h[_],O=E.selector+" ",k[O]===void 0&&(k[O]=E.needsContext?d(O,this).index(te)>-1:d.find(O,this,null,[te]).length),k[O]&&N.push(E);N.length&&K.push({elem:te,handlers:N})}}return te=this,X<h.length&&K.push({elem:te,handlers:h.slice(X)}),K},addProp:function(c,h){Object.defineProperty(d.Event.prototype,c,{enumerable:!0,configurable:!0,get:S(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(_){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:_})}})},fix:function(c){return c[d.expando]?c:new d.Event(c)},special:{load:{noBubble:!0},click:{setup:function(c){var h=this||c;return Gr.test(h.type)&&h.click&&w(h,"input")&&Ni(h,"click",!0),!1},trigger:function(c){var h=this||c;return Gr.test(h.type)&&h.click&&w(h,"input")&&Ni(h,"click"),!0},_default:function(c){var h=c.target;return Gr.test(h.type)&&h.click&&w(h,"input")&&de.get(h,"click")||w(h,"a")}},beforeunload:{postDispatch:function(c){c.result!==void 0&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}};function Ni(c,h,_){if(!_){de.get(c,h)===void 0&&d.event.add(c,h,Fn);return}de.set(c,h,!1),d.event.add(c,h,{namespace:!1,handler:function(E){var O,N=de.get(this,h);if(E.isTrigger&1&&this[h]){if(N)(d.event.special[h]||{}).delegateType&&E.stopPropagation();else if(N=i.call(arguments),de.set(this,h,N),this[h](),O=de.get(this,h),de.set(this,h,!1),N!==O)return E.stopImmediatePropagation(),E.preventDefault(),O}else N&&(de.set(this,h,d.event.trigger(N[0],N.slice(1),this)),E.stopPropagation(),E.isImmediatePropagationStopped=Fn)}})}d.removeEvent=function(c,h,_){c.removeEventListener&&c.removeEventListener(h,_)},d.Event=function(c,h){if(!(this instanceof d.Event))return new d.Event(c,h);c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||c.defaultPrevented===void 0&&c.returnValue===!1?Fn:Yr,this.target=c.target&&c.target.nodeType===3?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,h&&d.extend(this,h),this.timeStamp=c&&c.timeStamp||Date.now(),this[d.expando]=!0},d.Event.prototype={constructor:d.Event,isDefaultPrevented:Yr,isPropagationStopped:Yr,isImmediatePropagationStopped:Yr,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=Fn,c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=Fn,c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=Fn,c&&!this.isSimulated&&c.stopImmediatePropagation(),this.stopPropagation()}},d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},d.event.addProp),d.each({focus:"focusin",blur:"focusout"},function(c,h){function _(E){if(P.documentMode){var O=de.get(this,"handle"),N=d.event.fix(E);N.type=E.type==="focusin"?"focus":"blur",N.isSimulated=!0,O(E),N.target===N.currentTarget&&O(N)}else d.event.simulate(h,E.target,d.event.fix(E))}d.event.special[c]={setup:function(){var E;if(Ni(this,c,!0),P.documentMode)E=de.get(this,h),E||this.addEventListener(h,_),de.set(this,h,(E||0)+1);else return!1},trigger:function(){return Ni(this,c),!0},teardown:function(){var E;if(P.documentMode)E=de.get(this,h)-1,E?de.set(this,h,E):(this.removeEventListener(h,_),de.remove(this,h));else return!1},_default:function(E){return de.get(E.target,c)},delegateType:h},d.event.special[h]={setup:function(){var E=this.ownerDocument||this.document||this,O=P.documentMode?this:E,N=de.get(O,h);N||(P.documentMode?this.addEventListener(h,_):E.addEventListener(c,_,!0)),de.set(O,h,(N||0)+1)},teardown:function(){var E=this.ownerDocument||this.document||this,O=P.documentMode?this:E,N=de.get(O,h)-1;N?de.set(O,h,N):(P.documentMode?this.removeEventListener(h,_):E.removeEventListener(c,_,!0),de.remove(O,h))}}}),d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,h){d.event.special[c]={delegateType:h,bindType:h,handle:function(_){var E,O=this,N=_.relatedTarget,k=_.handleObj;return(!N||N!==O&&!d.contains(O,N))&&(_.type=k.origType,E=k.handler.apply(this,arguments),_.type=h),E}}}),d.fn.extend({on:function(c,h,_,E){return Lo(this,c,h,_,E)},one:function(c,h,_,E){return Lo(this,c,h,_,E,1)},off:function(c,h,_){var E,O;if(c&&c.preventDefault&&c.handleObj)return E=c.handleObj,d(c.delegateTarget).off(E.namespace?E.origType+"."+E.namespace:E.origType,E.selector,E.handler),this;if(typeof c=="object"){for(O in c)this.off(O,h,c[O]);return this}return(h===!1||typeof h=="function")&&(_=h,h=void 0),_===!1&&(_=Yr),this.each(function(){d.event.remove(this,c,_,h)})}});var ko=/<script|<style|<link/i,Ju=/checked\s*(?:[^=]|=\s*.checked.)/i,Ya=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ka(c,h){return w(c,"table")&&w(h.nodeType!==11?h:h.firstChild,"tr")&&d(c).children("tbody")[0]||c}function Za(c){return c.type=(c.getAttribute("type")!==null)+"/"+c.type,c}function Qa(c){return(c.type||"").slice(0,5)==="true/"?c.type=c.type.slice(5):c.removeAttribute("type"),c}function Bo(c,h){var _,E,O,N,k,K,X;if(h.nodeType===1){if(de.hasData(c)&&(N=de.get(c),X=N.events,X)){de.remove(h,"handle events");for(O in X)for(_=0,E=X[O].length;_<E;_++)d.event.add(h,O,X[O][_])}Qe.hasData(c)&&(k=Qe.access(c),K=d.extend({},k),Qe.set(h,K))}}function Ja(c,h){var _=h.nodeName.toLowerCase();_==="input"&&Gr.test(c.type)?h.checked=c.checked:(_==="input"||_==="textarea")&&(h.defaultValue=c.defaultValue)}function Xn(c,h,_,E){h=a(h);var O,N,k,K,X,te,le=0,ge=c.length,ae=ge-1,be=h[0],He=S(be);if(He||ge>1&&typeof be=="string"&&!v.checkClone&&Ju.test(be))return c.each(function(st){var Ge=c.eq(st);He&&(h[0]=be.call(this,st,Ge.html())),Xn(Ge,h,_,E)});if(ge&&(O=Xa(h,c[0].ownerDocument,!1,c,E),N=O.firstChild,O.childNodes.length===1&&(O=N),N||E)){for(k=d.map(Gt(O,"script"),Za),K=k.length;le<ge;le++)X=O,le!==ae&&(X=d.clone(X,!0,!0),K&&d.merge(k,Gt(X,"script"))),_.call(c[le],X,le);if(K)for(te=k[k.length-1].ownerDocument,d.map(k,Qa),le=0;le<K;le++)X=k[le],Va.test(X.type||"")&&!de.access(X,"globalEval")&&d.contains(te,X)&&(X.src&&(X.type||"").toLowerCase()!=="module"?d._evalUrl&&!X.noModule&&d._evalUrl(X.src,{nonce:X.nonce||X.getAttribute("nonce")},te):m(X.textContent.replace(Ya,""),X,te))}return c}function Gn(c,h,_){for(var E,O=h?d.filter(h,c):c,N=0;(E=O[N])!=null;N++)!_&&E.nodeType===1&&d.cleanData(Gt(E)),E.parentNode&&(_&&Xr(E)&&ao(Gt(E,"script")),E.parentNode.removeChild(E));return c}d.extend({htmlPrefilter:function(c){return c},clone:function(c,h,_){var E,O,N,k,K=c.cloneNode(!0),X=Xr(c);if(!v.noCloneChecked&&(c.nodeType===1||c.nodeType===11)&&!d.isXMLDoc(c))for(k=Gt(K),N=Gt(c),E=0,O=N.length;E<O;E++)Ja(N[E],k[E]);if(h)if(_)for(N=N||Gt(c),k=k||Gt(K),E=0,O=N.length;E<O;E++)Bo(N[E],k[E]);else Bo(c,K);return k=Gt(K,"script"),k.length>0&&ao(k,!X&&Gt(c,"script")),K},cleanData:function(c){for(var h,_,E,O=d.event.special,N=0;(_=c[N])!==void 0;N++)if(Oe(_)){if(h=_[de.expando]){if(h.events)for(E in h.events)O[E]?d.event.remove(_,E):d.removeEvent(_,E,h.handle);_[de.expando]=void 0}_[Qe.expando]&&(_[Qe.expando]=void 0)}}}),d.fn.extend({detach:function(c){return Gn(this,c,!0)},remove:function(c){return Gn(this,c)},text:function(c){return R(this,function(h){return h===void 0?d.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=h)})},null,c,arguments.length)},append:function(){return Xn(this,arguments,function(c){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=Ka(this,c);h.appendChild(c)}})},prepend:function(){return Xn(this,arguments,function(c){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=Ka(this,c);h.insertBefore(c,h.firstChild)}})},before:function(){return Xn(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return Xn(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,h=0;(c=this[h])!=null;h++)c.nodeType===1&&(d.cleanData(Gt(c,!1)),c.textContent="");return this},clone:function(c,h){return c=c??!1,h=h??c,this.map(function(){return d.clone(this,c,h)})},html:function(c){return R(this,function(h){var _=this[0]||{},E=0,O=this.length;if(h===void 0&&_.nodeType===1)return _.innerHTML;if(typeof h=="string"&&!ko.test(h)&&!rn[(oo.exec(h)||["",""])[1].toLowerCase()]){h=d.htmlPrefilter(h);try{for(;E<O;E++)_=this[E]||{},_.nodeType===1&&(d.cleanData(Gt(_,!1)),_.innerHTML=h);_=0}catch{}}_&&this.empty().append(h)},null,c,arguments.length)},replaceWith:function(){var c=[];return Xn(this,arguments,function(h){var _=this.parentNode;d.inArray(this,c)<0&&(d.cleanData(Gt(this)),_&&_.replaceChild(h,this))},c)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,h){d.fn[c]=function(_){for(var E,O=[],N=d(_),k=N.length-1,K=0;K<=k;K++)E=K===k?this:this.clone(!0),d(N[K])[h](E),s.apply(O,E.get());return this.pushStack(O)}});var gr=new RegExp("^("+Oi+")(?!px)[a-z%]+$","i"),yr=/^--/,vr=function(c){var h=c.ownerDocument.defaultView;return(!h||!h.opener)&&(h=t),h.getComputedStyle(c)},so=function(c,h,_){var E,O,N={};for(O in h)N[O]=c.style[O],c.style[O]=h[O];E=_.call(c);for(O in h)c.style[O]=N[O];return E},ec=new RegExp(Bn.join("|"),"i");(function(){function c(){if(te){X.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",te.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pr.appendChild(X).appendChild(te);var le=t.getComputedStyle(te);_=le.top!=="1%",K=h(le.marginLeft)===12,te.style.right="60%",N=h(le.right)===36,E=h(le.width)===36,te.style.position="absolute",O=h(te.offsetWidth/3)===12,pr.removeChild(X),te=null}}function h(le){return Math.round(parseFloat(le))}var _,E,O,N,k,K,X=P.createElement("div"),te=P.createElement("div");te.style&&(te.style.backgroundClip="content-box",te.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle=te.style.backgroundClip==="content-box",d.extend(v,{boxSizingReliable:function(){return c(),E},pixelBoxStyles:function(){return c(),N},pixelPosition:function(){return c(),_},reliableMarginLeft:function(){return c(),K},scrollboxSize:function(){return c(),O},reliableTrDimensions:function(){var le,ge,ae,be;return k==null&&(le=P.createElement("table"),ge=P.createElement("tr"),ae=P.createElement("div"),le.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ge.style.cssText="box-sizing:content-box;border:1px solid",ge.style.height="1px",ae.style.height="9px",ae.style.display="block",pr.appendChild(le).appendChild(ge).appendChild(ae),be=t.getComputedStyle(ge),k=parseInt(be.height,10)+parseInt(be.borderTopWidth,10)+parseInt(be.borderBottomWidth,10)===ge.offsetHeight,pr.removeChild(le)),k}}))})();function Ii(c,h,_){var E,O,N,k,K=yr.test(h),X=c.style;return _=_||vr(c),_&&(k=_.getPropertyValue(h)||_[h],K&&k&&(k=k.replace(fe,"$1")||void 0),k===""&&!Xr(c)&&(k=d.style(c,h)),!v.pixelBoxStyles()&&gr.test(k)&&ec.test(h)&&(E=X.width,O=X.minWidth,N=X.maxWidth,X.minWidth=X.maxWidth=X.width=k,k=_.width,X.width=E,X.minWidth=O,X.maxWidth=N)),k!==void 0?k+"":k}function Li(c,h){return{get:function(){if(c()){delete this.get;return}return(this.get=h).apply(this,arguments)}}}var Qt=["Webkit","Moz","ms"],mr=P.createElement("div").style,jn={};function $n(c){for(var h=c[0].toUpperCase()+c.slice(1),_=Qt.length;_--;)if(c=Qt[_]+h,c in mr)return c}function _r(c){var h=d.cssProps[c]||jn[c];return h||(c in mr?c:jn[c]=$n(c)||c)}var wn=/^(none|table(?!-c[ea]).+)/,Hn={position:"absolute",visibility:"hidden",display:"block"},Fo={letterSpacing:"0",fontWeight:"400"};function jo(c,h,_){var E=hr.exec(h);return E?Math.max(0,E[2]-(_||0))+(E[3]||"px"):h}function Kr(c,h,_,E,O,N){var k=h==="width"?1:0,K=0,X=0,te=0;if(_===(E?"border":"content"))return 0;for(;k<4;k+=2)_==="margin"&&(te+=d.css(c,_+Bn[k],!0,O)),E?(_==="content"&&(X-=d.css(c,"padding"+Bn[k],!0,O)),_!=="margin"&&(X-=d.css(c,"border"+Bn[k]+"Width",!0,O))):(X+=d.css(c,"padding"+Bn[k],!0,O),_!=="padding"?X+=d.css(c,"border"+Bn[k]+"Width",!0,O):K+=d.css(c,"border"+Bn[k]+"Width",!0,O));return!E&&N>=0&&(X+=Math.max(0,Math.ceil(c["offset"+h[0].toUpperCase()+h.slice(1)]-N-X-K-.5))||0),X+te}function on(c,h,_){var E=vr(c),O=!v.boxSizingReliable()||_,N=O&&d.css(c,"boxSizing",!1,E)==="border-box",k=N,K=Ii(c,h,E),X="offset"+h[0].toUpperCase()+h.slice(1);if(gr.test(K)){if(!_)return K;K="auto"}return(!v.boxSizingReliable()&&N||!v.reliableTrDimensions()&&w(c,"tr")||K==="auto"||!parseFloat(K)&&d.css(c,"display",!1,E)==="inline")&&c.getClientRects().length&&(N=d.css(c,"boxSizing",!1,E)==="border-box",k=X in c,k&&(K=c[X])),K=parseFloat(K)||0,K+Kr(c,h,_||(N?"border":"content"),k,E,K)+"px"}d.extend({cssHooks:{opacity:{get:function(c,h){if(h){var _=Ii(c,"opacity");return _===""?"1":_}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(c,h,_,E){if(!(!c||c.nodeType===3||c.nodeType===8||!c.style)){var O,N,k,K=me(h),X=yr.test(h),te=c.style;if(X||(h=_r(K)),k=d.cssHooks[h]||d.cssHooks[K],_!==void 0){if(N=typeof _,N==="string"&&(O=hr.exec(_))&&O[1]&&(_=Di(c,h,O),N="number"),_==null||_!==_)return;N==="number"&&!X&&(_+=O&&O[3]||(d.cssNumber[K]?"":"px")),!v.clearCloneStyle&&_===""&&h.indexOf("background")===0&&(te[h]="inherit"),(!k||!("set"in k)||(_=k.set(c,_,E))!==void 0)&&(X?te.setProperty(h,_):te[h]=_)}else return k&&"get"in k&&(O=k.get(c,!1,E))!==void 0?O:te[h]}},css:function(c,h,_,E){var O,N,k,K=me(h),X=yr.test(h);return X||(h=_r(K)),k=d.cssHooks[h]||d.cssHooks[K],k&&"get"in k&&(O=k.get(c,!0,_)),O===void 0&&(O=Ii(c,h,E)),O==="normal"&&h in Fo&&(O=Fo[h]),_===""||_?(N=parseFloat(O),_===!0||isFinite(N)?N||0:O):O}}),d.each(["height","width"],function(c,h){d.cssHooks[h]={get:function(_,E,O){if(E)return wn.test(d.css(_,"display"))&&(!_.getClientRects().length||!_.getBoundingClientRect().width)?so(_,Hn,function(){return on(_,h,O)}):on(_,h,O)},set:function(_,E,O){var N,k=vr(_),K=!v.scrollboxSize()&&k.position==="absolute",X=K||O,te=X&&d.css(_,"boxSizing",!1,k)==="border-box",le=O?Kr(_,h,O,te,k):0;return te&&K&&(le-=Math.ceil(_["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(k[h])-Kr(_,h,"border",!1,k)-.5)),le&&(N=hr.exec(E))&&(N[3]||"px")!=="px"&&(_.style[h]=E,E=d.css(_,h)),jo(_,E,le)}}}),d.cssHooks.marginLeft=Li(v.reliableMarginLeft,function(c,h){if(h)return(parseFloat(Ii(c,"marginLeft"))||c.getBoundingClientRect().left-so(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"}),d.each({margin:"",padding:"",border:"Width"},function(c,h){d.cssHooks[c+h]={expand:function(_){for(var E=0,O={},N=typeof _=="string"?_.split(" "):[_];E<4;E++)O[c+Bn[E]+h]=N[E]||N[E-2]||N[0];return O}},c!=="margin"&&(d.cssHooks[c+h].set=jo)}),d.fn.extend({css:function(c,h){return R(this,function(_,E,O){var N,k,K={},X=0;if(Array.isArray(E)){for(N=vr(_),k=E.length;X<k;X++)K[E[X]]=d.css(_,E[X],!1,N);return K}return O!==void 0?d.style(_,E,O):d.css(_,E)},c,h,arguments.length>1)}});function It(c,h,_,E,O){return new It.prototype.init(c,h,_,E,O)}d.Tween=It,It.prototype={constructor:It,init:function(c,h,_,E,O,N){this.elem=c,this.prop=_,this.easing=O||d.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=E,this.unit=N||(d.cssNumber[_]?"":"px")},cur:function(){var c=It.propHooks[this.prop];return c&&c.get?c.get(this):It.propHooks._default.get(this)},run:function(c){var h,_=It.propHooks[this.prop];return this.options.duration?this.pos=h=d.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):this.pos=h=c,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),_&&_.set?_.set(this):It.propHooks._default.set(this),this}},It.prototype.init.prototype=It.prototype,It.propHooks={_default:{get:function(c){var h;return c.elem.nodeType!==1||c.elem[c.prop]!=null&&c.elem.style[c.prop]==null?c.elem[c.prop]:(h=d.css(c.elem,c.prop,""),!h||h==="auto"?0:h)},set:function(c){d.fx.step[c.prop]?d.fx.step[c.prop](c):c.elem.nodeType===1&&(d.cssHooks[c.prop]||c.elem.style[_r(c.prop)]!=null)?d.style(c.elem,c.prop,c.now+c.unit):c.elem[c.prop]=c.now}}},It.propHooks.scrollTop=It.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}},d.easing={linear:function(c){return c},swing:function(c){return .5-Math.cos(c*Math.PI)/2},_default:"swing"},d.fx=It.prototype.init,d.fx.step={};var Yn,Zr,$o=/^(?:toggle|show|hide)$/,Ho=/queueHooks$/;function Qr(){Zr&&(P.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Qr):t.setTimeout(Qr,d.fx.interval),d.fx.tick())}function En(){return t.setTimeout(function(){Yn=void 0}),Yn=Date.now()}function uo(c,h){var _,E=0,O={height:c};for(h=h?1:0;E<4;E+=2-h)_=Bn[E],O["margin"+_]=O["padding"+_]=c;return h&&(O.opacity=O.width=c),O}function Uo(c,h,_){for(var E,O=(cn.tweeners[h]||[]).concat(cn.tweeners["*"]),N=0,k=O.length;N<k;N++)if(E=O[N].call(_,h,c))return E}function qo(c,h,_){var E,O,N,k,K,X,te,le,ge="width"in h||"height"in h,ae=this,be={},He=c.style,st=c.nodeType&&io(c),Ge=de.get(c,"fxshow");_.queue||(k=d._queueHooks(c,"fx"),k.unqueued==null&&(k.unqueued=0,K=k.empty.fire,k.empty.fire=function(){k.unqueued||K()}),k.unqueued++,ae.always(function(){ae.always(function(){k.unqueued--,d.queue(c,"fx").length||k.empty.fire()})}));for(E in h)if(O=h[E],$o.test(O)){if(delete h[E],N=N||O==="toggle",O===(st?"hide":"show"))if(O==="show"&&Ge&&Ge[E]!==void 0)st=!0;else continue;be[E]=Ge&&Ge[E]||d.style(c,E)}if(X=!d.isEmptyObject(h),!(!X&&d.isEmptyObject(be))){ge&&c.nodeType===1&&(_.overflow=[He.overflow,He.overflowX,He.overflowY],te=Ge&&Ge.display,te==null&&(te=de.get(c,"display")),le=d.css(c,"display"),le==="none"&&(te?le=te:(dr([c],!0),te=c.style.display||te,le=d.css(c,"display"),dr([c]))),(le==="inline"||le==="inline-block"&&te!=null)&&d.css(c,"float")==="none"&&(X||(ae.done(function(){He.display=te}),te==null&&(le=He.display,te=le==="none"?"":le)),He.display="inline-block")),_.overflow&&(He.overflow="hidden",ae.always(function(){He.overflow=_.overflow[0],He.overflowX=_.overflow[1],He.overflowY=_.overflow[2]})),X=!1;for(E in be)X||(Ge?"hidden"in Ge&&(st=Ge.hidden):Ge=de.access(c,"fxshow",{display:te}),N&&(Ge.hidden=!st),st&&dr([c],!0),ae.done(function(){st||dr([c]),de.remove(c,"fxshow");for(E in be)d.style(c,E,be[E])})),X=Uo(st?Ge[E]:0,E,ae),E in Ge||(Ge[E]=X.start,st&&(X.end=X.start,X.start=0))}}function es(c,h){var _,E,O,N,k;for(_ in c)if(E=me(_),O=h[E],N=c[_],Array.isArray(N)&&(O=N[1],N=c[_]=N[0]),_!==E&&(c[E]=N,delete c[_]),k=d.cssHooks[E],k&&"expand"in k){N=k.expand(N),delete c[E];for(_ in N)_ in c||(c[_]=N[_],h[_]=O)}else h[E]=O}function cn(c,h,_){var E,O,N=0,k=cn.prefilters.length,K=d.Deferred().always(function(){delete X.elem}),X=function(){if(O)return!1;for(var ge=Yn||En(),ae=Math.max(0,te.startTime+te.duration-ge),be=ae/te.duration||0,He=1-be,st=0,Ge=te.tweens.length;st<Ge;st++)te.tweens[st].run(He);return K.notifyWith(c,[te,He,ae]),He<1&&Ge?ae:(Ge||K.notifyWith(c,[te,1,0]),K.resolveWith(c,[te]),!1)},te=K.promise({elem:c,props:d.extend({},h),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},_),originalProperties:h,originalOptions:_,startTime:Yn||En(),duration:_.duration,tweens:[],createTween:function(ge,ae){var be=d.Tween(c,te.opts,ge,ae,te.opts.specialEasing[ge]||te.opts.easing);return te.tweens.push(be),be},stop:function(ge){var ae=0,be=ge?te.tweens.length:0;if(O)return this;for(O=!0;ae<be;ae++)te.tweens[ae].run(1);return ge?(K.notifyWith(c,[te,1,0]),K.resolveWith(c,[te,ge])):K.rejectWith(c,[te,ge]),this}}),le=te.props;for(es(le,te.opts.specialEasing);N<k;N++)if(E=cn.prefilters[N].call(te,c,le,te.opts),E)return S(E.stop)&&(d._queueHooks(te.elem,te.opts.queue).stop=E.stop.bind(E)),E;return d.map(le,Uo,te),S(te.opts.start)&&te.opts.start.call(c,te),te.progress(te.opts.progress).done(te.opts.done,te.opts.complete).fail(te.opts.fail).always(te.opts.always),d.fx.timer(d.extend(X,{elem:c,anim:te,queue:te.opts.queue})),te}d.Animation=d.extend(cn,{tweeners:{"*":[function(c,h){var _=this.createTween(c,h);return Di(_.elem,c,hr.exec(h),_),_}]},tweener:function(c,h){S(c)?(h=c,c=["*"]):c=c.match(V);for(var _,E=0,O=c.length;E<O;E++)_=c[E],cn.tweeners[_]=cn.tweeners[_]||[],cn.tweeners[_].unshift(h)},prefilters:[qo],prefilter:function(c,h){h?cn.prefilters.unshift(c):cn.prefilters.push(c)}}),d.speed=function(c,h,_){var E=c&&typeof c=="object"?d.extend({},c):{complete:_||!_&&h||S(c)&&c,duration:c,easing:_&&h||h&&!S(h)&&h};return d.fx.off?E.duration=0:typeof E.duration!="number"&&(E.duration in d.fx.speeds?E.duration=d.fx.speeds[E.duration]:E.duration=d.fx.speeds._default),(E.queue==null||E.queue===!0)&&(E.queue="fx"),E.old=E.complete,E.complete=function(){S(E.old)&&E.old.call(this),E.queue&&d.dequeue(this,E.queue)},E},d.fn.extend({fadeTo:function(c,h,_,E){return this.filter(io).css("opacity",0).show().end().animate({opacity:h},c,_,E)},animate:function(c,h,_,E){var O=d.isEmptyObject(c),N=d.speed(h,_,E),k=function(){var K=cn(this,d.extend({},c),N);(O||de.get(this,"finish"))&&K.stop(!0)};return k.finish=k,O||N.queue===!1?this.each(k):this.queue(N.queue,k)},stop:function(c,h,_){var E=function(O){var N=O.stop;delete O.stop,N(_)};return typeof c!="string"&&(_=h,h=c,c=void 0),h&&this.queue(c||"fx",[]),this.each(function(){var O=!0,N=c!=null&&c+"queueHooks",k=d.timers,K=de.get(this);if(N)K[N]&&K[N].stop&&E(K[N]);else for(N in K)K[N]&&K[N].stop&&Ho.test(N)&&E(K[N]);for(N=k.length;N--;)k[N].elem===this&&(c==null||k[N].queue===c)&&(k[N].anim.stop(_),O=!1,k.splice(N,1));(O||!_)&&d.dequeue(this,c)})},finish:function(c){return c!==!1&&(c=c||"fx"),this.each(function(){var h,_=de.get(this),E=_[c+"queue"],O=_[c+"queueHooks"],N=d.timers,k=E?E.length:0;for(_.finish=!0,d.queue(this,c,[]),O&&O.stop&&O.stop.call(this,!0),h=N.length;h--;)N[h].elem===this&&N[h].queue===c&&(N[h].anim.stop(!0),N.splice(h,1));for(h=0;h<k;h++)E[h]&&E[h].finish&&E[h].finish.call(this);delete _.finish})}}),d.each(["toggle","show","hide"],function(c,h){var _=d.fn[h];d.fn[h]=function(E,O,N){return E==null||typeof E=="boolean"?_.apply(this,arguments):this.animate(uo(h,!0),E,O,N)}}),d.each({slideDown:uo("show"),slideUp:uo("hide"),slideToggle:uo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,h){d.fn[c]=function(_,E,O){return this.animate(h,_,E,O)}}),d.timers=[],d.fx.tick=function(){var c,h=0,_=d.timers;for(Yn=Date.now();h<_.length;h++)c=_[h],!c()&&_[h]===c&&_.splice(h--,1);_.length||d.fx.stop(),Yn=void 0},d.fx.timer=function(c){d.timers.push(c),d.fx.start()},d.fx.interval=13,d.fx.start=function(){Zr||(Zr=!0,Qr())},d.fx.stop=function(){Zr=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(c,h){return c=d.fx&&d.fx.speeds[c]||c,h=h||"fx",this.queue(h,function(_,E){var O=t.setTimeout(_,c);E.stop=function(){t.clearTimeout(O)}})},function(){var c=P.createElement("input"),h=P.createElement("select"),_=h.appendChild(P.createElement("option"));c.type="checkbox",v.checkOn=c.value!=="",v.optSelected=_.selected,c=P.createElement("input"),c.value="t",c.type="radio",v.radioValue=c.value==="t"}();var ts,B=d.expr.attrHandle;d.fn.extend({attr:function(c,h){return R(this,d.attr,c,h,arguments.length>1)},removeAttr:function(c){return this.each(function(){d.removeAttr(this,c)})}}),d.extend({attr:function(c,h,_){var E,O,N=c.nodeType;if(!(N===3||N===8||N===2)){if(typeof c.getAttribute>"u")return d.prop(c,h,_);if((N!==1||!d.isXMLDoc(c))&&(O=d.attrHooks[h.toLowerCase()]||(d.expr.match.bool.test(h)?ts:void 0)),_!==void 0){if(_===null){d.removeAttr(c,h);return}return O&&"set"in O&&(E=O.set(c,_,h))!==void 0?E:(c.setAttribute(h,_+""),_)}return O&&"get"in O&&(E=O.get(c,h))!==null?E:(E=d.find.attr(c,h),E??void 0)}},attrHooks:{type:{set:function(c,h){if(!v.radioValue&&h==="radio"&&w(c,"input")){var _=c.value;return c.setAttribute("type",h),_&&(c.value=_),h}}}},removeAttr:function(c,h){var _,E=0,O=h&&h.match(V);if(O&&c.nodeType===1)for(;_=O[E++];)c.removeAttribute(_)}}),ts={set:function(c,h,_){return h===!1?d.removeAttr(c,_):c.setAttribute(_,_),_}},d.each(d.expr.match.bool.source.match(/\w+/g),function(c,h){var _=B[h]||d.find.attr;B[h]=function(E,O,N){var k,K,X=O.toLowerCase();return N||(K=B[X],B[X]=k,k=_(E,O,N)!=null?X:null,B[X]=K),k}});var j=/^(?:input|select|textarea|button)$/i,Z=/^(?:a|area)$/i;d.fn.extend({prop:function(c,h){return R(this,d.prop,c,h,arguments.length>1)},removeProp:function(c){return this.each(function(){delete this[d.propFix[c]||c]})}}),d.extend({prop:function(c,h,_){var E,O,N=c.nodeType;if(!(N===3||N===8||N===2))return(N!==1||!d.isXMLDoc(c))&&(h=d.propFix[h]||h,O=d.propHooks[h]),_!==void 0?O&&"set"in O&&(E=O.set(c,_,h))!==void 0?E:c[h]=_:O&&"get"in O&&(E=O.get(c,h))!==null?E:c[h]},propHooks:{tabIndex:{get:function(c){var h=d.find.attr(c,"tabindex");return h?parseInt(h,10):j.test(c.nodeName)||Z.test(c.nodeName)&&c.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(d.propHooks.selected={get:function(c){var h=c.parentNode;return h&&h.parentNode&&h.parentNode.selectedIndex,null},set:function(c){var h=c.parentNode;h&&(h.selectedIndex,h.parentNode&&h.parentNode.selectedIndex)}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});function ie(c){var h=c.match(V)||[];return h.join(" ")}function _e(c){return c.getAttribute&&c.getAttribute("class")||""}function Ce(c){return Array.isArray(c)?c:typeof c=="string"?c.match(V)||[]:[]}d.fn.extend({addClass:function(c){var h,_,E,O,N,k;return S(c)?this.each(function(K){d(this).addClass(c.call(this,K,_e(this)))}):(h=Ce(c),h.length?this.each(function(){if(E=_e(this),_=this.nodeType===1&&" "+ie(E)+" ",_){for(N=0;N<h.length;N++)O=h[N],_.indexOf(" "+O+" ")<0&&(_+=O+" ");k=ie(_),E!==k&&this.setAttribute("class",k)}}):this)},removeClass:function(c){var h,_,E,O,N,k;return S(c)?this.each(function(K){d(this).removeClass(c.call(this,K,_e(this)))}):arguments.length?(h=Ce(c),h.length?this.each(function(){if(E=_e(this),_=this.nodeType===1&&" "+ie(E)+" ",_){for(N=0;N<h.length;N++)for(O=h[N];_.indexOf(" "+O+" ")>-1;)_=_.replace(" "+O+" "," ");k=ie(_),E!==k&&this.setAttribute("class",k)}}):this):this.attr("class","")},toggleClass:function(c,h){var _,E,O,N,k=typeof c,K=k==="string"||Array.isArray(c);return S(c)?this.each(function(X){d(this).toggleClass(c.call(this,X,_e(this),h),h)}):typeof h=="boolean"&&K?h?this.addClass(c):this.removeClass(c):(_=Ce(c),this.each(function(){if(K)for(N=d(this),O=0;O<_.length;O++)E=_[O],N.hasClass(E)?N.removeClass(E):N.addClass(E);else(c===void 0||k==="boolean")&&(E=_e(this),E&&de.set(this,"__className__",E),this.setAttribute&&this.setAttribute("class",E||c===!1?"":de.get(this,"__className__")||""))}))},hasClass:function(c){var h,_,E=0;for(h=" "+c+" ";_=this[E++];)if(_.nodeType===1&&(" "+ie(_e(_))+" ").indexOf(h)>-1)return!0;return!1}});var Je=/\r/g;d.fn.extend({val:function(c){var h,_,E,O=this[0];return arguments.length?(E=S(c),this.each(function(N){var k;this.nodeType===1&&(E?k=c.call(this,N,d(this).val()):k=c,k==null?k="":typeof k=="number"?k+="":Array.isArray(k)&&(k=d.map(k,function(K){return K==null?"":K+""})),h=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],(!h||!("set"in h)||h.set(this,k,"value")===void 0)&&(this.value=k))})):O?(h=d.valHooks[O.type]||d.valHooks[O.nodeName.toLowerCase()],h&&"get"in h&&(_=h.get(O,"value"))!==void 0?_:(_=O.value,typeof _=="string"?_.replace(Je,""):_??"")):void 0}}),d.extend({valHooks:{option:{get:function(c){var h=d.find.attr(c,"value");return h??ie(d.text(c))}},select:{get:function(c){var h,_,E,O=c.options,N=c.selectedIndex,k=c.type==="select-one",K=k?null:[],X=k?N+1:O.length;for(N<0?E=X:E=k?N:0;E<X;E++)if(_=O[E],(_.selected||E===N)&&!_.disabled&&(!_.parentNode.disabled||!w(_.parentNode,"optgroup"))){if(h=d(_).val(),k)return h;K.push(h)}return K},set:function(c,h){for(var _,E,O=c.options,N=d.makeArray(h),k=O.length;k--;)E=O[k],(E.selected=d.inArray(d.valHooks.option.get(E),N)>-1)&&(_=!0);return _||(c.selectedIndex=-1),N}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(c,h){if(Array.isArray(h))return c.checked=d.inArray(d(c).val(),h)>-1}},v.checkOn||(d.valHooks[this].get=function(c){return c.getAttribute("value")===null?"on":c.value})});var mt=t.location,Rt={guid:Date.now()},Lt=/\?/;d.parseXML=function(c){var h,_;if(!c||typeof c!="string")return null;try{h=new t.DOMParser().parseFromString(c,"text/xml")}catch{}return _=h&&h.getElementsByTagName("parsererror")[0],(!h||_)&&d.error("Invalid XML: "+(_?d.map(_.childNodes,function(E){return E.textContent}).join(`
`):c)),h};var fn=/^(?:focusinfocus|focusoutblur)$/,Vh=function(c){c.stopPropagation()};d.extend(d.event,{trigger:function(c,h,_,E){var O,N,k,K,X,te,le,ge,ae=[_||P],be=p.call(c,"type")?c.type:c,He=p.call(c,"namespace")?c.namespace.split("."):[];if(N=ge=k=_=_||P,!(_.nodeType===3||_.nodeType===8)&&!fn.test(be+d.event.triggered)&&(be.indexOf(".")>-1&&(He=be.split("."),be=He.shift(),He.sort()),X=be.indexOf(":")<0&&"on"+be,c=c[d.expando]?c:new d.Event(be,typeof c=="object"&&c),c.isTrigger=E?2:3,c.namespace=He.join("."),c.rnamespace=c.namespace?new RegExp("(^|\\.)"+He.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=_),h=h==null?[c]:d.makeArray(h,[c]),le=d.event.special[be]||{},!(!E&&le.trigger&&le.trigger.apply(_,h)===!1))){if(!E&&!le.noBubble&&!M(_)){for(K=le.delegateType||be,fn.test(K+be)||(N=N.parentNode);N;N=N.parentNode)ae.push(N),k=N;k===(_.ownerDocument||P)&&ae.push(k.defaultView||k.parentWindow||t)}for(O=0;(N=ae[O++])&&!c.isPropagationStopped();)ge=N,c.type=O>1?K:le.bindType||be,te=(de.get(N,"events")||Object.create(null))[c.type]&&de.get(N,"handle"),te&&te.apply(N,h),te=X&&N[X],te&&te.apply&&Oe(N)&&(c.result=te.apply(N,h),c.result===!1&&c.preventDefault());return c.type=be,!E&&!c.isDefaultPrevented()&&(!le._default||le._default.apply(ae.pop(),h)===!1)&&Oe(_)&&X&&S(_[be])&&!M(_)&&(k=_[X],k&&(_[X]=null),d.event.triggered=be,c.isPropagationStopped()&&ge.addEventListener(be,Vh),_[be](),c.isPropagationStopped()&&ge.removeEventListener(be,Vh),d.event.triggered=void 0,k&&(_[X]=k)),c.result}},simulate:function(c,h,_){var E=d.extend(new d.Event,_,{type:c,isSimulated:!0});d.event.trigger(E,null,h)}}),d.fn.extend({trigger:function(c,h){return this.each(function(){d.event.trigger(c,h,this)})},triggerHandler:function(c,h){var _=this[0];if(_)return d.event.trigger(c,h,_,!0)}});var l_=/\[\]$/,Xh=/\r?\n/g,h_=/^(?:submit|button|image|reset|file)$/i,p_=/^(?:input|select|textarea|keygen)/i;function tc(c,h,_,E){var O;if(Array.isArray(h))d.each(h,function(N,k){_||l_.test(c)?E(c,k):tc(c+"["+(typeof k=="object"&&k!=null?N:"")+"]",k,_,E)});else if(!_&&x(h)==="object")for(O in h)tc(c+"["+O+"]",h[O],_,E);else E(c,h)}d.param=function(c,h){var _,E=[],O=function(N,k){var K=S(k)?k():k;E[E.length]=encodeURIComponent(N)+"="+encodeURIComponent(K??"")};if(c==null)return"";if(Array.isArray(c)||c.jquery&&!d.isPlainObject(c))d.each(c,function(){O(this.name,this.value)});else for(_ in c)tc(_,c[_],h,O);return E.join("&")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=d.prop(this,"elements");return c?d.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!d(this).is(":disabled")&&p_.test(this.nodeName)&&!h_.test(c)&&(this.checked||!Gr.test(c))}).map(function(c,h){var _=d(this).val();return _==null?null:Array.isArray(_)?d.map(_,function(E){return{name:h.name,value:E.replace(Xh,`\r
`)}}):{name:h.name,value:_.replace(Xh,`\r
`)}}).get()}});var d_=/%20/g,g_=/#.*$/,y_=/([?&])_=[^&]*/,v_=/^(.*?):[ \t]*([^\r\n]*)$/mg,m_=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,__=/^(?:GET|HEAD)$/,x_=/^\/\//,Gh={},nc={},Yh="*/".concat("*"),rc=P.createElement("a");rc.href=mt.href;function Kh(c){return function(h,_){typeof h!="string"&&(_=h,h="*");var E,O=0,N=h.toLowerCase().match(V)||[];if(S(_))for(;E=N[O++];)E[0]==="+"?(E=E.slice(1)||"*",(c[E]=c[E]||[]).unshift(_)):(c[E]=c[E]||[]).push(_)}}function Zh(c,h,_,E){var O={},N=c===nc;function k(K){var X;return O[K]=!0,d.each(c[K]||[],function(te,le){var ge=le(h,_,E);if(typeof ge=="string"&&!N&&!O[ge])return h.dataTypes.unshift(ge),k(ge),!1;if(N)return!(X=ge)}),X}return k(h.dataTypes[0])||!O["*"]&&k("*")}function ic(c,h){var _,E,O=d.ajaxSettings.flatOptions||{};for(_ in h)h[_]!==void 0&&((O[_]?c:E||(E={}))[_]=h[_]);return E&&d.extend(!0,c,E),c}function w_(c,h,_){for(var E,O,N,k,K=c.contents,X=c.dataTypes;X[0]==="*";)X.shift(),E===void 0&&(E=c.mimeType||h.getResponseHeader("Content-Type"));if(E){for(O in K)if(K[O]&&K[O].test(E)){X.unshift(O);break}}if(X[0]in _)N=X[0];else{for(O in _){if(!X[0]||c.converters[O+" "+X[0]]){N=O;break}k||(k=O)}N=N||k}if(N)return N!==X[0]&&X.unshift(N),_[N]}function E_(c,h,_,E){var O,N,k,K,X,te={},le=c.dataTypes.slice();if(le[1])for(k in c.converters)te[k.toLowerCase()]=c.converters[k];for(N=le.shift();N;)if(c.responseFields[N]&&(_[c.responseFields[N]]=h),!X&&E&&c.dataFilter&&(h=c.dataFilter(h,c.dataType)),X=N,N=le.shift(),N){if(N==="*")N=X;else if(X!=="*"&&X!==N){if(k=te[X+" "+N]||te["* "+N],!k){for(O in te)if(K=O.split(" "),K[1]===N&&(k=te[X+" "+K[0]]||te["* "+K[0]],k)){k===!0?k=te[O]:te[O]!==!0&&(N=K[0],le.unshift(K[1]));break}}if(k!==!0)if(k&&c.throws)h=k(h);else try{h=k(h)}catch(ge){return{state:"parsererror",error:k?ge:"No conversion from "+X+" to "+N}}}}return{state:"success",data:h}}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:m_.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yh,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,h){return h?ic(ic(c,d.ajaxSettings),h):ic(d.ajaxSettings,c)},ajaxPrefilter:Kh(Gh),ajaxTransport:Kh(nc),ajax:function(c,h){typeof c=="object"&&(h=c,c=void 0),h=h||{};var _,E,O,N,k,K,X,te,le,ge,ae=d.ajaxSetup({},h),be=ae.context||ae,He=ae.context&&(be.nodeType||be.jquery)?d(be):d.event,st=d.Deferred(),Ge=d.Callbacks("once memory"),qt=ae.statusCode||{},kt={},Kn={},Zn="canceled",it={readyState:0,getResponseHeader:function(ut){var Et;if(X){if(!N)for(N={};Et=v_.exec(O);)N[Et[1].toLowerCase()+" "]=(N[Et[1].toLowerCase()+" "]||[]).concat(Et[2]);Et=N[ut.toLowerCase()+" "]}return Et==null?null:Et.join(", ")},getAllResponseHeaders:function(){return X?O:null},setRequestHeader:function(ut,Et){return X==null&&(ut=Kn[ut.toLowerCase()]=Kn[ut.toLowerCase()]||ut,kt[ut]=Et),this},overrideMimeType:function(ut){return X==null&&(ae.mimeType=ut),this},statusCode:function(ut){var Et;if(ut)if(X)it.always(ut[it.status]);else for(Et in ut)qt[Et]=[qt[Et],ut[Et]];return this},abort:function(ut){var Et=ut||Zn;return _&&_.abort(Et),ki(0,Et),this}};if(st.promise(it),ae.url=((c||ae.url||mt.href)+"").replace(x_,mt.protocol+"//"),ae.type=h.method||h.type||ae.method||ae.type,ae.dataTypes=(ae.dataType||"*").toLowerCase().match(V)||[""],ae.crossDomain==null){K=P.createElement("a");try{K.href=ae.url,K.href=K.href,ae.crossDomain=rc.protocol+"//"+rc.host!=K.protocol+"//"+K.host}catch{ae.crossDomain=!0}}if(ae.data&&ae.processData&&typeof ae.data!="string"&&(ae.data=d.param(ae.data,ae.traditional)),Zh(Gh,ae,h,it),X)return it;te=d.event&&ae.global,te&&d.active++===0&&d.event.trigger("ajaxStart"),ae.type=ae.type.toUpperCase(),ae.hasContent=!__.test(ae.type),E=ae.url.replace(g_,""),ae.hasContent?ae.data&&ae.processData&&(ae.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ae.data=ae.data.replace(d_,"+")):(ge=ae.url.slice(E.length),ae.data&&(ae.processData||typeof ae.data=="string")&&(E+=(Lt.test(E)?"&":"?")+ae.data,delete ae.data),ae.cache===!1&&(E=E.replace(y_,"$1"),ge=(Lt.test(E)?"&":"?")+"_="+Rt.guid+++ge),ae.url=E+ge),ae.ifModified&&(d.lastModified[E]&&it.setRequestHeader("If-Modified-Since",d.lastModified[E]),d.etag[E]&&it.setRequestHeader("If-None-Match",d.etag[E])),(ae.data&&ae.hasContent&&ae.contentType!==!1||h.contentType)&&it.setRequestHeader("Content-Type",ae.contentType),it.setRequestHeader("Accept",ae.dataTypes[0]&&ae.accepts[ae.dataTypes[0]]?ae.accepts[ae.dataTypes[0]]+(ae.dataTypes[0]!=="*"?", "+Yh+"; q=0.01":""):ae.accepts["*"]);for(le in ae.headers)it.setRequestHeader(le,ae.headers[le]);if(ae.beforeSend&&(ae.beforeSend.call(be,it,ae)===!1||X))return it.abort();if(Zn="abort",Ge.add(ae.complete),it.done(ae.success),it.fail(ae.error),_=Zh(nc,ae,h,it),!_)ki(-1,"No Transport");else{if(it.readyState=1,te&&He.trigger("ajaxSend",[it,ae]),X)return it;ae.async&&ae.timeout>0&&(k=t.setTimeout(function(){it.abort("timeout")},ae.timeout));try{X=!1,_.send(kt,ki)}catch(ut){if(X)throw ut;ki(-1,ut)}}function ki(ut,Et,zo,ac){var Qn,Vo,Jn,Jr,ei,bn=Et;X||(X=!0,k&&t.clearTimeout(k),_=void 0,O=ac||"",it.readyState=ut>0?4:0,Qn=ut>=200&&ut<300||ut===304,zo&&(Jr=w_(ae,it,zo)),!Qn&&d.inArray("script",ae.dataTypes)>-1&&d.inArray("json",ae.dataTypes)<0&&(ae.converters["text script"]=function(){}),Jr=E_(ae,Jr,it,Qn),Qn?(ae.ifModified&&(ei=it.getResponseHeader("Last-Modified"),ei&&(d.lastModified[E]=ei),ei=it.getResponseHeader("etag"),ei&&(d.etag[E]=ei)),ut===204||ae.type==="HEAD"?bn="nocontent":ut===304?bn="notmodified":(bn=Jr.state,Vo=Jr.data,Jn=Jr.error,Qn=!Jn)):(Jn=bn,(ut||!bn)&&(bn="error",ut<0&&(ut=0))),it.status=ut,it.statusText=(Et||bn)+"",Qn?st.resolveWith(be,[Vo,bn,it]):st.rejectWith(be,[it,bn,Jn]),it.statusCode(qt),qt=void 0,te&&He.trigger(Qn?"ajaxSuccess":"ajaxError",[it,ae,Qn?Vo:Jn]),Ge.fireWith(be,[it,bn]),te&&(He.trigger("ajaxComplete",[it,ae]),--d.active||d.event.trigger("ajaxStop")))}return it},getJSON:function(c,h,_){return d.get(c,h,_,"json")},getScript:function(c,h){return d.get(c,void 0,h,"script")}}),d.each(["get","post"],function(c,h){d[h]=function(_,E,O,N){return S(E)&&(N=N||O,O=E,E=void 0),d.ajax(d.extend({url:_,type:h,dataType:N,data:E,success:O},d.isPlainObject(_)&&_))}}),d.ajaxPrefilter(function(c){var h;for(h in c.headers)h.toLowerCase()==="content-type"&&(c.contentType=c.headers[h]||"")}),d._evalUrl=function(c,h,_){return d.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(E){d.globalEval(E,h,_)}})},d.fn.extend({wrapAll:function(c){var h;return this[0]&&(S(c)&&(c=c.call(this[0])),h=d(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var _=this;_.firstElementChild;)_=_.firstElementChild;return _}).append(this)),this},wrapInner:function(c){return S(c)?this.each(function(h){d(this).wrapInner(c.call(this,h))}):this.each(function(){var h=d(this),_=h.contents();_.length?_.wrapAll(c):h.append(c)})},wrap:function(c){var h=S(c);return this.each(function(_){d(this).wrapAll(h?c.call(this,_):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){d(this).replaceWith(this.childNodes)}),this}}),d.expr.pseudos.hidden=function(c){return!d.expr.pseudos.visible(c)},d.expr.pseudos.visible=function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},d.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var b_={0:200,1223:204},Wo=d.ajaxSettings.xhr();v.cors=!!Wo&&"withCredentials"in Wo,v.ajax=Wo=!!Wo,d.ajaxTransport(function(c){var h,_;if(v.cors||Wo&&!c.crossDomain)return{send:function(E,O){var N,k=c.xhr();if(k.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(N in c.xhrFields)k[N]=c.xhrFields[N];c.mimeType&&k.overrideMimeType&&k.overrideMimeType(c.mimeType),!c.crossDomain&&!E["X-Requested-With"]&&(E["X-Requested-With"]="XMLHttpRequest");for(N in E)k.setRequestHeader(N,E[N]);h=function(K){return function(){h&&(h=_=k.onload=k.onerror=k.onabort=k.ontimeout=k.onreadystatechange=null,K==="abort"?k.abort():K==="error"?typeof k.status!="number"?O(0,"error"):O(k.status,k.statusText):O(b_[k.status]||k.status,k.statusText,(k.responseType||"text")!=="text"||typeof k.responseText!="string"?{binary:k.response}:{text:k.responseText},k.getAllResponseHeaders()))}},k.onload=h(),_=k.onerror=k.ontimeout=h("error"),k.onabort!==void 0?k.onabort=_:k.onreadystatechange=function(){k.readyState===4&&t.setTimeout(function(){h&&_()})},h=h("abort");try{k.send(c.hasContent&&c.data||null)}catch(K){if(h)throw K}},abort:function(){h&&h()}}}),d.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(c){return d.globalEval(c),c}}}),d.ajaxPrefilter("script",function(c){c.cache===void 0&&(c.cache=!1),c.crossDomain&&(c.type="GET")}),d.ajaxTransport("script",function(c){if(c.crossDomain||c.scriptAttrs){var h,_;return{send:function(E,O){h=d("<script>").attr(c.scriptAttrs||{}).prop({charset:c.scriptCharset,src:c.url}).on("load error",_=function(N){h.remove(),_=null,N&&O(N.type==="error"?404:200,N.type)}),P.head.appendChild(h[0])},abort:function(){_&&_()}}}});var Qh=[],oc=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var c=Qh.pop()||d.expando+"_"+Rt.guid++;return this[c]=!0,c}}),d.ajaxPrefilter("json jsonp",function(c,h,_){var E,O,N,k=c.jsonp!==!1&&(oc.test(c.url)?"url":typeof c.data=="string"&&(c.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&oc.test(c.data)&&"data");if(k||c.dataTypes[0]==="jsonp")return E=c.jsonpCallback=S(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,k?c[k]=c[k].replace(oc,"$1"+E):c.jsonp!==!1&&(c.url+=(Lt.test(c.url)?"&":"?")+c.jsonp+"="+E),c.converters["script json"]=function(){return N||d.error(E+" was not called"),N[0]},c.dataTypes[0]="json",O=t[E],t[E]=function(){N=arguments},_.always(function(){O===void 0?d(t).removeProp(E):t[E]=O,c[E]&&(c.jsonpCallback=h.jsonpCallback,Qh.push(E)),N&&S(O)&&O(N[0]),N=O=void 0}),"script"}),v.createHTMLDocument=function(){var c=P.implementation.createHTMLDocument("").body;return c.innerHTML="<form></form><form></form>",c.childNodes.length===2}(),d.parseHTML=function(c,h,_){if(typeof c!="string")return[];typeof h=="boolean"&&(_=h,h=!1);var E,O,N;return h||(v.createHTMLDocument?(h=P.implementation.createHTMLDocument(""),E=h.createElement("base"),E.href=P.location.href,h.head.appendChild(E)):h=P),O=Ze.exec(c),N=!_&&[],O?[h.createElement(O[1])]:(O=Xa([c],h,N),N&&N.length&&d(N).remove(),d.merge([],O.childNodes))},d.fn.load=function(c,h,_){var E,O,N,k=this,K=c.indexOf(" ");return K>-1&&(E=ie(c.slice(K)),c=c.slice(0,K)),S(h)?(_=h,h=void 0):h&&typeof h=="object"&&(O="POST"),k.length>0&&d.ajax({url:c,type:O||"GET",dataType:"html",data:h}).done(function(X){N=arguments,k.html(E?d("<div>").append(d.parseHTML(X)).find(E):X)}).always(_&&function(X,te){k.each(function(){_.apply(this,N||[X.responseText,te,X])})}),this},d.expr.pseudos.animated=function(c){return d.grep(d.timers,function(h){return c===h.elem}).length},d.offset={setOffset:function(c,h,_){var E,O,N,k,K,X,te,le=d.css(c,"position"),ge=d(c),ae={};le==="static"&&(c.style.position="relative"),K=ge.offset(),N=d.css(c,"top"),X=d.css(c,"left"),te=(le==="absolute"||le==="fixed")&&(N+X).indexOf("auto")>-1,te?(E=ge.position(),k=E.top,O=E.left):(k=parseFloat(N)||0,O=parseFloat(X)||0),S(h)&&(h=h.call(c,_,d.extend({},K))),h.top!=null&&(ae.top=h.top-K.top+k),h.left!=null&&(ae.left=h.left-K.left+O),"using"in h?h.using.call(c,ae):ge.css(ae)}},d.fn.extend({offset:function(c){if(arguments.length)return c===void 0?this:this.each(function(O){d.offset.setOffset(this,c,O)});var h,_,E=this[0];if(E)return E.getClientRects().length?(h=E.getBoundingClientRect(),_=E.ownerDocument.defaultView,{top:h.top+_.pageYOffset,left:h.left+_.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var c,h,_,E=this[0],O={top:0,left:0};if(d.css(E,"position")==="fixed")h=E.getBoundingClientRect();else{for(h=this.offset(),_=E.ownerDocument,c=E.offsetParent||_.documentElement;c&&(c===_.body||c===_.documentElement)&&d.css(c,"position")==="static";)c=c.parentNode;c&&c!==E&&c.nodeType===1&&(O=d(c).offset(),O.top+=d.css(c,"borderTopWidth",!0),O.left+=d.css(c,"borderLeftWidth",!0))}return{top:h.top-O.top-d.css(E,"marginTop",!0),left:h.left-O.left-d.css(E,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&d.css(c,"position")==="static";)c=c.offsetParent;return c||pr})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,h){var _=h==="pageYOffset";d.fn[c]=function(E){return R(this,function(O,N,k){var K;if(M(O)?K=O:O.nodeType===9&&(K=O.defaultView),k===void 0)return K?K[h]:O[N];K?K.scrollTo(_?K.pageXOffset:k,_?k:K.pageYOffset):O[N]=k},c,E,arguments.length)}}),d.each(["top","left"],function(c,h){d.cssHooks[h]=Li(v.pixelPosition,function(_,E){if(E)return E=Ii(_,h),gr.test(E)?d(_).position()[h]+"px":E})}),d.each({Height:"height",Width:"width"},function(c,h){d.each({padding:"inner"+c,content:h,"":"outer"+c},function(_,E){d.fn[E]=function(O,N){var k=arguments.length&&(_||typeof O!="boolean"),K=_||(O===!0||N===!0?"margin":"border");return R(this,function(X,te,le){var ge;return M(X)?E.indexOf("outer")===0?X["inner"+c]:X.document.documentElement["client"+c]:X.nodeType===9?(ge=X.documentElement,Math.max(X.body["scroll"+c],ge["scroll"+c],X.body["offset"+c],ge["offset"+c],ge["client"+c])):le===void 0?d.css(X,te,K):d.style(X,te,le,K)},h,k?O:void 0,k)}})}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(c,h){d.fn[h]=function(_){return this.on(h,_)}}),d.fn.extend({bind:function(c,h,_){return this.on(c,null,h,_)},unbind:function(c,h){return this.off(c,null,h)},delegate:function(c,h,_,E){return this.on(h,c,_,E)},undelegate:function(c,h,_){return arguments.length===1?this.off(c,"**"):this.off(h,c||"**",_)},hover:function(c,h){return this.on("mouseenter",c).on("mouseleave",h||c)}}),d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(c,h){d.fn[h]=function(_,E){return arguments.length>0?this.on(h,null,_,E):this.trigger(h)}});var T_=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;d.proxy=function(c,h){var _,E,O;if(typeof h=="string"&&(_=c[h],h=c,c=_),!!S(c))return E=i.call(arguments,2),O=function(){return c.apply(h||this,E.concat(i.call(arguments)))},O.guid=c.guid=c.guid||d.guid++,O},d.holdReady=function(c){c?d.readyWait++:d.ready(!0)},d.isArray=Array.isArray,d.parseJSON=JSON.parse,d.nodeName=w,d.isFunction=S,d.isWindow=M,d.camelCase=me,d.type=x,d.now=Date.now,d.isNumeric=function(c){var h=d.type(c);return(h==="number"||h==="string")&&!isNaN(c-parseFloat(c))},d.trim=function(c){return c==null?"":(c+"").replace(T_,"$1")};var S_=t.jQuery,C_=t.$;return d.noConflict=function(c){return t.$===d&&(t.$=C_),c&&t.jQuery===d&&(t.jQuery=S_),d},typeof n>"u"&&(t.jQuery=t.$=d),d})})(Ny);var L_=Ny.exports;const nr=xo(L_);function ct(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function k_(e,t){return t={exports:{}},e(t,t.exports),t.exports}var B_=k_(function(e){var t=e.exports=function(n,r){if(r||(r=16),n===void 0&&(n=128),n<=0)return"0";for(var o=Math.log(Math.pow(2,n))/Math.log(r),i=2;o===1/0;i*=2)o=Math.log(Math.pow(2,n/i))/Math.log(r)*i;for(var a=o-Math.floor(o),s="",i=0;i<Math.floor(o);i++){var u=Math.floor(Math.random()*r).toString(r);s=u+s}if(a){var f=Math.pow(r,a),u=Math.floor(Math.random()*f).toString(r);s=u+s}var l=parseInt(s,r);return l!==1/0&&l>=Math.pow(2,n)?t(n,r):s};t.rack=function(n,r,o){var i=function(s){var u=0;do{if(u++>10)if(o)n+=o;else throw new Error("too many ID collisions, use more bits");var f=t(n,r)}while(Object.hasOwnProperty.call(a,f));return a[f]=s,f},a=i.hats={};return i.get=function(s){return i.hats[s]},i.set=function(s,u){return i.hats[s]=u,i},i.bits=n||128,i.base=r||16,i}});function sr(e){if(!(this instanceof sr))return new sr(e);e=e||[128,36,1],this._seed=e.length?B_.rack(e[0],e[1],e[2]):e}sr.prototype.next=function(e){return this._seed(e||!0)};sr.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};sr.prototype.claim=function(e,t){this._seed.set(e,t||!0)};sr.prototype.assigned=function(e){return this._seed.get(e)||!1};sr.prototype.unclaim=function(e){delete this._seed.hats[e]};sr.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function Bf(e){return Array.prototype.concat.apply([],e)}const va=Object.prototype.toString,F_=Object.prototype.hasOwnProperty;function zi(e){return e===void 0}function $t(e){return e!==void 0}function Ff(e){return e==null}function ze(e){return va.call(e)==="[object Array]"}function Vt(e){return va.call(e)==="[object Object]"}function Ie(e){return va.call(e)==="[object Number]"}function Wt(e){const t=va.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Rn(e){return va.call(e)==="[object String]"}function j_(e){if(!ze(e))throw new Error("must supply array")}function ma(e,t){return F_.call(e,t)}function _t(e,t){const n=su(t);let r;return ne(e,function(o,i){if(n(o,i))return r=o,!1}),r}function Iy(e,t){const n=su(t);let r=ze(e)?-1:void 0;return ne(e,function(o,i){if(n(o,i))return r=i,!1}),r}function Dt(e,t){const n=su(t);let r=[];return ne(e,function(o,i){n(o,i)&&r.push(o)}),r}function ne(e,t){let n,r;if(zi(e))return;const o=ze(e)?W_:q_;for(let i in e)if(ma(e,i)&&(n=e[i],r=t(n,o(i)),r===!1))return n}function $_(e,t){if(zi(e))return[];j_(e);const n=su(t);return e.filter(function(r,o){return!n(r,o)})}function Pn(e,t,n){return ne(e,function(r,o){n=t(n,r,o)}),n}function _a(e,t){return!!Pn(e,function(n,r,o){return n&&t(r,o)},!0)}function au(e,t){return!!_t(e,t)}function zt(e,t){let n=[];return ne(e,function(r,o){n.push(t(r,o))}),n}function jf(e){return e&&Object.keys(e)||[]}function H_(e){return jf(e).length}function Ly(e){return zt(e,t=>t)}function xa(e,t,n={}){return t=yl(t),ne(e,function(r){let o=t(r)||"_",i=n[o];i||(i=n[o]=[]),i.push(r)}),n}function ky(e,...t){e=yl(e);let n={};return ne(t,o=>xa(o,e,n)),zt(n,function(o,i){return o[0]})}const U_=ky;function Ar(e,t){t=yl(t);let n=[];return ne(e,function(r,o){let i=t(r,o),a={d:i,v:r};for(var s=0;s<n.length;s++){let{d:u}=n[s];if(i<u){n.splice(s,0,a);return}}n.push(a)}),zt(n,r=>r.v)}function ci(e){return function(t){return _a(e,function(n,r){return t[r]===n})}}function yl(e){return Wt(e)?e:t=>t[e]}function su(e){return Wt(e)?e:t=>t===e}function q_(e){return e}function W_(e){return Number(e)}function By(e,t){let n,r,o,i;function a(p){let y=Date.now(),g=p?0:i+t-y;if(g>0)return s(g);e.apply(o,r),u()}function s(p){n=setTimeout(a,p)}function u(){n&&clearTimeout(n),n=i=r=o=void 0}function f(){n&&a(!0),u()}function l(...p){i=Date.now(),r=p,o=this,n||s(t)}return l.flush=f,l.cancel=u,l}function en(e,t){return e.bind(t)}function ue(e,...t){return Object.assign(e,...t)}function z_(e,t,n){let r=e;return ne(t,function(o,i){if(typeof o!="number"&&typeof o!="string")throw new Error("illegal key type: "+typeof o+". Key should be of type number or string.");if(o==="constructor")throw new Error("illegal key: constructor");if(o==="__proto__")throw new Error("illegal key: __proto__");let a=t[i+1],s=r[o];$t(a)&&Ff(s)&&(s=r[o]=isNaN(+a)?{}:[]),zi(a)?zi(n)?delete r[o]:r[o]=n:r=s}),e}function Or(e,t){let n={},r=Object(e);return ne(t,function(o){o in r&&(n[o]=e[o])}),n}function Dr(e,t){let n={},r=Object(e);return ne(r,function(o,i){t.indexOf(i)===-1&&(n[i]=o)}),n}function V_(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}const X_=Object.prototype.toString,G_=Object.prototype.hasOwnProperty;function Y_(e){return e===void 0}function K_(e){return X_.call(e)==="[object Array]"}function Z_(e,t){return G_.call(e,t)}function np(e,t){let n,r;if(Y_(e))return;const o=K_(e)?J_:Q_;for(let i in e)if(Z_(e,i)&&(n=e[i],r=t(n,o(i)),r===!1))return n}function Q_(e){return e}function J_(e){return Number(e)}function Nr(e,...t){const n=e.style;return np(t,function(r){r&&np(r,function(o,i){n[i]=o})}),e}function pn(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const e1=Object.prototype.toString;function yn(e){return new pi(e)}function pi(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}pi.prototype.add=function(e){return this.list.add(e),this};pi.prototype.remove=function(e){return e1.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};pi.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};pi.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};pi.prototype.array=function(){return Array.from(this.list)};pi.prototype.has=pi.prototype.contains=function(e){return this.list.contains(e)};function vl(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}function ca(e,t){return e&&typeof e.matches=="function"&&e.matches(t)}function Ir(e,t,n){for(var r=n?e:e.parentNode;r&&r.nodeType!==document.DOCUMENT_NODE&&r.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(ca(r,t))return r;r=r.parentNode}return ca(r,t)?r:null}var js={},$s,$f,ml;function Fy(){$s=window.addEventListener?"addEventListener":"attachEvent",$f=window.removeEventListener?"removeEventListener":"detachEvent",ml=$s!=="addEventListener"?"on":""}var t1=js.bind=function(e,t,n,r){return $s||Fy(),e[$s](ml+t,n,r||!1),n},n1=js.unbind=function(e,t,n,r){return $f||Fy(),e[$f](ml+t,n,r||!1),n},De=V_({__proto__:null,bind:t1,unbind:n1,default:js},[js]),jy=["focus","blur"];function r1(e,t,n,r,o){return jy.indexOf(n)!==-1&&(o=!0),De.bind(e,n,function(i){var a=i.target||i.srcElement;i.delegateTarget=Ir(a,t,!0),i.delegateTarget&&r.call(e,i)},o)}function i1(e,t,n,r){return jy.indexOf(t)!==-1&&(r=!0),De.unbind(e,t,n,r)}var Cr={bind:r1,unbind:i1},o1=a1,$y=!1,as;typeof document<"u"&&(as=document.createElement("div"),as.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',$y=!as.getElementsByTagName("link").length,as=void 0);var Mt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:$y?[1,"X<div>","</div>"]:[0,"",""]};Mt.td=Mt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Mt.option=Mt.optgroup=[1,'<select multiple="multiple">',"</select>"];Mt.thead=Mt.tbody=Mt.colgroup=Mt.caption=Mt.tfoot=[1,"<table>","</table>"];Mt.polyline=Mt.ellipse=Mt.polygon=Mt.circle=Mt.text=Mt.line=Mt.path=Mt.rect=Mt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function a1(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if(r=="body"){var u=t.createElement("html");return u.innerHTML=e,u.removeChild(u.lastChild)}var o=Object.prototype.hasOwnProperty.call(Mt,r)?Mt[r]:Mt._default,i=o[0],a=o[1],s=o[2],u=t.createElement("div");for(u.innerHTML=a+e+s;i--;)u=u.lastChild;if(u.firstChild==u.lastChild)return u.removeChild(u.firstChild);for(var f=t.createDocumentFragment();u.firstChild;)f.appendChild(u.removeChild(u.firstChild));return f}var Bt=o1;function Ot(e,t){return t=t||document,t.querySelector(e)}function Hf(e,t){return t=t||document,t.querySelectorAll(e)}function ur(e){e.parentNode&&e.parentNode.removeChild(e)}function s1(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function Hy(e,t){return t.appendChild(s1(e,t))}function ke(e,t){return Hy(t,e),e}var Uf=2,Uy={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Uf,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Uf,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function u1(e,t){return Uy[t]?e.style[t]:e.getAttributeNS(null,t)}function qy(e,t,n){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=Uy[r];o?(o===Uf&&typeof n=="number"&&(n=String(n)+"px"),e.style[r]=n):e.setAttributeNS(null,t,n)}function c1(e,t){var n=Object.keys(t),r,o;for(r=0,o;o=n[r];r++)qy(e,o,t[o])}function xe(e,t,n){if(typeof t=="string")if(n!==void 0)qy(e,t,n);else return u1(e,t);else c1(e,t);return e}const f1=Object.prototype.toString;function Ke(e){return new di(e)}function di(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}di.prototype.add=function(e){return this.list.add(e),this};di.prototype.remove=function(e){return f1.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};di.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};di.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};di.prototype.array=function(){return Array.from(this.list)};di.prototype.has=di.prototype.contains=function(e){return this.list.contains(e)};function Tt(e){var t=e.parentNode;return t&&t.removeChild(e),e}function uu(e){for(var t;t=e.firstChild;)Tt(t);return e}function Wy(e){return e.cloneNode(!0)}var _l={svg:"http://www.w3.org/2000/svg"},rp='<svg xmlns="'+_l.svg+'"';function zy(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(_l.svg)===-1&&(e=rp+e.substring(4)):(e=rp+">"+e+"</svg>",t=!0);var n=l1(e);if(!t)return n;for(var r=document.createDocumentFragment(),o=n.firstChild;o.firstChild;)r.appendChild(o.firstChild);return r}function l1(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Pe(e,t){var n;return e.charAt(0)==="<"?(n=zy(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(_l.svg,e),t&&xe(n,t),n}var pc=null;function qf(){return pc===null&&(pc=Pe("svg")),pc}function ip(e,t){var n,r,o=Object.keys(t);for(n=0;r=o[n];n++)e[r]=t[r];return e}function h1(e,t,n,r,o,i){var a=qf().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return ip(a,e);case 6:return ip(a,{a:e,b:t,c:n,d:r,e:o,f:i})}}function ra(e){return e?qf().createSVGTransformFromMatrix(e):qf().createSVGTransform()}var op=/([&<>]{1})/g,p1=/([\n\r"]{1})/g,d1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function dc(e,t){function n(r,o){return d1[o]||o}return e.replace(t,n)}function Vy(e,t){var n,r,o,i,a;switch(e.nodeType){case 3:t.push(dc(e.textContent,op));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(o=e.attributes,n=0,r=o.length;n<r;++n)i=o.item(n),t.push(" ",i.name,'="',dc(i.value,p1),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,n=0,r=a.length;n<r;++n)Vy(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",dc(e.nodeValue,op),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function g1(e,t){var n=zy(t);if(uu(e),!!t){v1(n)||(n=n.documentElement);for(var r=m1(n.childNodes),o=0;o<r.length;o++)Hy(r[o],e)}}function y1(e){for(var t=e.firstChild,n=[];t;)Vy(t,n),t=t.nextSibling;return n.join("")}function v1(e){return e.nodeName==="#document-fragment"}function ap(e,t){if(t!==void 0){try{g1(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return y1(e)}function m1(e){return Array.prototype.slice.call(e)}function _1(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function x1(e,t){var n,r;for(e.clear(),n=0;r=t[n];n++)e.appendItem(_1(e,r))}function fa(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),x1(n,t)),n.consolidate()}const w1=/^class[ {]/;function E1(e){return w1.test(e.toString())}function xl(e){return Array.isArray(e)}function gc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Rs(...e){e.length===1&&xl(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const b1=/constructor\s*[^(]*\(\s*([^)]*)\)/m,T1=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,S1=/\/\*([^*]*)\*\//m;function C1(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(E1(e)?b1:T1);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(r=>{const o=r.match(S1);return(o&&o[1]||r).trim()})||[]}function Xy(e,t){t=t||{get:function(T,m){if(n.push(T),m===!1)return null;throw a(`No provider for "${T}"!`)}};const n=[],r=this._providers=Object.create(t._providers||null),o=this._instances=Object.create(null),i=o.injector=this,a=function(T){const m=n.join(" -> ");return n.length=0,new Error(m?`${T} (Resolving: ${m})`:T)};function s(T,m){if(!r[T]&&T.indexOf(".")!==-1){const x=T.split(".");let b=s(x.shift());for(;x.length;)b=b[x.shift()];return b}if(gc(o,T))return o[T];if(gc(r,T)){if(n.indexOf(T)!==-1)throw n.push(T),a("Cannot resolve circular dependency!");return n.push(T),o[T]=r[T][0](r[T][1]),n.pop(),o[T]}return t.get(T,m)}function u(T,m){if(typeof m>"u"&&(m={}),typeof T!="function")if(xl(T))T=Rs(T.slice());else throw a(`Cannot invoke "${T}". Expected a function!`);const b=(T.$inject||C1(T)).map(I=>gc(m,I)?m[I]:s(I));return{fn:T,dependencies:b}}function f(T){const{fn:m,dependencies:x}=u(T),b=Function.prototype.bind.apply(m,[null].concat(x));return new b}function l(T,m,x){const{fn:b,dependencies:I}=u(T,x);return b.apply(m,I)}function p(T){return Rs(m=>T.get(m))}function y(T,m){if(m&&m.length){const x=Object.create(null),b=Object.create(null),I=[],d=[],L=[];let w,U,G,Y;for(let q in r)w=r[q],m.indexOf(q)!==-1&&(w[2]==="private"?(U=I.indexOf(w[3]),U===-1?(G=w[3].createChild([],m),Y=p(G),I.push(w[3]),d.push(G),L.push(Y),x[q]=[Y,q,"private",G]):x[q]=[L[U],q,"private",d[U]]):x[q]=[w[2],w[1]],b[q]=!0),(w[2]==="factory"||w[2]==="type")&&w[1].$scope&&m.forEach(fe=>{w[1].$scope.indexOf(fe)!==-1&&(x[q]=[w[2],w[1]],b[fe]=!0)});m.forEach(q=>{if(!b[q])throw new Error('No provider for "'+q+'". Cannot use provider from the parent!')}),T.unshift(x)}return new Xy(T,i)}const g={factory:l,type:f,value:function(T){return T}};function v(T,m){const x=T.__init__||[];return function(){x.forEach(b=>{typeof b=="string"?m.get(b):m.invoke(b)})}}function S(T){const m=T.__exports__;if(m){const x=T.__modules__,b=Object.keys(T).reduce((U,G)=>(G!=="__exports__"&&G!=="__modules__"&&G!=="__init__"&&G!=="__depends__"&&(U[G]=T[G]),U),Object.create(null)),I=(x||[]).concat(b),d=y(I),L=Rs(function(U){return d.get(U)});m.forEach(function(U){r[U]=[L,U,"private",d]});const w=(T.__init__||[]).slice();return w.unshift(function(){d.init()}),T=Object.assign({},T,{__init__:w}),v(T,d)}return Object.keys(T).forEach(function(x){if(x==="__init__"||x==="__depends__")return;if(T[x][2]==="private"){r[x]=T[x];return}const b=T[x][0],I=T[x][1];r[x]=[g[b],M1(b,I),b]}),v(T,i)}function M(T,m){return T.indexOf(m)!==-1||(T=(m.__depends__||[]).reduce(M,T),T.indexOf(m)!==-1)?T:T.concat(m)}function P(T){const m=T.reduce(M,[]).map(S);let x=!1;return function(){x||(x=!0,m.forEach(b=>b()))}}this.get=s,this.invoke=l,this.instantiate=f,this.createChild=y,this.init=P(e)}function M1(e,t){return e!=="value"&&xl(t)&&(t=Rs(t.slice())),t}var R1=1e3;function Lr(e,t){var n=this;t=t||R1,e.on(["render.shape","render.connection"],t,function(r,o){var i=r.type,a=o.element,s=o.gfx,u=o.attrs;if(n.canRender(a))return i==="render.shape"?n.drawShape(s,a,u):n.drawConnection(s,a,u)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(r,o){if(n.canRender(o))return r.type==="render.getShapePath"?n.getShapePath(o):n.getConnectionPath(o)})}Lr.prototype.canRender=function(e){};Lr.prototype.drawShape=function(e,t){};Lr.prototype.drawConnection=function(e,t){};Lr.prototype.getShapePath=function(e){};Lr.prototype.getConnectionPath=function(e){};function cu(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function P1(e){return["M",e.x,e.y]}function yc(e){return["L",e.x,e.y]}function A1(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function O1(e,t){const n=e.length,r=[P1(e[0])];for(let o=1;o<n;o++){const i=e[o-1],a=e[o],s=e[o+1];if(!s||!t){r.push(yc(a));continue}const u=Math.min(t,Wf(a.x-i.x,a.y-i.y),Wf(s.x-a.x,s.y-a.y));if(!u){r.push(yc(a));continue}const f=ss(a,i,u),l=ss(a,i,u*.5),p=ss(a,s,u),y=ss(a,s,u*.5);r.push(yc(f)),r.push(A1(l,y,p))}return r}function ss(e,t,n){const r=t.x-e.x,o=t.y-e.y,i=Wf(r,o),a=n/i;return{x:e.x+r*a,y:e.y+o*a}}function Wf(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function fu(e,t,n){Ie(t)&&(n=t,t=null),t||(t={});const r=Pe("path",t);return Ie(n)&&(r.dataset.cornerRadius=String(n)),Gy(r,e)}function Gy(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return xe(e,{d:cu(O1(t,n))}),e}function Yy(e){return Dt(e,function(t){return!_t(e,function(n){return n!==t&&Ky(t,n)})})}function Ky(e,t){if(t){if(e===t)return t;if(e.parent)return Ky(e.parent,t)}}function sp(e,t,n){var r=!n||e.indexOf(t)===-1;return r&&e.push(t),r}function lu(e,t,n){n=n||0,ze(e)||(e=[e]),ne(e,function(r,o){var i=t(r,o,n);ze(i)&&i.length&&lu(i,t,n+1)})}function D1(e,t,n){var r=[],o=[];return lu(e,function(i,a,s){sp(r,i,t);var u=i.children;if((n===-1||s<n)&&u&&sp(o,u,t))return u}),r}function wl(e,t){return D1(e,!t,-1)}function N1(e,t,n){zi(t)&&(t=!0),Vt(t)&&(n=t,t=!0),n=n||{};var r=Go(n.allShapes),o=Go(n.allConnections),i=Go(n.enclosedElements),a=Go(n.enclosedConnections),s=Go(n.topLevel,t&&xa(e,function(l){return l.id}));function u(l){s[l.source.id]&&s[l.target.id]&&(s[l.id]=[l]),r[l.source.id]&&r[l.target.id]&&(a[l.id]=i[l.id]=l),o[l.id]=l}function f(l){if(i[l.id]=l,l.waypoints)a[l.id]=o[l.id]=l;else return r[l.id]=l,ne(l.incoming,u),ne(l.outgoing,u),l.children}return lu(e,f),{allShapes:r,allConnections:o,topLevel:s,enclosedConnections:a,enclosedElements:i}}function Ht(e,t){t=!!t,ze(e)||(e=[e]);var n,r,o,i;return ne(e,function(a){var s=a;a.waypoints&&!t&&(s=Ht(a.waypoints,!0));var u=s.x,f=s.y,l=s.height||0,p=s.width||0;(u<n||n===void 0)&&(n=u),(f<r||r===void 0)&&(r=f),(u+p>o||o===void 0)&&(o=u+p),(f+l>i||i===void 0)&&(i=f+l)}),{x:n,y:r,height:i-r,width:o-n}}function I1(e,t){var n={};return ne(e,function(r){var o=r;o.waypoints&&(o=Ht(o)),!Ie(t.y)&&o.x>t.x&&(n[r.id]=r),!Ie(t.x)&&o.y>t.y&&(n[r.id]=r),o.x>t.x&&o.y>t.y&&(Ie(t.width)&&Ie(t.height)&&o.width+o.x<t.width+t.x&&o.height+o.y<t.height+t.y||!Ie(t.width)||!Ie(t.height))&&(n[r.id]=r)}),n}function Zy(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Qy(e){return!!(e&&e.isFrame)}function Go(e,t){return ue({},e||{},t||{})}var L1=1;function _i(e,t){Lr.call(this,e,L1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}ct(_i,Lr);_i.prototype.canRender=function(){return!0};_i.prototype.drawShape=function(t,n,r){var o=Pe("rect");return xe(o,{x:0,y:0,width:n.width||0,height:n.height||0}),Qy(n)?xe(o,ue({},this.FRAME_STYLE,r||{})):xe(o,ue({},this.SHAPE_STYLE,r||{})),ke(t,o),o};_i.prototype.drawConnection=function(t,n,r){var o=fu(n.waypoints,ue({},this.CONNECTION_STYLE,r||{}));return ke(t,o),o};_i.prototype.getShapePath=function(t){var n=t.x,r=t.y,o=t.width,i=t.height,a=[["M",n,r],["l",o,0],["l",0,i],["l",-o,0],["z"]];return cu(a)};_i.prototype.getConnectionPath=function(t){var n=t.waypoints,r,o,i=[];for(r=0;o=n[r];r++)o=o.original||o,i.push([r===0?"M":"L",o.x,o.y]);return cu(i)};_i.$inject=["eventBus","styles"];function k1(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,r,o){var i=this.style(r,o);return ue(i,{class:n})},this.style=function(n,r){!ze(n)&&!r&&(r=n,n=[]);var o=Pn(n,function(i,a){return ue(i,e[a]||{})},{});return r?ue(o,r):o},this.computeStyle=function(n,r,o){return ze(r)||(o=r,r=[]),t.style(r||[],ue({},o,n||{}))}}const B1={__init__:["defaultRenderer"],defaultRenderer:["type",_i],styles:["type",k1]};function qn(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Wn(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var r=e.indexOf(t);if(r!==-1){if(r===n)return;if(n!==-1)e.splice(r,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function El(e,t){return!e||!t?-1:e.indexOf(t)}function wa(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function bl(e,t,n,r){if(typeof r>"u"&&(r=5),!e||!t||!n)return!1;var o=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),i=wa(e,t);return Math.abs(o/i)<=r}var F1=2;function Sr(e,t){var n=Array.from(arguments).flat();const r={x:"v",y:"h"};for(const[o,i]of Object.entries(r))if(j1(o,n))return i;return!1}function j1(e,t){const n=t[0];return _a(t,function(r){return Math.abs(n[e]-r[e])<=F1})}function up(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function zf(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var $1=/,?([a-z]),?/gi,cp=parseFloat,bt=Math,ni=bt.PI,rr=bt.min,ir=bt.max,fp=bt.pow,si=bt.abs,H1=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,U1=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,Hs=Array.isArray||function(e){return e instanceof Array};function Tl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ia(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)Tl(e,n)&&(t[n]=ia(e[n]));return t}function q1(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function W1(e){function t(){var n=Array.prototype.slice.call(arguments,0),r=n.join("â"),o=t.cache=t.cache||{},i=t.count=t.count||[];return Tl(o,r)?(q1(i,r),o[r]):(i.length>=1e3&&delete o[i.shift()],i.push(r),o[r]=e.apply(0,n),o[r])}return t}function z1(e){if(!e)return null;var t=yo(e);if(t.arr)return ia(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return Hs(e)&&Hs(e[0])&&(r=ia(e)),r.length||String(e).replace(H1,function(o,i,a){var s=[],u=i.toLowerCase();for(a.replace(U1,function(f,l){l&&s.push(+l)}),u=="m"&&s.length>2&&(r.push([i].concat(s.splice(0,2))),u="l",i=i=="m"?"l":"L");s.length>=n[u]&&(r.push([i].concat(s.splice(0,n[u]))),!!n[u]););}),r.toString=yo.toString,t.arr=ia(r),r}function yo(e){var t=yo.ps=yo.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)Tl(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function Vf(e,t,n,r){return arguments.length===1&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function Jy(){return this.join(",").replace($1,"$1")}function Us(e){var t=ia(e);return t.toString=Jy,t}function lp(e,t,n,r,o,i,a,s,u){var f=1-u,l=fp(f,3),p=fp(f,2),y=u*u,g=y*u,v=l*e+p*3*u*n+f*3*u*u*o+g*a,S=l*t+p*3*u*r+f*3*u*u*i+g*s;return{x:qs(v),y:qs(S)}}function hp(e){var t=Z1.apply(null,e);return Vf(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function ri(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function V1(e,t){return e=Vf(e),t=Vf(t),ri(t,e.x,e.y)||ri(t,e.x2,e.y)||ri(t,e.x,e.y2)||ri(t,e.x2,e.y2)||ri(e,t.x,t.y)||ri(e,t.x2,t.y)||ri(e,t.x,t.y2)||ri(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function pp(e,t,n,r,o){var i=-3*t+9*n-9*r+3*o,a=e*i+6*t-12*n+6*r;return e*a-3*t+3*n}function dp(e,t,n,r,o,i,a,s,u){u==null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,l=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],g=0,v=0;v<l;v++){var S=f*p[v]+f,M=pp(S,e,n,o,a),P=pp(S,t,r,i,s),T=M*M+P*P;g+=y[v]*bt.sqrt(T)}return f*g}function X1(e,t,n,r,o,i,a,s){if(!(ir(e,n)<rr(o,a)||rr(e,n)>ir(o,a)||ir(t,r)<rr(i,s)||rr(t,r)>ir(i,s))){var u=(e*r-t*n)*(o-a)-(e-n)*(o*s-i*a),f=(e*r-t*n)*(i-s)-(t-r)*(o*s-i*a),l=(e-n)*(i-s)-(t-r)*(o-a);if(l){var p=qs(u/l),y=qs(f/l),g=+p.toFixed(2),v=+y.toFixed(2);if(!(g<+rr(e,n).toFixed(2)||g>+ir(e,n).toFixed(2)||g<+rr(o,a).toFixed(2)||g>+ir(o,a).toFixed(2)||v<+rr(t,r).toFixed(2)||v>+ir(t,r).toFixed(2)||v<+rr(i,s).toFixed(2)||v>+ir(i,s).toFixed(2)))return{x:p,y}}}}function qs(e){return Math.round(e*1e11)/1e11}function G1(e,t,n){var r=hp(e),o=hp(t);if(!V1(r,o))return n?0:[];for(var i=dp.apply(0,e),a=dp.apply(0,t),s=gp(e)?1:~~(i/5)||1,u=gp(t)?1:~~(a/5)||1,f=[],l=[],p={},y=n?0:[],g=0;g<s+1;g++){var v=lp.apply(0,e.concat(g/s));f.push({x:v.x,y:v.y,t:g/s})}for(g=0;g<u+1;g++)v=lp.apply(0,t.concat(g/u)),l.push({x:v.x,y:v.y,t:g/u});for(g=0;g<s;g++)for(var S=0;S<u;S++){var M=f[g],P=f[g+1],T=l[S],m=l[S+1],x=si(P.x-M.x)<.01?"y":"x",b=si(m.x-T.x)<.01?"y":"x",I=X1(M.x,M.y,P.x,P.y,T.x,T.y,m.x,m.y),d;if(I){if(d=I.x.toFixed(9)+"#"+I.y.toFixed(9),p[d])continue;p[d]=!0;var L=M.t+si((I[x]-M[x])/(P[x]-M[x]))*(P.t-M.t),w=T.t+si((I[b]-T[b])/(m[b]-T[b]))*(m.t-T.t);L>=0&&L<=1&&w>=0&&w<=1&&(n?y++:y.push({x:I.x,y:I.y,t1:L,t2:w}))}}return y}function Y1(e,t,n){e=vp(e),t=vp(t);for(var r,o,i,a,s,u,f,l,p,y,g=n?0:[],v=0,S=e.length;v<S;v++){var M=e[v];if(M[0]=="M")r=s=M[1],o=u=M[2];else{M[0]=="C"?(p=[r,o].concat(M.slice(1)),r=p[6],o=p[7]):(p=[r,o,r,o,s,u,s,u],r=s,o=u);for(var P=0,T=t.length;P<T;P++){var m=t[P];if(m[0]=="M")i=f=m[1],a=l=m[2];else{m[0]=="C"?(y=[i,a].concat(m.slice(1)),i=y[6],a=y[7]):(y=[i,a,i,a,f,l,f,l],i=f,a=l);var x=G1(p,y,n);if(n)g+=x;else{for(var b=0,I=x.length;b<I;b++)x[b].segment1=v,x[b].segment2=P,x[b].bez1=p,x[b].bez2=y;g=g.concat(x)}}}}}return g}function K1(e){var t=yo(e);if(t.abs)return Us(t.abs);if((!Hs(e)||!Hs(e&&e[0]))&&(e=z1(e)),!e||!e.length)return[["M",0,0]];var n=[],r=0,o=0,i=0,a=0,s=0,u;e[0][0]=="M"&&(r=+e[0][1],o=+e[0][2],i=r,a=o,s++,n[0]=["M",r,o]);for(var f,l,p=s,y=e.length;p<y;p++){if(n.push(f=[]),l=e[p],u=l[0],u!=u.toUpperCase())switch(f[0]=u.toUpperCase(),f[0]){case"A":f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=+l[6]+r,f[7]=+l[7]+o;break;case"V":f[1]=+l[1]+o;break;case"H":f[1]=+l[1]+r;break;case"M":i=+l[1]+r,a=+l[2]+o;default:for(var g=1,v=l.length;g<v;g++)f[g]=+l[g]+(g%2?r:o)}else for(var S=0,M=l.length;S<M;S++)f[S]=l[S];switch(u=u.toUpperCase(),f[0]){case"Z":r=+i,o=+a;break;case"H":r=f[1];break;case"V":o=f[1];break;case"M":i=f[f.length-2],a=f[f.length-1];default:r=f[f.length-2],o=f[f.length-1]}}return n.toString=Jy,t.abs=Us(n),n}function gp(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function us(e,t,n,r){return[e,t,n,r,n,r]}function yp(e,t,n,r,o,i){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*r,a*o+s*n,a*i+s*r,o,i]}function ev(e,t,n,r,o,i,a,s,u,f){var l=ni*120/180,p=ni/180*(+o||0),y=[],g,v=W1(function(A,D,ee){var V=A*bt.cos(ee)-D*bt.sin(ee),$=A*bt.sin(ee)+D*bt.cos(ee);return{x:V,y:$}});if(f)d=f[0],L=f[1],b=f[2],I=f[3];else{g=v(e,t,-p),e=g.x,t=g.y,g=v(s,u,-p),s=g.x,u=g.y;var S=(e-s)/2,M=(t-u)/2,P=S*S/(n*n)+M*M/(r*r);P>1&&(P=bt.sqrt(P),n=P*n,r=P*r);var T=n*n,m=r*r,x=(i==a?-1:1)*bt.sqrt(si((T*m-T*M*M-m*S*S)/(T*M*M+m*S*S))),b=x*n*M/r+(e+s)/2,I=x*-r*S/n+(t+u)/2,d=bt.asin(((t-I)/r).toFixed(9)),L=bt.asin(((u-I)/r).toFixed(9));d=e<b?ni-d:d,L=s<b?ni-L:L,d<0&&(d=ni*2+d),L<0&&(L=ni*2+L),a&&d>L&&(d=d-ni*2),!a&&L>d&&(L=L-ni*2)}var w=L-d;if(si(w)>l){var U=L,G=s,Y=u;L=d+l*(a&&L>d?1:-1),s=b+n*bt.cos(L),u=I+r*bt.sin(L),y=ev(s,u,n,r,o,0,a,G,Y,[L,U,b,I])}w=L-d;var q=bt.cos(d),fe=bt.sin(d),Te=bt.cos(L),we=bt.sin(L),ye=bt.tan(w/4),Ue=4/3*n*ye,Xe=4/3*r*ye,ot=[e,t],$e=[e+Ue*fe,t-Xe*q],Ze=[s+Ue*we,u-Xe*Te],gt=[s,u];if($e[0]=2*ot[0]-$e[0],$e[1]=2*ot[1]-$e[1],f)return[$e,Ze,gt].concat(y);y=[$e,Ze,gt].concat(y).join().split(",");for(var xt=[],lt=0,se=y.length;lt<se;lt++)xt[lt]=lt%2?v(y[lt-1],y[lt],p).y:v(y[lt],y[lt+1],p).x;return xt}function Z1(e,t,n,r,o,i,a,s){for(var u=[],f=[[],[]],l,p,y,g,v,S,M,P,T=0;T<2;++T){if(T==0?(p=6*e-12*n+6*o,l=-3*e+9*n-9*o+3*a,y=3*n-3*e):(p=6*t-12*r+6*i,l=-3*t+9*r-9*i+3*s,y=3*r-3*t),si(l)<1e-12){if(si(p)<1e-12)continue;g=-y/p,0<g&&g<1&&u.push(g);continue}M=p*p-4*y*l,P=bt.sqrt(M),!(M<0)&&(v=(-p+P)/(2*l),0<v&&v<1&&u.push(v),S=(-p-P)/(2*l),0<S&&S<1&&u.push(S))}for(var m=u.length,x=m,b;m--;)g=u[m],b=1-g,f[0][m]=b*b*b*e+3*b*b*g*n+3*b*g*g*o+g*g*g*a,f[1][m]=b*b*b*t+3*b*b*g*r+3*b*g*g*i+g*g*g*s;return f[0][x]=e,f[1][x]=t,f[0][x+1]=a,f[1][x+1]=s,f[0].length=f[1].length=x+2,{x0:rr.apply(0,f[0]),y0:rr.apply(0,f[1]),x1:ir.apply(0,f[0]),y1:ir.apply(0,f[1])}}function vp(e){var t=yo(e);if(t.curve)return Us(t.curve);for(var n=K1(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(g,v,S){var M,P;if(!g)return["C",v.x,v.y,v.x,v.y,v.x,v.y];switch(!(g[0]in{T:1,Q:1})&&(v.qx=v.qy=null),g[0]){case"M":v.X=g[1],v.Y=g[2];break;case"A":g=["C"].concat(ev.apply(0,[v.x,v.y].concat(g.slice(1))));break;case"S":S=="C"||S=="S"?(M=v.x*2-v.bx,P=v.y*2-v.by):(M=v.x,P=v.y),g=["C",M,P].concat(g.slice(1));break;case"T":S=="Q"||S=="T"?(v.qx=v.x*2-v.qx,v.qy=v.y*2-v.qy):(v.qx=v.x,v.qy=v.y),g=["C"].concat(yp(v.x,v.y,v.qx,v.qy,g[1],g[2]));break;case"Q":v.qx=g[1],v.qy=g[2],g=["C"].concat(yp(v.x,v.y,g[1],g[2],g[3],g[4]));break;case"L":g=["C"].concat(us(v.x,v.y,g[1],g[2]));break;case"H":g=["C"].concat(us(v.x,v.y,g[1],v.y));break;case"V":g=["C"].concat(us(v.x,v.y,v.x,g[1]));break;case"Z":g=["C"].concat(us(v.x,v.y,v.X,v.Y));break}return g},i=function(g,v){if(g[v].length>7){g[v].shift();for(var S=g[v];S.length;)a[v]="A",g.splice(v++,0,["C"].concat(S.splice(0,6)));g.splice(v,1),l=n.length}},a=[],s="",u="",f=0,l=n.length;f<l;f++){n[f]&&(s=n[f][0]),s!="C"&&(a[f]=s,f&&(u=a[f-1])),n[f]=o(n[f],r,u),a[f]!="A"&&s=="C"&&(a[f]="C"),i(n,f);var p=n[f],y=p.length;r.x=p[y-2],r.y=p[y-1],r.bx=cp(p[y-4])||r.x,r.by=cp(p[y-3])||r.y}return t.curve=Us(n),n}var Q1=Y1;const tv=xo(Q1);function St(e){return Vt(e)&&ma(e,"waypoints")}function vn(e){return Vt(e)&&ma(e,"labelTarget")}function J1(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function fi(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Ye(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function nv(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function ex(e){return fi({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function tx(e){for(var t=e.waypoints,n=t.reduce(function(f,l,p){var y=t[p-1];if(y){var g=f[f.length-1],v=g&&g.endLength||0,S=ix(y,l);f.push({start:y,end:l,startLength:v,endLength:v+S,length:S})}return f},[]),r=n.reduce(function(f,l){return f+l.length},0),o=r/2,i=0,a=n[i];a.endLength<o;)a=n[++i];var s=(o-a.startLength)/a.length,u={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return u}function nt(e){return St(e)?tx(e):ex(e)}function An(e,t,n){n=n||0,Vt(n)||(n={x:n,y:n});var r=Ye(e),o=Ye(t),i=r.bottom+n.y<=o.top,a=r.left-n.x>=o.right,s=r.top-n.y>=o.bottom,u=r.right+n.x<=o.left,f=i?"top":s?"bottom":null,l=u?"left":a?"right":null;return l&&f?f+"-"+l:l||f||"intersect"}function Xf(e,t,n){var r=nx(e,t);return r.length===1||r.length===2&&wa(r[0],r[1])<1?fi(r[0]):r.length>1?(r=Ar(r,function(o){var i=Math.floor(o.t2*100)||1;return i=100-i,i=(i<10?"0":"")+i,o.segment2+"#"+i}),fi(r[n?0:r.length-1])):null}function nx(e,t){return tv(e,t)}function rx(e){e=e.slice();for(var t=0,n,r,o;e[t];)n=e[t],r=e[t-1],o=e[t+1],wa(n,o)===0||bl(r,o,n)?e.splice(t,1):t++;return e}function ix(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ps(e,t){return Math.round(e*t)/t}function mp(e){return Ie(e)?e+"px":e}function ox(e){for(;e.parent;)e=e.parent;return e}function ax(e){e=ue({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Nr(n,{position:"relative",overflow:"hidden",width:mp(e.width),height:mp(e.height)}),t.appendChild(n),n}function rv(e,t,n){const r=Pe("g");Ke(r).add(t);const o=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(r,e.childNodes[o]||null),r}const sx="base",iv=0,ux=1,cx={shape:["x","y","width","height"],connection:["waypoints"]};function Fe(e,t,n,r){this._eventBus=t,this._elementRegistry=r,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}Fe.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];Fe.prototype._init=function(e){const t=this._eventBus,n=this._container=ax(e),r=this._svg=Pe("svg");xe(r,{width:"100%",height:"100%"}),ke(n,r);const o=this._viewport=rv(r,"viewport");e.deferUpdate&&(this._viewboxChanged=By(en(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:r,viewport:o})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};Fe.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};Fe.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=Zy(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};Fe.prototype.getDefaultLayer=function(){return this.getLayer(sx,iv)};Fe.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};Fe.prototype._getChildIndex=function(e){return Pn(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};Fe.prototype._createLayer=function(e,t){typeof t>"u"&&(t=ux);const n=this._getChildIndex(t);return{group:rv(this._viewport,"layer-"+e,n),index:t,visible:!0}};Fe.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,r=t.group,o=t.index;if(t.visible)return r;const i=this._getChildIndex(o);return n.insertBefore(r,n.childNodes[i]||null),t.visible=!0,r};Fe.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(Tt(n),t.visible=!1),n};Fe.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],Tt(t.group))};Fe.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};Fe.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(ox(e))||{}).rootElement:void 0};Fe.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};Fe.prototype._findPlaneForRoot=function(e){return _t(this._planes,function(t){return t.rootElement===e})};Fe.prototype.getContainer=function(){return this._container};Fe.prototype._updateMarker=function(e,t,n){let r;e.id||(e=this._elementRegistry.get(e)),r=this._elementRegistry._elements[e.id],r&&(ne([r.gfx,r.secondaryGfx],function(o){o&&(n?Ke(o).add(t):Ke(o).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:t,add:!!n}))};Fe.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};Fe.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};Fe.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));const n=this.getGraphics(e);return Ke(n).has(t)};Fe.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};Fe.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};Fe.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const r=this.getLayer(n,iv);return this.hideLayer(n),this._addRoot(e,r),this._planes.push({rootElement:e,layer:r}),e};Fe.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};Fe.prototype.setRootElement=function(e){if(e===this._rootElement)return;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};Fe.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};Fe.prototype._addRoot=function(e,t){const n=this._elementRegistry,r=this._eventBus;r.fire("root.add",{element:e}),n.add(e,t),r.fire("root.added",{element:e,gfx:t})};Fe.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};Fe.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=cx[e];if(!_a(n,function(o){return typeof t[o]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};Fe.prototype._setParent=function(e,t,n){Wn(t.children,e,n),e.parent=t};Fe.prototype._addElement=function(e,t,n,r){n=n||this.getRootElement();const o=this._eventBus,i=this._graphicsFactory;this._ensureValid(e,t),o.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,r);const a=i.create(e,t,r);return this._elementRegistry.add(t,a),i.update(e,t,a),o.fire(e+".added",{element:t,gfx:a}),t};Fe.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};Fe.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};Fe.prototype._removeElement=function(e,t){const n=this._elementRegistry,r=this._graphicsFactory,o=this._eventBus;if(e=n.get(e.id||e),!!e)return o.fire(t+".remove",{element:e}),r.remove(e),qn(e.parent&&e.parent.children,e),e.parent=null,o.fire(t+".removed",{element:e}),n.remove(e),e};Fe.prototype.removeShape=function(e){return this._removeElement(e,"shape")};Fe.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};Fe.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};Fe.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};Fe.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};Fe.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return this._cachedViewbox;const t=this._viewport,n=this.getSize();let r,o,i,a,s,u,f;if(e)this._changeViewbox(function(){s=Math.min(n.width/e.width,n.height/e.height);const l=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);fa(t,l)});else return i=this._rootElement?this.getActiveLayer():null,r=i&&i.getBBox()||{},a=fa(t),o=a?a.matrix:h1(),s=Ps(o.a,1e3),u=Ps(-o.e||0,1e3),f=Ps(-o.f||0,1e3),e=this._cachedViewbox={x:u?u/s:0,y:f?f/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:r.width||0,height:r.height||0,x:r.x||0,y:r.y||0},outer:n},e;return e};Fe.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=ue({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),ov(t,n)}),{x:n.e,y:n.f}};Fe.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const r=this.findRoot(e);if(r!==this.getRootElement()&&this.setRootElement(r),r===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const o=Ht(e),i=Ye(o),a=this.viewbox(),s=this.zoom();let u,f;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const l=Ye(a);if(!(o.width<a.width&&o.height<a.height))u=o.x-a.x,f=o.y-a.y;else{const y=Math.max(0,i.right-l.right),g=Math.min(0,i.left-l.left),v=Math.max(0,i.bottom-l.bottom),S=Math.min(0,i.top-l.top);u=y||g,f=v||S}this.scroll({dx:-u*s,dy:-f*s})};Fe.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,r;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),r=this._setZoom(e,t)}),Ps(r.a,1e3)};function ov(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Fe.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,r=t.inner;let o,i;return r.x>=0&&r.y>=0&&r.x+r.width<=n.width&&r.y+r.height<=n.height&&!e?i={x:0,y:0,width:Math.max(r.width+r.x,n.width),height:Math.max(r.height+r.y,n.height)}:(o=Math.min(1,n.width/r.width,n.height/r.height),i={x:r.x+(e?r.width/2-n.width/o/2:0),y:r.y+(e?r.height/2-n.height/o/2:0),width:n.width/o,height:n.height/o}),this.viewbox(i),this.viewbox(!1).scale};Fe.prototype._setZoom=function(e,t){const n=this._svg,r=this._viewport,o=n.createSVGMatrix(),i=n.createSVGPoint();let a,s,u,f,l;u=r.getCTM();const p=u.a;return t?(a=ue(i,t),s=a.matrixTransform(u.inverse()),f=o.translate(s.x,s.y).scale(1/p*e).translate(-s.x,-s.y),l=u.multiply(f)):l=o.scale(e),ov(this._viewport,l),l};Fe.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};Fe.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const r=n.x*t.scale-t.x*t.scale,o=n.y*t.scale-t.y*t.scale,i=n.width*t.scale,a=n.height*t.scale;return{x:r,y:o,width:i,height:a}};Fe.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var vo="data-element-id";function mn(e){this._elements={},this._eventBus=e}mn.$inject=["eventBus"];mn.prototype.add=function(e,t,n){var r=e.id;this._validateId(r),xe(t,vo,r),n&&xe(n,vo,r),this._elements[r]={element:e,gfx:t,secondaryGfx:n}};mn.prototype.remove=function(e){var t=this._elements,n=e.id||e,r=n&&t[n];r&&(xe(r.gfx,vo,""),r.secondaryGfx&&xe(r.secondaryGfx,vo,""),delete t[n])};mn.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),r=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,r)};mn.prototype.updateGraphics=function(e,t,n){var r=e.id||e,o=this._elements[r];return n?o.secondaryGfx=t:o.gfx=t,t&&xe(t,vo,r),t};mn.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&xe(e,vo);var n=this._elements[t];return n&&n.element};mn.prototype.filter=function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(n)}),t};mn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),r=0;r<n.length;r++){var o=n[r],i=t[o],a=i.element,s=i.gfx;if(e(a,s))return a}};mn.prototype.getAll=function(){return this.filter(function(e){return e})};mn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var r=t[n],o=r.element,i=r.gfx;return e(o,i)})};mn.prototype.getGraphics=function(e,t){var n=e.id||e,r=this._elements[n];return r&&(t?r.secondaryGfx:r.gfx)};mn.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var Sl={exports:{}},hu={};function fx(e,t,n,r){var o=n.inverse;return Object.defineProperty(e,"remove",{value:function(i){var a=this.indexOf(i);return a!==-1&&(this.splice(a,1),t.unset(i,o,r)),i}}),Object.defineProperty(e,"contains",{value:function(i){return this.indexOf(i)!==-1}}),Object.defineProperty(e,"add",{value:function(i,a){var s=this.indexOf(i);if(typeof a>"u"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,i),s===-1&&t.set(i,o,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function lx(e){return e.__refs_collection===!0}hu.extend=fx;hu.isExtended=lx;var av=hu;function hx(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function sv(e,t,n){var r=av.extend(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach(function(o){e.set(o,t.inverse,n)})}function px(e,t,n){var r=t.inverse,o=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return o},set:function(i){if(i!==o){var a=o;o=null,a&&e.unset(a,r,n),o=i,e.set(o,r,n)}}})}function gi(e,t){if(!(this instanceof gi))return new gi(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}gi.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?sv(this,t,e):px(this,t,e)};gi.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return av.isExtended(n)||sv(this,t,e),n};gi.prototype.ensureBound=function(e,t){hx(e,t)||this.bind(e,t)};gi.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};gi.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var dx=gi;Sl.exports=dx;Sl.exports.Collection=hu;var gx=Sl.exports;const wo=xo(gx);var Cl=new wo({name:"children",enumerable:!0,collection:!0},{name:"parent"}),uv=new wo({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),_p=new wo({name:"attachers",collection:!0},{name:"host"}),cv=new wo({name:"outgoing",collection:!0},{name:"source"}),fv=new wo({name:"incoming",collection:!0},{name:"target"});function Eo(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Cl.bind(this,"parent"),uv.bind(this,"labels"),cv.bind(this,"outgoing"),fv.bind(this,"incoming")}function Ea(){Eo.call(this),Cl.bind(this,"children"),_p.bind(this,"host"),_p.bind(this,"attachers")}ct(Ea,Eo);function lv(){Eo.call(this),Cl.bind(this,"children")}ct(lv,Ea);function hv(){Ea.call(this),uv.bind(this,"labelTarget")}ct(hv,Ea);function pv(){Eo.call(this),cv.bind(this,"source"),fv.bind(this,"target")}ct(pv,Eo);var yx={connection:pv,shape:Ea,label:hv,root:lv};function vx(e,t){var n=yx[e];if(!n)throw new Error("unknown type: <"+e+">");return ue(new n,t)}function mx(e){return e instanceof Eo}function kr(){this._uid=12}kr.prototype.createRoot=function(e){return this.create("root",e)};kr.prototype.createLabel=function(e){return this.create("label",e)};kr.prototype.createShape=function(e){return this.create("shape",e)};kr.prototype.createConnection=function(e){return this.create("connection",e)};kr.prototype.create=function(e,t){return t=ue({},t||{}),t.id||(t.id=e+"_"+this._uid++),vx(e,t)};var Ws="__fn",dv=1e3,_x=Array.prototype.slice;function sn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}sn.prototype.on=function(e,t,n,r){if(e=ze(e)?e:[e],Wt(t)&&(r=n,n=t,t=dv),!Ie(t))throw new Error("priority must be a number");var o=n;r&&(o=en(n,r),o[Ws]=n[Ws]||n);var i=this;e.forEach(function(a){i._addListener(a,{priority:t,callback:o,next:null})})};sn.prototype.once=function(e,t,n,r){var o=this;if(Wt(t)&&(r=n,n=t,t=dv),!Ie(t))throw new Error("priority must be a number");function i(){i.__isTomb=!0;var a=n.apply(r,arguments);return o.off(e,i),a}i[Ws]=n,this.on(e,t,i)};sn.prototype.off=function(e,t){e=ze(e)?e:[e];var n=this;e.forEach(function(r){n._removeListener(r,t)})};sn.prototype.createEvent=function(e){var t=new ba;return t.init(e),t};sn.prototype.fire=function(e,t){var n,r,o,i;if(i=_x.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(r=this._listeners[e],!!r){t instanceof ba?n=t:n=this.createEvent(t),i[0]=n;var a=n.type;e!==a&&(n.type=e);try{o=this._invokeListeners(n,i,r)}finally{e!==a&&(n.type=a)}return o===void 0&&n.defaultPrevented&&(o=!1),o}};sn.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};sn.prototype._destroy=function(){this._listeners={}};sn.prototype._invokeListeners=function(e,t,n){for(var r;n&&!e.cancelBubble;)r=this._invokeListener(e,t,n),n=n.next;return r};sn.prototype._invokeListener=function(e,t,n){var r;if(n.callback.__isTomb)return r;try{r=xx(n.callback,t),r!==void 0&&(e.returnValue=r,e.stopPropagation()),r===!1&&e.preventDefault()}catch(o){if(!this.handleError(o))throw console.error("unhandled error in event listener",o),o}return r};sn.prototype._addListener=function(e,t){var n=this._getListeners(e),r;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,r?r.next=t:this._setListeners(e,t);return}r=n,n=n.next}r.next=t};sn.prototype._getListeners=function(e){return this._listeners[e]};sn.prototype._setListeners=function(e,t){this._listeners[e]=t};sn.prototype._removeListener=function(e,t){var n=this._getListeners(e),r,o,i;if(!t){this._setListeners(e,null);return}for(;n;)r=n.next,i=n.callback,(i===t||i[Ws]===t)&&(o?o.next=r:this._setListeners(e,r)),o=n,n=r};function ba(){}ba.prototype.stopPropagation=function(){this.cancelBubble=!0};ba.prototype.preventDefault=function(){this.defaultPrevented=!0};ba.prototype.init=function(e){ue(this,e||{})};function xx(e,t){return e.apply(null,t)}function zs(e){return e.childNodes[0]}function wx(e){return e.parentNode.childNodes[1]}function Ex(e,t,n,r,o){var i=ra();i.setTranslate(t,n);var a=ra();a.setRotate(r||0,0,0);var s=ra();s.setScale(o||1,o||1),fa(e,[i,a,s])}function Cn(e,t,n){var r=ra();r.setTranslate(t,n),fa(e,r)}function bx(e,t){var n=ra();n.setRotate(t,0,0),fa(e,n)}function _n(e,t){this._eventBus=e,this._elementRegistry=t}_n.$inject=["eventBus","elementRegistry"];_n.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=wx(t),n||(n=Pe("g"),Ke(n).add("djs-children"),ke(t.parentNode,n))):n=t,n};_n.prototype._clear=function(e){var t=zs(e);return vl(t),t};_n.prototype._createContainer=function(e,t,n,r){var o=Pe("g");Ke(o).add("djs-group"),typeof n<"u"?gv(o,t,t.childNodes[n]):ke(t,o);var i=Pe("g");Ke(i).add("djs-element"),Ke(i).add("djs-"+e),r&&Ke(i).add("djs-frame"),ke(o,i);var a=Pe("g");return Ke(a).add("djs-visual"),ke(i,a),i};_n.prototype.create=function(e,t,n){var r=this._getChildrenContainer(t.parent);return this._createContainer(e,r,n,Qy(t))};_n.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,r;r=Pn(e,function(o,i){return i.parent&&(o[i.parent.id]=i.parent),o},{}),ne(r,function(o){var i=o.children;if(i){var a=t._getChildrenContainer(o);ne(i.slice().reverse(),function(s){var u=n.getGraphics(s);gv(u.parentNode,a)})}})};_n.prototype.drawShape=function(e,t){var n=this._eventBus;return n.fire("render.shape",{gfx:e,element:t})};_n.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};_n.prototype.drawConnection=function(e,t){var n=this._eventBus;return n.fire("render.connection",{gfx:e,element:t})};_n.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};_n.prototype.update=function(e,t,n){if(t.parent){var r=this._clear(n);if(e==="shape")this.drawShape(r,t),Cn(n,t.x,t.y);else if(e==="connection")this.drawConnection(r,t);else throw new Error("unknown type: "+e);t.hidden?xe(n,"display","none"):xe(n,"display","block")}};_n.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Tt(t.parentNode)};function gv(e,t,n){var r=n||t.firstChild;e!==r&&t.insertBefore(e,r)}const Tx={__depends__:[B1],__init__:["canvas"],canvas:["type",Fe],elementRegistry:["type",mn],elementFactory:["type",kr],eventBus:["type",sn],graphicsFactory:["type",_n]};function Sx(e){var t=new Xy(e);return t.init(),t}function Cx(e){e=e||{};var t={config:["value",e]},n=[t,Tx].concat(e.modules||[]);return Sx(n)}function bo(e,t){this._injector=t=t||Cx(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}bo.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};bo.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Ml(){}Ml.prototype.get=function(e){return this.$model.properties.get(this,e)};Ml.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function yv(e,t){this.model=e,this.properties=t}yv.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create(Ml.prototype);ne(e.properties,function(a){!a.isMany&&a.default!==void 0&&(r[a.name]=a.default)}),n.defineModel(r,t),n.defineDescriptor(r,e);var o=e.ns.name;function i(a){n.define(this,"$type",{value:o,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),ne(a,en(function(s,u){this.set(u,s)},this))}return i.prototype=r,i.hasType=r.$instanceOf=this.model.hasType,n.defineModel(i,t),n.defineDescriptor(i,e),i};var Mx={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},vv={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Rl(e,t){var n=vv[e];return n?n(t):t}function Gf(e){return!!Mx[e]}function mv(e){return!!vv[e]}function Kt(e,t){var n=e.split(/:/),r,o;if(n.length===1)r=e,o=t;else if(n.length===2)r=n[1],o=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(o?o+":":"")+r,{name:e,prefix:o,localName:r}}function xn(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}xn.prototype.build=function(){return Or(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};xn.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var r=this.properties;t!==void 0?r.splice(t,0,e):r.push(e)};xn.prototype.replaceProperty=function(e,t,n){var r=e.ns,o=this.properties,i=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=o.indexOf(e);if(s===-1)throw new Error("property <"+r.name+"> not found in property list");o.splice(s,1),this.addProperty(t,n?void 0:s,a),i[r.name]=i[r.localName]=t};xn.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,o=t.split("#"),i=Kt(o[0],r),a=Kt(o[1],i.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+a+"> not found");delete e.redefines};xn.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e};xn.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};xn.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};xn.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};xn.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};xn.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};xn.prototype.hasProperty=function(e){return this.propertiesByName[e]};xn.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,r=this.allTypes,o=e.name;o in n||(ne(e.properties,en(function(i){i=ue({},i,{name:i.ns.localName,inherited:t}),Object.defineProperty(i,"definedBy",{value:e});var a=i.replaces,s=i.redefines;a||s?this.redefineProperty(i,a||s,a):(i.isBody&&this.setBodyProperty(i),i.isId&&this.setIdProperty(i),this.addProperty(i))},this)),r.push(e),n[o]=e)};function xi(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,ne(e,en(this.registerPackage,this))}xi.prototype.getPackage=function(e){return this.packageMap[e]};xi.prototype.getPackages=function(){return this.packages};xi.prototype.registerPackage=function(e){e=ue({},e);var t=this.packageMap;xp(t,e,"prefix"),xp(t,e,"uri"),ne(e.types,en(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};xi.prototype.registerType=function(e,t){e=ue({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:ue(e.meta||{})});var n=Kt(e.name,t.prefix),r=n.name,o={};ne(e.properties,en(function(i){var a=Kt(i.name,n.prefix),s=a.name;Gf(i.type)||(i.type=Kt(i.type,a.prefix).name),ue(i,{ns:a,name:s}),o[s]=i},this)),ue(e,{ns:n,name:r,propertiesByName:o}),ne(e.extends,en(function(i){var a=Kt(i,n.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(r)},this)),this.definePackage(e,t),this.typeMap[r]=e};xi.prototype.mapTypes=function(e,t,n){var r=Gf(e.name)?{name:e.name}:this.typeMap[e.name],o=this;function i(u,f){var l=Kt(u,Gf(u)?"":e.prefix);o.mapTypes(l,t,f)}function a(u){return i(u,!0)}function s(u){return i(u,!1)}if(!r)throw new Error("unknown type <"+e.name+">");ne(r.superClass,n?a:s),t(r,!n),ne(r.traits,a)};xi.prototype.getEffectiveDescriptor=function(e){var t=Kt(e),n=new xn(t);this.mapTypes(t,function(o,i){n.addTrait(o,i)});var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r};xi.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function xp(e,t,n){var r=t[n];if(r in e)throw new Error("package with "+n+" <"+r+"> already defined")}function Xi(e){this.model=e}Xi.prototype.set=function(e,t,n){if(!Rn(t)||!t.length)throw new TypeError("property name must be a non-empty string");var r=this.getProperty(e,t),o=r&&r.name;Rx(n)?r?delete e[o]:delete e.$attrs[Yf(t)]:r?o in e?e[o]=n:_v(e,r,n):e.$attrs[Yf(t)]=n};Xi.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[Yf(t)];var r=n.name;return!e[r]&&n.isMany&&_v(e,n,[]),e[r]};Xi.prototype.define=function(e,t,n){if(!n.writable){var r=n.value;n=ue({},n,{get:function(){return r}}),delete n.value}Object.defineProperty(e,t,n)};Xi.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Xi.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Xi.prototype.getProperty=function(e,t){var n=this.model,r=n.getPropertyDescriptor(e,t);if(r)return r;if(t.includes(":"))return null;const o=n.config.strict;if(typeof o<"u"){const i=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(o)throw i;typeof console<"u"&&console.warn(i)}return null};function Rx(e){return typeof e>"u"}function _v(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Yf(e){return e.replace(/^:/,"")}function On(e,t={}){this.properties=new Xi(this),this.factory=new yv(this,this.properties),this.registry=new xi(e,this.properties),this.typeCache={},this.config=t}On.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};On.prototype.getType=function(e){var t=this.typeCache,n=Rn(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r};On.prototype.createAny=function(e,t,n){var r=Kt(e),o={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){z_(this,[a],s)}},i={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(o,i),this.properties.defineModel(o,this),this.properties.define(o,"get",{enumerable:!1,writable:!0}),this.properties.define(o,"set",{enumerable:!1,writable:!0}),this.properties.define(o,"$parent",{enumerable:!1,writable:!0}),this.properties.define(o,"$instanceOf",{enumerable:!1,writable:!0}),ne(n,function(a,s){Vt(a)&&a.value!==void 0?o[a.name]=a.value:o[s]=a}),o};On.prototype.getPackage=function(e){return this.registry.getPackage(e)};On.prototype.getPackages=function(){return this.registry.getPackages()};On.prototype.getElementDescriptor=function(e){return e.$descriptor};On.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};On.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};On.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var wp=String.fromCharCode,Px=Object.prototype.hasOwnProperty,Ax=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,oa={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(oa).forEach(function(e){oa[e.toUpperCase()]=oa[e]});function Ox(e,t,n,r){return r?Px.call(oa,r)?oa[r]:"&"+r+";":wp(t||parseInt(n,16))}function Fi(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(Ax,Ox):e}var Dx="http://www.w3.org/2001/XMLSchema-instance",Nx="xsi",Ep="xsi:type",bp="non-whitespace outside of root node";function lo(e){return new Error(e)}function Tp(e){return"missing namespace for prefix <"+e+">"}function cs(e){return{get:e,enumerable:!0}}function Ix(e){var t={},n;for(n in e)t[n]=e[n];return t}function Kf(e){return e+"$uri"}function Lx(e){var t={},n,r;for(n in e)r=e[n],t[r]=r,t[Kf(r)]=n;return t}function Sp(){return{line:0,column:0}}function kx(e){throw e}function xv(e){if(!this)return new xv(e);var t=e&&e.proxy,n,r,o,i,a=kx,s,u,f,l,p=Sp,y=!1,g=!1,v=null,S=!1,M;function P(x){x instanceof Error||(x=lo(x)),v=x,a(x,p)}function T(x){s&&(x instanceof Error||(x=lo(x)),s(x,p))}this.on=function(x,b){if(typeof b!="function")throw lo("required args <name, cb>");switch(x){case"openTag":r=b;break;case"text":n=b;break;case"closeTag":o=b;break;case"error":a=b;break;case"warn":s=b;break;case"cdata":i=b;break;case"attention":l=b;break;case"question":f=b;break;case"comment":u=b;break;default:throw lo("unsupported event: "+x)}return this},this.ns=function(x){if(typeof x>"u"&&(x={}),typeof x!="object")throw lo("required args <nsMap={}>");var b={},I;for(I in x)b[I]=x[I];return b[Dx]=Nx,g=!0,M=b,this},this.parse=function(x){if(typeof x!="string")throw lo("required args <xml=string>");return v=null,m(x),p=Sp,S=!1,v},this.stop=function(){S=!0};function m(x){var b=g?[]:null,I=g?Lx(M):null,d,L=[],w=0,U=!1,G=!1,Y=0,q=0,fe,Te,we,ye,Ue,Xe,ot,$e,Ze,gt="",xt=0,lt;function se(){if(lt!==null)return lt;var D,ee,V,$=g&&I.xmlns,H=g&&y?[]:null,re=xt,ve=gt,Le=ve.length,F,C,R,z,Q,he={},me={},Oe,Ee,de;e:for(;re<Le;re++)if(Oe=!1,Ee=ve.charCodeAt(re),!(Ee===32||Ee<14&&Ee>8)){for((Ee<65||Ee>122||Ee>90&&Ee<97)&&Ee!==95&&Ee!==58&&(T("illegal first char attribute name"),Oe=!0),de=re+1;de<Le;de++)if(Ee=ve.charCodeAt(de),!(Ee>96&&Ee<123||Ee>64&&Ee<91||Ee>47&&Ee<59||Ee===46||Ee===45||Ee===95)){if(Ee===32||Ee<14&&Ee>8){T("missing attribute value"),re=de;continue e}if(Ee===61)break;T("illegal attribute name char"),Oe=!0}if(Q=ve.substring(re,de),Q==="xmlns:xmlns"&&(T("illegal declaration of xmlns"),Oe=!0),Ee=ve.charCodeAt(de+1),Ee===34)de=ve.indexOf('"',re=de+2),de===-1&&(de=ve.indexOf("'",re),de!==-1&&(T("attribute value quote missmatch"),Oe=!0));else if(Ee===39)de=ve.indexOf("'",re=de+2),de===-1&&(de=ve.indexOf('"',re),de!==-1&&(T("attribute value quote missmatch"),Oe=!0));else for(T("missing attribute value quotes"),Oe=!0,de=de+1;de<Le&&(Ee=ve.charCodeAt(de+1),!(Ee===32||Ee<14&&Ee>8));de++);for(de===-1&&(T("missing closing quotes"),de=Le,Oe=!0),Oe||(R=ve.substring(re,de)),re=de;de+1<Le&&(Ee=ve.charCodeAt(de+1),!(Ee===32||Ee<14&&Ee>8));de++)re===de&&(T("illegal character after attribute end"),Oe=!0);if(re=de+1,Oe)continue e;if(Q in me){T("attribute <"+Q+"> already defined");continue}if(me[Q]=!0,!g){he[Q]=R;continue}if(y){if(C=Q==="xmlns"?"xmlns":Q.charCodeAt(0)===120&&Q.substr(0,6)==="xmlns:"?Q.substr(6):null,C!==null){if(D=Fi(R),ee=Kf(C),z=M[D],!z){if(C==="xmlns"||ee in I&&I[ee]!==D)do z="ns"+w++;while(typeof I[z]<"u");else z=C;M[D]=z}I[C]!==z&&(F||(I=Ix(I),F=!0),I[C]=z,C==="xmlns"&&(I[Kf(z)]=D,$=z),I[ee]=D),he[Q]=R;continue}H.push(Q,R);continue}if(Ee=Q.indexOf(":"),Ee===-1){he[Q]=R;continue}if(!(V=I[Q.substring(0,Ee)])){T(Tp(Q.substring(0,Ee)));continue}Q=$===V?Q.substr(Ee+1):V+Q.substr(Ee),Q===Ep&&(Ee=R.indexOf(":"),Ee!==-1?(V=R.substring(0,Ee),V=I[V]||V,R=V+R.substring(Ee)):R=$+":"+R),he[Q]=R}if(y)for(re=0,Le=H.length;re<Le;re++){if(Q=H[re++],R=H[re],Ee=Q.indexOf(":"),Ee!==-1){if(!(V=I[Q.substring(0,Ee)])){T(Tp(Q.substring(0,Ee)));continue}Q=$===V?Q.substr(Ee+1):V+Q.substr(Ee),Q===Ep&&(Ee=R.indexOf(":"),Ee!==-1?(V=R.substring(0,Ee),V=I[V]||V,R=V+R.substring(Ee)):R=$+":"+R)}he[Q]=R}return lt=he}function A(){for(var D=/(\r\n|\r|\n)/g,ee=0,V=0,$=0,H=q,re,ve;Y>=$&&(re=D.exec(x),!(!re||(H=re[0].length+re.index,H>Y)));)ee+=1,$=H;return Y==-1?(V=H,ve=x.substring(q)):q===0?ve=x.substring(q,Y):(V=Y-$,ve=q==-1?x.substring(Y):x.substring(Y,q+1)),{data:ve,line:ee,column:V}}for(p=A,t&&(Ze=Object.create({},{name:cs(function(){return ot}),originalName:cs(function(){return $e}),attrs:cs(se),ns:cs(function(){return I})}));q!==-1;){if(x.charCodeAt(q)===60?Y=q:Y=x.indexOf("<",q),Y===-1){if(L.length)return P("unexpected end of file");if(q===0)return P("missing start tag");q<x.length&&x.substring(q).trim()&&T(bp);return}if(q!==Y){if(L.length){if(n&&(n(x.substring(q,Y),Fi,p),S))return}else if(x.substring(q,Y).trim()&&(T(bp),S))return}if(ye=x.charCodeAt(Y+1),ye===33){if(we=x.charCodeAt(Y+2),we===91&&x.substr(Y+3,6)==="CDATA["){if(q=x.indexOf("]]>",Y),q===-1)return P("unclosed cdata");if(i&&(i(x.substring(Y+9,q),p),S))return;q+=3;continue}if(we===45&&x.charCodeAt(Y+3)===45){if(q=x.indexOf("-->",Y),q===-1)return P("unclosed comment");if(u&&(u(x.substring(Y+4,q),Fi,p),S))return;q+=3;continue}}if(ye===63){if(q=x.indexOf("?>",Y),q===-1)return P("unclosed question");if(f&&(f(x.substring(Y,q+2),p),S))return;q+=2;continue}for(fe=Y+1;;fe++){if(Ue=x.charCodeAt(fe),isNaN(Ue))return q=-1,P("unclosed tag");if(Ue===34)we=x.indexOf('"',fe+1),fe=we!==-1?we:fe;else if(Ue===39)we=x.indexOf("'",fe+1),fe=we!==-1?we:fe;else if(Ue===62){q=fe;break}}if(ye===33){if(l&&(l(x.substring(Y,q+1),Fi,p),S))return;q+=1;continue}if(lt={},ye===47){if(U=!1,G=!0,!L.length)return P("missing open tag");if(fe=ot=L.pop(),we=Y+2+fe.length,x.substring(Y+2,we)!==fe)return P("closing tag mismatch");for(;we<q;we++)if(ye=x.charCodeAt(we),!(ye===32||ye>8&&ye<14))return P("close tag")}else{if(x.charCodeAt(q-1)===47?(fe=ot=x.substring(Y+1,q-1),U=!0,G=!0):(fe=ot=x.substring(Y+1,q),U=!0,G=!1),!(ye>96&&ye<123||ye>64&&ye<91||ye===95||ye===58))return P("illegal first char nodeName");for(we=1,Te=fe.length;we<Te;we++)if(ye=fe.charCodeAt(we),!(ye>96&&ye<123||ye>64&&ye<91||ye>47&&ye<59||ye===45||ye===95||ye==46)){if(ye===32||ye<14&&ye>8){ot=fe.substring(0,we),lt=null;break}return P("invalid nodeName")}G||L.push(ot)}if(g){if(d=I,U&&(G||b.push(d),lt===null&&(y=fe.indexOf("xmlns",we)!==-1)&&(xt=we,gt=fe,se(),y=!1)),$e=ot,ye=ot.indexOf(":"),ye!==-1){if(Xe=I[ot.substring(0,ye)],!Xe)return P("missing namespace on <"+$e+">");ot=ot.substr(ye+1)}else Xe=I.xmlns;Xe&&(ot=Xe+":"+ot)}if(U&&(xt=we,gt=fe,r&&(t?r(Ze,Fi,G,p):r(ot,se,Fi,G,p),S)))return;if(G){if(o&&(o(t?Ze:ot,Fi,U,p),S))return;g&&(U?I=d:I=b.pop())}q+=1}}}function wv(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Bx={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},pu="xsi:type";function Ev(e){return e.xml&&e.xml.serialize}function bv(e){return Ev(e)===pu}function Fx(e){return Ev(e)==="property"}function jx(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Tv(e,t){return wv(t)?e.prefix+":"+jx(e.localName):e.name}function $x(e,t){var n=e.name,r=e.localName,o=t.xml&&t.xml.typePrefix;return o&&r.indexOf(o)===0?e.prefix+":"+r.slice(o.length):n}function Hx(e,t){var n=Kt(e),r=t.getPackage(n.prefix);return $x(n,r)}function yi(e){return new Error(e)}function Mr(e){return e.$descriptor}function Ux(e){ue(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw yi("expected element");var n=this.elementsById,r=Mr(t),o=r.idProperty,i;if(o&&(i=t.get(o.name),i)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(i))throw new Error("illegal ID <"+i+">");if(n[i])throw yi("duplicate ID <"+i+">");n[i]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Ta(){}Ta.prototype.handleEnd=function(){};Ta.prototype.handleText=function(){};Ta.prototype.handleNode=function(){};function Pl(){}Pl.prototype=Object.create(Ta.prototype);Pl.prototype.handleNode=function(){return this};function To(){}To.prototype=Object.create(Ta.prototype);To.prototype.handleText=function(e){this.body=(this.body||"")+e};function Sa(e,t){this.property=e,this.context=t}Sa.prototype=Object.create(To.prototype);Sa.prototype.handleNode=function(e){if(this.element)throw yi("expected no sub nodes");return this.element=this.createReference(e),this};Sa.prototype.handleEnd=function(){this.element.id=this.body};Sa.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Al(e,t){this.element=t,this.propertyDesc=e}Al.prototype=Object.create(To.prototype);Al.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Rl(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function du(){}du.prototype=Object.create(To.prototype);du.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function Zt(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}Zt.prototype=Object.create(du.prototype);Zt.prototype.addReference=function(e){this.context.addReference(e)};Zt.prototype.handleText=function(e){var t=this.element,n=Mr(t),r=n.bodyProperty;if(!r)throw yi("unexpected body text <"+e+">");To.prototype.handleText.call(this,e)};Zt.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Mr(t),r=n.bodyProperty;r&&e!==void 0&&(e=Rl(r.type,e),t.set(r.name,e))};Zt.prototype.createElement=function(e){var t=e.attributes,n=this.type,r=Mr(n),o=this.context,i=new n({}),a=this.model,s;return ne(t,function(u,f){var l=r.propertiesByName[f],p;l&&l.isReference?l.isMany?(p=u.split(" "),ne(p,function(y){o.addReference({element:i,property:l.ns.name,id:y})})):o.addReference({element:i,property:l.ns.name,id:u}):(l?u=Rl(l.type,u):f!=="xmlns"&&(s=Kt(f,r.ns.prefix),a.getPackage(s.prefix)&&o.addWarning({message:"unknown attribute <"+f+">",element:i,property:f,value:u})),i.set(f,u))}),i};Zt.prototype.getPropertyForNode=function(e){var t=e.name,n=Kt(t),r=this.type,o=this.model,i=Mr(r),a=n.name,s=i.propertiesByName[a],u,f;if(s&&!s.isAttr)return bv(s)&&(u=e.attributes[pu],u)?(u=Hx(u,o),f=o.getType(u),ue({},s,{effectiveType:Mr(f).name})):s;var l=o.getPackage(n.prefix);if(l){if(u=Tv(n,l),f=o.getType(u),s=_t(i.properties,function(p){return!p.isVirtual&&!p.isReference&&!p.isAttribute&&f.hasType(p.type)}),s)return ue({},s,{effectiveType:Mr(f).name})}else if(s=_t(i.properties,function(p){return!p.isReference&&!p.isAttribute&&p.type==="Element"}),s)return s;throw yi("unrecognized element <"+n.name+">")};Zt.prototype.toString=function(){return"ElementDescriptor["+Mr(this.type).name+"]"};Zt.prototype.valueHandler=function(e,t){return new Al(e,t)};Zt.prototype.referenceHandler=function(e){return new Sa(e,this.context)};Zt.prototype.handler=function(e){return e==="Element"?new mo(this.model,e,this.context):new Zt(this.model,e,this.context)};Zt.prototype.handleChild=function(e){var t,n,r,o;if(t=this.getPropertyForNode(e),r=this.element,n=t.effectiveType||t.type,mv(n))return this.valueHandler(t,r);t.isReference?o=this.referenceHandler(t).handleNode(e):o=this.handler(n).handleNode(e);var i=o.element;return i!==void 0&&(t.isMany?r.get(t.name).push(i):r.set(t.name,i),t.isReference?(ue(i,{element:r}),this.context.addReference(i)):i.$parent=r),o};function Ol(e,t,n){Zt.call(this,e,t,n)}Ol.prototype=Object.create(Zt.prototype);Ol.prototype.createElement=function(e){var t=e.name,n=Kt(t),r=this.model,o=this.type,i=r.getPackage(n.prefix),a=i&&Tv(n,i)||t;if(!o.hasType(a))throw yi("unexpected element <"+e.originalName+">");return Zt.prototype.createElement.call(this,e)};function mo(e,t,n){this.model=e,this.context=n}mo.prototype=Object.create(du.prototype);mo.prototype.createElement=function(e){var t=e.name,n=Kt(t),r=n.prefix,o=e.ns[r+"$uri"],i=e.attributes;return this.model.createAny(t,o,i)};mo.prototype.handleChild=function(e){var t=new mo(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element,o;return r!==void 0&&(o=n.$children=n.$children||[],o.push(r),r.$parent=n),t};mo.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Dl(e){e instanceof On&&(e={model:e}),ue(this,{lax:!1},e)}Dl.prototype.fromXML=function(e,t,n){var r=t.rootHandler;t instanceof Zt?(r=t,t={}):typeof t=="string"?(r=this.handler(t),t={}):typeof r=="string"&&(r=this.handler(r));var o=this.model,i=this.lax,a=new Ux(ue({},t,{rootHandler:r})),s=new xv({proxy:!0}),u=qx();r.context=a,u.push(r);function f(b,I,d){var L=I(),w=L.line,U=L.column,G=L.data;G.charAt(0)==="<"&&G.indexOf(" ")!==-1&&(G=G.slice(0,G.indexOf(" "))+">");var Y="unparsable content "+(G?G+" ":"")+`detected
	line: `+w+`
	column: `+U+`
	nested error: `+b.message;if(d)return a.addWarning({message:Y,error:b}),!0;throw yi(Y)}function l(b,I){return f(b,I,!0)}function p(){var b=a.elementsById,I=a.references,d,L;for(d=0;L=I[d];d++){var w=L.element,U=b[L.id],G=Mr(w).propertiesByName[L.property];if(U||a.addWarning({message:"unresolved reference <"+L.id+">",element:L.element,property:L.property,value:L.id}),G.isMany){var Y=w.get(G.name),q=Y.indexOf(L);q===-1&&(q=Y.length),U?Y[q]=U:Y.splice(q,1)}else w.set(G.name,U)}}function y(){u.pop().handleEnd()}var g=/^<\?xml /i,v=/ encoding="([^"]+)"/i,S=/^utf-8$/i;function M(b){if(g.test(b)){var I=v.exec(b),d=I&&I[1];!d||S.test(d)||a.addWarning({message:"unsupported document encoding <"+d+">, falling back to UTF-8"})}}function P(b,I){var d=u.peek();try{u.push(d.handleNode(b))}catch(L){f(L,I,i)&&u.push(new Pl)}}function T(b,I){try{u.peek().handleText(b)}catch(d){l(d,I)}}function m(b,I){b.trim()&&T(b,I)}var x=o.getPackages().reduce(function(b,I){return b[I.uri]=I.prefix,b},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(x).on("openTag",function(b,I,d,L){var w=b.attrs||{},U=Object.keys(w).reduce(function(Y,q){var fe=I(w[q]);return Y[q]=fe,Y},{}),G={name:b.name,originalName:b.originalName,attributes:U,ns:b.ns};P(G,L)}).on("question",M).on("closeTag",y).on("cdata",T).on("text",function(b,I,d){m(I(b),d)}).on("error",f).on("warn",l),new Promise(function(b,I){var d;try{s.parse(e),p()}catch(Y){d=Y}var L=r.element;!d&&!L&&(d=yi("failed to parse document as <"+r.type.$descriptor.name+">"));var w=a.warnings,U=a.references,G=a.elementsById;return d?(d.warnings=w,I(d)):b({rootElement:L,elementsById:G,references:U,warnings:w})})};Dl.prototype.handler=function(e){return new Ol(this.model,e)};function qx(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var Wx=`<?xml version="1.0" encoding="UTF-8"?>
`,zx=/<|>|'|"|&|\n\r|\n/g,Sv=/<|>|&/g;function Vx(e){var t={},n={},r={},o=[],i=[];this.byUri=function(a){return n[a]||e&&e.byUri(a)},this.add=function(a,s){n[a.uri]=a,s?o.push(a):i.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return t[a||"xmlns"]},this.mapPrefix=function(a,s){t[a||"xmlns"]=s},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var s=a.uri,u=this.getNSKey(a);r[u]=this.byUri(s),e&&e.logUsed(a)},this.getUsed=function(a){function s(l){var p=u.getNSKey(l);return r[p]}var u=this,f=[].concat(o,i);return f.filter(s)}}function Xx(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Gx(e,t){return wv(t)?Xx(e):e}function Cv(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Mv(e){return Rn(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Yx(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function Kx(e,t){return t.isGeneric?ue({localName:t.ns.localName},e):ue({localName:Gx(t.ns.localName,t.$pkg)},e)}function Zx(e,t){return ue({localName:t.ns.localName},e)}function Qx(e){var t=e.$descriptor;return Dt(t.properties,function(n){var r=n.name;if(n.isVirtual||!ma(e,r))return!1;var o=e[r];return o===n.default||o===null?!1:n.isMany?o.length:!0})}var Jx={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},ew={"<":"lt",">":"gt","&":"amp"};function Rv(e,t,n){return e=Rn(e)?e:""+e,e.replace(t,function(r){return"&"+n[r]+";"})}function tw(e){return Rv(e,zx,Jx)}function nw(e){return Rv(e,Sv,ew)}function rw(e){return Dt(e,function(t){return t.isAttr})}function iw(e){return Dt(e,function(t){return!t.isAttr})}function Nl(e){this.tagName=e}Nl.prototype.build=function(e){return this.element=e,this};Nl.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Vi(){}Vi.prototype.serializeValue=Vi.prototype.serializeTo=function(e){e.append(this.escape?nw(this.value):this.value)};Vi.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Sv)!==-1&&(this.escape=!0),this};function Il(e){this.tagName=e}Cv(Il,Vi);Il.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function yt(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}yt.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,r,o,i=t.isGeneric;return i?r=this.parseGeneric(e):r=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),i||(o=Qx(e),this.parseAttributes(rw(o)),this.parseContainments(iw(o))),this.parseGenericAttributes(e,r),this};yt.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Kx(t,e)};yt.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Zx(t,e)};yt.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};yt.prototype.nsAttributeName=function(e){var t;if(Rn(e)?t=Kt(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:ue({localName:t.localName},n)};yt.prototype.parseGeneric=function(e){var t=this,n=this.body,r=[];return ne(e,function(o,i){var a;i==="$body"?n.push(new Vi().build({type:"String"},o)):i==="$children"?ne(o,function(s){n.push(new yt(t).build(s))}):i.indexOf("$")!==0&&(a=t.parseNsAttribute(e,i,o),a&&r.push({name:i,value:o}))}),r};yt.prototype.parseNsAttribute=function(e,t,n){var r=e.$model,o=Kt(t),i;if(o.prefix==="xmlns"&&(i={prefix:o.localName,uri:n}),!o.prefix&&o.localName==="xmlns"&&(i={uri:n}),!i)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}};yt.prototype.parseNsAttributes=function(e,t){var n=this,r=e.$attrs,o=[];return ne(r,function(i,a){var s=n.parseNsAttribute(e,a,i);s&&o.push(s)}),o};yt.prototype.parseGenericAttributes=function(e,t){var n=this;ne(t,function(r){if(r.name!==pu)try{n.addAttribute(n.nsAttributeName(r.name),r.value)}catch(o){console.warn("missing namespace information for ",r.name,"=",r.value,"on",e,o)}})};yt.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;ne(e,function(o){var i=r.get(o.name),a=o.isReference,s=o.isMany;if(s||(i=[i]),o.isBody)n.push(new Vi().build(o,i[0]));else if(mv(o.type))ne(i,function(l){n.push(new Il(t.addTagName(t.nsPropertyTagName(o))).build(o,l))});else if(a)ne(i,function(l){n.push(new Nl(t.addTagName(t.nsPropertyTagName(o))).build(l))});else{var u=bv(o),f=Fx(o);ne(i,function(l){var p;u?p=new gu(t,o):f?p=new yt(t,o):p=new yt(t),n.push(p.build(l))})}})};yt.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,r;return t||(r=n&&n.getNamespaces(),e||!r?this.namespaces=t=new Vx(r):t=r),t};yt.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),o=e.uri,i=e.prefix,a=r.byUri(o);return(!a||n)&&r.add(e,t),r.mapPrefix(i,o),e};yt.prototype.logNamespaceUsed=function(e,t){var n=this.element,r=n.$model,o=this.getNamespaces(t),i=e.prefix,a=e.uri,s,u,f;if(!i&&!a)return{localName:e.localName};if(f=Bx[i]||r&&(r.getPackage(i)||{}).uri,a=a||f||o.uriByPrefix(i),!a)throw new Error("no namespace uri given for prefix <"+i+">");if(e=o.byUri(a),!e){for(s=i,u=1;o.uriByPrefix(s);)s=i+"_"+u++;e=this.logNamespace({prefix:s,uri:a},f===a)}return i&&o.mapPrefix(i,a),e};yt.prototype.parseAttributes=function(e){var t=this,n=this.element;ne(e,function(r){var o=n.get(r.name);if(r.isReference)if(!r.isMany)o=o.id;else{var i=[];ne(o,function(a){i.push(a.id)}),o=i.join(" ")}t.addAttribute(t.nsAttributeName(r),o)})};yt.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Mv(e)};yt.prototype.addAttribute=function(e,t){var n=this.attrs;Rn(t)&&(t=tw(t));var r=Iy(n,function(i){return i.name.localName===e.localName&&i.name.uri===e.uri&&i.name.prefix===e.prefix}),o={name:e,value:t};r!==-1?n.splice(r,1,o):n.push(o)};yt.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=Yx(n).concat(t)),ne(t,function(r){e.append(" ").append(Mv(r.name)).append('="').append(r.value).append('"')})};yt.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Vi;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),ne(this.body,function(r){r.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function gu(e,t){yt.call(this,e,t)}Cv(gu,yt);gu.prototype.parseNsAttributes=function(e){var t=yt.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var o=e.$model.getPackage(r.uri),i=o.xml&&o.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(pu),(r.prefix?r.prefix+":":"")+i+n.ns.localName),t};gu.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function ow(){this.value="",this.write=function(e){this.value+=e}}function aw(e,t){var n=[""];this.append=function(r){return e.write(r),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function sw(e){e=ue({format:!1,preamble:!0},e||{});function t(n,r){var o=r||new ow,i=new aw(o,e.format);if(e.preamble&&i.append(Wx),new yt().build(n).serializeTo(i),!r)return o.value}return{toXML:t}}function yu(e,t){On.call(this,e,t)}yu.prototype=Object.create(On.prototype);yu.prototype.fromXML=function(e,t,n){Rn(t)||(n=t,t="dcr:Definitions");var r=new Dl(ue({model:this,lax:!1},n)),o=r.handler(t);return r.fromXML(e,o)};yu.prototype.toXML=function(e,t){var n=new sw(t);return new Promise(function(r,o){try{var i=n.toXML(e);return r({xml:i})}catch(a){return o(a)}})};const uw="DCR Graph diagram",cw="http://tk/schema/dcr",fw="dcr",lw={tagAlias:"lowerCase"},hw=[{name:"BoardElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0}]},{name:"Event",superClass:["BoardElement"],properties:[{name:"role",isAttr:!0,type:"String"},{name:"description",isAttr:!0,type:"String"},{name:"included",isAttr:!0,type:"Boolean"},{name:"executed",isAttr:!0,type:"Boolean"},{name:"pending",isAttr:!0,type:"Boolean"}]},{name:"Nesting",superClass:["BoardElement"],properties:[{name:"role",isAttr:!0,type:"String"},{name:"description",isAttr:!0,type:"String"},{name:"boardElements",type:"BoardElement",isMany:!0}]},{name:"SubProcess",superClass:["BoardElement"],properties:[{name:"description",isAttr:!0,type:"String"},{name:"boardElements",type:"BoardElement",isMany:!0},{name:"included",isAttr:!0,type:"Boolean"},{name:"executed",isAttr:!0,type:"Boolean"},{name:"pending",isAttr:!0,type:"Boolean"},{name:"multi-instance",isAttr:!0,type:"Boolean"}]},{name:"Relation",superClass:["BoardElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"sourceRef",isAttr:!0,isReference:!0,type:"Event"},{name:"targetRef",isAttr:!0,isReference:!0,type:"Event"}]},{name:"DcrGraph",superClass:["RootElement"],properties:[{name:"boardElements",isMany:!0,type:"BoardElement"}]},{name:"TextBox",superClass:["BoardElement"]},{name:"RootElement",isAbstract:!0,superClass:["BoardElement"]},{name:"Definitions",superClass:["BoardElement"],properties:[{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"rootElements",type:"RootElement",isMany:!0},{name:"rootBoards",isMany:!0,type:"dcrDi:DcrRootBoard"},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"}]}],pw={name:uw,uri:cw,prefix:fw,xml:lw,types:hw},dw="DCRDI",gw="http://tk/schema/dcrDi",yw="dcrDi",vw={tagAlias:"lowerCase"},mw=[{name:"DcrRootBoard",properties:[{name:"plane",type:"DcrPlane",redefines:"Board#rootElement"},{name:"labelStyle",type:"OdLabelStyle",isMany:!0}],superClass:["Board"]},{name:"DcrPlane",properties:[{name:"boardElement",isAttr:!0,isReference:!0,type:"dcr:BoardElement",redefines:"BoardElement#modelElement"}],superClass:["Plane"]},{name:"DcrShape",properties:[{name:"boardElement",isAttr:!0,isReference:!0,type:"dcr:BoardElement",redefines:"BoardElement#modelElement"},{name:"label",type:"OdLabel"}],superClass:["LabeledShape"]},{name:"Relation",properties:[{name:"label",type:"OdLabel"},{name:"boardElement",isAttr:!0,isReference:!0,type:"dcr:BoardElement",redefines:"BoardElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"dcr:BoardElement",redefines:"Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"dcr:BoardElement",redefines:"Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["LabeledEdge"]},{name:"OdLabel",properties:[{name:"labelStyle",type:"OdLabelStyle",isAttr:!0,isReference:!0,redefines:"BoardElement#style"}],superClass:["Label"]},{name:"OdLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["Style"]},{name:"BoardElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"owningBoard",type:"Board",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"BoardElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0}]},{name:"Node",isAbstract:!0,superClass:["BoardElement"]},{name:"Edge",isAbstract:!0,superClass:["BoardElement"],properties:[{name:"source",type:"dcr:BoardElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"dcr:BoardElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Board",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"BoardElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"BoardElement",subsettedProperty:"BoardElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"BoardElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"BoardElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],_w=[],xw=[],ww={name:dw,uri:gw,prefix:yw,xml:vw,types:mw,enumerations:_w,associations:xw},Ew="dc",bw="http://www.omg.org/spec/DD/20100524/DC",Tw="dc",Sw=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],Cw=[],Mw={name:Ew,uri:bw,prefix:Tw,types:Sw,associations:Cw};var Rw={dcr:pw,dcrDi:ww,dc:Mw};function Pw(e,t){var n=ue({},Rw,e);return new yu(n,t)}function ln(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var Aw=new wo({name:"boardElement",enumerable:!0},{name:"di",configurable:!0});function Zf(e,t){return e.$instanceOf(t)}function Ow(e){return _t(e.rootElements,function(t){return Zf(t,"dcr:DcrGraph")})}function Cp(e,t){var n={},r=[];function o(T,m){return e.root(T,m)}function i(T,m){var x=T.gfx;if(x)throw new Error(t("already rendered {element}",{element:ln(T)}));return e.element(T,m)}function a(T,m){try{var x=T.di&&i(T,m);return u(T),x}catch(b){s(b.message,{element:T,error:b}),console.error(t("failed to import {element}",{element:ln(T)})),console.error(b)}}function s(T,m){e.error(T,m)}function u(T){n[T.id]=T}function f(T){var m=T.boardElement;m?m.di?s(t("multiple DI elements defined for {element}",{element:ln(m)}),{element:m}):(Aw.bind(m,"di"),m.di=T):s(t("no boardElement referenced in {element}",{element:ln(T)}),{element:T})}function l(T){p(T.plane)}function p(T){f(T),ne(T.planeElement,y)}function y(T){f(T)}function g(T,m){a(T,m)}function v(T,m){var x=T.rootBoards;if(m&&x.indexOf(m)===-1)throw new Error(t("rootBoard not part of dcr:Definitions"));if(!m&&x&&x.length&&(m=x[0]),!m)throw new Error(t("no rootBoard to display"));l(m);var b=m.plane;if(!b)throw new Error(t("no plane for {element}",{element:ln(m)}));var I=b.boardElement;if(!I)if(I=Ow(T),I)s(t("correcting missing boardElement on {plane} to {rootElement}",{plane:ln(b),rootElement:ln(I)})),b.boardElement=I,f(b);else throw new Error(t("no board to display"));var d=o(I,b);Zf(I,"dcr:DcrGraph")&&M(I,d),P()}function S(T,m){ne(T,function(x){Zf(x,"dcr:Relation")?r.push(function(){g(x,m)}):a(x,m)})}function M(T,m){S(T.boardElements,m),u(T)}function P(){for(var T;r.length;)T=r.shift(),T()}return{handleDeferred:P,handleDefinitions:v,registerDi:f}}function Dw(e,t,n){var r,o,i,a,s=[];function u(f,l){var p={root:function(g){return r.add(g)},element:function(g,v){return r.add(g,v)},error:function(g,v){s.push({message:g,context:v})}};console.log(Cp);var y=new Cp(p,i);y.handleDefinitions(f,l)}return new Promise(function(f,l){try{return r=e.get("DCRImporter"),o=e.get("eventBus"),i=e.get("translate"),o.fire("import.render.start",{definitions:t}),u(t,n),o.fire("import.render.complete",{error:a,warnings:s}),f({warnings:s})}catch(p){return l(p)}})}var ai={},vc={},Mp;function Ll(){return Mp||(Mp=1,(function(){vc.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Be)),vc}var mc={},Er={},br={},Rp;function Br(){return Rp||(Rp=1,(function(){var e,t,n,r,o,i,a,s=[].slice,u={}.hasOwnProperty;e=function(){var f,l,p,y,g,v;if(v=arguments[0],g=2<=arguments.length?s.call(arguments,1):[],o(Object.assign))Object.assign.apply(null,arguments);else for(f=0,p=g.length;f<p;f++)if(y=g[f],y!=null)for(l in y)u.call(y,l)&&(v[l]=y[l]);return v},o=function(f){return!!f&&Object.prototype.toString.call(f)==="[object Function]"},i=function(f){var l;return!!f&&((l=typeof f)=="function"||l==="object")},n=function(f){return o(Array.isArray)?Array.isArray(f):Object.prototype.toString.call(f)==="[object Array]"},r=function(f){var l;if(n(f))return!f.length;for(l in f)if(u.call(f,l))return!1;return!0},a=function(f){var l,p;return i(f)&&(p=Object.getPrototypeOf(f))&&(l=p.constructor)&&typeof l=="function"&&l instanceof l&&Function.prototype.toString.call(l)===Function.prototype.toString.call(Object)},t=function(f){return o(f.valueOf)?f.valueOf():f},br.assign=e,br.isFunction=o,br.isObject=i,br.isArray=n,br.isEmpty=r,br.isPlainObject=a,br.getValue=t}).call(Be)),br}var _c={exports:{}},Pp;function Pv(){return Pp||(Pp=1,(function(){_c.exports=function(){function e(){}return e.prototype.hasFeature=function(t,n){return!0},e.prototype.createDocumentType=function(t,n,r){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,n,r){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,n){throw new Error("This DOM method is not implemented.")},e}()}).call(Be)),_c.exports}var xc={exports:{}},wc={exports:{}},Ec={exports:{}},Ap;function Nw(){return Ap||(Ap=1,(function(){Ec.exports=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(Be)),Ec.exports}var bc={exports:{}},Op;function Iw(){return Op||(Op=1,(function(){bc.exports=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(Be)),bc.exports}var Dp;function Lw(){return Dp||(Dp=1,(function(){var e,t;e=Nw(),t=Iw(),wc.exports=function(){function n(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(r){return this.params.hasOwnProperty(r)?this.params[r]:null},n.prototype.canSetParameter=function(r,o){return!0},n.prototype.setParameter=function(r,o){return o!=null?this.params[r]=o:delete this.params[r]},n}()}).call(Be)),wc.exports}var Tc={exports:{}},Sc={exports:{}},Cc={exports:{}},Np;function Nt(){return Np||(Np=1,(function(){Cc.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Be)),Cc.exports}var Mc={exports:{}},Ip;function Av(){return Ip||(Ip=1,(function(){var e;e=Nt(),Dn(),Mc.exports=function(){function t(n,r,o){if(this.parent=n,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),r==null)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(o),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(n){return this.options.writer.attribute(this,this.options.writer.filterOptions(n))},t.prototype.debugInfo=function(n){return n=n||this.name,n==null?"parent: <"+this.parent.name+">":"attribute: {"+n+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(n){return!(n.namespaceURI!==this.namespaceURI||n.prefix!==this.prefix||n.localName!==this.localName||n.value!==this.value)},t}()}).call(Be)),Mc.exports}var Rc={exports:{}},Lp;function kl(){return Lp||(Lp=1,(function(){Rc.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var n;return n=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,n||null},e.prototype.removeNamedItem=function(t){var n;return n=this.nodes[t],delete this.nodes[t],n||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,n){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,n){throw new Error("This DOM method is not implemented.")},e}()}).call(Be)),Rc.exports}var kp;function Bl(){return kp||(kp=1,(function(){var e,t,n,r,o,i,a,s,u=function(l,p){for(var y in p)f.call(p,y)&&(l[y]=p[y]);function g(){this.constructor=l}return g.prototype=p.prototype,l.prototype=new g,l.__super__=p.prototype,l},f={}.hasOwnProperty;s=Br(),a=s.isObject,i=s.isFunction,o=s.getValue,r=Dn(),e=Nt(),t=Av(),n=kl(),Sc.exports=function(l){u(p,l);function p(y,g,v){var S,M,P,T;if(p.__super__.constructor.call(this,y),g==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(g),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,v!=null&&this.attribute(v),y.type===e.Document&&(this.isRoot=!0,this.documentObject=y,y.rootObject=this,y.children)){for(T=y.children,M=0,P=T.length;M<P;M++)if(S=T[M],S.type===e.DocType){S.name=this.name;break}}}return Object.defineProperty(p.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(p.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(p.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new n(this.attribs)),this.attributeMap}}),p.prototype.clone=function(){var y,g,v,S;v=Object.create(this),v.isRoot&&(v.documentObject=null),v.attribs={},S=this.attribs;for(g in S)f.call(S,g)&&(y=S[g],v.attribs[g]=y.clone());return v.children=[],this.children.forEach(function(M){var P;return P=M.clone(),P.parent=v,v.children.push(P)}),v},p.prototype.attribute=function(y,g){var v,S;if(y!=null&&(y=o(y)),a(y))for(v in y)f.call(y,v)&&(S=y[v],this.attribute(v,S));else i(g)&&(g=g.apply()),this.options.keepNullAttributes&&g==null?this.attribs[y]=new t(this,y,""):g!=null&&(this.attribs[y]=new t(this,y,g));return this},p.prototype.removeAttribute=function(y){var g,v,S;if(y==null)throw new Error("Missing attribute name. "+this.debugInfo());if(y=o(y),Array.isArray(y))for(v=0,S=y.length;v<S;v++)g=y[v],delete this.attribs[g];else delete this.attribs[y];return this},p.prototype.toString=function(y){return this.options.writer.element(this,this.options.writer.filterOptions(y))},p.prototype.att=function(y,g){return this.attribute(y,g)},p.prototype.a=function(y,g){return this.attribute(y,g)},p.prototype.getAttribute=function(y){return this.attribs.hasOwnProperty(y)?this.attribs[y].value:null},p.prototype.setAttribute=function(y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNode=function(y){return this.attribs.hasOwnProperty(y)?this.attribs[y]:null},p.prototype.setAttributeNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeAttributeNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNS=function(y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setAttributeNS=function(y,g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeAttributeNS=function(y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNodeNS=function(y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setAttributeNodeNS=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagNameNS=function(y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.hasAttribute=function(y){return this.attribs.hasOwnProperty(y)},p.prototype.hasAttributeNS=function(y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setIdAttribute=function(y,g){return this.attribs.hasOwnProperty(y)?this.attribs[y].isId:g},p.prototype.setIdAttributeNS=function(y,g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setIdAttributeNode=function(y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagNameNS=function(y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByClassName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isEqualNode=function(y){var g,v,S;if(!p.__super__.isEqualNode.apply(this,arguments).isEqualNode(y)||y.namespaceURI!==this.namespaceURI||y.prefix!==this.prefix||y.localName!==this.localName||y.attribs.length!==this.attribs.length)return!1;for(g=v=0,S=this.attribs.length-1;0<=S?v<=S:v>=S;g=0<=S?++v:--v)if(!this.attribs[g].isEqualNode(y.attribs[g]))return!1;return!0},p}(r)}).call(Be)),Sc.exports}var Pc={exports:{}},Ac={exports:{}},Bp;function vu(){return Bp||(Bp=1,(function(){var e,t=function(r,o){for(var i in o)n.call(o,i)&&(r[i]=o[i]);function a(){this.constructor=r}return a.prototype=o.prototype,r.prototype=new a,r.__super__=o.prototype,r},n={}.hasOwnProperty;e=Dn(),Ac.exports=function(r){t(o,r);function o(i){o.__super__.constructor.call(this,i),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(i,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(i,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(i,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(i,a,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(i){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(i)||i.data!==this.data)},o}(e)}).call(Be)),Ac.exports}var Fp;function Fl(){return Fp||(Fp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;e=Nt(),t=vu(),Pc.exports=function(o){n(i,o);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},i}(t)}).call(Be)),Pc.exports}var Oc={exports:{}},jp;function jl(){return jp||(jp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;e=Nt(),t=vu(),Oc.exports=function(o){n(i,o);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},i}(t)}).call(Be)),Oc.exports}var Dc={exports:{}},$p;function $l(){return $p||($p=1,(function(){var e,t,n,r=function(i,a){for(var s in a)o.call(a,s)&&(i[s]=a[s]);function u(){this.constructor=i}return u.prototype=a.prototype,i.prototype=new u,i.__super__=a.prototype,i},o={}.hasOwnProperty;n=Br().isObject,t=Dn(),e=Nt(),Dc.exports=function(i){r(a,i);function a(s,u,f,l){var p;a.__super__.constructor.call(this,s),n(u)&&(p=u,u=p.version,f=p.encoding,l=p.standalone),u||(u="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(u),f!=null&&(this.encoding=this.stringify.xmlEncoding(f)),l!=null&&(this.standalone=this.stringify.xmlStandalone(l))}return a.prototype.toString=function(s){return this.options.writer.declaration(this,this.options.writer.filterOptions(s))},a}(t)}).call(Be)),Dc.exports}var Nc={exports:{}},Ic={exports:{}},Hp;function Hl(){return Hp||(Hp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;t=Dn(),e=Nt(),Ic.exports=function(o){n(i,o);function i(a,s,u,f,l,p){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!f)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!l)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(l.indexOf("#")!==0&&(l="#"+l),!l.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(p&&!l.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.name(s),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(f),p&&(this.defaultValue=this.stringify.dtdAttDefault(p)),this.defaultValueType=l}return i.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},i}(t)}).call(Be)),Ic.exports}var Lc={exports:{}},Up;function Ul(){return Up||(Up=1,(function(){var e,t,n,r=function(i,a){for(var s in a)o.call(a,s)&&(i[s]=a[s]);function u(){this.constructor=i}return u.prototype=a.prototype,i.prototype=new u,i.__super__=a.prototype,i},o={}.hasOwnProperty;n=Br().isObject,t=Dn(),e=Nt(),Lc.exports=function(i){r(a,i);function a(s,u,f,l){if(a.__super__.constructor.call(this,s),f==null)throw new Error("Missing DTD entity name. "+this.debugInfo(f));if(l==null)throw new Error("Missing DTD entity value. "+this.debugInfo(f));if(this.pe=!!u,this.name=this.stringify.name(f),this.type=e.EntityDeclaration,!n(l))this.value=this.stringify.dtdEntityValue(l),this.internal=!0;else{if(!l.pubID&&!l.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(f));if(l.pubID&&!l.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(f));if(this.internal=!1,l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID)),l.nData!=null&&(this.nData=this.stringify.dtdNData(l.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(f))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(s){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(s))},a}(t)}).call(Be)),Lc.exports}var kc={exports:{}},qp;function ql(){return qp||(qp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;t=Dn(),e=Nt(),kc.exports=function(o){n(i,o);function i(a,s,u){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(s),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return i.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},i}(t)}).call(Be)),kc.exports}var Bc={exports:{}},Wp;function Wl(){return Wp||(Wp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;t=Dn(),e=Nt(),Bc.exports=function(o){n(i,o);function i(a,s,u){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD notation name. "+this.debugInfo(s));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(s));this.name=this.stringify.name(s),this.type=e.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(i.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(i.prototype,"systemId",{get:function(){return this.sysID}}),i.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},i}(t)}).call(Be)),Bc.exports}var zp;function zl(){return zp||(zp=1,(function(){var e,t,n,r,o,i,a,s,u=function(l,p){for(var y in p)f.call(p,y)&&(l[y]=p[y]);function g(){this.constructor=l}return g.prototype=p.prototype,l.prototype=new g,l.__super__=p.prototype,l},f={}.hasOwnProperty;s=Br().isObject,a=Dn(),e=Nt(),t=Hl(),r=Ul(),n=ql(),o=Wl(),i=kl(),Nc.exports=function(l){u(p,l);function p(y,g,v){var S,M,P,T,m,x;if(p.__super__.constructor.call(this,y),this.type=e.DocType,y.children){for(T=y.children,M=0,P=T.length;M<P;M++)if(S=T[M],S.type===e.Element){this.name=S.name;break}}this.documentObject=y,s(g)&&(m=g,g=m.pubID,v=m.sysID),v==null&&(x=[g,v],v=x[0],g=x[1]),g!=null&&(this.pubID=this.stringify.dtdPubID(g)),v!=null&&(this.sysID=this.stringify.dtdSysID(v))}return Object.defineProperty(p.prototype,"entities",{get:function(){var y,g,v,S,M;for(S={},M=this.children,g=0,v=M.length;g<v;g++)y=M[g],y.type===e.EntityDeclaration&&!y.pe&&(S[y.name]=y);return new i(S)}}),Object.defineProperty(p.prototype,"notations",{get:function(){var y,g,v,S,M;for(S={},M=this.children,g=0,v=M.length;g<v;g++)y=M[g],y.type===e.NotationDeclaration&&(S[y.name]=y);return new i(S)}}),Object.defineProperty(p.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(p.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(p.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),p.prototype.element=function(y,g){var v;return v=new n(this,y,g),this.children.push(v),this},p.prototype.attList=function(y,g,v,S,M){var P;return P=new t(this,y,g,v,S,M),this.children.push(P),this},p.prototype.entity=function(y,g){var v;return v=new r(this,!1,y,g),this.children.push(v),this},p.prototype.pEntity=function(y,g){var v;return v=new r(this,!0,y,g),this.children.push(v),this},p.prototype.notation=function(y,g){var v;return v=new o(this,y,g),this.children.push(v),this},p.prototype.toString=function(y){return this.options.writer.docType(this,this.options.writer.filterOptions(y))},p.prototype.ele=function(y,g){return this.element(y,g)},p.prototype.att=function(y,g,v,S,M){return this.attList(y,g,v,S,M)},p.prototype.ent=function(y,g){return this.entity(y,g)},p.prototype.pent=function(y,g){return this.pEntity(y,g)},p.prototype.not=function(y,g){return this.notation(y,g)},p.prototype.up=function(){return this.root()||this.documentObject},p.prototype.isEqualNode=function(y){return!(!p.__super__.isEqualNode.apply(this,arguments).isEqualNode(y)||y.name!==this.name||y.publicId!==this.publicId||y.systemId!==this.systemId)},p}(a)}).call(Be)),Nc.exports}var Fc={exports:{}},Vp;function Vl(){return Vp||(Vp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;e=Nt(),t=Dn(),Fc.exports=function(o){n(i,o);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},i}(t)}).call(Be)),Fc.exports}var jc={exports:{}},Xp;function Xl(){return Xp||(Xp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;e=Nt(),t=vu(),jc.exports=function(o){n(i,o);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(s)}return Object.defineProperty(i.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(i.prototype,"wholeText",{get:function(){var a,s,u;for(u="",s=this.previousSibling;s;)u=s.data+u,s=s.previousSibling;for(u+=this.data,a=this.nextSibling;a;)u=u+a.data,a=a.nextSibling;return u}}),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},i.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},i.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},i}(t)}).call(Be)),jc.exports}var $c={exports:{}},Gp;function Gl(){return Gp||(Gp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;e=Nt(),t=vu(),$c.exports=function(o){n(i,o);function i(a,s,u){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(s),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},i.prototype.isEqualNode=function(a){return!(!i.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},i}(t)}).call(Be)),$c.exports}var Hc={exports:{}},Yp;function Ov(){return Yp||(Yp=1,(function(){var e,t,n=function(o,i){for(var a in i)r.call(i,a)&&(o[a]=i[a]);function s(){this.constructor=o}return s.prototype=i.prototype,o.prototype=new s,o.__super__=i.prototype,o},r={}.hasOwnProperty;t=Dn(),e=Nt(),Hc.exports=function(o){n(i,o);function i(a){i.__super__.constructor.call(this,a),this.type=e.Dummy}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return""},i}(t)}).call(Be)),Hc.exports}var Uc={exports:{}},Kp;function kw(){return Kp||(Kp=1,(function(){Uc.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(Be)),Uc.exports}var qc={exports:{}},Zp;function Bw(){return Zp||(Zp=1,(function(){qc.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Be)),qc.exports}var Qp;function Dn(){return Qp||(Qp=1,(function(){var e,t,n,r,o,i,a,s,u,f,l,p,y,g,v,S,M,P={}.hasOwnProperty;M=Br(),S=M.isObject,v=M.isFunction,g=M.isEmpty,y=M.getValue,s=null,n=null,r=null,o=null,i=null,l=null,p=null,f=null,a=null,t=null,u=null,e=null,Tc.exports=function(){function T(m){this.parent=m,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,s||(s=Bl(),n=Fl(),r=jl(),o=$l(),i=zl(),l=Vl(),p=Xl(),f=Gl(),a=Ov(),t=Nt(),u=kw(),kl(),e=Bw())}return Object.defineProperty(T.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(T.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(T.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(T.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(T.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(T.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(T.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(T.prototype,"previousSibling",{get:function(){var m;return m=this.parent.children.indexOf(this),this.parent.children[m-1]||null}}),Object.defineProperty(T.prototype,"nextSibling",{get:function(){var m;return m=this.parent.children.indexOf(this),this.parent.children[m+1]||null}}),Object.defineProperty(T.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(T.prototype,"textContent",{get:function(){var m,x,b,I,d;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(d="",I=this.children,x=0,b=I.length;x<b;x++)m=I[x],m.textContent&&(d+=m.textContent);return d}else return null},set:function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),T.prototype.setParent=function(m){var x,b,I,d,L;for(this.parent=m,m&&(this.options=m.options,this.stringify=m.stringify),d=this.children,L=[],b=0,I=d.length;b<I;b++)x=d[b],L.push(x.setParent(this));return L},T.prototype.element=function(m,x,b){var I,d,L,w,U,G,Y,q,fe,Te,we;if(G=null,x===null&&b==null&&(fe=[{},null],x=fe[0],b=fe[1]),x==null&&(x={}),x=y(x),S(x)||(Te=[x,b],b=Te[0],x=Te[1]),m!=null&&(m=y(m)),Array.isArray(m))for(L=0,Y=m.length;L<Y;L++)d=m[L],G=this.element(d);else if(v(m))G=this.element(m.apply());else if(S(m)){for(U in m)if(P.call(m,U))if(we=m[U],v(we)&&(we=we.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&U.indexOf(this.stringify.convertAttKey)===0)G=this.attribute(U.substr(this.stringify.convertAttKey.length),we);else if(!this.options.separateArrayItems&&Array.isArray(we)&&g(we))G=this.dummy();else if(S(we)&&g(we))G=this.element(U);else if(!this.options.keepNullNodes&&we==null)G=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(we))for(w=0,q=we.length;w<q;w++)d=we[w],I={},I[U]=d,G=this.element(I);else S(we)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&U.indexOf(this.stringify.convertTextKey)===0?G=this.element(we):(G=this.element(U),G.element(we)):G=this.element(U,we)}else!this.options.keepNullNodes&&b===null?G=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&m.indexOf(this.stringify.convertTextKey)===0?G=this.text(b):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&m.indexOf(this.stringify.convertCDataKey)===0?G=this.cdata(b):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&m.indexOf(this.stringify.convertCommentKey)===0?G=this.comment(b):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&m.indexOf(this.stringify.convertRawKey)===0?G=this.raw(b):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&m.indexOf(this.stringify.convertPIKey)===0?G=this.instruction(m.substr(this.stringify.convertPIKey.length),b):G=this.node(m,x,b);if(G==null)throw new Error("Could not create any elements with: "+m+". "+this.debugInfo());return G},T.prototype.insertBefore=function(m,x,b){var I,d,L,w,U;if(m!=null&&m.type)return L=m,w=x,L.setParent(this),w?(d=children.indexOf(w),U=children.splice(d),children.push(L),Array.prototype.push.apply(children,U)):children.push(L),L;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return d=this.parent.children.indexOf(this),U=this.parent.children.splice(d),I=this.parent.element(m,x,b),Array.prototype.push.apply(this.parent.children,U),I},T.prototype.insertAfter=function(m,x,b){var I,d,L;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return d=this.parent.children.indexOf(this),L=this.parent.children.splice(d+1),I=this.parent.element(m,x,b),Array.prototype.push.apply(this.parent.children,L),I},T.prototype.remove=function(){var m;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return m=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[m,m-m+1].concat([])),this.parent},T.prototype.node=function(m,x,b){var I,d;return m!=null&&(m=y(m)),x||(x={}),x=y(x),S(x)||(d=[x,b],b=d[0],x=d[1]),I=new s(this,m,x),b!=null&&I.text(b),this.children.push(I),I},T.prototype.text=function(m){var x;return S(m)&&this.element(m),x=new p(this,m),this.children.push(x),this},T.prototype.cdata=function(m){var x;return x=new n(this,m),this.children.push(x),this},T.prototype.comment=function(m){var x;return x=new r(this,m),this.children.push(x),this},T.prototype.commentBefore=function(m){var x,b;return x=this.parent.children.indexOf(this),b=this.parent.children.splice(x),this.parent.comment(m),Array.prototype.push.apply(this.parent.children,b),this},T.prototype.commentAfter=function(m){var x,b;return x=this.parent.children.indexOf(this),b=this.parent.children.splice(x+1),this.parent.comment(m),Array.prototype.push.apply(this.parent.children,b),this},T.prototype.raw=function(m){var x;return x=new l(this,m),this.children.push(x),this},T.prototype.dummy=function(){var m;return m=new a(this),m},T.prototype.instruction=function(m,x){var b,I,d,L,w;if(m!=null&&(m=y(m)),x!=null&&(x=y(x)),Array.isArray(m))for(L=0,w=m.length;L<w;L++)b=m[L],this.instruction(b);else if(S(m))for(b in m)P.call(m,b)&&(I=m[b],this.instruction(b,I));else v(x)&&(x=x.apply()),d=new f(this,m,x),this.children.push(d);return this},T.prototype.instructionBefore=function(m,x){var b,I;return b=this.parent.children.indexOf(this),I=this.parent.children.splice(b),this.parent.instruction(m,x),Array.prototype.push.apply(this.parent.children,I),this},T.prototype.instructionAfter=function(m,x){var b,I;return b=this.parent.children.indexOf(this),I=this.parent.children.splice(b+1),this.parent.instruction(m,x),Array.prototype.push.apply(this.parent.children,I),this},T.prototype.declaration=function(m,x,b){var I,d;return I=this.document(),d=new o(I,m,x,b),I.children.length===0?I.children.unshift(d):I.children[0].type===t.Declaration?I.children[0]=d:I.children.unshift(d),I.root()||I},T.prototype.dtd=function(m,x){var b,I,d,L,w,U,G,Y,q,fe;for(I=this.document(),d=new i(I,m,x),q=I.children,L=w=0,G=q.length;w<G;L=++w)if(b=q[L],b.type===t.DocType)return I.children[L]=d,d;for(fe=I.children,L=U=0,Y=fe.length;U<Y;L=++U)if(b=fe[L],b.isRoot)return I.children.splice(L,0,d),d;return I.children.push(d),d},T.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},T.prototype.root=function(){var m;for(m=this;m;){if(m.type===t.Document)return m.rootObject;if(m.isRoot)return m;m=m.parent}},T.prototype.document=function(){var m;for(m=this;m;){if(m.type===t.Document)return m;m=m.parent}},T.prototype.end=function(m){return this.document().end(m)},T.prototype.prev=function(){var m;if(m=this.parent.children.indexOf(this),m<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[m-1]},T.prototype.next=function(){var m;if(m=this.parent.children.indexOf(this),m===-1||m===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[m+1]},T.prototype.importDocument=function(m){var x;return x=m.root().clone(),x.parent=this,x.isRoot=!1,this.children.push(x),this},T.prototype.debugInfo=function(m){var x,b;return m=m||this.name,m==null&&!((x=this.parent)!=null&&x.name)?"":m==null?"parent: <"+this.parent.name+">":(b=this.parent)!=null&&b.name?"node: <"+m+">, parent: <"+this.parent.name+">":"node: <"+m+">"},T.prototype.ele=function(m,x,b){return this.element(m,x,b)},T.prototype.nod=function(m,x,b){return this.node(m,x,b)},T.prototype.txt=function(m){return this.text(m)},T.prototype.dat=function(m){return this.cdata(m)},T.prototype.com=function(m){return this.comment(m)},T.prototype.ins=function(m,x){return this.instruction(m,x)},T.prototype.doc=function(){return this.document()},T.prototype.dec=function(m,x,b){return this.declaration(m,x,b)},T.prototype.e=function(m,x,b){return this.element(m,x,b)},T.prototype.n=function(m,x,b){return this.node(m,x,b)},T.prototype.t=function(m){return this.text(m)},T.prototype.d=function(m){return this.cdata(m)},T.prototype.c=function(m){return this.comment(m)},T.prototype.r=function(m){return this.raw(m)},T.prototype.i=function(m,x){return this.instruction(m,x)},T.prototype.u=function(){return this.up()},T.prototype.importXMLBuilder=function(m){return this.importDocument(m)},T.prototype.replaceChild=function(m,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.removeChild=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.appendChild=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.hasChildNodes=function(){return this.children.length!==0},T.prototype.cloneNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.isSupported=function(m,x){return!0},T.prototype.hasAttributes=function(){return this.attribs.length!==0},T.prototype.compareDocumentPosition=function(m){var x,b;return x=this,x===m?0:this.document()!==m.document()?(b=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?b|=e.Preceding:b|=e.Following,b):x.isAncestor(m)?e.Contains|e.Preceding:x.isDescendant(m)?e.Contains|e.Following:x.isPreceding(m)?e.Preceding:e.Following},T.prototype.isSameNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.lookupPrefix=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.isDefaultNamespace=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.lookupNamespaceURI=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.isEqualNode=function(m){var x,b,I;if(m.nodeType!==this.nodeType||m.children.length!==this.children.length)return!1;for(x=b=0,I=this.children.length-1;0<=I?b<=I:b>=I;x=0<=I?++b:--b)if(!this.children[x].isEqualNode(m.children[x]))return!1;return!0},T.prototype.getFeature=function(m,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.setUserData=function(m,x,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getUserData=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.contains=function(m){return m?m===this||this.isDescendant(m):!1},T.prototype.isDescendant=function(m){var x,b,I,d,L;for(L=this.children,I=0,d=L.length;I<d;I++)if(x=L[I],m===x||(b=x.isDescendant(m),b))return!0;return!1},T.prototype.isAncestor=function(m){return m.isDescendant(this)},T.prototype.isPreceding=function(m){var x,b;return x=this.treePosition(m),b=this.treePosition(this),x===-1||b===-1?!1:x<b},T.prototype.isFollowing=function(m){var x,b;return x=this.treePosition(m),b=this.treePosition(this),x===-1||b===-1?!1:x>b},T.prototype.treePosition=function(m){var x,b;return b=0,x=!1,this.foreachTreeNode(this.document(),function(I){if(b++,!x&&I===m)return x=!0}),x?b:-1},T.prototype.foreachTreeNode=function(m,x){var b,I,d,L,w;for(m||(m=this.document()),L=m.children,I=0,d=L.length;I<d;I++){if(b=L[I],w=x(b))return w;if(w=this.foreachTreeNode(b,x),w)return w}},T}()}).call(Be)),Tc.exports}var Wc={exports:{}},Jp;function Dv(){return Jp||(Jp=1,(function(){var e=function(n,r){return function(){return n.apply(r,arguments)}},t={}.hasOwnProperty;Wc.exports=function(){function n(r){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,i,a;r||(r={}),this.options=r,this.options.version||(this.options.version="1.0"),i=r.stringify||{};for(o in i)t.call(i,o)&&(a=i[o],this[o]=a)}return n.prototype.name=function(r){return this.options.noValidation?r:this.assertLegalName(""+r||"")},n.prototype.text=function(r){return this.options.noValidation?r:this.assertLegalChar(this.textEscape(""+r||""))},n.prototype.cdata=function(r){return this.options.noValidation?r:(r=""+r||"",r=r.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(r))},n.prototype.comment=function(r){if(this.options.noValidation)return r;if(r=""+r||"",r.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+r);return this.assertLegalChar(r)},n.prototype.raw=function(r){return this.options.noValidation?r:""+r||""},n.prototype.attValue=function(r){return this.options.noValidation?r:this.assertLegalChar(this.attEscape(r=""+r||""))},n.prototype.insTarget=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},n.prototype.insValue=function(r){if(this.options.noValidation)return r;if(r=""+r||"",r.match(/\?>/))throw new Error("Invalid processing instruction value: "+r);return this.assertLegalChar(r)},n.prototype.xmlVersion=function(r){if(this.options.noValidation)return r;if(r=""+r||"",!r.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+r);return r},n.prototype.xmlEncoding=function(r){if(this.options.noValidation)return r;if(r=""+r||"",!r.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+r);return this.assertLegalChar(r)},n.prototype.xmlStandalone=function(r){return this.options.noValidation?r:r?"yes":"no"},n.prototype.dtdPubID=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},n.prototype.dtdSysID=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},n.prototype.dtdElementValue=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},n.prototype.dtdAttType=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},n.prototype.dtdAttDefault=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},n.prototype.dtdEntityValue=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},n.prototype.dtdNData=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(r){var o,i;if(this.options.noValidation)return r;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,i=r.match(o))throw new Error("Invalid character in string: "+r+" at index "+i.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,i=r.match(o)))throw new Error("Invalid character in string: "+r+" at index "+i.index);return r},n.prototype.assertLegalName=function(r){var o;if(this.options.noValidation)return r;if(this.assertLegalChar(r),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!r.match(o))throw new Error("Invalid character in name");return r},n.prototype.textEscape=function(r){var o;return this.options.noValidation?r:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(r){var o;return this.options.noValidation?r:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}).call(Be)),Wc.exports}var zc={exports:{}},Vc={exports:{}},Xc={exports:{}},ed;function mu(){return ed||(ed=1,(function(){Xc.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Be)),Xc.exports}var td;function Nv(){return td||(td=1,(function(){var e,t,n,r={}.hasOwnProperty;n=Br().assign,e=Nt(),$l(),zl(),Fl(),jl(),Bl(),Vl(),Xl(),Gl(),Ov(),Hl(),ql(),Ul(),Wl(),t=mu(),Vc.exports=function(){function o(i){var a,s,u;i||(i={}),this.options=i,s=i.writer||{};for(a in s)r.call(s,a)&&(u=s[a],this["_"+a]=this[a],this[a]=u)}return o.prototype.filterOptions=function(i){var a,s,u,f,l,p,y,g;return i||(i={}),i=n({},this.options,i),a={writer:this},a.pretty=i.pretty||!1,a.allowEmpty=i.allowEmpty||!1,a.indent=(s=i.indent)!=null?s:"  ",a.newline=(u=i.newline)!=null?u:`
`,a.offset=(f=i.offset)!=null?f:0,a.dontPrettyTextNodes=(l=(p=i.dontPrettyTextNodes)!=null?p:i.dontprettytextnodes)!=null?l:0,a.spaceBeforeSlash=(y=(g=i.spaceBeforeSlash)!=null?g:i.spacebeforeslash)!=null?y:"",a.spaceBeforeSlash===!0&&(a.spaceBeforeSlash=" "),a.suppressPrettyCount=0,a.user={},a.state=t.None,a},o.prototype.indent=function(i,a,s){var u;return!a.pretty||a.suppressPrettyCount?"":a.pretty&&(u=(s||0)+a.offset+1,u>0)?new Array(u).join(a.indent):""},o.prototype.endline=function(i,a,s){return!a.pretty||a.suppressPrettyCount?"":a.newline},o.prototype.attribute=function(i,a,s){var u;return this.openAttribute(i,a,s),u=" "+i.name+'="'+i.value+'"',this.closeAttribute(i,a,s),u},o.prototype.cdata=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s)+"<![CDATA[",a.state=t.InsideTag,u+=i.value,a.state=t.CloseTag,u+="]]>"+this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.comment=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s)+"<!-- ",a.state=t.InsideTag,u+=i.value,a.state=t.CloseTag,u+=" -->"+this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.declaration=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s)+"<?xml",a.state=t.InsideTag,u+=' version="'+i.version+'"',i.encoding!=null&&(u+=' encoding="'+i.encoding+'"'),i.standalone!=null&&(u+=' standalone="'+i.standalone+'"'),a.state=t.CloseTag,u+=a.spaceBeforeSlash+"?>",u+=this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.docType=function(i,a,s){var u,f,l,p,y;if(s||(s=0),this.openNode(i,a,s),a.state=t.OpenTag,p=this.indent(i,a,s),p+="<!DOCTYPE "+i.root().name,i.pubID&&i.sysID?p+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.sysID&&(p+=' SYSTEM "'+i.sysID+'"'),i.children.length>0){for(p+=" [",p+=this.endline(i,a,s),a.state=t.InsideTag,y=i.children,f=0,l=y.length;f<l;f++)u=y[f],p+=this.writeChildNode(u,a,s+1);a.state=t.CloseTag,p+="]"}return a.state=t.CloseTag,p+=a.spaceBeforeSlash+">",p+=this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),p},o.prototype.element=function(i,a,s){var u,f,l,p,y,g,v,S,M,P,T,m,x,b;s||(s=0),P=!1,T="",this.openNode(i,a,s),a.state=t.OpenTag,T+=this.indent(i,a,s)+"<"+i.name,m=i.attribs;for(M in m)r.call(m,M)&&(u=m[M],T+=this.attribute(u,a,s));if(l=i.children.length,p=l===0?null:i.children[0],l===0||i.children.every(function(I){return(I.type===e.Text||I.type===e.Raw)&&I.value===""}))a.allowEmpty?(T+=">",a.state=t.CloseTag,T+="</"+i.name+">"+this.endline(i,a,s)):(a.state=t.CloseTag,T+=a.spaceBeforeSlash+"/>"+this.endline(i,a,s));else if(a.pretty&&l===1&&(p.type===e.Text||p.type===e.Raw)&&p.value!=null)T+=">",a.state=t.InsideTag,a.suppressPrettyCount++,P=!0,T+=this.writeChildNode(p,a,s+1),a.suppressPrettyCount--,P=!1,a.state=t.CloseTag,T+="</"+i.name+">"+this.endline(i,a,s);else{if(a.dontPrettyTextNodes){for(x=i.children,y=0,v=x.length;y<v;y++)if(f=x[y],(f.type===e.Text||f.type===e.Raw)&&f.value!=null){a.suppressPrettyCount++,P=!0;break}}for(T+=">"+this.endline(i,a,s),a.state=t.InsideTag,b=i.children,g=0,S=b.length;g<S;g++)f=b[g],T+=this.writeChildNode(f,a,s+1);a.state=t.CloseTag,T+=this.indent(i,a,s)+"</"+i.name+">",P&&a.suppressPrettyCount--,T+=this.endline(i,a,s),a.state=t.None}return this.closeNode(i,a,s),T},o.prototype.writeChildNode=function(i,a,s){switch(i.type){case e.CData:return this.cdata(i,a,s);case e.Comment:return this.comment(i,a,s);case e.Element:return this.element(i,a,s);case e.Raw:return this.raw(i,a,s);case e.Text:return this.text(i,a,s);case e.ProcessingInstruction:return this.processingInstruction(i,a,s);case e.Dummy:return"";case e.Declaration:return this.declaration(i,a,s);case e.DocType:return this.docType(i,a,s);case e.AttributeDeclaration:return this.dtdAttList(i,a,s);case e.ElementDeclaration:return this.dtdElement(i,a,s);case e.EntityDeclaration:return this.dtdEntity(i,a,s);case e.NotationDeclaration:return this.dtdNotation(i,a,s);default:throw new Error("Unknown XML node type: "+i.constructor.name)}},o.prototype.processingInstruction=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s)+"<?",a.state=t.InsideTag,u+=i.target,i.value&&(u+=" "+i.value),a.state=t.CloseTag,u+=a.spaceBeforeSlash+"?>",u+=this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.raw=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s),a.state=t.InsideTag,u+=i.value,a.state=t.CloseTag,u+=this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.text=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s),a.state=t.InsideTag,u+=i.value,a.state=t.CloseTag,u+=this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.dtdAttList=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s)+"<!ATTLIST",a.state=t.InsideTag,u+=" "+i.elementName+" "+i.attributeName+" "+i.attributeType,i.defaultValueType!=="#DEFAULT"&&(u+=" "+i.defaultValueType),i.defaultValue&&(u+=' "'+i.defaultValue+'"'),a.state=t.CloseTag,u+=a.spaceBeforeSlash+">"+this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.dtdElement=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s)+"<!ELEMENT",a.state=t.InsideTag,u+=" "+i.name+" "+i.value,a.state=t.CloseTag,u+=a.spaceBeforeSlash+">"+this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.dtdEntity=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s)+"<!ENTITY",a.state=t.InsideTag,i.pe&&(u+=" %"),u+=" "+i.name,i.value?u+=' "'+i.value+'"':(i.pubID&&i.sysID?u+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.sysID&&(u+=' SYSTEM "'+i.sysID+'"'),i.nData&&(u+=" NDATA "+i.nData)),a.state=t.CloseTag,u+=a.spaceBeforeSlash+">"+this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.dtdNotation=function(i,a,s){var u;return this.openNode(i,a,s),a.state=t.OpenTag,u=this.indent(i,a,s)+"<!NOTATION",a.state=t.InsideTag,u+=" "+i.name,i.pubID&&i.sysID?u+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.pubID?u+=' PUBLIC "'+i.pubID+'"':i.sysID&&(u+=' SYSTEM "'+i.sysID+'"'),a.state=t.CloseTag,u+=a.spaceBeforeSlash+">"+this.endline(i,a,s),a.state=t.None,this.closeNode(i,a,s),u},o.prototype.openNode=function(i,a,s){},o.prototype.closeNode=function(i,a,s){},o.prototype.openAttribute=function(i,a,s){},o.prototype.closeAttribute=function(i,a,s){},o}()}).call(Be)),Vc.exports}var nd;function Yl(){return nd||(nd=1,(function(){var e,t=function(r,o){for(var i in o)n.call(o,i)&&(r[i]=o[i]);function a(){this.constructor=r}return a.prototype=o.prototype,r.prototype=new a,r.__super__=o.prototype,r},n={}.hasOwnProperty;e=Nv(),zc.exports=function(r){t(o,r);function o(i){o.__super__.constructor.call(this,i)}return o.prototype.document=function(i,a){var s,u,f,l,p;for(a=this.filterOptions(a),l="",p=i.children,u=0,f=p.length;u<f;u++)s=p[u],l+=this.writeChildNode(s,a,0);return a.pretty&&l.slice(-a.newline.length)===a.newline&&(l=l.slice(0,-a.newline.length)),l},o}(e)}).call(Be)),zc.exports}var rd;function Iv(){return rd||(rd=1,(function(){var e,t,n,r,o,i,a,s=function(f,l){for(var p in l)u.call(l,p)&&(f[p]=l[p]);function y(){this.constructor=f}return y.prototype=l.prototype,f.prototype=new y,f.__super__=l.prototype,f},u={}.hasOwnProperty;a=Br().isPlainObject,n=Pv(),t=Lw(),r=Dn(),e=Nt(),i=Dv(),o=Yl(),xc.exports=function(f){s(l,f);function l(p){l.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new t,p||(p={}),p.writer||(p.writer=new o),this.options=p,this.stringify=new i(p)}return Object.defineProperty(l.prototype,"implementation",{value:new n}),Object.defineProperty(l.prototype,"doctype",{get:function(){var p,y,g,v;for(v=this.children,y=0,g=v.length;y<g;y++)if(p=v[y],p.type===e.DocType)return p;return null}}),Object.defineProperty(l.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(l.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(l.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(l.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(l.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(l.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(l.prototype,"origin",{get:function(){return null}}),Object.defineProperty(l.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(l.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(l.prototype,"contentType",{get:function(){return null}}),l.prototype.end=function(p){var y;return y={},p?a(p)&&(y=p,p=this.options.writer):p=this.options.writer,p.document(this,p.filterOptions(y))},l.prototype.toString=function(p){return this.options.writer.document(this,this.options.writer.filterOptions(p))},l.prototype.createElement=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createTextNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createComment=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createCDATASection=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createProcessingInstruction=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createAttribute=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createEntityReference=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.importNode=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createElementNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createAttributeNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getElementsByTagNameNS=function(p,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getElementById=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.adoptNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.renameNode=function(p,y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.getElementsByClassName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createEvent=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createNodeIterator=function(p,y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.createTreeWalker=function(p,y,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},l}(r)}).call(Be)),xc.exports}var Gc={exports:{}},id;function Fw(){return id||(id=1,(function(){var e,t,n,r,o,i,a,s,u,f,l,p,y,g,v,S,M,P,T,m,x,b,I,d={}.hasOwnProperty;I=Br(),x=I.isObject,m=I.isFunction,b=I.isPlainObject,T=I.getValue,e=Nt(),p=Iv(),y=Bl(),r=Fl(),o=jl(),v=Vl(),P=Xl(),g=Gl(),f=$l(),l=zl(),i=Hl(),s=Ul(),a=ql(),u=Wl(),n=Av(),M=Dv(),S=Yl(),t=mu(),Gc.exports=function(){function L(w,U,G){var Y;this.name="?xml",this.type=e.Document,w||(w={}),Y={},w.writer?b(w.writer)&&(Y=w.writer,w.writer=new S):w.writer=new S,this.options=w,this.writer=w.writer,this.writerOptions=this.writer.filterOptions(Y),this.stringify=new M(w),this.onDataCallback=U||function(){},this.onEndCallback=G||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return L.prototype.createChildNode=function(w){var U,G,Y,q,fe,Te,we,ye;switch(w.type){case e.CData:this.cdata(w.value);break;case e.Comment:this.comment(w.value);break;case e.Element:Y={},we=w.attribs;for(G in we)d.call(we,G)&&(U=we[G],Y[G]=U.value);this.node(w.name,Y);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(w.value);break;case e.Text:this.text(w.value);break;case e.ProcessingInstruction:this.instruction(w.target,w.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+w.constructor.name)}for(ye=w.children,fe=0,Te=ye.length;fe<Te;fe++)q=ye[fe],this.createChildNode(q),q.type===e.Element&&this.up();return this},L.prototype.dummy=function(){return this},L.prototype.node=function(w,U,G){var Y;if(w==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(w));return this.openCurrent(),w=T(w),U==null&&(U={}),U=T(U),x(U)||(Y=[U,G],G=Y[0],U=Y[1]),this.currentNode=new y(this,w,U),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,G!=null&&this.text(G),this},L.prototype.element=function(w,U,G){var Y,q,fe,Te,we,ye;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(w)||x(w)||m(w))for(Te=this.options.noValidation,this.options.noValidation=!0,ye=new p(this.options).element("TEMP_ROOT"),ye.element(w),this.options.noValidation=Te,we=ye.children,q=0,fe=we.length;q<fe;q++)Y=we[q],this.createChildNode(Y),Y.type===e.Element&&this.up();else this.node(w,U,G);return this},L.prototype.attribute=function(w,U){var G,Y;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(w));if(w!=null&&(w=T(w)),x(w))for(G in w)d.call(w,G)&&(Y=w[G],this.attribute(G,Y));else m(U)&&(U=U.apply()),this.options.keepNullAttributes&&U==null?this.currentNode.attribs[w]=new n(this,w,""):U!=null&&(this.currentNode.attribs[w]=new n(this,w,U));return this},L.prototype.text=function(w){var U;return this.openCurrent(),U=new P(this,w),this.onData(this.writer.text(U,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.cdata=function(w){var U;return this.openCurrent(),U=new r(this,w),this.onData(this.writer.cdata(U,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.comment=function(w){var U;return this.openCurrent(),U=new o(this,w),this.onData(this.writer.comment(U,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.raw=function(w){var U;return this.openCurrent(),U=new v(this,w),this.onData(this.writer.raw(U,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.instruction=function(w,U){var G,Y,q,fe,Te;if(this.openCurrent(),w!=null&&(w=T(w)),U!=null&&(U=T(U)),Array.isArray(w))for(G=0,fe=w.length;G<fe;G++)Y=w[G],this.instruction(Y);else if(x(w))for(Y in w)d.call(w,Y)&&(q=w[Y],this.instruction(Y,q));else m(U)&&(U=U.apply()),Te=new g(this,w,U),this.onData(this.writer.processingInstruction(Te,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},L.prototype.declaration=function(w,U,G){var Y;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return Y=new f(this,w,U,G),this.onData(this.writer.declaration(Y,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.doctype=function(w,U,G){if(this.openCurrent(),w==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new l(this,U,G),this.currentNode.rootNodeName=w,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},L.prototype.dtdElement=function(w,U){var G;return this.openCurrent(),G=new a(this,w,U),this.onData(this.writer.dtdElement(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.attList=function(w,U,G,Y,q){var fe;return this.openCurrent(),fe=new i(this,w,U,G,Y,q),this.onData(this.writer.dtdAttList(fe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.entity=function(w,U){var G;return this.openCurrent(),G=new s(this,!1,w,U),this.onData(this.writer.dtdEntity(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.pEntity=function(w,U){var G;return this.openCurrent(),G=new s(this,!0,w,U),this.onData(this.writer.dtdEntity(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.notation=function(w,U){var G;return this.openCurrent(),G=new u(this,w,U),this.onData(this.writer.dtdNotation(G,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},L.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},L.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},L.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},L.prototype.openNode=function(w){var U,G,Y,q;if(!w.isOpen){if(!this.root&&this.currentLevel===0&&w.type===e.Element&&(this.root=w),G="",w.type===e.Element){this.writerOptions.state=t.OpenTag,G=this.writer.indent(w,this.writerOptions,this.currentLevel)+"<"+w.name,q=w.attribs;for(Y in q)d.call(q,Y)&&(U=q[Y],G+=this.writer.attribute(U,this.writerOptions,this.currentLevel));G+=(w.children?">":"/>")+this.writer.endline(w,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,G=this.writer.indent(w,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+w.rootNodeName,w.pubID&&w.sysID?G+=' PUBLIC "'+w.pubID+'" "'+w.sysID+'"':w.sysID&&(G+=' SYSTEM "'+w.sysID+'"'),w.children?(G+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,G+=">"),G+=this.writer.endline(w,this.writerOptions,this.currentLevel);return this.onData(G,this.currentLevel),w.isOpen=!0}},L.prototype.closeNode=function(w){var U;if(!w.isClosed)return U="",this.writerOptions.state=t.CloseTag,w.type===e.Element?U=this.writer.indent(w,this.writerOptions,this.currentLevel)+"</"+w.name+">"+this.writer.endline(w,this.writerOptions,this.currentLevel):U=this.writer.indent(w,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(w,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(U,this.currentLevel),w.isClosed=!0},L.prototype.onData=function(w,U){return this.documentStarted=!0,this.onDataCallback(w,U+1)},L.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},L.prototype.debugInfo=function(w){return w==null?"":"node: <"+w+">"},L.prototype.ele=function(){return this.element.apply(this,arguments)},L.prototype.nod=function(w,U,G){return this.node(w,U,G)},L.prototype.txt=function(w){return this.text(w)},L.prototype.dat=function(w){return this.cdata(w)},L.prototype.com=function(w){return this.comment(w)},L.prototype.ins=function(w,U){return this.instruction(w,U)},L.prototype.dec=function(w,U,G){return this.declaration(w,U,G)},L.prototype.dtd=function(w,U,G){return this.doctype(w,U,G)},L.prototype.e=function(w,U,G){return this.element(w,U,G)},L.prototype.n=function(w,U,G){return this.node(w,U,G)},L.prototype.t=function(w){return this.text(w)},L.prototype.d=function(w){return this.cdata(w)},L.prototype.c=function(w){return this.comment(w)},L.prototype.r=function(w){return this.raw(w)},L.prototype.i=function(w,U){return this.instruction(w,U)},L.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},L.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},L.prototype.ent=function(w,U){return this.entity(w,U)},L.prototype.pent=function(w,U){return this.pEntity(w,U)},L.prototype.not=function(w,U){return this.notation(w,U)},L}()}).call(Be)),Gc.exports}var Yc={exports:{}},od;function jw(){return od||(od=1,(function(){var e,t,n,r=function(i,a){for(var s in a)o.call(a,s)&&(i[s]=a[s]);function u(){this.constructor=i}return u.prototype=a.prototype,i.prototype=new u,i.__super__=a.prototype,i},o={}.hasOwnProperty;e=Nt(),n=Nv(),t=mu(),Yc.exports=function(i){r(a,i);function a(s,u){this.stream=s,a.__super__.constructor.call(this,u)}return a.prototype.endline=function(s,u,f){return s.isLastRootNode&&u.state===t.CloseTag?"":a.__super__.endline.call(this,s,u,f)},a.prototype.document=function(s,u){var f,l,p,y,g,v,S,M,P;for(S=s.children,l=p=0,g=S.length;p<g;l=++p)f=S[l],f.isLastRootNode=l===s.children.length-1;for(u=this.filterOptions(u),M=s.children,P=[],y=0,v=M.length;y<v;y++)f=M[y],P.push(this.writeChildNode(f,u,0));return P},a.prototype.attribute=function(s,u,f){return this.stream.write(a.__super__.attribute.call(this,s,u,f))},a.prototype.cdata=function(s,u,f){return this.stream.write(a.__super__.cdata.call(this,s,u,f))},a.prototype.comment=function(s,u,f){return this.stream.write(a.__super__.comment.call(this,s,u,f))},a.prototype.declaration=function(s,u,f){return this.stream.write(a.__super__.declaration.call(this,s,u,f))},a.prototype.docType=function(s,u,f){var l,p,y,g;if(f||(f=0),this.openNode(s,u,f),u.state=t.OpenTag,this.stream.write(this.indent(s,u,f)),this.stream.write("<!DOCTYPE "+s.root().name),s.pubID&&s.sysID?this.stream.write(' PUBLIC "'+s.pubID+'" "'+s.sysID+'"'):s.sysID&&this.stream.write(' SYSTEM "'+s.sysID+'"'),s.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(s,u,f)),u.state=t.InsideTag,g=s.children,p=0,y=g.length;p<y;p++)l=g[p],this.writeChildNode(l,u,f+1);u.state=t.CloseTag,this.stream.write("]")}return u.state=t.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(s,u,f)),u.state=t.None,this.closeNode(s,u,f)},a.prototype.element=function(s,u,f){var l,p,y,g,v,S,M,P,T;f||(f=0),this.openNode(s,u,f),u.state=t.OpenTag,this.stream.write(this.indent(s,u,f)+"<"+s.name),P=s.attribs;for(M in P)o.call(P,M)&&(l=P[M],this.attribute(l,u,f));if(y=s.children.length,g=y===0?null:s.children[0],y===0||s.children.every(function(m){return(m.type===e.Text||m.type===e.Raw)&&m.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=t.CloseTag,this.stream.write("</"+s.name+">")):(u.state=t.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&y===1&&(g.type===e.Text||g.type===e.Raw)&&g.value!=null)this.stream.write(">"),u.state=t.InsideTag,u.suppressPrettyCount++,this.writeChildNode(g,u,f+1),u.suppressPrettyCount--,u.state=t.CloseTag,this.stream.write("</"+s.name+">");else{for(this.stream.write(">"+this.endline(s,u,f)),u.state=t.InsideTag,T=s.children,v=0,S=T.length;v<S;v++)p=T[v],this.writeChildNode(p,u,f+1);u.state=t.CloseTag,this.stream.write(this.indent(s,u,f)+"</"+s.name+">")}return this.stream.write(this.endline(s,u,f)),u.state=t.None,this.closeNode(s,u,f)},a.prototype.processingInstruction=function(s,u,f){return this.stream.write(a.__super__.processingInstruction.call(this,s,u,f))},a.prototype.raw=function(s,u,f){return this.stream.write(a.__super__.raw.call(this,s,u,f))},a.prototype.text=function(s,u,f){return this.stream.write(a.__super__.text.call(this,s,u,f))},a.prototype.dtdAttList=function(s,u,f){return this.stream.write(a.__super__.dtdAttList.call(this,s,u,f))},a.prototype.dtdElement=function(s,u,f){return this.stream.write(a.__super__.dtdElement.call(this,s,u,f))},a.prototype.dtdEntity=function(s,u,f){return this.stream.write(a.__super__.dtdEntity.call(this,s,u,f))},a.prototype.dtdNotation=function(s,u,f){return this.stream.write(a.__super__.dtdNotation.call(this,s,u,f))},a}(n)}).call(Be)),Yc.exports}var ad;function $w(){return ad||(ad=1,(function(){var e,t,n,r,o,i,a,s,u,f;f=Br(),s=f.assign,u=f.isFunction,n=Pv(),r=Iv(),o=Fw(),a=Yl(),i=jw(),e=Nt(),t=mu(),Er.create=function(l,p,y,g){var v,S;if(l==null)throw new Error("Root element needs a name.");return g=s({},p,y,g),v=new r(g),S=v.element(l),g.headless||(v.declaration(g),(g.pubID!=null||g.sysID!=null)&&v.dtd(g)),S},Er.begin=function(l,p,y){var g;return u(l)&&(g=[l,p],p=g[0],y=g[1],l={}),p?new o(l,p,y):new r(l)},Er.stringWriter=function(l){return new a(l)},Er.streamWriter=function(l,p){return new i(l,p)},Er.implementation=new n,Er.nodeType=e,Er.writerState=t}).call(Be)),Er}var sd;function Hw(){return sd||(sd=1,(function(){var e,t,n,r,o,i={}.hasOwnProperty;e=$w(),t=Ll().defaults,r=function(a){return typeof a=="string"&&(a.indexOf("&")>=0||a.indexOf(">")>=0||a.indexOf("<")>=0)},o=function(a){return"<![CDATA["+n(a)+"]]>"},n=function(a){return a.replace("]]>","]]]]><![CDATA[>")},mc.Builder=function(){function a(s){var u,f,l;this.options={},f=t["0.2"];for(u in f)i.call(f,u)&&(l=f[u],this.options[u]=l);for(u in s)i.call(s,u)&&(l=s[u],this.options[u]=l)}return a.prototype.buildObject=function(s){var u,f,l,p,y;return u=this.options.attrkey,f=this.options.charkey,Object.keys(s).length===1&&this.options.rootName===t["0.2"].rootName?(y=Object.keys(s)[0],s=s[y]):y=this.options.rootName,l=function(g){return function(v,S){var M,P,T,m,x,b;if(typeof S!="object")g.options.cdata&&r(S)?v.raw(o(S)):v.txt(S);else if(Array.isArray(S)){for(m in S)if(i.call(S,m)){P=S[m];for(x in P)T=P[x],v=l(v.ele(x),T).up()}}else for(x in S)if(i.call(S,x))if(P=S[x],x===u){if(typeof P=="object")for(M in P)b=P[M],v=v.att(M,b)}else if(x===f)g.options.cdata&&r(P)?v=v.raw(o(P)):v=v.txt(P);else if(Array.isArray(P))for(m in P)i.call(P,m)&&(T=P[m],typeof T=="string"?g.options.cdata&&r(T)?v=v.ele(x).raw(o(T)).up():v=v.ele(x,T).up():v=l(v.ele(x),T).up());else typeof P=="object"?v=l(v.ele(x),P).up():typeof P=="string"&&g.options.cdata&&r(P)?v=v.ele(x).raw(o(P)).up():(P==null&&(P=""),v=v.ele(x,P.toString()).up());return v}}(this),p=e.create(y,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(p,s).end(this.options.renderOpts)},a}()}).call(Be)),mc}var Kc={},Zc={},fs={exports:{}},ud;function _u(){if(ud)return fs.exports;ud=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(b,I,d){return Function.prototype.apply.call(b,I,d)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:n=function(b){return Object.getOwnPropertyNames(b)};function r(x){console&&console.warn&&console.warn(x)}var o=Number.isNaN||function(b){return b!==b};function i(){i.init.call(this)}fs.exports=i,fs.exports.once=P,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(x){if(typeof x!="number"||x<0||o(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");a=x}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||o(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};function u(x){return x._maxListeners===void 0?i.defaultMaxListeners:x._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(b){for(var I=[],d=1;d<arguments.length;d++)I.push(arguments[d]);var L=b==="error",w=this._events;if(w!==void 0)L=L&&w.error===void 0;else if(!L)return!1;if(L){var U;if(I.length>0&&(U=I[0]),U instanceof Error)throw U;var G=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw G.context=U,G}var Y=w[b];if(Y===void 0)return!1;if(typeof Y=="function")t(Y,this,I);else for(var q=Y.length,fe=v(Y,q),d=0;d<q;++d)t(fe[d],this,I);return!0};function f(x,b,I,d){var L,w,U;if(s(I),w=x._events,w===void 0?(w=x._events=Object.create(null),x._eventsCount=0):(w.newListener!==void 0&&(x.emit("newListener",b,I.listener?I.listener:I),w=x._events),U=w[b]),U===void 0)U=w[b]=I,++x._eventsCount;else if(typeof U=="function"?U=w[b]=d?[I,U]:[U,I]:d?U.unshift(I):U.push(I),L=u(x),L>0&&U.length>L&&!U.warned){U.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=x,G.type=b,G.count=U.length,r(G)}return x}i.prototype.addListener=function(b,I){return f(this,b,I,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(b,I){return f(this,b,I,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(x,b,I){var d={fired:!1,wrapFn:void 0,target:x,type:b,listener:I},L=l.bind(d);return L.listener=I,d.wrapFn=L,L}i.prototype.once=function(b,I){return s(I),this.on(b,p(this,b,I)),this},i.prototype.prependOnceListener=function(b,I){return s(I),this.prependListener(b,p(this,b,I)),this},i.prototype.removeListener=function(b,I){var d,L,w,U,G;if(s(I),L=this._events,L===void 0)return this;if(d=L[b],d===void 0)return this;if(d===I||d.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete L[b],L.removeListener&&this.emit("removeListener",b,d.listener||I));else if(typeof d!="function"){for(w=-1,U=d.length-1;U>=0;U--)if(d[U]===I||d[U].listener===I){G=d[U].listener,w=U;break}if(w<0)return this;w===0?d.shift():S(d,w),d.length===1&&(L[b]=d[0]),L.removeListener!==void 0&&this.emit("removeListener",b,G||I)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(b){var I,d,L;if(d=this._events,d===void 0)return this;if(d.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):d[b]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete d[b]),this;if(arguments.length===0){var w=Object.keys(d),U;for(L=0;L<w.length;++L)U=w[L],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=d[b],typeof I=="function")this.removeListener(b,I);else if(I!==void 0)for(L=I.length-1;L>=0;L--)this.removeListener(b,I[L]);return this};function y(x,b,I){var d=x._events;if(d===void 0)return[];var L=d[b];return L===void 0?[]:typeof L=="function"?I?[L.listener||L]:[L]:I?M(L):v(L,L.length)}i.prototype.listeners=function(b){return y(this,b,!0)},i.prototype.rawListeners=function(b){return y(this,b,!1)},i.listenerCount=function(x,b){return typeof x.listenerCount=="function"?x.listenerCount(b):g.call(x,b)},i.prototype.listenerCount=g;function g(x){var b=this._events;if(b!==void 0){var I=b[x];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(x,b){for(var I=new Array(b),d=0;d<b;++d)I[d]=x[d];return I}function S(x,b){for(;b+1<x.length;b++)x[b]=x[b+1];x.pop()}function M(x){for(var b=new Array(x.length),I=0;I<b.length;++I)b[I]=x[I].listener||x[I];return b}function P(x,b){return new Promise(function(I,d){function L(U){x.removeListener(b,w),d(U)}function w(){typeof x.removeListener=="function"&&x.removeListener("error",L),I([].slice.call(arguments))}m(x,b,w,{once:!0}),b!=="error"&&T(x,L,{once:!0})})}function T(x,b,I){typeof x.on=="function"&&m(x,"error",b,I)}function m(x,b,I,d){if(typeof x.on=="function")d.once?x.once(b,I):x.on(b,I);else if(typeof x.addEventListener=="function")x.addEventListener(b,function L(w){d.once&&x.removeEventListener(b,L),I(w)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return fs.exports}var Qf={exports:{}};typeof Object.create=="function"?Qf.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Qf.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var Gi=Qf.exports;const Uw=xo(Gi);var Qc,cd;function Lv(){return cd||(cd=1,Qc=_u().EventEmitter),Qc}var Jc={},Yo={},fd;function qw(){if(fd)return Yo;fd=1,Yo.byteLength=s,Yo.toByteArray=f,Yo.fromByteArray=y;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;++o)e[o]=r[o],t[r.charCodeAt(o)]=o;t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;function a(g){var v=g.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=g.indexOf("=");S===-1&&(S=v);var M=S===v?0:4-S%4;return[S,M]}function s(g){var v=a(g),S=v[0],M=v[1];return(S+M)*3/4-M}function u(g,v,S){return(v+S)*3/4-S}function f(g){var v,S=a(g),M=S[0],P=S[1],T=new n(u(g,M,P)),m=0,x=P>0?M-4:M,b;for(b=0;b<x;b+=4)v=t[g.charCodeAt(b)]<<18|t[g.charCodeAt(b+1)]<<12|t[g.charCodeAt(b+2)]<<6|t[g.charCodeAt(b+3)],T[m++]=v>>16&255,T[m++]=v>>8&255,T[m++]=v&255;return P===2&&(v=t[g.charCodeAt(b)]<<2|t[g.charCodeAt(b+1)]>>4,T[m++]=v&255),P===1&&(v=t[g.charCodeAt(b)]<<10|t[g.charCodeAt(b+1)]<<4|t[g.charCodeAt(b+2)]>>2,T[m++]=v>>8&255,T[m++]=v&255),T}function l(g){return e[g>>18&63]+e[g>>12&63]+e[g>>6&63]+e[g&63]}function p(g,v,S){for(var M,P=[],T=v;T<S;T+=3)M=(g[T]<<16&16711680)+(g[T+1]<<8&65280)+(g[T+2]&255),P.push(l(M));return P.join("")}function y(g){for(var v,S=g.length,M=S%3,P=[],T=16383,m=0,x=S-M;m<x;m+=T)P.push(p(g,m,m+T>x?x:m+T));return M===1?(v=g[S-1],P.push(e[v>>2]+e[v<<4&63]+"==")):M===2&&(v=(g[S-2]<<8)+g[S-1],P.push(e[v>>10]+e[v>>4&63]+e[v<<2&63]+"=")),P.join("")}return Yo}var ls={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ld;function Ww(){return ld||(ld=1,ls.read=function(e,t,n,r,o){var i,a,s=o*8-r-1,u=(1<<s)-1,f=u>>1,l=-7,p=n?o-1:0,y=n?-1:1,g=e[t+p];for(p+=y,i=g&(1<<-l)-1,g>>=-l,l+=s;l>0;i=i*256+e[t+p],p+=y,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=a*256+e[t+p],p+=y,l-=8);if(i===0)i=1-f;else{if(i===u)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-f}return(g?-1:1)*a*Math.pow(2,i-r)},ls.write=function(e,t,n,r,o,i){var a,s,u,f=i*8-o-1,l=(1<<f)-1,p=l>>1,y=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,S=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+p>=1?t+=y/u:t+=y*Math.pow(2,1-p),t*u>=2&&(a++,u/=2),a+p>=l?(s=0,a=l):a+p>=1?(s=(t*u-1)*Math.pow(2,o),a=a+p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[n+g]=s&255,g+=v,s/=256,o-=8);for(a=a<<o|s,f+=o;f>0;e[n+g]=a&255,g+=v,a/=256,f-=8);e[n+g-v]|=S*128}),ls}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hd;function xu(){return hd||(hd=1,function(e){var t=qw(),n=Ww(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;var o=2147483647;e.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var F=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(F,C),F.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(F){if(F>o)throw new RangeError('The value "'+F+'" is invalid for option "size"');var C=new Uint8Array(F);return Object.setPrototypeOf(C,s.prototype),C}function s(F,C,R){if(typeof F=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(F)}return u(F,C,R)}s.poolSize=8192;function u(F,C,R){if(typeof F=="string")return y(F,C);if(ArrayBuffer.isView(F))return v(F);if(F==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(re(F,ArrayBuffer)||F&&re(F.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(F,SharedArrayBuffer)||F&&re(F.buffer,SharedArrayBuffer)))return S(F,C,R);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var z=F.valueOf&&F.valueOf();if(z!=null&&z!==F)return s.from(z,C,R);var Q=M(F);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return s.from(F[Symbol.toPrimitive]("string"),C,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}s.from=function(F,C,R){return u(F,C,R)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function f(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function l(F,C,R){return f(F),F<=0?a(F):C!==void 0?typeof R=="string"?a(F).fill(C,R):a(F).fill(C):a(F)}s.alloc=function(F,C,R){return l(F,C,R)};function p(F){return f(F),a(F<0?0:P(F)|0)}s.allocUnsafe=function(F){return p(F)},s.allocUnsafeSlow=function(F){return p(F)};function y(F,C){if((typeof C!="string"||C==="")&&(C="utf8"),!s.isEncoding(C))throw new TypeError("Unknown encoding: "+C);var R=m(F,C)|0,z=a(R),Q=z.write(F,C);return Q!==R&&(z=z.slice(0,Q)),z}function g(F){for(var C=F.length<0?0:P(F.length)|0,R=a(C),z=0;z<C;z+=1)R[z]=F[z]&255;return R}function v(F){if(re(F,Uint8Array)){var C=new Uint8Array(F);return S(C.buffer,C.byteOffset,C.byteLength)}return g(F)}function S(F,C,R){if(C<0||F.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<C+(R||0))throw new RangeError('"length" is outside of buffer bounds');var z;return C===void 0&&R===void 0?z=new Uint8Array(F):R===void 0?z=new Uint8Array(F,C):z=new Uint8Array(F,C,R),Object.setPrototypeOf(z,s.prototype),z}function M(F){if(s.isBuffer(F)){var C=P(F.length)|0,R=a(C);return R.length===0||F.copy(R,0,0,C),R}if(F.length!==void 0)return typeof F.length!="number"||ve(F.length)?a(0):g(F);if(F.type==="Buffer"&&Array.isArray(F.data))return g(F.data)}function P(F){if(F>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return F|0}function T(F){return+F!=F&&(F=0),s.alloc(+F)}s.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==s.prototype},s.compare=function(C,R){if(re(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),re(R,Uint8Array)&&(R=s.from(R,R.offset,R.byteLength)),!s.isBuffer(C)||!s.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===R)return 0;for(var z=C.length,Q=R.length,he=0,me=Math.min(z,Q);he<me;++he)if(C[he]!==R[he]){z=C[he],Q=R[he];break}return z<Q?-1:Q<z?1:0},s.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(C,R){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return s.alloc(0);var z;if(R===void 0)for(R=0,z=0;z<C.length;++z)R+=C[z].length;var Q=s.allocUnsafe(R),he=0;for(z=0;z<C.length;++z){var me=C[z];if(re(me,Uint8Array))he+me.length>Q.length?s.from(me).copy(Q,he):Uint8Array.prototype.set.call(Q,me,he);else if(s.isBuffer(me))me.copy(Q,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=me.length}return Q};function m(F,C){if(s.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||re(F,ArrayBuffer))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);var R=F.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&R===0)return 0;for(var Q=!1;;)switch(C){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return D(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return $(F).length;default:if(Q)return z?-1:D(F).length;C=(""+C).toLowerCase(),Q=!0}}s.byteLength=m;function x(F,C,R){var z=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,C>>>=0,R<=C))return"";for(F||(F="utf8");;)switch(F){case"hex":return Xe(this,C,R);case"utf8":case"utf-8":return fe(this,C,R);case"ascii":return ye(this,C,R);case"latin1":case"binary":return Ue(this,C,R);case"base64":return q(this,C,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,C,R);default:if(z)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),z=!0}}s.prototype._isBuffer=!0;function b(F,C,R){var z=F[C];F[C]=F[R],F[R]=z}s.prototype.swap16=function(){var C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<C;R+=2)b(this,R,R+1);return this},s.prototype.swap32=function(){var C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<C;R+=4)b(this,R,R+3),b(this,R+1,R+2);return this},s.prototype.swap64=function(){var C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<C;R+=8)b(this,R,R+7),b(this,R+1,R+6),b(this,R+2,R+5),b(this,R+3,R+4);return this},s.prototype.toString=function(){var C=this.length;return C===0?"":arguments.length===0?fe(this,0,C):x.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(C){if(!s.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:s.compare(this,C)===0},s.prototype.inspect=function(){var C="",R=e.INSPECT_MAX_BYTES;return C=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(C+=" ... "),"<Buffer "+C+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(C,R,z,Q,he){if(re(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),!s.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(R===void 0&&(R=0),z===void 0&&(z=C?C.length:0),Q===void 0&&(Q=0),he===void 0&&(he=this.length),R<0||z>C.length||Q<0||he>this.length)throw new RangeError("out of range index");if(Q>=he&&R>=z)return 0;if(Q>=he)return-1;if(R>=z)return 1;if(R>>>=0,z>>>=0,Q>>>=0,he>>>=0,this===C)return 0;for(var me=he-Q,Oe=z-R,Ee=Math.min(me,Oe),de=this.slice(Q,he),Qe=C.slice(R,z),at=0;at<Ee;++at)if(de[at]!==Qe[at]){me=de[at],Oe=Qe[at];break}return me<Oe?-1:Oe<me?1:0};function I(F,C,R,z,Q){if(F.length===0)return-1;if(typeof R=="string"?(z=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,ve(R)&&(R=Q?0:F.length-1),R<0&&(R=F.length+R),R>=F.length){if(Q)return-1;R=F.length-1}else if(R<0)if(Q)R=0;else return-1;if(typeof C=="string"&&(C=s.from(C,z)),s.isBuffer(C))return C.length===0?-1:d(F,C,R,z,Q);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(F,C,R):Uint8Array.prototype.lastIndexOf.call(F,C,R):d(F,[C],R,z,Q);throw new TypeError("val must be string, number or Buffer")}function d(F,C,R,z,Q){var he=1,me=F.length,Oe=C.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(F.length<2||C.length<2)return-1;he=2,me/=2,Oe/=2,R/=2}function Ee(Ai,Vr){return he===1?Ai[Vr]:Ai.readUInt16BE(Vr*he)}var de;if(Q){var Qe=-1;for(de=R;de<me;de++)if(Ee(F,de)===Ee(C,Qe===-1?0:de-Qe)){if(Qe===-1&&(Qe=de),de-Qe+1===Oe)return Qe*he}else Qe!==-1&&(de-=de-Qe),Qe=-1}else for(R+Oe>me&&(R=me-Oe),de=R;de>=0;de--){for(var at=!0,Xt=0;Xt<Oe;Xt++)if(Ee(F,de+Xt)!==Ee(C,Xt)){at=!1;break}if(at)return de}return-1}s.prototype.includes=function(C,R,z){return this.indexOf(C,R,z)!==-1},s.prototype.indexOf=function(C,R,z){return I(this,C,R,z,!0)},s.prototype.lastIndexOf=function(C,R,z){return I(this,C,R,z,!1)};function L(F,C,R,z){R=Number(R)||0;var Q=F.length-R;z?(z=Number(z),z>Q&&(z=Q)):z=Q;var he=C.length;z>he/2&&(z=he/2);for(var me=0;me<z;++me){var Oe=parseInt(C.substr(me*2,2),16);if(ve(Oe))return me;F[R+me]=Oe}return me}function w(F,C,R,z){return H(D(C,F.length-R),F,R,z)}function U(F,C,R,z){return H(ee(C),F,R,z)}function G(F,C,R,z){return H($(C),F,R,z)}function Y(F,C,R,z){return H(V(C,F.length-R),F,R,z)}s.prototype.write=function(C,R,z,Q){if(R===void 0)Q="utf8",z=this.length,R=0;else if(z===void 0&&typeof R=="string")Q=R,z=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(z)?(z=z>>>0,Q===void 0&&(Q="utf8")):(Q=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var he=this.length-R;if((z===void 0||z>he)&&(z=he),C.length>0&&(z<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");for(var me=!1;;)switch(Q){case"hex":return L(this,C,R,z);case"utf8":case"utf-8":return w(this,C,R,z);case"ascii":case"latin1":case"binary":return U(this,C,R,z);case"base64":return G(this,C,R,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,C,R,z);default:if(me)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),me=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(F,C,R){return C===0&&R===F.length?t.fromByteArray(F):t.fromByteArray(F.slice(C,R))}function fe(F,C,R){R=Math.min(F.length,R);for(var z=[],Q=C;Q<R;){var he=F[Q],me=null,Oe=he>239?4:he>223?3:he>191?2:1;if(Q+Oe<=R){var Ee,de,Qe,at;switch(Oe){case 1:he<128&&(me=he);break;case 2:Ee=F[Q+1],(Ee&192)===128&&(at=(he&31)<<6|Ee&63,at>127&&(me=at));break;case 3:Ee=F[Q+1],de=F[Q+2],(Ee&192)===128&&(de&192)===128&&(at=(he&15)<<12|(Ee&63)<<6|de&63,at>2047&&(at<55296||at>57343)&&(me=at));break;case 4:Ee=F[Q+1],de=F[Q+2],Qe=F[Q+3],(Ee&192)===128&&(de&192)===128&&(Qe&192)===128&&(at=(he&15)<<18|(Ee&63)<<12|(de&63)<<6|Qe&63,at>65535&&at<1114112&&(me=at))}}me===null?(me=65533,Oe=1):me>65535&&(me-=65536,z.push(me>>>10&1023|55296),me=56320|me&1023),z.push(me),Q+=Oe}return we(z)}var Te=4096;function we(F){var C=F.length;if(C<=Te)return String.fromCharCode.apply(String,F);for(var R="",z=0;z<C;)R+=String.fromCharCode.apply(String,F.slice(z,z+=Te));return R}function ye(F,C,R){var z="";R=Math.min(F.length,R);for(var Q=C;Q<R;++Q)z+=String.fromCharCode(F[Q]&127);return z}function Ue(F,C,R){var z="";R=Math.min(F.length,R);for(var Q=C;Q<R;++Q)z+=String.fromCharCode(F[Q]);return z}function Xe(F,C,R){var z=F.length;(!C||C<0)&&(C=0),(!R||R<0||R>z)&&(R=z);for(var Q="",he=C;he<R;++he)Q+=Le[F[he]];return Q}function ot(F,C,R){for(var z=F.slice(C,R),Q="",he=0;he<z.length-1;he+=2)Q+=String.fromCharCode(z[he]+z[he+1]*256);return Q}s.prototype.slice=function(C,R){var z=this.length;C=~~C,R=R===void 0?z:~~R,C<0?(C+=z,C<0&&(C=0)):C>z&&(C=z),R<0?(R+=z,R<0&&(R=0)):R>z&&(R=z),R<C&&(R=C);var Q=this.subarray(C,R);return Object.setPrototypeOf(Q,s.prototype),Q};function $e(F,C,R){if(F%1!==0||F<0)throw new RangeError("offset is not uint");if(F+C>R)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(C,R,z){C=C>>>0,R=R>>>0,z||$e(C,R,this.length);for(var Q=this[C],he=1,me=0;++me<R&&(he*=256);)Q+=this[C+me]*he;return Q},s.prototype.readUintBE=s.prototype.readUIntBE=function(C,R,z){C=C>>>0,R=R>>>0,z||$e(C,R,this.length);for(var Q=this[C+--R],he=1;R>0&&(he*=256);)Q+=this[C+--R]*he;return Q},s.prototype.readUint8=s.prototype.readUInt8=function(C,R){return C=C>>>0,R||$e(C,1,this.length),this[C]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(C,R){return C=C>>>0,R||$e(C,2,this.length),this[C]|this[C+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(C,R){return C=C>>>0,R||$e(C,2,this.length),this[C]<<8|this[C+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(C,R){return C=C>>>0,R||$e(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(C,R){return C=C>>>0,R||$e(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},s.prototype.readIntLE=function(C,R,z){C=C>>>0,R=R>>>0,z||$e(C,R,this.length);for(var Q=this[C],he=1,me=0;++me<R&&(he*=256);)Q+=this[C+me]*he;return he*=128,Q>=he&&(Q-=Math.pow(2,8*R)),Q},s.prototype.readIntBE=function(C,R,z){C=C>>>0,R=R>>>0,z||$e(C,R,this.length);for(var Q=R,he=1,me=this[C+--Q];Q>0&&(he*=256);)me+=this[C+--Q]*he;return he*=128,me>=he&&(me-=Math.pow(2,8*R)),me},s.prototype.readInt8=function(C,R){return C=C>>>0,R||$e(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},s.prototype.readInt16LE=function(C,R){C=C>>>0,R||$e(C,2,this.length);var z=this[C]|this[C+1]<<8;return z&32768?z|4294901760:z},s.prototype.readInt16BE=function(C,R){C=C>>>0,R||$e(C,2,this.length);var z=this[C+1]|this[C]<<8;return z&32768?z|4294901760:z},s.prototype.readInt32LE=function(C,R){return C=C>>>0,R||$e(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},s.prototype.readInt32BE=function(C,R){return C=C>>>0,R||$e(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},s.prototype.readFloatLE=function(C,R){return C=C>>>0,R||$e(C,4,this.length),n.read(this,C,!0,23,4)},s.prototype.readFloatBE=function(C,R){return C=C>>>0,R||$e(C,4,this.length),n.read(this,C,!1,23,4)},s.prototype.readDoubleLE=function(C,R){return C=C>>>0,R||$e(C,8,this.length),n.read(this,C,!0,52,8)},s.prototype.readDoubleBE=function(C,R){return C=C>>>0,R||$e(C,8,this.length),n.read(this,C,!1,52,8)};function Ze(F,C,R,z,Q,he){if(!s.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>Q||C<he)throw new RangeError('"value" argument is out of bounds');if(R+z>F.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(C,R,z,Q){if(C=+C,R=R>>>0,z=z>>>0,!Q){var he=Math.pow(2,8*z)-1;Ze(this,C,R,z,he,0)}var me=1,Oe=0;for(this[R]=C&255;++Oe<z&&(me*=256);)this[R+Oe]=C/me&255;return R+z},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(C,R,z,Q){if(C=+C,R=R>>>0,z=z>>>0,!Q){var he=Math.pow(2,8*z)-1;Ze(this,C,R,z,he,0)}var me=z-1,Oe=1;for(this[R+me]=C&255;--me>=0&&(Oe*=256);)this[R+me]=C/Oe&255;return R+z},s.prototype.writeUint8=s.prototype.writeUInt8=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,1,255,0),this[R]=C&255,R+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,2,65535,0),this[R]=C&255,this[R+1]=C>>>8,R+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,2,65535,0),this[R]=C>>>8,this[R+1]=C&255,R+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,4,4294967295,0),this[R+3]=C>>>24,this[R+2]=C>>>16,this[R+1]=C>>>8,this[R]=C&255,R+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,4,4294967295,0),this[R]=C>>>24,this[R+1]=C>>>16,this[R+2]=C>>>8,this[R+3]=C&255,R+4},s.prototype.writeIntLE=function(C,R,z,Q){if(C=+C,R=R>>>0,!Q){var he=Math.pow(2,8*z-1);Ze(this,C,R,z,he-1,-he)}var me=0,Oe=1,Ee=0;for(this[R]=C&255;++me<z&&(Oe*=256);)C<0&&Ee===0&&this[R+me-1]!==0&&(Ee=1),this[R+me]=(C/Oe>>0)-Ee&255;return R+z},s.prototype.writeIntBE=function(C,R,z,Q){if(C=+C,R=R>>>0,!Q){var he=Math.pow(2,8*z-1);Ze(this,C,R,z,he-1,-he)}var me=z-1,Oe=1,Ee=0;for(this[R+me]=C&255;--me>=0&&(Oe*=256);)C<0&&Ee===0&&this[R+me+1]!==0&&(Ee=1),this[R+me]=(C/Oe>>0)-Ee&255;return R+z},s.prototype.writeInt8=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,1,127,-128),C<0&&(C=255+C+1),this[R]=C&255,R+1},s.prototype.writeInt16LE=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,2,32767,-32768),this[R]=C&255,this[R+1]=C>>>8,R+2},s.prototype.writeInt16BE=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,2,32767,-32768),this[R]=C>>>8,this[R+1]=C&255,R+2},s.prototype.writeInt32LE=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,4,2147483647,-2147483648),this[R]=C&255,this[R+1]=C>>>8,this[R+2]=C>>>16,this[R+3]=C>>>24,R+4},s.prototype.writeInt32BE=function(C,R,z){return C=+C,R=R>>>0,z||Ze(this,C,R,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[R]=C>>>24,this[R+1]=C>>>16,this[R+2]=C>>>8,this[R+3]=C&255,R+4};function gt(F,C,R,z,Q,he){if(R+z>F.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function xt(F,C,R,z,Q){return C=+C,R=R>>>0,Q||gt(F,C,R,4),n.write(F,C,R,z,23,4),R+4}s.prototype.writeFloatLE=function(C,R,z){return xt(this,C,R,!0,z)},s.prototype.writeFloatBE=function(C,R,z){return xt(this,C,R,!1,z)};function lt(F,C,R,z,Q){return C=+C,R=R>>>0,Q||gt(F,C,R,8),n.write(F,C,R,z,52,8),R+8}s.prototype.writeDoubleLE=function(C,R,z){return lt(this,C,R,!0,z)},s.prototype.writeDoubleBE=function(C,R,z){return lt(this,C,R,!1,z)},s.prototype.copy=function(C,R,z,Q){if(!s.isBuffer(C))throw new TypeError("argument should be a Buffer");if(z||(z=0),!Q&&Q!==0&&(Q=this.length),R>=C.length&&(R=C.length),R||(R=0),Q>0&&Q<z&&(Q=z),Q===z||C.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),C.length-R<Q-z&&(Q=C.length-R+z);var he=Q-z;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,z,Q):Uint8Array.prototype.set.call(C,this.subarray(z,Q),R),he},s.prototype.fill=function(C,R,z,Q){if(typeof C=="string"){if(typeof R=="string"?(Q=R,R=0,z=this.length):typeof z=="string"&&(Q=z,z=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!s.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(C.length===1){var he=C.charCodeAt(0);(Q==="utf8"&&he<128||Q==="latin1")&&(C=he)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(R<0||this.length<R||this.length<z)throw new RangeError("Out of range index");if(z<=R)return this;R=R>>>0,z=z===void 0?this.length:z>>>0,C||(C=0);var me;if(typeof C=="number")for(me=R;me<z;++me)this[me]=C;else{var Oe=s.isBuffer(C)?C:s.from(C,Q),Ee=Oe.length;if(Ee===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(me=0;me<z-R;++me)this[me+R]=Oe[me%Ee]}return this};var se=/[^+/0-9A-Za-z-_]/g;function A(F){if(F=F.split("=")[0],F=F.trim().replace(se,""),F.length<2)return"";for(;F.length%4!==0;)F=F+"=";return F}function D(F,C){C=C||1/0;for(var R,z=F.length,Q=null,he=[],me=0;me<z;++me){if(R=F.charCodeAt(me),R>55295&&R<57344){if(!Q){if(R>56319){(C-=3)>-1&&he.push(239,191,189);continue}else if(me+1===z){(C-=3)>-1&&he.push(239,191,189);continue}Q=R;continue}if(R<56320){(C-=3)>-1&&he.push(239,191,189),Q=R;continue}R=(Q-55296<<10|R-56320)+65536}else Q&&(C-=3)>-1&&he.push(239,191,189);if(Q=null,R<128){if((C-=1)<0)break;he.push(R)}else if(R<2048){if((C-=2)<0)break;he.push(R>>6|192,R&63|128)}else if(R<65536){if((C-=3)<0)break;he.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((C-=4)<0)break;he.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return he}function ee(F){for(var C=[],R=0;R<F.length;++R)C.push(F.charCodeAt(R)&255);return C}function V(F,C){for(var R,z,Q,he=[],me=0;me<F.length&&!((C-=2)<0);++me)R=F.charCodeAt(me),z=R>>8,Q=R%256,he.push(Q),he.push(z);return he}function $(F){return t.toByteArray(A(F))}function H(F,C,R,z){for(var Q=0;Q<z&&!(Q+R>=C.length||Q>=F.length);++Q)C[Q+R]=F[Q];return Q}function re(F,C){return F instanceof C||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===C.name}function ve(F){return F!==F}var Le=function(){for(var F="0123456789abcdef",C=new Array(256),R=0;R<16;++R)for(var z=R*16,Q=0;Q<16;++Q)C[z+Q]=F[R]+F[Q];return C}()}(Jc)),Jc}const zw={},Vw=Object.freeze(Object.defineProperty({__proto__:null,default:zw},Symbol.toStringTag,{value:"Module"})),Kl=I_(Vw);var ef,pd;function Xw(){if(pd)return ef;pd=1;function e(v,S){var M=Object.keys(v);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(v);S&&(P=P.filter(function(T){return Object.getOwnPropertyDescriptor(v,T).enumerable})),M.push.apply(M,P)}return M}function t(v){for(var S=1;S<arguments.length;S++){var M=arguments[S]!=null?arguments[S]:{};S%2?e(Object(M),!0).forEach(function(P){n(v,P,M[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(M)):e(Object(M)).forEach(function(P){Object.defineProperty(v,P,Object.getOwnPropertyDescriptor(M,P))})}return v}function n(v,S,M){return S=a(S),S in v?Object.defineProperty(v,S,{value:M,enumerable:!0,configurable:!0,writable:!0}):v[S]=M,v}function r(v,S){if(!(v instanceof S))throw new TypeError("Cannot call a class as a function")}function o(v,S){for(var M=0;M<S.length;M++){var P=S[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(v,a(P.key),P)}}function i(v,S,M){return S&&o(v.prototype,S),M&&o(v,M),Object.defineProperty(v,"prototype",{writable:!1}),v}function a(v){var S=s(v,"string");return typeof S=="symbol"?S:String(S)}function s(v,S){if(typeof v!="object"||v===null)return v;var M=v[Symbol.toPrimitive];if(M!==void 0){var P=M.call(v,S||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(v)}var u=xu(),f=u.Buffer,l=Kl,p=l.inspect,y=p&&p.custom||"inspect";function g(v,S,M){f.prototype.copy.call(v,S,M)}return ef=function(){function v(){r(this,v),this.head=null,this.tail=null,this.length=0}return i(v,[{key:"push",value:function(M){var P={data:M,next:null};this.length>0?this.tail.next=P:this.head=P,this.tail=P,++this.length}},{key:"unshift",value:function(M){var P={data:M,next:this.head};this.length===0&&(this.tail=P),this.head=P,++this.length}},{key:"shift",value:function(){if(this.length!==0){var M=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,M}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(M){if(this.length===0)return"";for(var P=this.head,T=""+P.data;P=P.next;)T+=M+P.data;return T}},{key:"concat",value:function(M){if(this.length===0)return f.alloc(0);for(var P=f.allocUnsafe(M>>>0),T=this.head,m=0;T;)g(T.data,P,m),m+=T.data.length,T=T.next;return P}},{key:"consume",value:function(M,P){var T;return M<this.head.data.length?(T=this.head.data.slice(0,M),this.head.data=this.head.data.slice(M)):M===this.head.data.length?T=this.shift():T=P?this._getString(M):this._getBuffer(M),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(M){var P=this.head,T=1,m=P.data;for(M-=m.length;P=P.next;){var x=P.data,b=M>x.length?x.length:M;if(b===x.length?m+=x:m+=x.slice(0,M),M-=b,M===0){b===x.length?(++T,P.next?this.head=P.next:this.head=this.tail=null):(this.head=P,P.data=x.slice(b));break}++T}return this.length-=T,m}},{key:"_getBuffer",value:function(M){var P=f.allocUnsafe(M),T=this.head,m=1;for(T.data.copy(P),M-=T.data.length;T=T.next;){var x=T.data,b=M>x.length?x.length:M;if(x.copy(P,P.length-M,0,b),M-=b,M===0){b===x.length?(++m,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=x.slice(b));break}++m}return this.length-=m,P}},{key:y,value:function(M,P){return p(this,t(t({},P),{},{depth:0,customInspect:!1}))}}]),v}(),ef}var tf,dd;function kv(){if(dd)return tf;dd=1;function e(a,s){var u=this,f=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return f||l?(s?s(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(o,this,a)):process.nextTick(o,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(p){!s&&p?u._writableState?u._writableState.errorEmitted?process.nextTick(n,u):(u._writableState.errorEmitted=!0,process.nextTick(t,u,p)):process.nextTick(t,u,p):s?(process.nextTick(n,u),s(p)):process.nextTick(n,u)}),this)}function t(a,s){o(a,s),n(a)}function n(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(a,s){a.emit("error",s)}function i(a,s){var u=a._readableState,f=a._writableState;u&&u.autoDestroy||f&&f.autoDestroy?a.destroy(s):a.emit("error",s)}return tf={destroy:e,undestroy:r,errorOrDestroy:i},tf}var nf={},gd;function So(){if(gd)return nf;gd=1;function e(s,u){s.prototype=Object.create(u.prototype),s.prototype.constructor=s,s.__proto__=u}var t={};function n(s,u,f){f||(f=Error);function l(y,g,v){return typeof u=="string"?u:u(y,g,v)}var p=function(y){e(g,y);function g(v,S,M){return y.call(this,l(v,S,M))||this}return g}(f);p.prototype.name=f.name,p.prototype.code=s,t[s]=p}function r(s,u){if(Array.isArray(s)){var f=s.length;return s=s.map(function(l){return String(l)}),f>2?"one of ".concat(u," ").concat(s.slice(0,f-1).join(", "),", or ")+s[f-1]:f===2?"one of ".concat(u," ").concat(s[0]," or ").concat(s[1]):"of ".concat(u," ").concat(s[0])}else return"of ".concat(u," ").concat(String(s))}function o(s,u,f){return s.substr(!f||f<0?0:+f,u.length)===u}function i(s,u,f){return(f===void 0||f>s.length)&&(f=s.length),s.substring(f-u.length,f)===u}function a(s,u,f){return typeof f!="number"&&(f=0),f+u.length>s.length?!1:s.indexOf(u,f)!==-1}return n("ERR_INVALID_OPT_VALUE",function(s,u){return'The value "'+u+'" is invalid for option "'+s+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(s,u,f){var l;typeof u=="string"&&o(u,"not ")?(l="must not be",u=u.replace(/^not /,"")):l="must be";var p;if(i(s," argument"))p="The ".concat(s," ").concat(l," ").concat(r(u,"type"));else{var y=a(s,".")?"property":"argument";p='The "'.concat(s,'" ').concat(y," ").concat(l," ").concat(r(u,"type"))}return p+=". Received type ".concat(typeof f),p},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),nf.codes=t,nf}var rf,yd;function Bv(){if(yd)return rf;yd=1;var e=So().codes.ERR_INVALID_OPT_VALUE;function t(r,o,i){return r.highWaterMark!=null?r.highWaterMark:o?r[i]:null}function n(r,o,i,a){var s=t(o,a,i);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var u=a?i:"highWaterMark";throw new e(u,s)}return Math.floor(s)}return r.objectMode?16:16*1024}return rf={getHighWaterMark:n},rf}var of,vd;function Gw(){if(vd)return of;vd=1,of=e;function e(n,r){if(t("noDeprecation"))return n;var o=!1;function i(){if(!o){if(t("throwDeprecation"))throw new Error(r);t("traceDeprecation")?console.trace(r):console.warn(r),o=!0}return n.apply(this,arguments)}return i}function t(n){try{if(!Be.localStorage)return!1}catch{return!1}var r=Be.localStorage[n];return r==null?!1:String(r).toLowerCase()==="true"}return of}var af,md;function Fv(){if(md)return af;md=1,af=L;function e(se){var A=this;this.next=null,this.entry=null,this.finish=function(){lt(A,se)}}var t;L.WritableState=I;var n={deprecate:Gw()},r=Lv(),o=xu().Buffer,i=(typeof Be<"u"?Be:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(se){return o.from(se)}function s(se){return o.isBuffer(se)||se instanceof i}var u=kv(),f=Bv(),l=f.getHighWaterMark,p=So().codes,y=p.ERR_INVALID_ARG_TYPE,g=p.ERR_METHOD_NOT_IMPLEMENTED,v=p.ERR_MULTIPLE_CALLBACK,S=p.ERR_STREAM_CANNOT_PIPE,M=p.ERR_STREAM_DESTROYED,P=p.ERR_STREAM_NULL_VALUES,T=p.ERR_STREAM_WRITE_AFTER_END,m=p.ERR_UNKNOWN_ENCODING,x=u.errorOrDestroy;Gi(L,r);function b(){}function I(se,A,D){t=t||_o(),se=se||{},typeof D!="boolean"&&(D=A instanceof t),this.objectMode=!!se.objectMode,D&&(this.objectMode=this.objectMode||!!se.writableObjectMode),this.highWaterMark=l(this,se,"writableHighWaterMark",D),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ee=se.decodeStrings===!1;this.decodeStrings=!ee,this.defaultEncoding=se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){we(A,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=se.emitClose!==!1,this.autoDestroy=!!se.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}I.prototype.getBuffer=function(){for(var A=this.bufferedRequest,D=[];A;)D.push(A),A=A.next;return D},function(){try{Object.defineProperty(I.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var d;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(L,Symbol.hasInstance,{value:function(A){return d.call(this,A)?!0:this!==L?!1:A&&A._writableState instanceof I}})):d=function(A){return A instanceof this};function L(se){t=t||_o();var A=this instanceof t;if(!A&&!d.call(L,this))return new L(se);this._writableState=new I(se,this,A),this.writable=!0,se&&(typeof se.write=="function"&&(this._write=se.write),typeof se.writev=="function"&&(this._writev=se.writev),typeof se.destroy=="function"&&(this._destroy=se.destroy),typeof se.final=="function"&&(this._final=se.final)),r.call(this)}L.prototype.pipe=function(){x(this,new S)};function w(se,A){var D=new T;x(se,D),process.nextTick(A,D)}function U(se,A,D,ee){var V;return D===null?V=new P:typeof D!="string"&&!A.objectMode&&(V=new y("chunk",["string","Buffer"],D)),V?(x(se,V),process.nextTick(ee,V),!1):!0}L.prototype.write=function(se,A,D){var ee=this._writableState,V=!1,$=!ee.objectMode&&s(se);return $&&!o.isBuffer(se)&&(se=a(se)),typeof A=="function"&&(D=A,A=null),$?A="buffer":A||(A=ee.defaultEncoding),typeof D!="function"&&(D=b),ee.ending?w(this,D):($||U(this,ee,se,D))&&(ee.pendingcb++,V=Y(this,ee,$,se,A,D)),V},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){var se=this._writableState;se.corked&&(se.corked--,!se.writing&&!se.corked&&!se.bufferProcessing&&se.bufferedRequest&&Xe(this,se))},L.prototype.setDefaultEncoding=function(A){if(typeof A=="string"&&(A=A.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((A+"").toLowerCase())>-1))throw new m(A);return this._writableState.defaultEncoding=A,this},Object.defineProperty(L.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function G(se,A,D){return!se.objectMode&&se.decodeStrings!==!1&&typeof A=="string"&&(A=o.from(A,D)),A}Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Y(se,A,D,ee,V,$){if(!D){var H=G(A,ee,V);ee!==H&&(D=!0,V="buffer",ee=H)}var re=A.objectMode?1:ee.length;A.length+=re;var ve=A.length<A.highWaterMark;if(ve||(A.needDrain=!0),A.writing||A.corked){var Le=A.lastBufferedRequest;A.lastBufferedRequest={chunk:ee,encoding:V,isBuf:D,callback:$,next:null},Le?Le.next=A.lastBufferedRequest:A.bufferedRequest=A.lastBufferedRequest,A.bufferedRequestCount+=1}else q(se,A,!1,re,ee,V,$);return ve}function q(se,A,D,ee,V,$,H){A.writelen=ee,A.writecb=H,A.writing=!0,A.sync=!0,A.destroyed?A.onwrite(new M("write")):D?se._writev(V,A.onwrite):se._write(V,$,A.onwrite),A.sync=!1}function fe(se,A,D,ee,V){--A.pendingcb,D?(process.nextTick(V,ee),process.nextTick(gt,se,A),se._writableState.errorEmitted=!0,x(se,ee)):(V(ee),se._writableState.errorEmitted=!0,x(se,ee),gt(se,A))}function Te(se){se.writing=!1,se.writecb=null,se.length-=se.writelen,se.writelen=0}function we(se,A){var D=se._writableState,ee=D.sync,V=D.writecb;if(typeof V!="function")throw new v;if(Te(D),A)fe(se,D,ee,A,V);else{var $=ot(D)||se.destroyed;!$&&!D.corked&&!D.bufferProcessing&&D.bufferedRequest&&Xe(se,D),ee?process.nextTick(ye,se,D,$,V):ye(se,D,$,V)}}function ye(se,A,D,ee){D||Ue(se,A),A.pendingcb--,ee(),gt(se,A)}function Ue(se,A){A.length===0&&A.needDrain&&(A.needDrain=!1,se.emit("drain"))}function Xe(se,A){A.bufferProcessing=!0;var D=A.bufferedRequest;if(se._writev&&D&&D.next){var ee=A.bufferedRequestCount,V=new Array(ee),$=A.corkedRequestsFree;$.entry=D;for(var H=0,re=!0;D;)V[H]=D,D.isBuf||(re=!1),D=D.next,H+=1;V.allBuffers=re,q(se,A,!0,A.length,V,"",$.finish),A.pendingcb++,A.lastBufferedRequest=null,$.next?(A.corkedRequestsFree=$.next,$.next=null):A.corkedRequestsFree=new e(A),A.bufferedRequestCount=0}else{for(;D;){var ve=D.chunk,Le=D.encoding,F=D.callback,C=A.objectMode?1:ve.length;if(q(se,A,!1,C,ve,Le,F),D=D.next,A.bufferedRequestCount--,A.writing)break}D===null&&(A.lastBufferedRequest=null)}A.bufferedRequest=D,A.bufferProcessing=!1}L.prototype._write=function(se,A,D){D(new g("_write()"))},L.prototype._writev=null,L.prototype.end=function(se,A,D){var ee=this._writableState;return typeof se=="function"?(D=se,se=null,A=null):typeof A=="function"&&(D=A,A=null),se!=null&&this.write(se,A),ee.corked&&(ee.corked=1,this.uncork()),ee.ending||xt(this,ee,D),this},Object.defineProperty(L.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ot(se){return se.ending&&se.length===0&&se.bufferedRequest===null&&!se.finished&&!se.writing}function $e(se,A){se._final(function(D){A.pendingcb--,D&&x(se,D),A.prefinished=!0,se.emit("prefinish"),gt(se,A)})}function Ze(se,A){!A.prefinished&&!A.finalCalled&&(typeof se._final=="function"&&!A.destroyed?(A.pendingcb++,A.finalCalled=!0,process.nextTick($e,se,A)):(A.prefinished=!0,se.emit("prefinish")))}function gt(se,A){var D=ot(A);if(D&&(Ze(se,A),A.pendingcb===0&&(A.finished=!0,se.emit("finish"),A.autoDestroy))){var ee=se._readableState;(!ee||ee.autoDestroy&&ee.endEmitted)&&se.destroy()}return D}function xt(se,A,D){A.ending=!0,gt(se,A),D&&(A.finished?process.nextTick(D):se.once("finish",D)),A.ended=!0,se.writable=!1}function lt(se,A,D){var ee=se.entry;for(se.entry=null;ee;){var V=ee.callback;A.pendingcb--,V(D),ee=ee.next}A.corkedRequestsFree.next=se}return Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(A){this._writableState&&(this._writableState.destroyed=A)}}),L.prototype.destroy=u.destroy,L.prototype._undestroy=u.undestroy,L.prototype._destroy=function(se,A){A(se)},af}var sf,_d;function _o(){if(_d)return sf;_d=1;var e=Object.keys||function(f){var l=[];for(var p in f)l.push(p);return l};sf=a;var t=jv(),n=Fv();Gi(a,t);for(var r=e(n.prototype),o=0;o<r.length;o++){var i=r[o];a.prototype[i]||(a.prototype[i]=n.prototype[i])}function a(f){if(!(this instanceof a))return new a(f);t.call(this,f),n.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",s)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function s(){this._writableState.ended||process.nextTick(u,this)}function u(f){f.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),sf}var uf={},hs={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var xd;function Yw(){return xd||(xd=1,function(e,t){var n=xu(),r=n.Buffer;function o(a,s){for(var u in a)s[u]=a[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=i);function i(a,s,u){return r(a,s,u)}i.prototype=Object.create(r.prototype),o(r,i),i.from=function(a,s,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,s,u)},i.alloc=function(a,s,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=r(a);return s!==void 0?typeof u=="string"?f.fill(s,u):f.fill(s):f.fill(0),f},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}}(hs,hs.exports)),hs.exports}var wd;function Jf(){if(wd)return uf;wd=1;var e=Yw().Buffer,t=e.isEncoding||function(P){switch(P=""+P,P&&P.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(P){if(!P)return"utf8";for(var T;;)switch(P){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return P;default:if(T)return;P=(""+P).toLowerCase(),T=!0}}function r(P){var T=n(P);if(typeof T!="string"&&(e.isEncoding===t||!t(P)))throw new Error("Unknown encoding: "+P);return T||P}uf.StringDecoder=o;function o(P){this.encoding=r(P);var T;switch(this.encoding){case"utf16le":this.text=p,this.end=y,T=4;break;case"utf8":this.fillLast=u,T=4;break;case"base64":this.text=g,this.end=v,T=3;break;default:this.write=S,this.end=M;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(T)}o.prototype.write=function(P){if(P.length===0)return"";var T,m;if(this.lastNeed){if(T=this.fillLast(P),T===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<P.length?T?T+this.text(P,m):this.text(P,m):T||""},o.prototype.end=l,o.prototype.text=f,o.prototype.fillLast=function(P){if(this.lastNeed<=P.length)return P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,P.length),this.lastNeed-=P.length};function i(P){return P<=127?0:P>>5===6?2:P>>4===14?3:P>>3===30?4:P>>6===2?-1:-2}function a(P,T,m){var x=T.length-1;if(x<m)return 0;var b=i(T[x]);return b>=0?(b>0&&(P.lastNeed=b-1),b):--x<m||b===-2?0:(b=i(T[x]),b>=0?(b>0&&(P.lastNeed=b-2),b):--x<m||b===-2?0:(b=i(T[x]),b>=0?(b>0&&(b===2?b=0:P.lastNeed=b-3),b):0))}function s(P,T,m){if((T[0]&192)!==128)return P.lastNeed=0,"ï¿½";if(P.lastNeed>1&&T.length>1){if((T[1]&192)!==128)return P.lastNeed=1,"ï¿½";if(P.lastNeed>2&&T.length>2&&(T[2]&192)!==128)return P.lastNeed=2,"ï¿½"}}function u(P){var T=this.lastTotal-this.lastNeed,m=s(this,P);if(m!==void 0)return m;if(this.lastNeed<=P.length)return P.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,T,0,P.length),this.lastNeed-=P.length}function f(P,T){var m=a(this,P,T);if(!this.lastNeed)return P.toString("utf8",T);this.lastTotal=m;var x=P.length-(m-this.lastNeed);return P.copy(this.lastChar,0,x),P.toString("utf8",T,x)}function l(P){var T=P&&P.length?this.write(P):"";return this.lastNeed?T+"ï¿½":T}function p(P,T){if((P.length-T)%2===0){var m=P.toString("utf16le",T);if(m){var x=m.charCodeAt(m.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=P[P.length-1],P.toString("utf16le",T,P.length-1)}function y(P){var T=P&&P.length?this.write(P):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,m)}return T}function g(P,T){var m=(P.length-T)%3;return m===0?P.toString("base64",T):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=P[P.length-1]:(this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1]),P.toString("base64",T,P.length-m))}function v(P){var T=P&&P.length?this.write(P):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function S(P){return P.toString(this.encoding)}function M(P){return P&&P.length?this.write(P):""}return uf}var cf,Ed;function Zl(){if(Ed)return cf;Ed=1;var e=So().codes.ERR_STREAM_PREMATURE_CLOSE;function t(i){var a=!1;return function(){if(!a){a=!0;for(var s=arguments.length,u=new Array(s),f=0;f<s;f++)u[f]=arguments[f];i.apply(this,u)}}}function n(){}function r(i){return i.setHeader&&typeof i.abort=="function"}function o(i,a,s){if(typeof a=="function")return o(i,null,a);a||(a={}),s=t(s||n);var u=a.readable||a.readable!==!1&&i.readable,f=a.writable||a.writable!==!1&&i.writable,l=function(){i.writable||y()},p=i._writableState&&i._writableState.finished,y=function(){f=!1,p=!0,u||s.call(i)},g=i._readableState&&i._readableState.endEmitted,v=function(){u=!1,g=!0,f||s.call(i)},S=function(m){s.call(i,m)},M=function(){var m;if(u&&!g)return(!i._readableState||!i._readableState.ended)&&(m=new e),s.call(i,m);if(f&&!p)return(!i._writableState||!i._writableState.ended)&&(m=new e),s.call(i,m)},P=function(){i.req.on("finish",y)};return r(i)?(i.on("complete",y),i.on("abort",M),i.req?P():i.on("request",P)):f&&!i._writableState&&(i.on("end",l),i.on("close",l)),i.on("end",v),i.on("finish",y),a.error!==!1&&i.on("error",S),i.on("close",M),function(){i.removeListener("complete",y),i.removeListener("abort",M),i.removeListener("request",P),i.req&&i.req.removeListener("finish",y),i.removeListener("end",l),i.removeListener("close",l),i.removeListener("finish",y),i.removeListener("end",v),i.removeListener("error",S),i.removeListener("close",M)}}return cf=o,cf}var ff,bd;function Kw(){if(bd)return ff;bd=1;var e;function t(m,x,b){return x=n(x),x in m?Object.defineProperty(m,x,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[x]=b,m}function n(m){var x=r(m,"string");return typeof x=="symbol"?x:String(x)}function r(m,x){if(typeof m!="object"||m===null)return m;var b=m[Symbol.toPrimitive];if(b!==void 0){var I=b.call(m,x||"default");if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(m)}var o=Zl(),i=Symbol("lastResolve"),a=Symbol("lastReject"),s=Symbol("error"),u=Symbol("ended"),f=Symbol("lastPromise"),l=Symbol("handlePromise"),p=Symbol("stream");function y(m,x){return{value:m,done:x}}function g(m){var x=m[i];if(x!==null){var b=m[p].read();b!==null&&(m[f]=null,m[i]=null,m[a]=null,x(y(b,!1)))}}function v(m){process.nextTick(g,m)}function S(m,x){return function(b,I){m.then(function(){if(x[u]){b(y(void 0,!0));return}x[l](b,I)},I)}}var M=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((e={get stream(){return this[p]},next:function(){var x=this,b=this[s];if(b!==null)return Promise.reject(b);if(this[u])return Promise.resolve(y(void 0,!0));if(this[p].destroyed)return new Promise(function(w,U){process.nextTick(function(){x[s]?U(x[s]):w(y(void 0,!0))})});var I=this[f],d;if(I)d=new Promise(S(I,this));else{var L=this[p].read();if(L!==null)return Promise.resolve(y(L,!1));d=new Promise(this[l])}return this[f]=d,d}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var x=this;return new Promise(function(b,I){x[p].destroy(null,function(d){if(d){I(d);return}b(y(void 0,!0))})})}),e),M),T=function(x){var b,I=Object.create(P,(b={},t(b,p,{value:x,writable:!0}),t(b,i,{value:null,writable:!0}),t(b,a,{value:null,writable:!0}),t(b,s,{value:null,writable:!0}),t(b,u,{value:x._readableState.endEmitted,writable:!0}),t(b,l,{value:function(L,w){var U=I[p].read();U?(I[f]=null,I[i]=null,I[a]=null,L(y(U,!1))):(I[i]=L,I[a]=w)},writable:!0}),b));return I[f]=null,o(x,function(d){if(d&&d.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=I[a];L!==null&&(I[f]=null,I[i]=null,I[a]=null,L(d)),I[s]=d;return}var w=I[i];w!==null&&(I[f]=null,I[i]=null,I[a]=null,w(y(void 0,!0))),I[u]=!0}),x.on("readable",v.bind(null,I)),I};return ff=T,ff}var lf,Td;function Zw(){return Td||(Td=1,lf=function(){throw new Error("Readable.from is not available in the browser")}),lf}var hf,Sd;function jv(){if(Sd)return hf;Sd=1,hf=w;var e;w.ReadableState=L,_u().EventEmitter;var t=function(H,re){return H.listeners(re).length},n=Lv(),r=xu().Buffer,o=(typeof Be<"u"?Be:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function i($){return r.from($)}function a($){return r.isBuffer($)||$ instanceof o}var s=Kl,u;s&&s.debuglog?u=s.debuglog("stream"):u=function(){};var f=Xw(),l=kv(),p=Bv(),y=p.getHighWaterMark,g=So().codes,v=g.ERR_INVALID_ARG_TYPE,S=g.ERR_STREAM_PUSH_AFTER_EOF,M=g.ERR_METHOD_NOT_IMPLEMENTED,P=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,T,m,x;Gi(w,n);var b=l.errorOrDestroy,I=["error","close","destroy","pause","resume"];function d($,H,re){if(typeof $.prependListener=="function")return $.prependListener(H,re);!$._events||!$._events[H]?$.on(H,re):Array.isArray($._events[H])?$._events[H].unshift(re):$._events[H]=[re,$._events[H]]}function L($,H,re){e=e||_o(),$=$||{},typeof re!="boolean"&&(re=H instanceof e),this.objectMode=!!$.objectMode,re&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=y(this,$,"readableHighWaterMark",re),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(T||(T=Jf().StringDecoder),this.decoder=new T($.encoding),this.encoding=$.encoding)}function w($){if(e=e||_o(),!(this instanceof w))return new w($);var H=this instanceof e;this._readableState=new L($,this,H),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),n.call(this)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),w.prototype.destroy=l.destroy,w.prototype._undestroy=l.undestroy,w.prototype._destroy=function($,H){H($)},w.prototype.push=function($,H){var re=this._readableState,ve;return re.objectMode?ve=!0:typeof $=="string"&&(H=H||re.defaultEncoding,H!==re.encoding&&($=r.from($,H),H=""),ve=!0),U(this,$,H,!1,ve)},w.prototype.unshift=function($){return U(this,$,null,!0,!1)};function U($,H,re,ve,Le){u("readableAddChunk",H);var F=$._readableState;if(H===null)F.reading=!1,we($,F);else{var C;if(Le||(C=Y(F,H)),C)b($,C);else if(F.objectMode||H&&H.length>0)if(typeof H!="string"&&!F.objectMode&&Object.getPrototypeOf(H)!==r.prototype&&(H=i(H)),ve)F.endEmitted?b($,new P):G($,F,H,!0);else if(F.ended)b($,new S);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!re?(H=F.decoder.write(H),F.objectMode||H.length!==0?G($,F,H,!1):Xe($,F)):G($,F,H,!1)}else ve||(F.reading=!1,Xe($,F))}return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function G($,H,re,ve){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,$.emit("data",re)):(H.length+=H.objectMode?1:re.length,ve?H.buffer.unshift(re):H.buffer.push(re),H.needReadable&&ye($)),Xe($,H)}function Y($,H){var re;return!a(H)&&typeof H!="string"&&H!==void 0&&!$.objectMode&&(re=new v("chunk",["string","Buffer","Uint8Array"],H)),re}w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function($){T||(T=Jf().StringDecoder);var H=new T($);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var re=this._readableState.buffer.head,ve="";re!==null;)ve+=H.write(re.data),re=re.next;return this._readableState.buffer.clear(),ve!==""&&this._readableState.buffer.push(ve),this._readableState.length=ve.length,this};var q=1073741824;function fe($){return $>=q?$=q:($--,$|=$>>>1,$|=$>>>2,$|=$>>>4,$|=$>>>8,$|=$>>>16,$++),$}function Te($,H){return $<=0||H.length===0&&H.ended?0:H.objectMode?1:$!==$?H.flowing&&H.length?H.buffer.head.data.length:H.length:($>H.highWaterMark&&(H.highWaterMark=fe($)),$<=H.length?$:H.ended?H.length:(H.needReadable=!0,0))}w.prototype.read=function($){u("read",$),$=parseInt($,10);var H=this._readableState,re=$;if($!==0&&(H.emittedReadable=!1),$===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return u("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?D(this):ye(this),null;if($=Te($,H),$===0&&H.ended)return H.length===0&&D(this),null;var ve=H.needReadable;u("need readable",ve),(H.length===0||H.length-$<H.highWaterMark)&&(ve=!0,u("length less than watermark",ve)),H.ended||H.reading?(ve=!1,u("reading or ended",ve)):ve&&(u("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||($=Te(re,H)));var Le;return $>0?Le=A($,H):Le=null,Le===null?(H.needReadable=H.length<=H.highWaterMark,$=0):(H.length-=$,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),re!==$&&H.ended&&D(this)),Le!==null&&this.emit("data",Le),Le};function we($,H){if(u("onEofChunk"),!H.ended){if(H.decoder){var re=H.decoder.end();re&&re.length&&(H.buffer.push(re),H.length+=H.objectMode?1:re.length)}H.ended=!0,H.sync?ye($):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,Ue($)))}}function ye($){var H=$._readableState;u("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(u("emitReadable",H.flowing),H.emittedReadable=!0,process.nextTick(Ue,$))}function Ue($){var H=$._readableState;u("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&($.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,se($)}function Xe($,H){H.readingMore||(H.readingMore=!0,process.nextTick(ot,$,H))}function ot($,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var re=H.length;if(u("maybeReadMore read 0"),$.read(0),re===H.length)break}H.readingMore=!1}w.prototype._read=function($){b(this,new M("_read()"))},w.prototype.pipe=function($,H){var re=this,ve=this._readableState;switch(ve.pipesCount){case 0:ve.pipes=$;break;case 1:ve.pipes=[ve.pipes,$];break;default:ve.pipes.push($);break}ve.pipesCount+=1,u("pipe count=%d opts=%j",ve.pipesCount,H);var Le=(!H||H.end!==!1)&&$!==process.stdout&&$!==process.stderr,F=Le?R:Qe;ve.endEmitted?process.nextTick(F):re.once("end",F),$.on("unpipe",C);function C(at,Xt){u("onunpipe"),at===re&&Xt&&Xt.hasUnpiped===!1&&(Xt.hasUnpiped=!0,he())}function R(){u("onend"),$.end()}var z=$e(re);$.on("drain",z);var Q=!1;function he(){u("cleanup"),$.removeListener("close",Ee),$.removeListener("finish",de),$.removeListener("drain",z),$.removeListener("error",Oe),$.removeListener("unpipe",C),re.removeListener("end",R),re.removeListener("end",Qe),re.removeListener("data",me),Q=!0,ve.awaitDrain&&(!$._writableState||$._writableState.needDrain)&&z()}re.on("data",me);function me(at){u("ondata");var Xt=$.write(at);u("dest.write",Xt),Xt===!1&&((ve.pipesCount===1&&ve.pipes===$||ve.pipesCount>1&&V(ve.pipes,$)!==-1)&&!Q&&(u("false write response, pause",ve.awaitDrain),ve.awaitDrain++),re.pause())}function Oe(at){u("onerror",at),Qe(),$.removeListener("error",Oe),t($,"error")===0&&b($,at)}d($,"error",Oe);function Ee(){$.removeListener("finish",de),Qe()}$.once("close",Ee);function de(){u("onfinish"),$.removeListener("close",Ee),Qe()}$.once("finish",de);function Qe(){u("unpipe"),re.unpipe($)}return $.emit("pipe",re),ve.flowing||(u("pipe resume"),re.resume()),$};function $e($){return function(){var re=$._readableState;u("pipeOnDrain",re.awaitDrain),re.awaitDrain&&re.awaitDrain--,re.awaitDrain===0&&t($,"data")&&(re.flowing=!0,se($))}}w.prototype.unpipe=function($){var H=this._readableState,re={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return $&&$!==H.pipes?this:($||($=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,$&&$.emit("unpipe",this,re),this);if(!$){var ve=H.pipes,Le=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var F=0;F<Le;F++)ve[F].emit("unpipe",this,{hasUnpiped:!1});return this}var C=V(H.pipes,$);return C===-1?this:(H.pipes.splice(C,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),$.emit("unpipe",this,re),this)},w.prototype.on=function($,H){var re=n.prototype.on.call(this,$,H),ve=this._readableState;return $==="data"?(ve.readableListening=this.listenerCount("readable")>0,ve.flowing!==!1&&this.resume()):$==="readable"&&!ve.endEmitted&&!ve.readableListening&&(ve.readableListening=ve.needReadable=!0,ve.flowing=!1,ve.emittedReadable=!1,u("on readable",ve.length,ve.reading),ve.length?ye(this):ve.reading||process.nextTick(gt,this)),re},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function($,H){var re=n.prototype.removeListener.call(this,$,H);return $==="readable"&&process.nextTick(Ze,this),re},w.prototype.removeAllListeners=function($){var H=n.prototype.removeAllListeners.apply(this,arguments);return($==="readable"||$===void 0)&&process.nextTick(Ze,this),H};function Ze($){var H=$._readableState;H.readableListening=$.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:$.listenerCount("data")>0&&$.resume()}function gt($){u("readable nexttick read 0"),$.read(0)}w.prototype.resume=function(){var $=this._readableState;return $.flowing||(u("resume"),$.flowing=!$.readableListening,xt(this,$)),$.paused=!1,this};function xt($,H){H.resumeScheduled||(H.resumeScheduled=!0,process.nextTick(lt,$,H))}function lt($,H){u("resume",H.reading),H.reading||$.read(0),H.resumeScheduled=!1,$.emit("resume"),se($),H.flowing&&!H.reading&&$.read(0)}w.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function se($){var H=$._readableState;for(u("flow",H.flowing);H.flowing&&$.read()!==null;);}w.prototype.wrap=function($){var H=this,re=this._readableState,ve=!1;$.on("end",function(){if(u("wrapped end"),re.decoder&&!re.ended){var C=re.decoder.end();C&&C.length&&H.push(C)}H.push(null)}),$.on("data",function(C){if(u("wrapped data"),re.decoder&&(C=re.decoder.write(C)),!(re.objectMode&&C==null)&&!(!re.objectMode&&(!C||!C.length))){var R=H.push(C);R||(ve=!0,$.pause())}});for(var Le in $)this[Le]===void 0&&typeof $[Le]=="function"&&(this[Le]=function(R){return function(){return $[R].apply($,arguments)}}(Le));for(var F=0;F<I.length;F++)$.on(I[F],this.emit.bind(this,I[F]));return this._read=function(C){u("wrapped _read",C),ve&&(ve=!1,$.resume())},this},typeof Symbol=="function"&&(w.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=Kw()),m(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),w._fromList=A,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function A($,H){if(H.length===0)return null;var re;return H.objectMode?re=H.buffer.shift():!$||$>=H.length?(H.decoder?re=H.buffer.join(""):H.buffer.length===1?re=H.buffer.first():re=H.buffer.concat(H.length),H.buffer.clear()):re=H.buffer.consume($,H.decoder),re}function D($){var H=$._readableState;u("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,process.nextTick(ee,H,$))}function ee($,H){if(u("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,H.readable=!1,H.emit("end"),$.autoDestroy)){var re=H._writableState;(!re||re.autoDestroy&&re.finished)&&H.destroy()}}typeof Symbol=="function"&&(w.from=function($,H){return x===void 0&&(x=Zw()),x(w,$,H)});function V($,H){for(var re=0,ve=$.length;re<ve;re++)if($[re]===H)return re;return-1}return hf}var pf,Cd;function $v(){if(Cd)return pf;Cd=1,pf=s;var e=So().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,n=e.ERR_MULTIPLE_CALLBACK,r=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=e.ERR_TRANSFORM_WITH_LENGTH_0,i=_o();Gi(s,i);function a(l,p){var y=this._transformState;y.transforming=!1;var g=y.writecb;if(g===null)return this.emit("error",new n);y.writechunk=null,y.writecb=null,p!=null&&this.push(p),g(l);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function s(l){if(!(this instanceof s))return new s(l);i.call(this,l),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",u)}function u(){var l=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(p,y){f(l,p,y)}):f(this,null,null)}s.prototype.push=function(l,p){return this._transformState.needTransform=!1,i.prototype.push.call(this,l,p)},s.prototype._transform=function(l,p,y){y(new t("_transform()"))},s.prototype._write=function(l,p,y){var g=this._transformState;if(g.writecb=y,g.writechunk=l,g.writeencoding=p,!g.transforming){var v=this._readableState;(g.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},s.prototype._read=function(l){var p=this._transformState;p.writechunk!==null&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},s.prototype._destroy=function(l,p){i.prototype._destroy.call(this,l,function(y){p(y)})};function f(l,p,y){if(p)return l.emit("error",p);if(y!=null&&l.push(y),l._writableState.length)throw new o;if(l._transformState.transforming)throw new r;return l.push(null)}return pf}var df,Md;function Qw(){if(Md)return df;Md=1,df=t;var e=$v();Gi(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,r,o){o(null,n)},df}var gf,Rd;function Jw(){if(Rd)return gf;Rd=1;var e;function t(y){var g=!1;return function(){g||(g=!0,y.apply(void 0,arguments))}}var n=So().codes,r=n.ERR_MISSING_ARGS,o=n.ERR_STREAM_DESTROYED;function i(y){if(y)throw y}function a(y){return y.setHeader&&typeof y.abort=="function"}function s(y,g,v,S){S=t(S);var M=!1;y.on("close",function(){M=!0}),e===void 0&&(e=Zl()),e(y,{readable:g,writable:v},function(T){if(T)return S(T);M=!0,S()});var P=!1;return function(T){if(!M&&!P){if(P=!0,a(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();S(T||new o("pipe"))}}}function u(y){y()}function f(y,g){return y.pipe(g)}function l(y){return!y.length||typeof y[y.length-1]!="function"?i:y.pop()}function p(){for(var y=arguments.length,g=new Array(y),v=0;v<y;v++)g[v]=arguments[v];var S=l(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new r("streams");var M,P=g.map(function(T,m){var x=m<g.length-1,b=m>0;return s(T,x,b,function(I){M||(M=I),I&&P.forEach(u),!x&&(P.forEach(u),S(M))})});return g.reduce(f)}return gf=p,gf}var yf,Pd;function eE(){if(Pd)return yf;Pd=1,yf=n;var e=_u().EventEmitter,t=Gi;t(n,e),n.Readable=jv(),n.Writable=Fv(),n.Duplex=_o(),n.Transform=$v(),n.PassThrough=Qw(),n.finished=Zl(),n.pipeline=Jw(),n.Stream=n;function n(){e.call(this)}return n.prototype.pipe=function(r,o){var i=this;function a(g){r.writable&&r.write(g)===!1&&i.pause&&i.pause()}i.on("data",a);function s(){i.readable&&i.resume&&i.resume()}r.on("drain",s),!r._isStdio&&(!o||o.end!==!1)&&(i.on("end",f),i.on("close",l));var u=!1;function f(){u||(u=!0,r.end())}function l(){u||(u=!0,typeof r.destroy=="function"&&r.destroy())}function p(g){if(y(),e.listenerCount(this,"error")===0)throw g}i.on("error",p),r.on("error",p);function y(){i.removeListener("data",a),r.removeListener("drain",s),i.removeListener("end",f),i.removeListener("close",l),i.removeListener("error",p),r.removeListener("error",p),i.removeListener("end",y),i.removeListener("close",y),r.removeListener("close",y)}return i.on("end",y),i.on("close",y),r.on("close",y),r.emit("pipe",i),r},yf}var Ad;function tE(){return Ad||(Ad=1,function(e){(function(t){t.parser=function(A,D){return new r(A,D)},t.SAXParser=r,t.SAXStream=l,t.createStream=f,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(A,D){if(!(this instanceof r))return new r(A,D);var ee=this;i(ee),ee.q=ee.c="",ee.bufferCheckPosition=t.MAX_BUFFER_LENGTH,ee.opt=D||{},ee.opt.lowercase=ee.opt.lowercase||ee.opt.lowercasetags,ee.looseCase=ee.opt.lowercase?"toLowerCase":"toUpperCase",ee.tags=[],ee.closed=ee.closedRoot=ee.sawRoot=!1,ee.tag=ee.error=null,ee.strict=!!A,ee.noscript=!!(A||ee.opt.noscript),ee.state=w.BEGIN,ee.strictEntities=ee.opt.strictEntities,ee.ENTITIES=ee.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),ee.attribList=[],ee.opt.xmlns&&(ee.ns=Object.create(S)),ee.trackPosition=ee.opt.position!==!1,ee.trackPosition&&(ee.position=ee.line=ee.column=0),G(ee,"onready")}Object.create||(Object.create=function(A){function D(){}D.prototype=A;var ee=new D;return ee}),Object.keys||(Object.keys=function(A){var D=[];for(var ee in A)A.hasOwnProperty(ee)&&D.push(ee);return D});function o(A){for(var D=Math.max(t.MAX_BUFFER_LENGTH,10),ee=0,V=0,$=n.length;V<$;V++){var H=A[n[V]].length;if(H>D)switch(n[V]){case"textNode":q(A);break;case"cdata":Y(A,"oncdata",A.cdata),A.cdata="";break;case"script":Y(A,"onscript",A.script),A.script="";break;default:Te(A,"Max buffer length exceeded: "+n[V])}ee=Math.max(ee,H)}var re=t.MAX_BUFFER_LENGTH-ee;A.bufferCheckPosition=re+A.position}function i(A){for(var D=0,ee=n.length;D<ee;D++)A[n[D]]=""}function a(A){q(A),A.cdata!==""&&(Y(A,"oncdata",A.cdata),A.cdata=""),A.script!==""&&(Y(A,"onscript",A.script),A.script="")}r.prototype={end:function(){we(this)},write:se,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var s;try{s=eE().Stream}catch{s=function(){}}var u=t.EVENTS.filter(function(A){return A!=="error"&&A!=="end"});function f(A,D){return new l(A,D)}function l(A,D){if(!(this instanceof l))return new l(A,D);s.apply(this),this._parser=new r(A,D),this.writable=!0,this.readable=!0;var ee=this;this._parser.onend=function(){ee.emit("end")},this._parser.onerror=function(V){ee.emit("error",V),ee._parser.error=null},this._decoder=null,u.forEach(function(V){Object.defineProperty(ee,"on"+V,{get:function(){return ee._parser["on"+V]},set:function($){if(!$)return ee.removeAllListeners(V),ee._parser["on"+V]=$,$;ee.on(V,$)},enumerable:!0,configurable:!1})})}l.prototype=Object.create(s.prototype,{constructor:{value:l}}),l.prototype.write=function(A){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(A)){if(!this._decoder){var D=Jf().StringDecoder;this._decoder=new D("utf8")}A=this._decoder.write(A)}return this._parser.write(A.toString()),this.emit("data",A),!0},l.prototype.end=function(A){return A&&A.length&&this.write(A),this._parser.end(),!0},l.prototype.on=function(A,D){var ee=this;return!ee._parser["on"+A]&&u.indexOf(A)!==-1&&(ee._parser["on"+A]=function(){var V=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);V.splice(0,0,A),ee.emit.apply(ee,V)}),s.prototype.on.call(ee,A,D)};var p="[CDATA[",y="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",S={xml:g,xmlns:v},M=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function x(A){return A===" "||A===`
`||A==="\r"||A==="	"}function b(A){return A==='"'||A==="'"}function I(A){return A===">"||x(A)}function d(A,D){return A.test(D)}function L(A,D){return!d(A,D)}var w=0;t.STATE={BEGIN:w++,BEGIN_WHITESPACE:w++,TEXT:w++,TEXT_ENTITY:w++,OPEN_WAKA:w++,SGML_DECL:w++,SGML_DECL_QUOTED:w++,DOCTYPE:w++,DOCTYPE_QUOTED:w++,DOCTYPE_DTD:w++,DOCTYPE_DTD_QUOTED:w++,COMMENT_STARTING:w++,COMMENT:w++,COMMENT_ENDING:w++,COMMENT_ENDED:w++,CDATA:w++,CDATA_ENDING:w++,CDATA_ENDING_2:w++,PROC_INST:w++,PROC_INST_BODY:w++,PROC_INST_ENDING:w++,OPEN_TAG:w++,OPEN_TAG_SLASH:w++,ATTRIB:w++,ATTRIB_NAME:w++,ATTRIB_NAME_SAW_WHITE:w++,ATTRIB_VALUE:w++,ATTRIB_VALUE_QUOTED:w++,ATTRIB_VALUE_CLOSED:w++,ATTRIB_VALUE_UNQUOTED:w++,ATTRIB_VALUE_ENTITY_Q:w++,ATTRIB_VALUE_ENTITY_U:w++,CLOSE_TAG:w++,CLOSE_TAG_SAW_WHITE:w++,SCRIPT:w++,SCRIPT_ENDING:w++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(A){var D=t.ENTITIES[A],ee=typeof D=="number"?String.fromCharCode(D):D;t.ENTITIES[A]=ee});for(var U in t.STATE)t.STATE[t.STATE[U]]=U;w=t.STATE;function G(A,D,ee){A[D]&&A[D](ee)}function Y(A,D,ee){A.textNode&&q(A),G(A,D,ee)}function q(A){A.textNode=fe(A.opt,A.textNode),A.textNode&&G(A,"ontext",A.textNode),A.textNode=""}function fe(A,D){return A.trim&&(D=D.trim()),A.normalize&&(D=D.replace(/\s+/g," ")),D}function Te(A,D){return q(A),A.trackPosition&&(D+=`
Line: `+A.line+`
Column: `+A.column+`
Char: `+A.c),D=new Error(D),A.error=D,G(A,"onerror",D),A}function we(A){return A.sawRoot&&!A.closedRoot&&ye(A,"Unclosed root tag"),A.state!==w.BEGIN&&A.state!==w.BEGIN_WHITESPACE&&A.state!==w.TEXT&&Te(A,"Unexpected end"),q(A),A.c="",A.closed=!0,G(A,"onend"),r.call(A,A.strict,A.opt),A}function ye(A,D){if(typeof A!="object"||!(A instanceof r))throw new Error("bad call to strictFail");A.strict&&Te(A,D)}function Ue(A){A.strict||(A.tagName=A.tagName[A.looseCase]());var D=A.tags[A.tags.length-1]||A,ee=A.tag={name:A.tagName,attributes:{}};A.opt.xmlns&&(ee.ns=D.ns),A.attribList.length=0,Y(A,"onopentagstart",ee)}function Xe(A,D){var ee=A.indexOf(":"),V=ee<0?["",A]:A.split(":"),$=V[0],H=V[1];return D&&A==="xmlns"&&($="xmlns",H=""),{prefix:$,local:H}}function ot(A){if(A.strict||(A.attribName=A.attribName[A.looseCase]()),A.attribList.indexOf(A.attribName)!==-1||A.tag.attributes.hasOwnProperty(A.attribName)){A.attribName=A.attribValue="";return}if(A.opt.xmlns){var D=Xe(A.attribName,!0),ee=D.prefix,V=D.local;if(ee==="xmlns")if(V==="xml"&&A.attribValue!==g)ye(A,"xml: prefix must be bound to "+g+`
Actual: `+A.attribValue);else if(V==="xmlns"&&A.attribValue!==v)ye(A,"xmlns: prefix must be bound to "+v+`
Actual: `+A.attribValue);else{var $=A.tag,H=A.tags[A.tags.length-1]||A;$.ns===H.ns&&($.ns=Object.create(H.ns)),$.ns[V]=A.attribValue}A.attribList.push([A.attribName,A.attribValue])}else A.tag.attributes[A.attribName]=A.attribValue,Y(A,"onattribute",{name:A.attribName,value:A.attribValue});A.attribName=A.attribValue=""}function $e(A,D){if(A.opt.xmlns){var ee=A.tag,V=Xe(A.tagName);ee.prefix=V.prefix,ee.local=V.local,ee.uri=ee.ns[V.prefix]||"",ee.prefix&&!ee.uri&&(ye(A,"Unbound namespace prefix: "+JSON.stringify(A.tagName)),ee.uri=V.prefix);var $=A.tags[A.tags.length-1]||A;ee.ns&&$.ns!==ee.ns&&Object.keys(ee.ns).forEach(function(me){Y(A,"onopennamespace",{prefix:me,uri:ee.ns[me]})});for(var H=0,re=A.attribList.length;H<re;H++){var ve=A.attribList[H],Le=ve[0],F=ve[1],C=Xe(Le,!0),R=C.prefix,z=C.local,Q=R===""?"":ee.ns[R]||"",he={name:Le,value:F,prefix:R,local:z,uri:Q};R&&R!=="xmlns"&&!Q&&(ye(A,"Unbound namespace prefix: "+JSON.stringify(R)),he.uri=R),A.tag.attributes[Le]=he,Y(A,"onattribute",he)}A.attribList.length=0}A.tag.isSelfClosing=!!D,A.sawRoot=!0,A.tags.push(A.tag),Y(A,"onopentag",A.tag),D||(!A.noscript&&A.tagName.toLowerCase()==="script"?A.state=w.SCRIPT:A.state=w.TEXT,A.tag=null,A.tagName=""),A.attribName=A.attribValue="",A.attribList.length=0}function Ze(A){if(!A.tagName){ye(A,"Weird empty close tag."),A.textNode+="</>",A.state=w.TEXT;return}if(A.script){if(A.tagName!=="script"){A.script+="</"+A.tagName+">",A.tagName="",A.state=w.SCRIPT;return}Y(A,"onscript",A.script),A.script=""}var D=A.tags.length,ee=A.tagName;A.strict||(ee=ee[A.looseCase]());for(var V=ee;D--;){var $=A.tags[D];if($.name!==V)ye(A,"Unexpected close tag");else break}if(D<0){ye(A,"Unmatched closing tag: "+A.tagName),A.textNode+="</"+A.tagName+">",A.state=w.TEXT;return}A.tagName=ee;for(var H=A.tags.length;H-- >D;){var re=A.tag=A.tags.pop();A.tagName=A.tag.name,Y(A,"onclosetag",A.tagName);var ve={};for(var Le in re.ns)ve[Le]=re.ns[Le];var F=A.tags[A.tags.length-1]||A;A.opt.xmlns&&re.ns!==F.ns&&Object.keys(re.ns).forEach(function(C){var R=re.ns[C];Y(A,"onclosenamespace",{prefix:C,uri:R})})}D===0&&(A.closedRoot=!0),A.tagName=A.attribValue=A.attribName="",A.attribList.length=0,A.state=w.TEXT}function gt(A){var D=A.entity,ee=D.toLowerCase(),V,$="";return A.ENTITIES[D]?A.ENTITIES[D]:A.ENTITIES[ee]?A.ENTITIES[ee]:(D=ee,D.charAt(0)==="#"&&(D.charAt(1)==="x"?(D=D.slice(2),V=parseInt(D,16),$=V.toString(16)):(D=D.slice(1),V=parseInt(D,10),$=V.toString(10))),D=D.replace(/^0+/,""),isNaN(V)||$.toLowerCase()!==D?(ye(A,"Invalid character entity"),"&"+A.entity+";"):String.fromCodePoint(V))}function xt(A,D){D==="<"?(A.state=w.OPEN_WAKA,A.startTagPosition=A.position):x(D)||(ye(A,"Non-whitespace before first tag."),A.textNode=D,A.state=w.TEXT)}function lt(A,D){var ee="";return D<A.length&&(ee=A.charAt(D)),ee}function se(A){var D=this;if(this.error)throw this.error;if(D.closed)return Te(D,"Cannot write after close. Assign an onready handler.");if(A===null)return we(D);typeof A=="object"&&(A=A.toString());for(var ee=0,V="";V=lt(A,ee++),D.c=V,!!V;)switch(D.trackPosition&&(D.position++,V===`
`?(D.line++,D.column=0):D.column++),D.state){case w.BEGIN:if(D.state=w.BEGIN_WHITESPACE,V==="\uFEFF")continue;xt(D,V);continue;case w.BEGIN_WHITESPACE:xt(D,V);continue;case w.TEXT:if(D.sawRoot&&!D.closedRoot){for(var $=ee-1;V&&V!=="<"&&V!=="&";)V=lt(A,ee++),V&&D.trackPosition&&(D.position++,V===`
`?(D.line++,D.column=0):D.column++);D.textNode+=A.substring($,ee-1)}V==="<"&&!(D.sawRoot&&D.closedRoot&&!D.strict)?(D.state=w.OPEN_WAKA,D.startTagPosition=D.position):(!x(V)&&(!D.sawRoot||D.closedRoot)&&ye(D,"Text data outside of root node."),V==="&"?D.state=w.TEXT_ENTITY:D.textNode+=V);continue;case w.SCRIPT:V==="<"?D.state=w.SCRIPT_ENDING:D.script+=V;continue;case w.SCRIPT_ENDING:V==="/"?D.state=w.CLOSE_TAG:(D.script+="<"+V,D.state=w.SCRIPT);continue;case w.OPEN_WAKA:if(V==="!")D.state=w.SGML_DECL,D.sgmlDecl="";else if(!x(V))if(d(M,V))D.state=w.OPEN_TAG,D.tagName=V;else if(V==="/")D.state=w.CLOSE_TAG,D.tagName="";else if(V==="?")D.state=w.PROC_INST,D.procInstName=D.procInstBody="";else{if(ye(D,"Unencoded <"),D.startTagPosition+1<D.position){var H=D.position-D.startTagPosition;V=new Array(H).join(" ")+V}D.textNode+="<"+V,D.state=w.TEXT}continue;case w.SGML_DECL:(D.sgmlDecl+V).toUpperCase()===p?(Y(D,"onopencdata"),D.state=w.CDATA,D.sgmlDecl="",D.cdata=""):D.sgmlDecl+V==="--"?(D.state=w.COMMENT,D.comment="",D.sgmlDecl=""):(D.sgmlDecl+V).toUpperCase()===y?(D.state=w.DOCTYPE,(D.doctype||D.sawRoot)&&ye(D,"Inappropriately located doctype declaration"),D.doctype="",D.sgmlDecl=""):V===">"?(Y(D,"onsgmldeclaration",D.sgmlDecl),D.sgmlDecl="",D.state=w.TEXT):(b(V)&&(D.state=w.SGML_DECL_QUOTED),D.sgmlDecl+=V);continue;case w.SGML_DECL_QUOTED:V===D.q&&(D.state=w.SGML_DECL,D.q=""),D.sgmlDecl+=V;continue;case w.DOCTYPE:V===">"?(D.state=w.TEXT,Y(D,"ondoctype",D.doctype),D.doctype=!0):(D.doctype+=V,V==="["?D.state=w.DOCTYPE_DTD:b(V)&&(D.state=w.DOCTYPE_QUOTED,D.q=V));continue;case w.DOCTYPE_QUOTED:D.doctype+=V,V===D.q&&(D.q="",D.state=w.DOCTYPE);continue;case w.DOCTYPE_DTD:D.doctype+=V,V==="]"?D.state=w.DOCTYPE:b(V)&&(D.state=w.DOCTYPE_DTD_QUOTED,D.q=V);continue;case w.DOCTYPE_DTD_QUOTED:D.doctype+=V,V===D.q&&(D.state=w.DOCTYPE_DTD,D.q="");continue;case w.COMMENT:V==="-"?D.state=w.COMMENT_ENDING:D.comment+=V;continue;case w.COMMENT_ENDING:V==="-"?(D.state=w.COMMENT_ENDED,D.comment=fe(D.opt,D.comment),D.comment&&Y(D,"oncomment",D.comment),D.comment=""):(D.comment+="-"+V,D.state=w.COMMENT);continue;case w.COMMENT_ENDED:V!==">"?(ye(D,"Malformed comment"),D.comment+="--"+V,D.state=w.COMMENT):D.state=w.TEXT;continue;case w.CDATA:V==="]"?D.state=w.CDATA_ENDING:D.cdata+=V;continue;case w.CDATA_ENDING:V==="]"?D.state=w.CDATA_ENDING_2:(D.cdata+="]"+V,D.state=w.CDATA);continue;case w.CDATA_ENDING_2:V===">"?(D.cdata&&Y(D,"oncdata",D.cdata),Y(D,"onclosecdata"),D.cdata="",D.state=w.TEXT):V==="]"?D.cdata+="]":(D.cdata+="]]"+V,D.state=w.CDATA);continue;case w.PROC_INST:V==="?"?D.state=w.PROC_INST_ENDING:x(V)?D.state=w.PROC_INST_BODY:D.procInstName+=V;continue;case w.PROC_INST_BODY:if(!D.procInstBody&&x(V))continue;V==="?"?D.state=w.PROC_INST_ENDING:D.procInstBody+=V;continue;case w.PROC_INST_ENDING:V===">"?(Y(D,"onprocessinginstruction",{name:D.procInstName,body:D.procInstBody}),D.procInstName=D.procInstBody="",D.state=w.TEXT):(D.procInstBody+="?"+V,D.state=w.PROC_INST_BODY);continue;case w.OPEN_TAG:d(P,V)?D.tagName+=V:(Ue(D),V===">"?$e(D):V==="/"?D.state=w.OPEN_TAG_SLASH:(x(V)||ye(D,"Invalid character in tag name"),D.state=w.ATTRIB));continue;case w.OPEN_TAG_SLASH:V===">"?($e(D,!0),Ze(D)):(ye(D,"Forward-slash in opening tag not followed by >"),D.state=w.ATTRIB);continue;case w.ATTRIB:if(x(V))continue;V===">"?$e(D):V==="/"?D.state=w.OPEN_TAG_SLASH:d(M,V)?(D.attribName=V,D.attribValue="",D.state=w.ATTRIB_NAME):ye(D,"Invalid attribute name");continue;case w.ATTRIB_NAME:V==="="?D.state=w.ATTRIB_VALUE:V===">"?(ye(D,"Attribute without value"),D.attribValue=D.attribName,ot(D),$e(D)):x(V)?D.state=w.ATTRIB_NAME_SAW_WHITE:d(P,V)?D.attribName+=V:ye(D,"Invalid attribute name");continue;case w.ATTRIB_NAME_SAW_WHITE:if(V==="=")D.state=w.ATTRIB_VALUE;else{if(x(V))continue;ye(D,"Attribute without value"),D.tag.attributes[D.attribName]="",D.attribValue="",Y(D,"onattribute",{name:D.attribName,value:""}),D.attribName="",V===">"?$e(D):d(M,V)?(D.attribName=V,D.state=w.ATTRIB_NAME):(ye(D,"Invalid attribute name"),D.state=w.ATTRIB)}continue;case w.ATTRIB_VALUE:if(x(V))continue;b(V)?(D.q=V,D.state=w.ATTRIB_VALUE_QUOTED):(ye(D,"Unquoted attribute value"),D.state=w.ATTRIB_VALUE_UNQUOTED,D.attribValue=V);continue;case w.ATTRIB_VALUE_QUOTED:if(V!==D.q){V==="&"?D.state=w.ATTRIB_VALUE_ENTITY_Q:D.attribValue+=V;continue}ot(D),D.q="",D.state=w.ATTRIB_VALUE_CLOSED;continue;case w.ATTRIB_VALUE_CLOSED:x(V)?D.state=w.ATTRIB:V===">"?$e(D):V==="/"?D.state=w.OPEN_TAG_SLASH:d(M,V)?(ye(D,"No whitespace between attributes"),D.attribName=V,D.attribValue="",D.state=w.ATTRIB_NAME):ye(D,"Invalid attribute name");continue;case w.ATTRIB_VALUE_UNQUOTED:if(!I(V)){V==="&"?D.state=w.ATTRIB_VALUE_ENTITY_U:D.attribValue+=V;continue}ot(D),V===">"?$e(D):D.state=w.ATTRIB;continue;case w.CLOSE_TAG:if(D.tagName)V===">"?Ze(D):d(P,V)?D.tagName+=V:D.script?(D.script+="</"+D.tagName,D.tagName="",D.state=w.SCRIPT):(x(V)||ye(D,"Invalid tagname in closing tag"),D.state=w.CLOSE_TAG_SAW_WHITE);else{if(x(V))continue;L(M,V)?D.script?(D.script+="</"+V,D.state=w.SCRIPT):ye(D,"Invalid tagname in closing tag."):D.tagName=V}continue;case w.CLOSE_TAG_SAW_WHITE:if(x(V))continue;V===">"?Ze(D):ye(D,"Invalid characters in closing tag");continue;case w.TEXT_ENTITY:case w.ATTRIB_VALUE_ENTITY_Q:case w.ATTRIB_VALUE_ENTITY_U:var re,ve;switch(D.state){case w.TEXT_ENTITY:re=w.TEXT,ve="textNode";break;case w.ATTRIB_VALUE_ENTITY_Q:re=w.ATTRIB_VALUE_QUOTED,ve="attribValue";break;case w.ATTRIB_VALUE_ENTITY_U:re=w.ATTRIB_VALUE_UNQUOTED,ve="attribValue";break}V===";"?(D[ve]+=gt(D),D.entity="",D.state=re):d(D.entity.length?m:T,V)?D.entity+=V:(ye(D,"Invalid character in entity name"),D[ve]+="&"+D.entity+V,D.entity="",D.state=re);continue;default:throw new Error(D,"Unknown state: "+D.state)}return D.position>=D.bufferCheckPosition&&o(D),D}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var A=String.fromCharCode,D=Math.floor,ee=function(){var V=16384,$=[],H,re,ve=-1,Le=arguments.length;if(!Le)return"";for(var F="";++ve<Le;){var C=Number(arguments[ve]);if(!isFinite(C)||C<0||C>1114111||D(C)!==C)throw RangeError("Invalid code point: "+C);C<=65535?$.push(C):(C-=65536,H=(C>>10)+55296,re=C%1024+56320,$.push(H,re)),(ve+1===Le||$.length>V)&&(F+=A.apply(null,$),$.length=0)}return F};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ee,configurable:!0,writable:!0}):String.fromCodePoint=ee}()})(e)}(Zc)),Zc}var vf={},Od;function nE(){return Od||(Od=1,(function(){vf.stripBOM=function(e){return e[0]==="\uFEFF"?e.substring(1):e}}).call(Be)),vf}var ji={},Dd;function Hv(){return Dd||(Dd=1,(function(){var e;e=new RegExp(/(?!xmlns)^.*:/),ji.normalize=function(t){return t.toLowerCase()},ji.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},ji.stripPrefix=function(t){return t.replace(e,"")},ji.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},ji.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t=t.toLowerCase()==="true"),t}}).call(Be)),ji}var Nd;function rE(){return Nd||(Nd=1,function(e){(function(){var t,n,r,o,i,a,s,u,f,l=function(g,v){return function(){return g.apply(v,arguments)}},p=function(g,v){for(var S in v)y.call(v,S)&&(g[S]=v[S]);function M(){this.constructor=g}return M.prototype=v.prototype,g.prototype=new M,g.__super__=v.prototype,g},y={}.hasOwnProperty;u=tE(),o=_u(),t=nE(),s=Hv(),f=Kl.setImmediate,n=Ll().defaults,i=function(g){return typeof g=="object"&&g!=null&&Object.keys(g).length===0},a=function(g,v,S){var M,P,T;for(M=0,P=g.length;M<P;M++)T=g[M],v=T(v,S);return v},r=function(g,v,S){var M;return M=Object.create(null),M.value=S,M.writable=!0,M.enumerable=!0,M.configurable=!0,Object.defineProperty(g,v,M)},e.Parser=function(g){p(v,g);function v(S){this.parseStringPromise=l(this.parseStringPromise,this),this.parseString=l(this.parseString,this),this.reset=l(this.reset,this),this.assignOrPush=l(this.assignOrPush,this),this.processAsync=l(this.processAsync,this);var M,P,T;if(!(this instanceof e.Parser))return new e.Parser(S);this.options={},P=n["0.2"];for(M in P)y.call(P,M)&&(T=P[M],this.options[M]=T);for(M in S)y.call(S,M)&&(T=S[M],this.options[M]=T);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return v.prototype.processAsync=function(){var S,M;try{return this.remaining.length<=this.options.chunkSize?(S=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(S),this.saxParser.close()):(S=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(S),f(this.processAsync))}catch(P){if(M=P,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(M)}},v.prototype.assignOrPush=function(S,M,P){return M in S?(S[M]instanceof Array||r(S,M,[S[M]]),S[M].push(P)):this.options.explicitArray?r(S,M,[P]):r(S,M,P)},v.prototype.reset=function(){var S,M,P,T;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(m){return function(x){if(m.saxParser.resume(),!m.saxParser.errThrown)return m.saxParser.errThrown=!0,m.emit("error",x)}}(this),this.saxParser.onend=function(m){return function(){if(!m.saxParser.ended)return m.saxParser.ended=!0,m.emit("end",m.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,T=[],S=this.options.attrkey,M=this.options.charkey,this.saxParser.onopentag=function(m){return function(x){var b,I,d,L,w;if(d={},d[M]="",!m.options.ignoreAttrs){w=x.attributes;for(b in w)y.call(w,b)&&(!(S in d)&&!m.options.mergeAttrs&&(d[S]={}),I=m.options.attrValueProcessors?a(m.options.attrValueProcessors,x.attributes[b],b):x.attributes[b],L=m.options.attrNameProcessors?a(m.options.attrNameProcessors,b):b,m.options.mergeAttrs?m.assignOrPush(d,L,I):r(d[S],L,I))}return d["#name"]=m.options.tagNameProcessors?a(m.options.tagNameProcessors,x.name):x.name,m.options.xmlns&&(d[m.options.xmlnskey]={uri:x.uri,local:x.local}),T.push(d)}}(this),this.saxParser.onclosetag=function(m){return function(){var x,b,I,d,L,w,U,G,Y,q;if(w=T.pop(),L=w["#name"],(!m.options.explicitChildren||!m.options.preserveChildrenOrder)&&delete w["#name"],w.cdata===!0&&(x=w.cdata,delete w.cdata),Y=T[T.length-1],w[M].match(/^\s*$/)&&!x?(b=w[M],delete w[M]):(m.options.trim&&(w[M]=w[M].trim()),m.options.normalize&&(w[M]=w[M].replace(/\s{2,}/g," ").trim()),w[M]=m.options.valueProcessors?a(m.options.valueProcessors,w[M],L):w[M],Object.keys(w).length===1&&M in w&&!m.EXPLICIT_CHARKEY&&(w=w[M])),i(w)&&(typeof m.options.emptyTag=="function"?w=m.options.emptyTag():w=m.options.emptyTag!==""?m.options.emptyTag:b),m.options.validator!=null&&(q="/"+function(){var fe,Te,we;for(we=[],fe=0,Te=T.length;fe<Te;fe++)d=T[fe],we.push(d["#name"]);return we}().concat(L).join("/"),function(){var fe;try{return w=m.options.validator(q,Y&&Y[L],w)}catch(Te){return fe=Te,m.emit("error",fe)}}()),m.options.explicitChildren&&!m.options.mergeAttrs&&typeof w=="object"){if(!m.options.preserveChildrenOrder)d={},m.options.attrkey in w&&(d[m.options.attrkey]=w[m.options.attrkey],delete w[m.options.attrkey]),!m.options.charsAsChildren&&m.options.charkey in w&&(d[m.options.charkey]=w[m.options.charkey],delete w[m.options.charkey]),Object.getOwnPropertyNames(w).length>0&&(d[m.options.childkey]=w),w=d;else if(Y){Y[m.options.childkey]=Y[m.options.childkey]||[],U={};for(I in w)y.call(w,I)&&r(U,I,w[I]);Y[m.options.childkey].push(U),delete w["#name"],Object.keys(w).length===1&&M in w&&!m.EXPLICIT_CHARKEY&&(w=w[M])}}return T.length>0?m.assignOrPush(Y,L,w):(m.options.explicitRoot&&(G=w,w={},r(w,L,G)),m.resultObject=w,m.saxParser.ended=!0,m.emit("end",m.resultObject))}}(this),P=function(m){return function(x){var b,I;if(I=T[T.length-1],I)return I[M]+=x,m.options.explicitChildren&&m.options.preserveChildrenOrder&&m.options.charsAsChildren&&(m.options.includeWhiteChars||x.replace(/\\n/g,"").trim()!=="")&&(I[m.options.childkey]=I[m.options.childkey]||[],b={"#name":"__text__"},b[M]=x,m.options.normalize&&(b[M]=b[M].replace(/\s{2,}/g," ").trim()),I[m.options.childkey].push(b)),I}}(this),this.saxParser.ontext=P,this.saxParser.oncdata=function(m){return function(x){var b;if(b=P(x),b)return b.cdata=!0}}()},v.prototype.parseString=function(S,M){var P;M!=null&&typeof M=="function"&&(this.on("end",function(T){return this.reset(),M(null,T)}),this.on("error",function(T){return this.reset(),M(T)}));try{return S=S.toString(),S.trim()===""?(this.emit("end",null),!0):(S=t.stripBOM(S),this.options.async?(this.remaining=S,f(this.processAsync),this.saxParser):this.saxParser.write(S).close())}catch(T){if(P=T,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw P}else return this.emit("error",P),this.saxParser.errThrown=!0}},v.prototype.parseStringPromise=function(S){return new Promise(function(M){return function(P,T){return M.parseString(S,function(m,x){return m?T(m):P(x)})}}(this))},v}(o),e.parseString=function(g,v,S){var M,P,T;return S!=null?(typeof S=="function"&&(M=S),typeof v=="object"&&(P=v)):(typeof v=="function"&&(M=v),P={}),T=new e.Parser(P),T.parseString(g,M)},e.parseStringPromise=function(g,v){var S,M;return typeof v=="object"&&(S=v),M=new e.Parser(S),M.parseStringPromise(g)}}).call(Be)}(Kc)),Kc}(function(){var e,t,n,r,o=function(a,s){for(var u in s)i.call(s,u)&&(a[u]=s[u]);function f(){this.constructor=a}return f.prototype=s.prototype,a.prototype=new f,a.__super__=s.prototype,a},i={}.hasOwnProperty;t=Ll(),e=Hw(),n=rE(),r=Hv(),ai.defaults=t.defaults,ai.processors=r,ai.ValidationError=function(a){o(s,a);function s(u){this.message=u}return s}(Error),ai.Builder=e.Builder,ai.Parser=n.Parser,ai.parseString=n.parseString,ai.parseStringPromise=n.parseStringPromise}).call(Be);function Uv(){return{dcrgraph:{specification:{resources:{events:{event:[]},subProcesses:{subProcess:[]},labels:{label:[]},labelMappings:{labelMapping:[]},variables:{variable:[]},expressions:{expression:[]},variableAccesses:{readAccessess:{readAccess:[]},writeAccessess:{writeAccess:[]}}},constraints:{conditions:{condition:[]},responses:{response:[]},coresponces:{coresponce:[]},excludes:{exclude:[]},includes:{include:[]},milestones:{milestone:[]},updates:{update:[]},spawns:{spawn:[]}}},runtime:{marking:{globalStore:{},executed:{event:[]},included:{event:[]},pendingResponses:{event:[]}}}}}}function Ql(e,t){t.description&&t.description.trim().length>0&&(e.dcrgraph.specification.resources.labels.label.some(n=>n.$.id===t.description)||e.dcrgraph.specification.resources.labels.label.push({$:{id:t.description}}),e.dcrgraph.specification.resources.labelMappings.labelMapping.push({$:{eventId:t.id,labelId:t.description}}))}function qv(e,t){t.role&&(e.custom={roles:{role:{_:t.role}}})}function Wv(e,t){t.included&&e.dcrgraph.runtime.marking.included.event.push({$:{id:t.id}}),t.executed&&e.dcrgraph.runtime.marking.executed.event.push({$:{id:t.id}}),t.pending&&e.dcrgraph.runtime.marking.pendingResponses.event.push({$:{id:t.id}})}function iE(e,t,n,r){Ql(e,n),qv(r,n),Wv(e,n),t.push(r)}function oE(e,t,n,r){ue(r.$,{type:"nesting"}),Ql(e,n),qv(r,n),r.event=[],t.push(r);for(let o of n.boardElements||[])Vs(e,r.event,o)}function aE(e,t,n,r){if(n["multi-instance"]){ue(r.$,{name:n.description,multiInstance:n["multi-instance"]}),r.dcrgraph=Uv().dcrgraph,e.dcrgraph.specification.resources.subProcesses.subProcess.push(r);for(let o of n.boardElements||[])Vs(r,r.dcrgraph.specification.resources.events.event,o)}else{ue(r.$,{type:"subprocess"}),Ql(e,n),Wv(e,n),r.event=[],t.push(r);for(let o of n.boardElements||[])Vs(e,r.event,o)}}function sE(e,t,n,r){r={$:{sourceId:n.sourceRef.id,targetId:n.targetRef.id}},e.dcrgraph.specification.constraints[`${n.type}s`][n.type].push(r)}function Vs(e,t,n){let r={$:{id:n.id}};switch(n.$type){case"dcr:Event":iE(e,t,n,r);break;case"dcr:Nesting":oE(e,t,n,r);break;case"dcr:SubProcess":aE(e,t,n,r);break;case"dcr:Relation":sE(e,t,n,r);break;default:console.warn("unknown element type",n.$type);break}}function uE(e,t){return new Promise((n,r)=>{if(!t){var o=new Error("no definitions loaded");return r(o)}let i=Uv();if(t.rootElements[0].boardElements)for(let s of t.rootElements[0].boardElements)Vs(i,i.dcrgraph.specification.resources.events.event,s);let a=new ai.Builder;return n({xml:a.buildObject(i)})})}function pt(e){e=ue({},fE,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e)}ct(pt,bo);pt.prototype.importXML=function(e,t){var n=this;return new Promise(function(r,o){e=n._emit("import.parse.start",{xml:e})||e,n._moddle.fromXML(e,"dcr:Definitions").then(function(i){var a=i.rootElement,s=i.references,u=i.warnings,f=i.elementsById,l={references:s,elementsById:f,warnings:u};a=n._emit("import.parse.complete",{definitions:a,context:l})||a,n.importDefinitions(a,t).then(function(p){var y=[].concat(u,p.warnings||[]);return n._emit("import.done",{error:null,warnings:y}),r({warnings:y})}).catch(function(p){var y=[].concat(u,p.warnings||[]);return n._emit("import.done",{error:p,warnings:y}),o(As(p,y))})}).catch(function(i){return n._emit("import.parse.complete",{error:i}),i=cE(i),n._emit("import.done",{error:i,warnings:i.warnings}),o(i)})})};pt.prototype.importDefinitions=function(e,t){var n=this;return new Promise(function(r,o){n._setDefinitions(e),n.open(t).then(function(i){var a=i.warnings;return r({warnings:a})}).catch(function(i){return o(i)})})};pt.prototype.open=function(e){var t=this._definitions,n=e,r=this;return new Promise(function(o,i){if(!t){var a=new Error("no XML imported");return i(As(a,[]))}if(typeof e=="string"&&(n=lE(t,e),!n)){var s=new Error("DcrRootBoard <"+e+"> not found");return i(As(s,[]))}try{r.clear()}catch(u){return i(As(u,[]))}Dw(r,t,n).then(function(u){var f=u.warnings;return o({warnings:f})}).catch(function(u){return i(u)})})};pt.prototype.saveXML=function(e){e=e||{};var t=this,n=this._definitions;return new Promise(function(r,o){if(!n){var i=new Error("no definitions loaded");return o(i)}n=t._emit("saveXML.start",{definitions:n})||n,t._moddle.toXML(n,e).then(function(a){var s=a.xml;try{s=t._emit("saveXML.serialized",{error:null,xml:s})||s,t._emit("saveXML.done",{error:null,xml:s})}catch(u){console.error("error in saveXML life-cycle listener",u)}return r({xml:s})}).catch(function(a){return o(a)})})};pt.prototype.saveDCRXML=function(e){return uE(e,this._definitions)};pt.prototype.saveSVG=function(e){const t=this;return new Promise(function(n,r){t._emit("saveSVG.start");let o,i;try{const a=t.get("canvas"),s=a.getActiveLayer(),u=Ot("defs",a._svg),f=ap(s),l=u?"<defs>"+ap(u)+"</defs>":"",p=s.getBBox();o=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with diagram-js -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+p.width+'" height="'+p.height+'" viewBox="'+p.x+" "+p.y+" "+p.width+" "+p.height+'" version="1.1">'+l+f+"</svg>"}catch(a){i=a}return t._emit("saveSVG.done",{error:i,svg:o}),i?r(i):n({svg:o})})};pt.prototype._setDefinitions=function(e){this._definitions=e};pt.prototype.getModules=function(){return this._modules};pt.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach(function(e){var t=e.businessObject;t&&t.di&&delete t.di}),bo.prototype.clear.call(this))};pt.prototype.destroy=function(){bo.prototype.destroy.call(this),ur(this._container)};pt.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)};pt.prototype.off=function(e,t){this.get("eventBus").off(e,t)};pt.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Ot(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};pt.prototype.getDefinitions=function(){return this._definitions};pt.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};pt.prototype._init=function(e,t,n){var r=n.modules||this.getModules(),o=n.additionalModules||[],i=[{odm:["value",this],moddle:["value",t]}],a=[].concat(i,r,o),s=ue(Dr(n,["additionalModules"]),{canvas:ue({},n.canvas,{container:e}),modules:a});bo.call(this,s),n&&n.container&&this.attachTo(n.container)};pt.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};pt.prototype._createContainer=function(e){var t=Bt('<div class="pjs-container"></div>');return ue(t.style,{width:Id(e.width),height:Id(e.height),position:e.position}),t};pt.prototype._createModdle=function(e){var t=ue({},this._moddleExtensions,e.moddleExtensions);return new Pw(t)};pt.prototype._modules=[];pt.prototype._moddleExtensions={};function As(e,t){return e.warnings=t,e}function cE(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/,n=t.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid Dcr board file"+n[2]),e}var fE={width:"100%",height:"100%",position:"relative"};function Id(e){return e+(Ie(e)?"px":"")}function lE(e,t){return t&&_t(e.rootBoards,function(n){return n.id===t})||null}function Ca(e){pt.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.context)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}ct(Ca,pt);Ca.prototype._createModdle=function(e){var t=pt.prototype._createModdle.call(this,e);return t.ids=new sr([32,36,1]),t};Ca.prototype._collectIds=function(e,t){var n=e.$model,r=n.ids,o;r.clear();for(o in t.elementsById)r.claim(o,t.elementsById[o])};function We(e,t){var n=dn(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function dn(e){return e&&e.businessObject||e}function Ft(e,t){return au(t,function(n){return We(e,n)})}function zv(e){if(e.labelAttribute)return e.labelAttribute;if(Ft(e,["dcr:TextBox","dcr:Relation"]))return"name";if(We(e,"dcr:Event"))return"role"}function vi(e){var t=e.businessObject,n=zv(t);if(n)return t[n]||""}function hE(e,t){var n=e.businessObject,r=zv(n);return r&&(n[r]=t),e}function Jl(e){return e.businessObject.di}function mf(e){return e.businessObject}function Ko(e,t){return Vv(e)||Jl(e).get("bioc:fill")||t||"white"}function ho(e,t){return Vv(e)||Jl(e).get("bioc:stroke")||t||"black"}function pE(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=[["M",t,n],["l",r,0],["l",0,o],["l",-r,0],["z"]];return cu(i)}function Vv(e){var t=dn(e);return t.color||e.color}function dE(e,t,n){xe(t,{markerEnd:e("default-condition-flow-end","#FF9800","#FF9800"),stroke:"#FF9800"})}function gE(e,t,n){xe(t,{markerStart:e("default-response-flow-start","#039BE5","#039BE5"),markerEnd:e("default-response-flow-end","#039BE5","#039BE5"),stroke:"#039BE5"})}function yE(e,t,n){xe(t,{markerEnd:e("default-include-flow-end","#4CAF50","#4CAF50"),stroke:"#4CAF50"})}function vE(e,t,n){xe(t,{markerEnd:e("default-exclude-flow-end","red","red"),stroke:"red"})}function mE(e,t,n){xe(t,{markerEnd:e("default-milestone-flow-end","#8E24AA","#8E24AA"),stroke:"#8E24AA"})}function _E(e,t,n){xe(t,{markerEnd:e("default-spawn-flow-end","#4D6180","#4D6180"),stroke:"#4D6180"})}function xE(e,t,n,r,o){if(n==="default-response-flow-end"){var i=Pe("path");xe(i,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),e(t,{element:i,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:8.5,y:5},scale:.8})}if(n==="default-response-flow-start"){var a=Pe("path");xe(a,{d:"M 12.24,6.64 C 12.24,8.74 10.60,10.44 8.58,10.44 6.56,10.44 4.92,8.74 4.92,6.64 4.92,4.54 6.56,2.84 8.58,2.84 10.60,2.84 12.24,4.54 12.24,6.64 Z"}),e(t,{element:a,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:4.2,y:7.2},scale:.55})}if(n==="default-exclude-flow-end"){var s=Pe("path");xe(s,{d:"M 18.28,0.00 C 18.28,0.00 20.00,0.92 20.00,0.92 20.00,0.92 11.84,14.84 11.84,14.84 11.84,14.84 10.12,13.92 10.12,13.92 10.12,13.92 18.28,0.00 18.28,0.00 Z M 16.61,13.64 C 16.61,14.39 17.23,15.00 18.01,15.00 18.78,15.00 19.41,14.39 19.41,13.64 19.41,12.88 18.78,12.27 18.01,12.27 17.23,12.27 16.61,12.88 16.61,13.64 Z M 13.74,1.47 C 13.74,2.22 13.11,2.83 12.34,2.83 11.56,2.83 10.94,2.22 10.94,1.47 10.94,0.72 11.56,0.11 12.34,0.11 13.11,0.11 13.74,0.72 13.74,1.47 Z M 12.25,7.81 C 12.25,7.81 6.13,11.23 6.13,11.23 6.13,11.23 -0.00,14.65 -0.00,14.65 -0.00,14.65 0.02,7.78 0.02,7.78 0.02,7.78 0.03,0.92 0.03,0.92 0.03,0.92 6.14,4.36 6.14,4.36 6.14,4.36 12.25,7.81 12.25,7.81 Z"}),e(t,{element:s,scale:.4,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:22,y:7.73}})}if(n==="default-exclude-flow-start"){var u=Pe("path");xe(u,{d:"M 12.24,6.64 C 12.24,8.74 10.60,10.44 8.58,10.44 6.56,10.44 4.92,8.74 4.92,6.64 4.92,4.54 6.56,2.84 8.58,2.84 10.60,2.84 12.24,4.54 12.24,6.64 Z"}),e(t,{element:u,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:4.2,y:7.2},scale:.55})}if(n==="default-include-flow-end"){var f=Pe("path");xe(f,{d:"M 18.35,5.99 C 18.35,5.99 15.08,5.99 15.08,5.99 15.08,5.99 15.08,2.66 15.08,2.66 15.08,2.35 14.83,2.10 14.53,2.10 14.23,2.10 13.99,2.35 13.99,2.66 13.99,2.66 13.99,5.99 13.99,5.99 13.99,5.99 10.72,5.99 10.72,5.99 10.42,5.99 10.17,6.24 10.17,6.54 10.17,6.85 10.42,7.10 10.72,7.10 10.72,7.10 13.99,7.10 13.99,7.10 13.99,7.10 13.99,10.43 13.99,10.43 13.99,10.73 14.23,10.98 14.53,10.98 14.83,10.98 15.08,10.73 15.08,10.43 15.08,10.43 15.08,7.10 15.08,7.10 15.08,7.10 18.35,7.10 18.35,7.10 18.65,7.10 18.89,6.85 18.89,6.54 18.89,6.24 18.65,5.99 18.35,5.99 18.35,5.99 18.35,5.99 18.35,5.99 Z M 10.53,6.59 C 10.53,6.59 5.27,9.52 5.27,9.52 5.27,9.52 0.00,12.46 0.00,12.46 0.00,12.46 0.01,6.57 0.01,6.57 0.01,6.57 0.03,0.69 0.03,0.69 0.03,0.69 5.28,3.64 5.28,3.64 5.28,3.64 10.53,6.59 10.53,6.59 Z"}),e(t,{element:f,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:20.6,y:6.6},scale:.55})}if(n==="default-include-flow-start"){var l=Pe("path");xe(l,{d:"M 12.24,6.64 C 12.24,8.74 10.60,10.44 8.58,10.44 6.56,10.44 4.92,8.74 4.92,6.64 4.92,4.54 6.56,2.84 8.58,2.84 10.60,2.84 12.24,4.54 12.24,6.64 Z"}),e(t,{element:l,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:4.2,y:7.2},scale:.55})}if(n==="default-condition-flow-end"){var p=Pe("path");xe(p,{d:"M 17.83,7.19 C 17.83,9.29 16.20,10.99 14.18,10.99 12.16,10.99 10.52,9.29 10.52,7.19 10.52,5.09 12.16,3.38 14.18,3.38 16.20,3.38 17.83,5.09 17.83,7.19 Z M 10.59,7.18 C 10.59,7.18 5.29,9.56 5.29,9.56 5.29,9.56 -0.00,11.94 -0.00,11.94 -0.00,11.94 0.01,7.16 0.01,7.16 0.01,7.16 0.03,2.37 0.03,2.37 0.03,2.37 5.31,4.77 5.31,4.77 5.31,4.77 10.59,7.18 10.59,7.18 Z"}),e(t,{element:p,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:19.1,y:7.2},scale:.55})}if(n==="default-milestone-flow-end"){var y=Pe("path");xe(y,{d:"M 14.41,1.80 C 14.41,1.80 17.98,6.54 17.98,6.54 17.98,6.54 14.41,11.28 14.41,11.28 14.41,11.28 10.84,6.54 10.84,6.54 10.84,6.54 14.41,1.80 14.41,1.80M 14.41,0.67 C 14.41,0.67 9.99,6.54 9.99,6.54 9.99,6.54 14.41,12.42 14.41,12.42 14.41,12.42 18.83,6.54 18.83,6.54 18.83,6.54 14.41,0.67 14.41,0.67 Z M 10.53,6.59 C 10.53,6.59 5.27,9.52 5.27,9.52 5.27,9.52 0.00,12.46 0.00,12.46 0.00,12.46 0.01,6.57 0.01,6.57 0.01,6.57 0.03,0.69 0.03,0.69 0.03,0.69 5.28,3.64 5.28,3.64 5.28,3.64 10.53,6.59 10.53,6.59 Z"}),e(t,{element:y,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:19.9,y:6.8},scale:.55})}if(n==="default-spawn-flow-end"){var g=Pe("path");xe(g,{d:"M 13.85,5.21 C 14.23,5.49 14.60,5.34 14.67,4.87 14.67,4.87 14.98,2.83 14.98,2.83 15.06,2.35 15.17,2.35 15.24,2.83 15.24,2.83 15.55,4.87 15.55,4.87 15.63,5.34 16.00,5.49 16.38,5.21 16.38,5.21 18.13,3.92 18.13,3.92 18.51,3.64 18.60,3.73 18.32,4.11 18.32,4.11 17.04,5.89 17.04,5.89 16.77,6.27 16.92,6.65 17.39,6.72 17.39,6.72 19.40,7.03 19.40,7.03 19.87,7.11 19.87,7.22 19.40,7.30 19.40,7.30 17.39,7.61 17.39,7.61 16.92,7.68 16.77,8.06 17.04,8.44 17.04,8.44 18.32,10.22 18.32,10.22 18.60,10.60 18.51,10.69 18.13,10.41 18.13,10.41 16.38,9.12 16.38,9.12 16.00,8.84 15.63,8.99 15.55,9.46 15.55,9.46 15.24,11.50 15.24,11.50 15.17,11.98 15.06,11.98 14.98,11.50 14.98,11.50 14.67,9.46 14.67,9.46 14.60,8.99 14.23,8.84 13.85,9.12 13.85,9.12 12.10,10.41 12.10,10.41 11.72,10.69 11.65,10.61 11.94,10.24 11.94,10.24 13.39,8.42 13.39,8.42 13.69,8.05 13.55,7.69 13.08,7.62 13.08,7.62 10.78,7.30 10.78,7.30 10.32,7.24 10.32,7.12 10.78,7.05 10.78,7.05 12.84,6.72 12.84,6.72 13.31,6.65 13.46,6.27 13.19,5.89 13.19,5.89 11.91,4.11 11.91,4.11 11.63,3.73 11.72,3.64 12.10,3.92 12.10,3.92 13.85,5.21 13.85,5.21 Z M 10.60,7.18 C 10.60,7.18 5.30,9.56 5.30,9.56 5.30,9.56 -0.00,11.94 -0.00,11.94 -0.00,11.94 0.01,7.16 0.01,7.16 0.01,7.16 0.03,2.37 0.03,2.37 0.03,2.37 5.31,4.77 5.31,4.77 5.31,4.77 10.60,7.18 10.60,7.18 Z"}),e(t,{element:g,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:21.2,y:7.2},scale:.6})}}const wE=Object.freeze(Object.defineProperty({__proto__:null,conditionMarker:dE,createMarker:xE,excludeMarker:vE,includeMarker:yE,milestoneMarker:mE,responseMarker:gE,spawnMarker:_E},Symbol.toStringTag,{value:"Module"}));function EE(e,t,n){xe(t,{markerEnd:e("proposed-condition-flow-end",n,"#FF9800"),markerStart:e("proposed-condition-flow-start","#FF9800","#FF9800"),stroke:"#FF9800"})}function bE(e,t,n){xe(t,{markerStart:e("proposed-response-flow-start","#039BE5","#039BE5"),markerEnd:e("proposed-response-flow-end",n,"#039BE5"),stroke:"#039BE5"})}function TE(e,t,n){xe(t,{markerStart:e("proposed-include-flow-start","#4CAF50","#4CAF50"),markerEnd:e("proposed-include-flow-end",n,"#4CAF50"),stroke:"#4CAF50"})}function SE(e,t,n){xe(t,{markerStart:e("proposed-exclude-flow-start","red","red"),markerEnd:e("proposed-exclude-flow-end",n,"red"),stroke:"red"})}function CE(e,t,n){xe(t,{markerEnd:e("proposed-milestone-flow-end",n,"#8E24AA"),markerStart:e("proposed-milestone-flow-start",n,"#8E24AA"),stroke:"#8E24AA"})}function ME(e,t,n){xe(t,{markerEnd:e("proposed-spawn-flow-end","#4D6180","#4D6180"),stroke:"#4D6180"})}function RE(e,t,n,r,o){if(n==="proposed-response-flow-end"){var i=Pe("path");xe(i,{d:"M 19.26,10.00 C 19.26,15.11 15.11,19.26 10.00,19.26 4.89,19.26 0.74,15.11 0.74,10.00 0.74,4.89 4.89,0.74 10.00,0.74 15.11,0.74 19.26,4.89 19.26,10.00 Z M 8.27,15.26 C 8.27,14.26 9.02,13.45 9.94,13.45 10.87,13.45 11.61,14.26 11.61,15.26 11.61,16.26 10.87,17.07 9.94,17.07 9.02,17.07 8.27,16.26 8.27,15.26 8.27,15.26 8.27,15.26 8.27,15.26 Z M 8.43,4.40 C 8.43,4.35 8.43,4.29 8.43,4.23 8.43,3.33 9.10,2.59 9.94,2.59 10.77,2.59 11.45,3.33 11.45,4.23 11.45,4.29 11.45,4.35 11.44,4.40 11.44,4.40 10.86,10.74 10.86,10.74 10.81,11.25 10.42,11.64 9.94,11.64 9.46,11.64 9.07,11.25 9.02,10.75 9.02,10.75 8.43,4.40 8.43,4.40 Z"}),e(t,{element:i,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:21,y:10},scale:.45})}if(n==="proposed-response-flow-start"){var a=Pe("path");xe(a,{d:"M 1 5 L 11 10 L 1 15 Z"}),e(t,{element:a,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:0,y:10},scale:.65})}if(n==="proposed-exclude-flow-end"){var s=Pe("path");xe(s,{d:"M 16.64,10.63 C 16.64,10.95 16.46,11.24 16.24,11.24 16.24,11.24 4.29,11.24 4.29,11.24 4.08,11.24 3.89,10.95 3.89,10.63 3.89,10.63 3.89,9.42 3.89,9.42 3.89,9.09 4.08,8.81 4.29,8.81 4.29,8.81 16.24,8.81 16.24,8.81 16.46,8.81 16.64,9.09 16.64,9.42 16.64,9.42 16.64,10.63 16.64,10.63 Z M 19.26,10.00 C 19.26,15.11 15.11,19.26 10.00,19.26 4.89,19.26 0.74,15.11 0.74,10.00 0.74,4.89 4.89,0.74 10.00,0.74 15.11,0.74 19.26,4.89 19.26,10.00 Z"}),e(t,{element:s,scale:.4,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:21,y:8.8}})}if(n==="proposed-exclude-flow-start"){var u=Pe("path");xe(u,{d:"M 1 5 L 11 10 L 1 15 Z"}),e(t,{element:u,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:0,y:10},scale:.6})}if(n==="proposed-include-flow-end"){var f=Pe("path");xe(f,{d:"M 14.33,9.43 C 14.33,9.43 10.59,9.43 10.59,9.43 10.59,9.43 10.59,5.68 10.59,5.68 10.59,5.34 10.31,5.06 9.97,5.06 9.62,5.06 9.34,5.34 9.34,5.68 9.34,5.68 9.34,9.43 9.34,9.43 9.34,9.43 5.61,9.43 5.61,9.43 5.26,9.43 4.99,9.70 4.99,10.05 4.99,10.39 5.26,10.67 5.61,10.67 5.61,10.67 9.34,10.67 9.34,10.67 9.34,10.67 9.34,14.42 9.34,14.42 9.34,14.76 9.62,15.04 9.97,15.04 10.31,15.04 10.59,14.76 10.59,14.42 10.59,14.42 10.59,10.67 10.59,10.67 10.59,10.67 14.33,10.67 14.33,10.67 14.67,10.67 14.95,10.39 14.95,10.05 14.95,9.70 14.67,9.43 14.33,9.43 14.33,9.43 14.33,9.43 14.33,9.43 Z M 19.26,10.00 C 19.26,15.11 15.11,19.26 10.00,19.26 4.89,19.26 0.74,15.11 0.74,10.00 0.74,4.89 4.89,0.74 10.00,0.74 15.11,0.74 19.26,4.89 19.26,10.00 Z"}),e(t,{element:f,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:21,y:10},scale:.45})}if(n==="proposed-include-flow-start"){var l=Pe("path");xe(l,{d:"M 1 5 L 11 10 L 1 15 Z"}),e(t,{element:l,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:0,y:10},scale:.65})}if(n==="proposed-condition-flow-end"){var p=Pe("path");xe(p,{d:"M 5.57,11.87 C 4.49,11.87 3.61,11.00 3.61,9.91 3.61,8.83 4.49,7.95 5.57,7.95 6.65,7.95 7.52,8.83 7.52,9.91 7.52,11.00 6.65,11.87 5.57,11.87M 16.81,9.42 C 16.81,9.42 8.46,9.42 8.46,9.42 8.23,8.03 7.02,6.97 5.57,6.97 3.95,6.97 2.63,8.29 2.63,9.91 2.63,11.54 3.95,12.85 5.57,12.85 7.02,12.85 8.23,11.80 8.46,10.40 8.46,10.40 12.90,10.40 12.90,10.40 12.90,10.40 12.90,12.36 12.90,12.36 12.90,12.63 13.12,12.85 13.39,12.85 13.66,12.85 13.88,12.63 13.88,12.36 13.88,12.36 13.88,10.40 13.88,10.40 13.88,10.40 15.35,10.40 15.35,10.40 15.35,10.40 15.35,11.38 15.35,11.38 15.35,11.65 15.57,11.87 15.84,11.87 16.11,11.87 16.33,11.65 16.33,11.38 16.33,11.38 16.33,10.40 16.33,10.40 16.33,10.40 16.81,10.40 16.81,10.40 17.08,10.40 17.30,10.18 17.30,9.91 17.30,9.64 17.08,9.42 16.81,9.42M 19.26,10.00 C 19.26,15.11 15.11,19.26 10.00,19.26 4.89,19.26 0.74,15.11 0.74,10.00 0.74,4.89 4.89,0.74 10.00,0.74 15.11,0.74 19.26,4.89 19.26,10.00 Z"}),e(t,{element:p,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:21,y:10},scale:.45})}if(n==="proposed-condition-flow-start"){var l=Pe("path");xe(l,{d:"M 1 5 L 11 10 L 1 15 Z"}),e(t,{element:l,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:0,y:10},scale:.65})}if(n==="proposed-milestone-flow-end"){var y=Pe("path");xe(y,{d:"M 5.57,11.87 C 4.49,11.87 3.61,11.00 3.61,9.91 3.61,8.83 4.49,7.95 5.57,7.95 6.65,7.95 7.52,8.83 7.52,9.91 7.52,11.00 6.65,11.87 5.57,11.87M 16.81,9.42 C 16.81,9.42 8.46,9.42 8.46,9.42 8.23,8.03 7.02,6.97 5.57,6.97 3.95,6.97 2.63,8.29 2.63,9.91 2.63,11.54 3.95,12.85 5.57,12.85 7.02,12.85 8.23,11.80 8.46,10.40 8.46,10.40 12.90,10.40 12.90,10.40 12.90,10.40 12.90,12.36 12.90,12.36 12.90,12.63 13.12,12.85 13.39,12.85 13.66,12.85 13.88,12.63 13.88,12.36 13.88,12.36 13.88,10.40 13.88,10.40 13.88,10.40 15.35,10.40 15.35,10.40 15.35,10.40 15.35,11.38 15.35,11.38 15.35,11.65 15.57,11.87 15.84,11.87 16.11,11.87 16.33,11.65 16.33,11.38 16.33,11.38 16.33,10.40 16.33,10.40 16.33,10.40 16.81,10.40 16.81,10.40 17.08,10.40 17.30,10.18 17.30,9.91 17.30,9.64 17.08,9.42 16.81,9.42M 19.26,10.00 C 19.26,15.11 15.11,19.26 10.00,19.26 4.89,19.26 0.74,15.11 0.74,10.00 0.74,4.89 4.89,0.74 10.00,0.74 15.11,0.74 19.26,4.89 19.26,10.00 Z"}),e(t,{element:y,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:21,y:10},scale:.45})}if(n==="proposed-milestone-flow-start"){var g=Pe("path");xe(g,{d:"M 0.68,19.94 C 0.68,19.94 0.70,10.50 0.70,10.50 0.70,10.50 0.72,1.07 0.72,1.07 0.72,1.07 9.69,5.80 9.69,5.80 9.69,5.80 18.65,10.54 18.65,10.54 18.65,10.54 9.66,15.24 9.66,15.24 9.66,15.24 0.68,19.94 0.68,19.94 Z M 4.46,13.56 C 4.46,13.56 4.46,13.56 4.46,13.56 4.46,12.90 4.95,12.37 5.55,12.37 6.14,12.37 6.63,12.90 6.63,13.56 6.63,13.56 6.63,13.56 6.63,13.56 6.63,14.22 6.14,14.75 5.55,14.75 4.95,14.75 4.46,14.22 4.46,13.56 4.46,13.56 4.46,13.56 4.46,13.56 Z M 4.57,6.42 C 4.56,6.38 4.56,6.35 4.56,6.31 4.56,5.71 5.00,5.23 5.54,5.23 6.09,5.23 6.52,5.71 6.52,6.31 6.52,6.35 6.52,6.38 6.52,6.42 6.52,6.42 6.14,10.59 6.14,10.59 6.11,10.92 5.85,11.18 5.54,11.18 5.23,11.18 4.98,10.92 4.95,10.59 4.95,10.59 4.57,6.42 4.57,6.42 Z"}),e(t,{element:g,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:0,y:10.5},scale:.45})}if(n==="proposed-spawn-flow-end"){var v=Pe("path");xe(v,{d:"M 13.85,5.21 C 14.23,5.49 14.60,5.34 14.67,4.87 14.67,4.87 14.98,2.83 14.98,2.83 15.06,2.35 15.17,2.35 15.24,2.83 15.24,2.83 15.55,4.87 15.55,4.87 15.63,5.34 16.00,5.49 16.38,5.21 16.38,5.21 18.13,3.92 18.13,3.92 18.51,3.64 18.60,3.73 18.32,4.11 18.32,4.11 17.04,5.89 17.04,5.89 16.77,6.27 16.92,6.65 17.39,6.72 17.39,6.72 19.40,7.03 19.40,7.03 19.87,7.11 19.87,7.22 19.40,7.30 19.40,7.30 17.39,7.61 17.39,7.61 16.92,7.68 16.77,8.06 17.04,8.44 17.04,8.44 18.32,10.22 18.32,10.22 18.60,10.60 18.51,10.69 18.13,10.41 18.13,10.41 16.38,9.12 16.38,9.12 16.00,8.84 15.63,8.99 15.55,9.46 15.55,9.46 15.24,11.50 15.24,11.50 15.17,11.98 15.06,11.98 14.98,11.50 14.98,11.50 14.67,9.46 14.67,9.46 14.60,8.99 14.23,8.84 13.85,9.12 13.85,9.12 12.10,10.41 12.10,10.41 11.72,10.69 11.65,10.61 11.94,10.24 11.94,10.24 13.39,8.42 13.39,8.42 13.69,8.05 13.55,7.69 13.08,7.62 13.08,7.62 10.78,7.30 10.78,7.30 10.32,7.24 10.32,7.12 10.78,7.05 10.78,7.05 12.84,6.72 12.84,6.72 13.31,6.65 13.46,6.27 13.19,5.89 13.19,5.89 11.91,4.11 11.91,4.11 11.63,3.73 11.72,3.64 12.10,3.92 12.10,3.92 13.85,5.21 13.85,5.21 Z M 10.60,7.18 C 10.60,7.18 5.30,9.56 5.30,9.56 5.30,9.56 -0.00,11.94 -0.00,11.94 -0.00,11.94 0.01,7.16 0.01,7.16 0.01,7.16 0.03,2.37 0.03,2.37 0.03,2.37 5.31,4.77 5.31,4.77 5.31,4.77 10.60,7.18 10.60,7.18 Z"}),e(t,{element:v,attrs:{fill:r,stroke:o,strokeLinecap:"butt"},ref:{x:21.2,y:7.2},scale:.6})}}const PE=Object.freeze(Object.defineProperty({__proto__:null,conditionMarker:EE,createMarker:RE,excludeMarker:SE,includeMarker:TE,milestoneMarker:CE,responseMarker:bE,spawnMarker:ME},Symbol.toStringTag,{value:"Module"}));var AE=new sr,_f=.35,Ld={};function Yi(e,t,n,r,o,i,a,s){Lr.call(this,t,s);var u=e&&e.defaultFillColor,f=e&&e.defaultStrokeColor,l=AE.next(),p=n.computeStyle;function y(Y,q,fe,Te,we,ye){Vt(we)&&(ye=we,we=0),we=we||0,ye=p(ye,{fill:"white"});var Ue=Pe("rect");return xe(Ue,{x:we,y:we,width:q-we*2,height:fe-we*2,rx:Te,ry:Te}),xe(Ue,ye),ke(Y,Ue),Ue}function g(Y,q,fe){fe=p(fe,["no-fill"],{strokeWidth:2});var Te=Pe("path");return xe(Te,{d:q}),xe(Te,fe),ke(Y,Te),Te}function v(Y,q,fe,Te){return g(q,fe,ue({"data-marker":Y},Te))}function S(Y){return G[Y]}function M(Y,q,fe){fe=ue({size:{width:100}},fe);var Te=i.createText(q||"",fe);return Ke(Te).add("djs-label"),ke(Y,Te),Te}function P(Y,q){var fe={width:90,height:30,x:q.width/2+q.x,y:q.height/2+q.y};return M(Y,vi(q),{box:fe,fitBox:!0,style:ue({},i.getExternalStyle(),{fill:"black"})})}function T(Y,q){let Te=mf(q).role||"";M(Y,Te,{box:{height:30,width:q.width},padding:5,align:"center-middle",style:{fill:f}})}function m(Y,q,fe,Te){var we=mf(q);we.description&&M(Y,we.description,{box:{height:q.height+Te,width:q.width},padding:{top:5+Te,bottom:5,left:5,right:5},align:fe,style:{fill:f}})}function x(){return a.get("useNewFlowIcons")?PE:wE}function b(Y,q,fe=!1){I(Y,[{x:0,y:30},{x:q.width,y:30}],{stroke:ho(q,f),"stroke-dasharray":fe?"12, 5":void 0})}function I(Y,q,fe){fe=p(fe,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var Te=fu(q,fe);return ke(Y,Te),Te}function d(Y){for(var q=Y.waypoints,fe="m  "+q[0].x+","+q[0].y,Te=1;Te<q.length;Te++)fe+="L"+q[Te].x+","+q[Te].y+" ";return fe}function L(Y,q,fe){var Te=Y+"-"+U(q)+"-"+U(fe)+"-"+l;return Ld[Te]||x().createMarker(w,Te,Y,q,fe),"url(#"+Te+")"}function w(Y,q){var fe=ue({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},q.attrs),Te=q.ref||{x:0,y:0},we=q.scale||1;fe.strokeDasharray==="none"&&(fe.strokeDasharray=[1e4,1]);var ye=Pe("marker");xe(q.element,fe),ke(ye,q.element),xe(ye,{id:Y,viewBox:"0 0 20 20",refX:Te.x,refY:Te.y,markerWidth:20*we,markerHeight:20*we,orient:"auto"});var Ue=Ot("defs",o._svg);Ue||(Ue=Pe("defs"),ke(o._svg,Ue)),ke(Ue,ye),Ld[Y]=ye}function U(Y){return Y.replace(/[^0-9a-zA-z]+/g,"_")}var G=this.handlers={"dcr:Event":function(Y,q,fe){let Te=q.businessObject.get("included"),we=q.businessObject.get("pending"),ye=q.businessObject.get("executed");var Ue=y(Y,q.width,q.height,7,ue({fill:Ko(q,u),fillOpacity:_f,stroke:ho(q,f),strokeWidth:2,"stroke-dasharray":Te?void 0:"12, 5"}),fe);return b(Y,q,!Te),T(Y,q),m(Y,q,"center-middle",30),we&&S("PendingMarker")(Y,q),ye&&S("ExecutedMarker")(Y,q),Ue},"dcr:Nesting":function(Y,q,fe){var Te=y(Y,q.width,q.height,7,ue({fill:Ko(q,u),fillOpacity:_f,stroke:ho(q,f),strokeWidth:2}),fe);return b(Y,q),T(Y,q),m(Y,q,"center-top",30),S("NestingMarker")(Y,q),Te},"dcr:SubProcess":function(Y,q,fe){let Te=q.businessObject.get("included"),we=q.businessObject.get("pending"),ye=q.businessObject.get("executed"),Ue=q.businessObject.get("multi-instance");var Xe=y(Y,q.width,q.height,7,ue({fill:Ko(q,u),fillOpacity:_f,stroke:ho(q,f),strokeWidth:2,"stroke-dasharray":Te?void 0:"12, 5"}),fe);return m(Y,q,"center-top",0),Ue?S("MultiInstanceMarker")(Y,q):S("SubProcessMarker")(Y,q),we&&S("PendingMarker")(Y,q),ye&&S("ExecutedMarker")(Y,q),Xe},"dcr:Relation":function(Y,q){let fe=q.businessObject.get("type");var Te=d(q),we=Ko(q,u),ye=ho(q,f);mf(q);var Ue=g(Y,Te,{strokeLinejoin:"round",stroke:ye});let Xe=x();return fe==="condition"?Xe.conditionMarker(L,Ue,we):fe==="response"?Xe.responseMarker(L,Ue,we):fe==="include"?Xe.includeMarker(L,Ue,we):fe==="exclude"?Xe.excludeMarker(L,Ue,we):fe==="milestone"?Xe.milestoneMarker(L,Ue,we):fe==="spawn"&&Xe.spawnMarker(L,Ue,we),Ue},label:function(Y,q){return P(Y,q)},PendingMarker:function(Y,q){var fe=r.getScaledPath("MARKER_PENDING",{xScaleFactor:1,yScaleFactor:1,containerWidth:q.width,containerHeight:q.height,position:{mx:6/q.width,my:60/q.height}});v("pending",Y,fe,{fill:"#039BE5",stroke:"#039BE5"})},ExecutedMarker:function(Y,q){var fe=r.getScaledPath("MARKER_EXECUTED",{xScaleFactor:1,yScaleFactor:1,containerWidth:q.width,containerHeight:q.height,position:{mx:15/q.width,my:50/q.height}});v("executed",Y,fe,{strokeWidth:1,fill:"#4CAF50",stroke:"#4CAF50"})},NestingMarker:function(Y,q){var fe=r.getScaledPath("MARKER_NESTING",{xScaleFactor:1,yScaleFactor:1,containerWidth:q.width,containerHeight:q.height,position:{mx:(q.width-15)/q.width,my:(q.height-5)/q.height}});v("nesting",Y,fe,{strokeWidth:1,fill:"grey",stroke:"grey"})},SubProcessMarker:function(Y,q){var fe=r.getScaledPath("MARKER_SUBPROCESS",{xScaleFactor:1,yScaleFactor:1,containerWidth:q.width,containerHeight:q.height,position:{mx:(q.width-15)/q.width,my:(q.height-5)/q.height}});v("subprocess",Y,fe,{strokeWidth:1,fill:"grey",stroke:"grey"})},MultiInstanceMarker:function(Y,q){var fe=r.getScaledPath("MARKER_MULTI_INSTANCE",{xScaleFactor:1,yScaleFactor:1,containerWidth:q.width,containerHeight:q.height,position:{mx:q.width/2/q.width,my:(q.height-20)/q.height}});v("multi-instance",Y,fe,{strokeWidth:2,fill:Ko(q,u),stroke:ho(q,f)})}}}ct(Yi,Lr);Yi.$inject=["config.odm","eventBus","styles","pathMap","canvas","textRenderer","dcrSettings"];Yi.prototype.canRender=function(e){return We(e,"dcr:BoardElement")};Yi.prototype.drawShape=function(e,t){var n=t.type,r=this.handlers[n];return r(e,t)};Yi.prototype.drawConnection=function(e,t){var n=t.type,r=this.handlers[n];return r(e,t)};Yi.prototype.getShapePath=function(e){return pE(e)};var OE=0,DE={width:150,height:50};function NE(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function IE(e){return Vt(e)?ue({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function LE(e,t){t.textContent=e;var n;try{var r,o=e==="";return t.textContent=o?"dummy":e,n=t.getBBox(),r={width:n.width+n.x*2,height:n.height},o&&(r.width=0),r}catch{return{width:0,height:0}}}function kE(e,t,n){for(var r=e.shift(),o=r,i;;){if(i=LE(o,n),i.width=o?i.width:0,o===" "||o===""||i.width<Math.round(t)||o.length<2)return BE(e,o,r,i);o=jE(o,i.width,t)}}function BE(e,t,n,r){if(t.length<n.length){var o=n.slice(t.length).trim();e.unshift(o)}return{width:r.width,height:r.height,text:t}}var kd="Â­";function FE(e,t){var n=e.split(/(\s|-|\u00AD)/g),r,o=[],i=0;if(n.length>1)for(;r=n.shift();)if(r.length+i<t)o.push(r),i+=r.length;else{(r==="-"||r===kd)&&o.pop();break}var a=o[o.length-1];return a&&a===kd&&(o[o.length-1]="-"),o.join("")}function jE(e,t,n){var r=Math.max(e.length*(n/t),1),o=FE(e,r);return o||(o=e.slice(0,Math.max(Math.round(r-1),1))),o}function $E(){var e=document.getElementById("helper-svg");return e||(e=Pe("svg"),xe(e,{id:"helper-svg"}),Nr(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function wu(e){this._config=ue({},{size:DE,padding:OE,style:{},align:"center-top"},e||{})}wu.prototype.createText=function(e,t){return this.layoutText(e,t).element};wu.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};wu.prototype.layoutText=function(e,t){var n=ue({},this._config.size,t.box),r=ue({},this._config.style,t.style),o=NE(t.align||this._config.align),i=IE(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=HE(r),u=e.split(/\u00AD?\r?\n/),f=[],l=n.width-i.left-i.right,p=Pe("text");xe(p,{x:0,y:0}),xe(p,r);var y=$E();for(ke(y,p);u.length;)f.push(kE(u,l,p));o.vertical==="middle"&&(i.top=i.bottom=0);var g=Pn(f,function(T,m,x){return T+(s||m.height)},0)+i.top+i.bottom,v=Pn(f,function(T,m,x){return m.width>T?m.width:T},0),S=i.top;o.vertical==="middle"&&(S+=(n.height-g)/2),S-=(s||f[0].height)/4;var M=Pe("text");xe(M,r),ne(f,function(T){var m;switch(S+=s||T.height,o.horizontal){case"left":m=i.left;break;case"right":m=(a?v:l)-i.right-T.width;break;default:m=Math.max(((a?v:l)-T.width)/2+i.left,0)}var x=Pe("tspan");xe(x,{x:m,y:S}),x.textContent=T.text,ke(M,x)}),Tt(p);var P={width:v,height:g};return{dimensions:P,element:M}};function HE(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var UE=16,qE=1.2;function Xv(e){var t=ue({fontFamily:"IBM Plex, sans-serif",fontSize:UE,fontWeight:"normal",lineHeight:qE},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,r=ue({},t,{fontSize:n},e&&e.externalStyle||{}),o=new wu({style:t});this.getExternalLabelBounds=function(i,a){var s=o.getDimensions(a,{box:{width:90,height:30,x:i.width/2+i.x,y:i.height/2+i.y},style:r});return{x:Math.round(i.x+i.width/2-s.width/2),y:Math.round(i.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.createText=function(i,a){return o.createText(i,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return r}}Xv.$inject=["config.textRenderer"];function WE(){this.pathMap={MARKER_PENDING:{d:"m {mx},{my} c0,0,0,0,0,0c0,-1.79,1.34,-3.25,3,-3.25c1.66,0,3,1.46,3,3.25c0,0,0,0,0,0c0,1.8,-1.34,3.25,-3,3.25c-1.66,0,-3,-1.45,-3,-3.25c0,0,0,0,0,0zm0.29,-19.5c-0.01,-0.1,-0.01,-0.21,-0.01,-0.31c0,-1.62,1.21,-2.94,2.71,-2.94c1.5,0,2.72,1.32,2.72,2.94c0,0.1,-0.01,0.21,-0.02,0.31c0,0,-1.05,11.39,-1.05,11.39c-0.08,0.9,-0.79,1.61,-1.65,1.61c-0.85,0,-1.56,-0.71,-1.65,-1.61c0,0,-1.05,-11.39,-1.05,-11.39z",height:10,width:10,heightElements:[],widthElements:[]},MARKER_EXECUTED:{d:"m {mx},{my} c3.45,3.86,6.8,7.34,10.02,11.74c3.49,-7.2,7.07,-14.42,12.98,-22.25c0,0,-1.59,-0.75,-1.59,-0.75c-4.99,5.47,-8.86,10.65,-12.23,16.81c-2.34,-2.18,-6.13,-5.27,-8.44,-6.86c0,0,-0.74,1.31,-0.74,1.31z",height:4,width:15,heightElements:[],widthElements:[]},MARKER_NESTING:{d:"m {mx},{my} l -2.25 0 l 0 -13 l 2.175 0 l 0 2.175 q 0.7 -0.95, 1.788 -1.762 a 4.329 4.329 0 0 1 1.776 -0.656 a 5.657 5.657 0 0 1 0.811, -0.056 a 5.806 5.806 0 0 1 1.266 0.13 q 0.836 0.186 1.445 0.643 a 3.315, 3.315 0 0 1 0.576 0.552 a 4.601 4.601 0 0 1 0.902 1.845 q 0.163 0.66 0.183, 1.432 a 8.441 8.441 0 0 1 0.003 0.223 l 0 8.475 l -2.25 0 l 0 -8.225 q 0, -1.148 -0.445 -1.926 a 2.741 2.741 0 0 0 -0.217 -0.324 a 2.145 2.145 0 0 0, -1.57 -0.838 a 3.015 3.015 0 0 0 -0.268 -0.012 a 3.28 3.28 0 0 0 -1.712 0.491, a 4.338 4.338 0 0 0 -0.463 0.322 q -1.025 0.812 -1.75 1.912 l 0 8.6 Z",height:4,width:15,heightElements:[],widthElements:[]},MARKER_SUBPROCESS:{d:"m {mx},{my} l0.95,-1.875a4.639,4.639,0,0,0,0.786,0.531q0.389,0.212,0.852, 0.382a6.018,6.018,0,0,0,1.902,0.359a6.866,6.866,0,0,0,0.21,0.003a6.778,6.778, 0,0,0,0.771,-0.041q0.796,-0.091,1.288,-0.388a1.934,1.934,0,0,0,0.054, -0.033a1.862,1.862,0,0,0,0.383,-0.324a1.263,1.263,0,0,0,0.329,-0.864a1.781, 1.781,0,0,0,-0.079,-0.537a1.553,1.553,0,0,0,-0.183,-0.388q-0.263,-0.4,-0.963, -0.787a7.116,7.116,0,0,0,-0.499,-0.249q-0.529,-0.24,-1.276,-0.503a25.896, 25.896,0,0,0,-0.25,-0.086a11.654,11.654,0,0,1,-1.099,-0.436q-1.025,-0.472, -1.638,-1.051a2.831,2.831,0,0,1,-0.824,-1.5a4.198,4.198,0,0,1,-0.089,-0.888a3.03, 3.03,0,0,1,0.987,-2.254a4.366,4.366,0,0,1,0.326,-0.283a4.441,4.441,0,0,1,1.509, -0.762q0.929,-0.276,2.128,-0.276q1.25,0,2.225,0.263a9.692,9.692,0,0,1,1.034, 0.338a7.778,7.778,0,0,1,0.716,0.324l-0.625,1.85a6.132,6.132,0,0,0,-0.917, -0.441a7.548,7.548,0,0,0,-0.62,-0.209q-0.863,-0.25,-1.913,-0.25a5.158,5.158,0, 0,0,-0.734,0.049q-0.772,0.111,-1.241,0.476a2.33,2.33,0,0,0,-0.339,0.318q-0.176, 0.205,-0.26,0.423a1.132,1.132,0,0,0,-0.076,0.409a1.23,1.23,0,0,0,0.374,0.888a1.771, 1.771,0,0,0,0.151,0.137q0.516,0.418,2,0.908a21.155,21.155,0,0,0,0.05,0.017a16.938, 16.938,0,0,1,1.266,0.475q1.203,0.511,1.892,1.082a3.737,3.737,0,0,1,0.292,0.268q0.975, 1,0.975,2.5a3.468,3.468,0,0,1,-0.266,1.379q-0.346,0.81,-1.146,1.384q-1.185,0.849, -3.048,0.986a10.106,10.106,0,0,1,-0.74,0.026a9.997,9.997,0,0,1,-1.465,-0.103a7.737, 7.737,0,0,1,-1.197,-0.272a7.721,7.721,0,0,1,-0.961,-0.371q-0.566,-0.266,-1.002,-0.604z",height:4,width:15,heightElements:[],widthElements:[]},MARKER_MULTI_INSTANCE:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var r=this.pathMap[t],o,i;n.abspos?(o=n.abspos.x,i=n.abspos.y):(o=n.containerWidth*n.position.mx,i=n.containerHeight*n.position.my);var a={};if(n.position){for(var s=n.containerHeight/r.height*n.yScaleFactor,u=n.containerWidth/r.width*n.xScaleFactor,f=0;f<r.heightElements.length;f++)a["y"+f]=r.heightElements[f]*s;for(var l=0;l<r.widthElements.length;l++)a["x"+l]=r.widthElements[l]*u}var p=GE(r.d,{mx:o,my:i,e:a});return p}}var zE=/\{([^{}]+)\}/g,VE=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function XE(e,t,n){var r=n;return t.replace(VE,function(o,i,a,s,u){i=i||s,r&&(i in r&&(r=r[i]),typeof r=="function"&&u&&(r=r()))}),r=(r==null||r==n?e:r)+"",r}function GE(e,t){return String(e).replace(zE,function(n,r){return XE(n,r,t)})}const YE={__init__:["odRenderer"],odRenderer:["type",Yi],textRenderer:["type",Xv],pathMap:["type",WE]};function KE(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,r){return t[r]||"{"+r+"}"})}const Eu={translate:["value",KE]};var Xs={width:90,height:20},Bd=15;function el(e){return!1}function eh(e){return Mn(e.label)}function ZE(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)],o=QE(e),i=Math.atan((r.y-n.y)/(r.x-n.x)),a=o.x,s=o.y;return Math.abs(i)<Math.PI/2?s-=Bd:a+=Bd,{x:a,y:s}}function QE(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}}function th(e){return e.waypoints?ZE(e.waypoints):{x:e.x+e.width/2,y:e.y+e.height+Xs.height/2}}function JE(e,t){var n,r,o,i=e.di,a=i.label;return a&&a.bounds?(o=a.bounds,r={width:Math.max(Xs.width,o.width),height:o.height},n={x:o.x+o.width/2,y:o.y+o.height/2}):(n=th(t),r=Xs),ue({x:n.x-r.width/2,y:n.y-r.height/2},r)}function Mn(e){return e&&!!e.labelTarget}function Os(e,t){return ue({id:e.id,type:e.$type,businessObject:e},t)}function Gv(e,t,n,r){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:ln(n),referenced:ln(t),property:r}))}function Fr(e,t,n,r,o,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=r,this._translate=o,this._textRenderer=i}Fr.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"];Fr.prototype.add=function(e,t){var n=e.di,r,o=this._translate,i,a;if(We(n,"dcrDi:DcrPlane"))r=this._elementFactory.createRoot(Os(e)),this._canvas.setRootElement(r);else if(We(n,"dcrDi:DcrShape")){var s=tb(e);i=t&&(t.hidden||t.collapsed);var u=e.di.bounds;r=this._elementFactory.createShape(Os(e,{hidden:i,x:Math.round(u.x),y:Math.round(u.y),width:Math.round(u.width),height:Math.round(u.height),isFrame:s})),this._canvas.addShape(r,t,a)}else if(We(n,"dcrDi:Relation")){var f=this._getSource(e),l=this._getTarget(e);i=t&&(t.hidden||t.collapsed),r=this._elementFactory.createConnection(Os(e,{hidden:i,source:f,target:l,waypoints:eb(e,f,l)})),this._canvas.addConnection(r,t,0)}else throw new Error(o("unknown di {di} for element {semantic}",{di:ln(n),semantic:ln(e)}));return this._eventBus.fire("boardElement.added",{element:r}),r};function eb(e,t,n){var r=e.di.waypoint;return!r||r.length<2?[nt(t),nt(n)]:r.map(function(o){return{x:o.x,y:o.y}})}Fr.prototype._attachBoundary=function(e,t){var n=this._translate,r=e.attachedToRef;if(!r)throw new Error(n("missing {semantic}#attachedToRef",{semantic:ln(e)}));var o=this._elementRegistry.get(r.id),i=o&&o.attachers;if(!o)throw Gv(n,e,r,"attachedToRef");t.host=o,i||(o.attachers=i=[]),i.indexOf(t)===-1&&i.push(t)};Fr.prototype.addLabel=function(e,t){var n,r,o;return n=JE(e,t),r=vi(t),r&&(n=this._textRenderer.getExternalLabelBounds(n,r)),o=this._elementFactory.createLabel(Os(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!vi(t),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(o,t.parent)};Fr.prototype._getEnd=function(e,t){var n,r,o=this._translate;if(r=e[t+"Ref"],n=r&&this._getElement(r),n)return n;throw r?Gv(o,e,r,t+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:ln(e),side:t}))};Fr.prototype._getSource=function(e){return this._getEnd(e,"source")};Fr.prototype._getTarget=function(e){return this._getEnd(e,"target")};Fr.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function tb(e){return We(e,"dcr:Group")}const nb={__depends__:[Eu],DCRImporter:["type",Fr]},rb={__depends__:[YE,nb]};function Fd(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Co(e){return e.originalEvent||e.srcEvent}function xf(e){Fd(e),Fd(Co(e))}function mi(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function ib(){return/mac/i.test(navigator.platform)}function Yv(e,t){return(Co(e)||e).button===t}function wi(e){return Yv(e,0)}function ob(e){return Yv(e,1)}function la(e){var t=Co(e)||e;return wi(e)?ib()?t.metaKey:t.ctrlKey:!1}function Kv(e){var t=Co(e)||e;return wi(e)&&t.shiftKey}function ab(e){return!0}function ps(e){return wi(e)||ob(e)}var jd=500;function Zv(e,t,n){var r=this;function o(L,w,U){if(!s(L,w)){var G,Y,q;U?Y=t.getGraphics(U):(G=w.delegateTarget||w.target,G&&(Y=G,U=t.get(Y))),!(!Y||!U)&&(q=e.fire(L,{element:U,gfx:Y,originalEvent:w}),q===!1&&(w.stopPropagation(),w.preventDefault()))}}var i={};function a(L){return i[L]}function s(L,w){var U=f[L]||wi;return!U(w)}var u={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},f={"element.contextmenu":ab,"element.mousedown":ps,"element.mouseup":ps,"element.click":ps,"element.dblclick":ps};function l(L,w,U){var G=u[L];if(!G)throw new Error("unmapped DOM event name <"+L+">");return o(G,w,U)}var p="svg, .djs-element";function y(L,w,U,G){var Y=i[U]=function(q){o(U,q)};G&&(f[U]=G),Y.$delegate=Cr.bind(L,p,w,Y)}function g(L,w,U){var G=a(U);G&&Cr.unbind(L,w,G.$delegate)}function v(L){ne(u,function(w,U){y(L,U,w)})}function S(L){ne(u,function(w,U){g(L,U,w)})}e.on("canvas.destroy",function(L){S(L.svg)}),e.on("canvas.init",function(L){v(L.svg)}),e.on(["shape.added","connection.added"],function(L){var w=L.element,U=L.gfx;e.fire("interactionEvents.createHit",{element:w,gfx:U})}),e.on(["shape.changed","connection.changed"],jd,function(L){var w=L.element,U=L.gfx;e.fire("interactionEvents.updateHit",{element:w,gfx:U})}),e.on("interactionEvents.createHit",jd,function(L){var w=L.element,U=L.gfx;r.createDefaultHit(w,U)}),e.on("interactionEvents.updateHit",function(L){var w=L.element,U=L.gfx;r.updateDefaultHit(w,U)});var M=b("djs-hit djs-hit-stroke"),P=b("djs-hit djs-hit-click-stroke"),T=b("djs-hit djs-hit-all"),m=b("djs-hit djs-hit-no-move"),x={all:T,"click-stroke":P,stroke:M,"no-move":m};function b(L,w){return w=ue({stroke:"white",strokeWidth:15},w||{}),n.cls(L,["no-fill","no-border"],w)}function I(L,w){var U=x[w];if(!U)throw new Error("invalid hit type <"+w+">");return xe(L,U),L}function d(L,w){ke(L,w)}this.removeHits=function(L){var w=Hf(".djs-hit",L);ne(w,Tt)},this.createDefaultHit=function(L,w){var U=L.waypoints,G=L.isFrame,Y;return U?this.createWaypointsHit(w,U):(Y=G?"stroke":"all",this.createBoxHit(w,Y,{width:L.width,height:L.height}))},this.createWaypointsHit=function(L,w){var U=fu(w);return I(U,"stroke"),d(L,U),U},this.createBoxHit=function(L,w,U){U=ue({x:0,y:0},U);var G=Pe("rect");return I(G,w),xe(G,U),d(L,G),G},this.updateDefaultHit=function(L,w){var U=Ot(".djs-hit",w);if(U)return L.waypoints?Gy(U,L.waypoints):xe(U,{width:L.width,height:L.height}),U},this.fire=o,this.triggerMouseEvent=l,this.mouseHandler=a,this.registerEvent=y,this.unregisterEvent=g}Zv.$inject=["eventBus","elementRegistry","styles"];const Ma={__init__:["interactionEvents"],interactionEvents:["type",Zv]};var sb=500;function bu(e,t){this.offset=6;var n=t.cls("djs-outline",["no-fill"]),r=this;function o(i,a){var s=Pe("rect");return xe(s,ue({x:10,y:10,rx:4,width:100,height:100},n)),ke(i,s),s}e.on(["shape.added","shape.changed"],sb,function(i){var a=i.element,s=i.gfx,u=Ot(".djs-outline",s);u||(u=o(s)),r.updateShapeOutline(u,a)}),e.on(["connection.added","connection.changed"],function(i){var a=i.element,s=i.gfx,u=Ot(".djs-outline",s);u||(u=o(s)),r.updateConnectionOutline(u,a)})}bu.prototype.updateShapeOutline=function(e,t){xe(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};bu.prototype.updateConnectionOutline=function(e,t){var n=Ht(t);xe(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};bu.$inject=["eventBus","styles","elementRegistry"];const Qv={__init__:["outline"],outline:["type",bu]};function Mo(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(r){var o=r.element;n.deselect(o)}),e.on(["diagram.clear","root.set"],function(r){n.select(null)})}Mo.$inject=["eventBus","canvas"];Mo.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var r=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t})}};Mo.prototype.get=function(){return this._selectedElements};Mo.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Mo.prototype.select=function(e,t){var n=this._selectedElements,r=n.slice();ze(e)||(e=e?[e]:[]);var o=this._canvas,i=o.getRootElement();e=e.filter(function(a){var s=o.findRoot(a);return i===s}),t?ne(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})};var $d="hover",Hd="selected",ds=6;function nh(e,t,n){this._canvas=e;var r=this;this._multiSelectionBox=null;function o(a,s){e.addMarker(a,s)}function i(a,s){e.removeMarker(a,s)}t.on("element.hover",function(a){o(a.element,$d)}),t.on("element.out",function(a){i(a.element,$d)}),t.on("selection.changed",function(a){function s(p){i(p,Hd)}function u(p){o(p,Hd)}var f=a.oldSelection,l=a.newSelection;ne(f,function(p){l.indexOf(p)===-1&&s(p)}),ne(l,function(p){f.indexOf(p)===-1&&u(p)}),r._updateSelectionOutline(l)}),t.on("element.changed",function(a){n.isSelected(a.element)&&r._updateSelectionOutline(n.get())})}nh.$inject=["canvas","eventBus","selection"];nh.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");uu(t);var n=e.length>1,r=this._canvas.getContainer();if(Ke(r)[n?"add":"remove"]("djs-multi-select"),!!n){var o=ub(Ht(e)),i=Pe("rect");xe(i,ue({rx:3},o)),Ke(i).add("djs-selection-outline"),ke(t,i)}};function ub(e){return{x:e.x-ds,y:e.y-ds,width:e.width+ds*2,height:e.height+ds*2}}function Jv(e,t,n,r){e.on("create.end",500,function(o){var i=o.context,a=i.canExecute,s=i.elements,u=i.hints||{},f=u.autoSelect;if(a){if(f===!1)return;ze(f)?t.select(f):t.select(s.filter(cb))}}),e.on("connect.end",500,function(o){var i=o.context,a=i.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(o){var i=o.previousSelection||[],a=r.get(o.context.shape.id),s=_t(i,function(u){return a.id===u.id});s||t.select(a)}),e.on("element.click",function(o){if(wi(o)){var i=o.element;i===n.getRootElement()&&(i=null);var a=t.isSelected(i),s=t.get().length>1,u=la(o)||Kv(o);if(a&&s)return u?t.deselect(i):t.select(i);a?t.deselect(i):t.select(i,u)}})}Jv.$inject=["eventBus","selection","canvas","elementRegistry"];function cb(e){return!e.hidden}const jr={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Ma,Qv],selection:["type",Mo],selectionVisuals:["type",nh],selectionBehavior:["type",Jv]};function rh(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}rh.prototype.next=function(){return this._prefix+ ++this._counter};var fb=new rh("ov"),lb=500;function jt(e,t,n,r){this._eventBus=t,this._canvas=n,this._elementRegistry=r,this._ids=fb,this._overlayDefaults=ue({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=hb(n.getContainer()),this._init()}jt.$inject=["config.overlays","eventBus","canvas","elementRegistry"];jt.prototype.get=function(e){if(Rn(e)&&(e={id:e}),Rn(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Dt(t.overlays,ci({type:e.type})):t.overlays.slice():[]}else return e.type?Dt(this._overlays,ci({type:e.type})):e.id?this._overlays[e.id]:null};jt.prototype.add=function(e,t,n){if(Vt(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var r=this._ids.next();return n=ue({},this._overlayDefaults,n,{id:r,type:t,element:e,html:n.html}),this._addOverlay(n),r};jt.prototype.remove=function(e){var t=this.get(e)||[];ze(t)||(t=[t]);var n=this;ne(t,function(r){var o=n._getOverlayContainer(r.element,!0);if(r&&(ur(r.html),ur(r.htmlContainer),delete r.htmlContainer,delete r.element,delete n._overlays[r.id]),o){var i=o.overlays.indexOf(r);i!==-1&&o.overlays.splice(i,1)}})};jt.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};jt.prototype.show=function(){Tu(this._overlayRoot)};jt.prototype.hide=function(){Tu(this._overlayRoot,!1)};jt.prototype.clear=function(){this._overlays={},this._overlayContainers=[],vl(this._overlayRoot)};jt.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,r=t.x,o=t.y;if(t.waypoints){var i=Ht(t);r=i.x,o=i.y}em(n,r,o),pn(e.html,"data-container-id",t.id)};jt.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,r=e.element,o=t.left,i=t.top;if(t.right!==void 0){var a;r.waypoints?a=Ht(r).width:a=r.width,o=t.right*-1+a}if(t.bottom!==void 0){var s;r.waypoints?s=Ht(r).height:s=r.height,i=t.bottom*-1+s}em(n,o||0,i||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};jt.prototype._createOverlayContainer=function(e){var t=Bt('<div class="djs-overlays" />');Nr(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};jt.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";tm(this._overlayRoot,n)};jt.prototype._getOverlayContainer=function(e,t){var n=_t(this._overlayContainers,function(r){return r.element===e});return!n&&!t?this._createOverlayContainer(e):n};jt.prototype._addOverlay=function(e){var t=e.id,n=e.element,r=e.html,o,i;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),Rn(r)&&(r=Bt(r)),i=this._getOverlayContainer(n),o=Bt('<div class="djs-overlay" data-overlay-id="'+t+'">'),Nr(o,{position:"absolute"}),o.appendChild(r),e.type&&yn(o).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(n),s=this._canvas.getRootElement();Tu(o,a===s),e.htmlContainer=o,i.overlays.push(e),i.html.appendChild(o),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};jt.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,r=this._canvas.findRoot(e.element),o=n&&n.minZoom,i=n&&n.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),u=!0;(r!==s||n&&($t(o)&&o>t.scale||$t(i)&&i<t.scale))&&(u=!1),Tu(a,u),this._updateOverlayScale(e,t)};jt.prototype._updateOverlayScale=function(e,t){var n=e.scale,r,o,i=e.htmlContainer,a,s="";n!==!0&&(n===!1?(r=1,o=1):(r=n.min,o=n.max),$t(r)&&t.scale<r&&(a=(1/t.scale||1)*r),$t(o)&&t.scale>o&&(a=(1/t.scale||1)*o)),$t(a)&&(s="scale("+a+","+a+")"),tm(i,s)};jt.prototype._updateOverlaysVisibilty=function(e){var t=this;ne(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};jt.prototype._init=function(){var e=this._eventBus,t=this;function n(r){t._updateRoot(r),t._updateOverlaysVisibilty(r),t.show()}e.on("canvas.viewbox.changing",function(r){t.hide()}),e.on("canvas.viewbox.changed",function(r){n(r.viewbox)}),e.on(["shape.remove","connection.remove"],function(r){var o=r.element,i=t.get({element:o});ne(i,function(u){t.remove(u.id)});var a=t._getOverlayContainer(o);if(a){ur(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",lb,function(r){var o=r.element,i=t._getOverlayContainer(o,!0);i&&(ne(i.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(i))}),e.on("element.marker.update",function(r){var o=t._getOverlayContainer(r.element,!0);o&&yn(o.html)[r.add?"add":"remove"](r.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function hb(e){var t=Bt('<div class="djs-overlay-container" />');return Nr(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function em(e,t,n){Nr(e,{left:t+"px",top:n+"px"})}function Tu(e,t){e.style.display=t===!1?"none":""}function tm(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const nm={__init__:["overlays"],overlays:["type",jt]};function Ei(e){pt.call(this,e)}ct(Ei,pt);Ei.prototype._modules=[rb,Eu,jr,nm];Ei.prototype._moddleExtensions={};var pb=["c","C"],db=["v","V"],gb=["y","Y"],rm=["z","Z"];function yb(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function gn(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Sn(e,t){return e=ze(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function ih(e){return e.shiftKey}function vb(e){return gn(e)&&Sn(pb,e)}function mb(e){return gn(e)&&Sn(db,e)}function _b(e){return gn(e)&&!ih(e)&&Sn(rm,e)}function xb(e){return gn(e)&&(Sn(gb,e)||Sn(rm,e)&&ih(e))}var Su="keyboard.keydown",wb="keyboard.keyup",Ud="input-handle-modified-keys",Eb=1e3;function Ut(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Ut.$inject=["config.keyboard","eventBus"];Ut.prototype._keydownHandler=function(e){this._keyHandler(e,Su)};Ut.prototype._keyupHandler=function(e){this._keyHandler(e,wb)};Ut.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var r={keyEvent:e};n=this._eventBus.fire(t||Su,r),n&&e.preventDefault()}};Ut.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:bb(e.target)&&this._isModifiedKeyIgnored(e)};Ut.prototype._isModifiedKeyIgnored=function(e){if(!gn(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};Ut.prototype._getAllowedModifiers=function(e){var t=Ir(e,"["+Ud+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(Ud).split(",")};Ut.prototype.bind=function(e){this.unbind(),this._node=e,De.bind(e,"keydown",this._keydownHandler),De.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Ut.prototype.getBinding=function(){return this._node};Ut.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),De.unbind(e,"keydown",this._keydownHandler),De.unbind(e,"keyup",this._keyupHandler)),this._node=null};Ut.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Ut.prototype.addListener=function(e,t,n){Wt(e)&&(n=t,t=e,e=Eb),this._eventBus.on(n||Su,e,t)};Ut.prototype.removeListener=function(e,t){this._eventBus.off(t||Su,e)};Ut.prototype.hasModifier=yb;Ut.prototype.isCmd=gn;Ut.prototype.isShift=ih;Ut.prototype.isKey=Sn;function bb(e){return e&&(ca(e,"input, textarea")||e.contentEditable==="true")}var Tb=500;function Ro(e,t){var n=this;e.on("editorActions.init",Tb,function(r){var o=r.editorActions;n.registerBindings(t,o)})}Ro.$inject=["eventBus","keyboard"];Ro.prototype.registerBindings=function(e,t){function n(r,o){t.isRegistered(r)&&e.addListener(o)}n("undo",function(r){var o=r.keyEvent;if(_b(o))return t.trigger("undo"),!0}),n("redo",function(r){var o=r.keyEvent;if(xb(o))return t.trigger("redo"),!0}),n("copy",function(r){var o=r.keyEvent;if(vb(o))return t.trigger("copy"),!0}),n("paste",function(r){var o=r.keyEvent;if(mb(o))return t.trigger("paste"),!0}),n("stepZoom",function(r){var o=r.keyEvent;if(Sn(["+","Add","="],o)&&gn(o))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(r){var o=r.keyEvent;if(Sn(["-","Subtract"],o)&&gn(o))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(r){var o=r.keyEvent;if(Sn("0",o)&&gn(o))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(r){var o=r.keyEvent;if(Sn(["Backspace","Delete","Del"],o))return t.trigger("removeSelection"),!0})};const oh={__init__:["keyboard","keyboardBindings"],keyboard:["type",Ut],keyboardBindings:["type",Ro]};var Sb={moveSpeed:50,moveSpeedAccelerated:200};function im(e,t,n){var r=this;this._config=ue({},Sb,e||{}),t.addListener(o);function o(i){var a=i.keyEvent,s=r._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var u=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,f;switch(a.key){case"ArrowLeft":case"Left":f="left";break;case"ArrowUp":case"Up":f="up";break;case"ArrowRight":case"Right":f="right";break;case"ArrowDown":case"Down":f="down";break}return r.moveCanvas({speed:u,direction:f}),!0}}this.moveCanvas=function(i){var a=0,s=0,u=i.speed,f=u/Math.min(Math.sqrt(n.viewbox().scale),1);switch(i.direction){case"left":a=f;break;case"up":s=f;break;case"right":a=-f;break;case"down":s=-f;break}n.scroll({dx:a,dy:s})}}im.$inject=["config.keyboardMove","keyboard","canvas"];const om={__depends__:[oh],__init__:["keyboardMove"],keyboardMove:["type",im]};var Cb=/^djs-cursor-.*$/;function Cu(e){var t=yn(document.body);t.removeMatching(Cb),e&&t.add("djs-cursor-"+e)}function am(){Cu(null)}var Mb=5e3;function sm(e,t){t=t||"element.click";function n(){return!1}return e.once(t,Mb,n),function(){e.off(t,n)}}function aa(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function or(e,t){return{x:e.x-t.x,y:e.y-t.y}}var Rb=15;function um(e,t){var n;e.on("element.mousedown",500,function(a){return i(a.originalEvent)});function r(a){var s=n.start,u=n.button,f=mi(a),l=or(f,s);if(!n.dragging&&Pb(l)>Rb&&(n.dragging=!0,u===0&&sm(e),Cu("grab")),n.dragging){var p=n.last||n.start;l=or(f,p),t.scroll({dx:l.x,dy:l.y}),n.last=f}a.preventDefault()}function o(a){De.unbind(document,"mousemove",r),De.unbind(document,"mouseup",o),n=null,am()}function i(a){if(!Ir(a.target,".djs-draggable")){var s=a.button;if(!(s>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:s,start:mi(a)},De.bind(document,"mousemove",r),De.bind(document,"mouseup",o),!0}}this.isActive=function(){return!!n}}um.$inject=["eventBus","canvas"];function Pb(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const cm={__init__:["moveCanvas"],moveCanvas:["type",um]};function tl(e){return Math.log(e)/Math.log(10)}function fm(e,t){var n=tl(e.min),r=tl(e.max),o=Math.abs(n)+Math.abs(r);return o/t}function Ab(e,t){return Math.max(e.min,Math.min(e.max,t))}var Ob=Math.sign||function(e){return e>=0?1:-1},ah={min:.2,max:4},lm=10,Db=.1,Nb=.75;function cr(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=en(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||Nb;var r=this;t.on("canvas.init",function(o){r._init(e.enabled!==!1)})}cr.$inject=["config.zoomScroll","eventBus","canvas"];cr.prototype.scroll=function(t){this._canvas.scroll(t)};cr.prototype.reset=function(){this._canvas.zoom("fit-viewport")};cr.prototype.zoom=function(t,n){var r=fm(ah,lm*2);this._totalDelta+=t,Math.abs(this._totalDelta)>Db&&(this._zoom(t,n,r),this._totalDelta=0)};cr.prototype._handleWheel=function(t){if(!Ir(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var r=t.ctrlKey,o=t.shiftKey,i=-1*this._scale,a;if(r?i*=t.deltaMode===0?.02:.32:i*=t.deltaMode===0?1:16,r){var s=n.getBoundingClientRect(),u={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*Ob(t.deltaY)*i,this.zoom(a,u)}else o?a={dx:i*t.deltaY,dy:0}:a={dx:i*t.deltaX,dy:i*t.deltaY},this.scroll(a)}};cr.prototype.stepZoom=function(t,n){var r=fm(ah,lm);this._zoom(t,n,r)};cr.prototype._zoom=function(e,t,n){var r=this._canvas,o=e>0?1:-1,i=tl(r.zoom()),a=Math.round(i/n)*n;a+=n*o;var s=Math.pow(10,a);r.zoom(Ab(ah,s),t)};cr.prototype.toggle=function(t){var n=this._container,r=this._handleWheel,o=this._enabled;return typeof t>"u"&&(t=!o),o!==t&&De[t?"bind":"unbind"](n,"wheel",r,!1),this._enabled=t,t};cr.prototype._init=function(e){this.toggle(e)};const hm={__init__:["zoomScroll"],zoomScroll:["type",cr]};function ha(e){Ei.call(this,e)}ct(ha,Ei);ha.prototype._navigationModules=[om,cm,hm];ha.prototype._modules=[].concat(Ei.prototype._modules,ha.prototype._navigationModules);var pm={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,n,r,o){var i=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),s="function",u=Math.round,f=Math.abs,l=Date.now;function p(B,j,Z){return setTimeout(m(B,Z),j)}function y(B,j,Z){return Array.isArray(B)?(g(B,Z[j],Z),!0):!1}function g(B,j,Z){var ie;if(B)if(B.forEach)B.forEach(j,Z);else if(B.length!==o)for(ie=0;ie<B.length;)j.call(Z,B[ie],ie,B),ie++;else for(ie in B)B.hasOwnProperty(ie)&&j.call(Z,B[ie],ie,B)}function v(B,j,Z){var ie="DEPRECATED METHOD: "+j+`
`+Z+` AT 
`;return function(){var _e=new Error("get-stack-trace"),Ce=_e&&_e.stack?_e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Je=t.console&&(t.console.warn||t.console.log);return Je&&Je.call(t.console,ie,Ce),B.apply(this,arguments)}}var S;typeof Object.assign!="function"?S=function(j){if(j===o||j===null)throw new TypeError("Cannot convert undefined or null to object");for(var Z=Object(j),ie=1;ie<arguments.length;ie++){var _e=arguments[ie];if(_e!==o&&_e!==null)for(var Ce in _e)_e.hasOwnProperty(Ce)&&(Z[Ce]=_e[Ce])}return Z}:S=Object.assign;var M=v(function(j,Z,ie){for(var _e=Object.keys(Z),Ce=0;Ce<_e.length;)(!ie||ie&&j[_e[Ce]]===o)&&(j[_e[Ce]]=Z[_e[Ce]]),Ce++;return j},"extend","Use `assign`."),P=v(function(j,Z){return M(j,Z,!0)},"merge","Use `assign`.");function T(B,j,Z){var ie=j.prototype,_e;_e=B.prototype=Object.create(ie),_e.constructor=B,_e._super=ie,Z&&S(_e,Z)}function m(B,j){return function(){return B.apply(j,arguments)}}function x(B,j){return typeof B==s?B.apply(j&&j[0]||o,j):B}function b(B,j){return B===o?j:B}function I(B,j,Z){g(U(j),function(ie){B.addEventListener(ie,Z,!1)})}function d(B,j,Z){g(U(j),function(ie){B.removeEventListener(ie,Z,!1)})}function L(B,j){for(;B;){if(B==j)return!0;B=B.parentNode}return!1}function w(B,j){return B.indexOf(j)>-1}function U(B){return B.trim().split(/\s+/g)}function G(B,j,Z){if(B.indexOf&&!Z)return B.indexOf(j);for(var ie=0;ie<B.length;){if(Z&&B[ie][Z]==j||!Z&&B[ie]===j)return ie;ie++}return-1}function Y(B){return Array.prototype.slice.call(B,0)}function q(B,j,Z){for(var ie=[],_e=[],Ce=0;Ce<B.length;){var Je=j?B[Ce][j]:B[Ce];G(_e,Je)<0&&ie.push(B[Ce]),_e[Ce]=Je,Ce++}return Z&&(j?ie=ie.sort(function(Rt,Lt){return Rt[j]>Lt[j]}):ie=ie.sort()),ie}function fe(B,j){for(var Z,ie,_e=j[0].toUpperCase()+j.slice(1),Ce=0;Ce<i.length;){if(Z=i[Ce],ie=Z?Z+_e:j,ie in B)return ie;Ce++}return o}var Te=1;function we(){return Te++}function ye(B){var j=B.ownerDocument||B;return j.defaultView||j.parentWindow||t}var Ue=/mobile|tablet|ip(ad|hone|od)|android/i,Xe="ontouchstart"in t,ot=fe(t,"PointerEvent")!==o,$e=Xe&&Ue.test(navigator.userAgent),Ze="touch",gt="pen",xt="mouse",lt="kinect",se=25,A=1,D=2,ee=4,V=8,$=1,H=2,re=4,ve=8,Le=16,F=H|re,C=ve|Le,R=F|C,z=["x","y"],Q=["clientX","clientY"];function he(B,j){var Z=this;this.manager=B,this.callback=j,this.element=B.element,this.target=B.options.inputTarget,this.domHandler=function(ie){x(B.options.enable,[B])&&Z.handler(ie)},this.init()}he.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(ye(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(ye(this.element),this.evWin,this.domHandler)}};function me(B){var j,Z=B.options.inputClass;return Z?j=Z:ot?j=oo:$e?j=Fn:Xe?j=ko:j=Di,new j(B,Oe)}function Oe(B,j,Z){var ie=Z.pointers.length,_e=Z.changedPointers.length,Ce=j&A&&ie-_e===0,Je=j&(ee|V)&&ie-_e===0;Z.isFirst=!!Ce,Z.isFinal=!!Je,Ce&&(B.session={}),Z.eventType=j,Ee(B,Z),B.emit("hammer.input",Z),B.recognize(Z),B.session.prevInput=Z}function Ee(B,j){var Z=B.session,ie=j.pointers,_e=ie.length;Z.firstInput||(Z.firstInput=at(j)),_e>1&&!Z.firstMultiple?Z.firstMultiple=at(j):_e===1&&(Z.firstMultiple=!1);var Ce=Z.firstInput,Je=Z.firstMultiple,mt=Je?Je.center:Ce.center,Rt=j.center=Xt(ie);j.timeStamp=l(),j.deltaTime=j.timeStamp-Ce.timeStamp,j.angle=hr(mt,Rt),j.distance=Oi(mt,Rt),de(Z,j),j.offsetDirection=Vr(j.deltaX,j.deltaY);var Lt=Ai(j.deltaTime,j.deltaX,j.deltaY);j.overallVelocityX=Lt.x,j.overallVelocityY=Lt.y,j.overallVelocity=f(Lt.x)>f(Lt.y)?Lt.x:Lt.y,j.scale=Je?pr(Je.pointers,ie):1,j.rotation=Je?Bn(Je.pointers,ie):0,j.maxPointers=Z.prevInput?j.pointers.length>Z.prevInput.maxPointers?j.pointers.length:Z.prevInput.maxPointers:j.pointers.length,Qe(Z,j);var fn=B.element;L(j.srcEvent.target,fn)&&(fn=j.srcEvent.target),j.target=fn}function de(B,j){var Z=j.center,ie=B.offsetDelta||{},_e=B.prevDelta||{},Ce=B.prevInput||{};(j.eventType===A||Ce.eventType===ee)&&(_e=B.prevDelta={x:Ce.deltaX||0,y:Ce.deltaY||0},ie=B.offsetDelta={x:Z.x,y:Z.y}),j.deltaX=_e.x+(Z.x-ie.x),j.deltaY=_e.y+(Z.y-ie.y)}function Qe(B,j){var Z=B.lastInterval||j,ie=j.timeStamp-Z.timeStamp,_e,Ce,Je,mt;if(j.eventType!=V&&(ie>se||Z.velocity===o)){var Rt=j.deltaX-Z.deltaX,Lt=j.deltaY-Z.deltaY,fn=Ai(ie,Rt,Lt);Ce=fn.x,Je=fn.y,_e=f(fn.x)>f(fn.y)?fn.x:fn.y,mt=Vr(Rt,Lt),B.lastInterval=j}else _e=Z.velocity,Ce=Z.velocityX,Je=Z.velocityY,mt=Z.direction;j.velocity=_e,j.velocityX=Ce,j.velocityY=Je,j.direction=mt}function at(B){for(var j=[],Z=0;Z<B.pointers.length;)j[Z]={clientX:u(B.pointers[Z].clientX),clientY:u(B.pointers[Z].clientY)},Z++;return{timeStamp:l(),pointers:j,center:Xt(j),deltaX:B.deltaX,deltaY:B.deltaY}}function Xt(B){var j=B.length;if(j===1)return{x:u(B[0].clientX),y:u(B[0].clientY)};for(var Z=0,ie=0,_e=0;_e<j;)Z+=B[_e].clientX,ie+=B[_e].clientY,_e++;return{x:u(Z/j),y:u(ie/j)}}function Ai(B,j,Z){return{x:j/B||0,y:Z/B||0}}function Vr(B,j){return B===j?$:f(B)>=f(j)?B<0?H:re:j<0?ve:Le}function Oi(B,j,Z){Z||(Z=z);var ie=j[Z[0]]-B[Z[0]],_e=j[Z[1]]-B[Z[1]];return Math.sqrt(ie*ie+_e*_e)}function hr(B,j,Z){Z||(Z=z);var ie=j[Z[0]]-B[Z[0]],_e=j[Z[1]]-B[Z[1]];return Math.atan2(_e,ie)*180/Math.PI}function Bn(B,j){return hr(j[1],j[0],Q)+hr(B[1],B[0],Q)}function pr(B,j){return Oi(j[0],j[1],Q)/Oi(B[0],B[1],Q)}var Xr={mousedown:A,mousemove:D,mouseup:ee},Ku="mousedown",io="mousemove mouseup";function Di(){this.evEl=Ku,this.evWin=io,this.pressed=!1,he.apply(this,arguments)}T(Di,he,{handler:function(j){var Z=Xr[j.type];Z&A&&j.button===0&&(this.pressed=!0),Z&D&&j.which!==1&&(Z=ee),this.pressed&&(Z&ee&&(this.pressed=!1),this.callback(this.manager,Z,{pointers:[j],changedPointers:[j],pointerType:xt,srcEvent:j}))}});var za={pointerdown:A,pointermove:D,pointerup:ee,pointercancel:V,pointerout:V},Zu={2:Ze,3:gt,4:xt,5:lt},dr="pointerdown",Gr="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(dr="MSPointerDown",Gr="MSPointerMove MSPointerUp MSPointerCancel");function oo(){this.evEl=dr,this.evWin=Gr,he.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}T(oo,he,{handler:function(j){var Z=this.store,ie=!1,_e=j.type.toLowerCase().replace("ms",""),Ce=za[_e],Je=Zu[j.pointerType]||j.pointerType,mt=Je==Ze,Rt=G(Z,j.pointerId,"pointerId");Ce&A&&(j.button===0||mt)?Rt<0&&(Z.push(j),Rt=Z.length-1):Ce&(ee|V)&&(ie=!0),!(Rt<0)&&(Z[Rt]=j,this.callback(this.manager,Ce,{pointers:Z,changedPointers:[j],pointerType:Je,srcEvent:j}),ie&&Z.splice(Rt,1))}});var Va={touchstart:A,touchmove:D,touchend:ee,touchcancel:V},rn="touchstart",Gt="touchstart touchmove touchend touchcancel";function ao(){this.evTarget=rn,this.evWin=Gt,this.started=!1,he.apply(this,arguments)}T(ao,he,{handler:function(j){var Z=Va[j.type];if(Z===A&&(this.started=!0),!!this.started){var ie=Qu.call(this,j,Z);Z&(ee|V)&&ie[0].length-ie[1].length===0&&(this.started=!1),this.callback(this.manager,Z,{pointers:ie[0],changedPointers:ie[1],pointerType:Ze,srcEvent:j})}}});function Qu(B,j){var Z=Y(B.touches),ie=Y(B.changedTouches);return j&(ee|V)&&(Z=q(Z.concat(ie),"identifier",!0)),[Z,ie]}var Xa={touchstart:A,touchmove:D,touchend:ee,touchcancel:V},Ga="touchstart touchmove touchend touchcancel";function Fn(){this.evTarget=Ga,this.targetIds={},he.apply(this,arguments)}T(Fn,he,{handler:function(j){var Z=Xa[j.type],ie=Yr.call(this,j,Z);ie&&this.callback(this.manager,Z,{pointers:ie[0],changedPointers:ie[1],pointerType:Ze,srcEvent:j})}});function Yr(B,j){var Z=Y(B.touches),ie=this.targetIds;if(j&(A|D)&&Z.length===1)return ie[Z[0].identifier]=!0,[Z,Z];var _e,Ce,Je=Y(B.changedTouches),mt=[],Rt=this.target;if(Ce=Z.filter(function(Lt){return L(Lt.target,Rt)}),j===A)for(_e=0;_e<Ce.length;)ie[Ce[_e].identifier]=!0,_e++;for(_e=0;_e<Je.length;)ie[Je[_e].identifier]&&mt.push(Je[_e]),j&(ee|V)&&delete ie[Je[_e].identifier],_e++;if(mt.length)return[q(Ce.concat(mt),"identifier",!0),mt]}var Lo=2500,Ni=25;function ko(){he.apply(this,arguments);var B=m(this.handler,this);this.touch=new Fn(this.manager,B),this.mouse=new Di(this.manager,B),this.primaryTouch=null,this.lastTouches=[]}T(ko,he,{handler:function(j,Z,ie){var _e=ie.pointerType==Ze,Ce=ie.pointerType==xt;if(!(Ce&&ie.sourceCapabilities&&ie.sourceCapabilities.firesTouchEvents)){if(_e)Ju.call(this,Z,ie);else if(Ce&&Ka.call(this,ie))return;this.callback(j,Z,ie)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ju(B,j){B&A?(this.primaryTouch=j.changedPointers[0].identifier,Ya.call(this,j)):B&(ee|V)&&Ya.call(this,j)}function Ya(B){var j=B.changedPointers[0];if(j.identifier===this.primaryTouch){var Z={x:j.clientX,y:j.clientY};this.lastTouches.push(Z);var ie=this.lastTouches,_e=function(){var Ce=ie.indexOf(Z);Ce>-1&&ie.splice(Ce,1)};setTimeout(_e,Lo)}}function Ka(B){for(var j=B.srcEvent.clientX,Z=B.srcEvent.clientY,ie=0;ie<this.lastTouches.length;ie++){var _e=this.lastTouches[ie],Ce=Math.abs(j-_e.x),Je=Math.abs(Z-_e.y);if(Ce<=Ni&&Je<=Ni)return!0}return!1}var Za=fe(a.style,"touchAction"),Qa=Za!==o,Bo="compute",Ja="auto",Xn="manipulation",Gn="none",gr="pan-x",yr="pan-y",vr=Ii();function so(B,j){this.manager=B,this.set(j)}so.prototype={set:function(B){B==Bo&&(B=this.compute()),Qa&&this.manager.element.style&&vr[B]&&(this.manager.element.style[Za]=B),this.actions=B.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var B=[];return g(this.manager.recognizers,function(j){x(j.options.enable,[j])&&(B=B.concat(j.getTouchAction()))}),ec(B.join(" "))},preventDefaults:function(B){var j=B.srcEvent,Z=B.offsetDirection;if(this.manager.session.prevented){j.preventDefault();return}var ie=this.actions,_e=w(ie,Gn)&&!vr[Gn],Ce=w(ie,yr)&&!vr[yr],Je=w(ie,gr)&&!vr[gr];if(_e){var mt=B.pointers.length===1,Rt=B.distance<2,Lt=B.deltaTime<250;if(mt&&Rt&&Lt)return}if(!(Je&&Ce)&&(_e||Ce&&Z&F||Je&&Z&C))return this.preventSrc(j)},preventSrc:function(B){this.manager.session.prevented=!0,B.preventDefault()}};function ec(B){if(w(B,Gn))return Gn;var j=w(B,gr),Z=w(B,yr);return j&&Z?Gn:j||Z?j?gr:yr:w(B,Xn)?Xn:Ja}function Ii(){if(!Qa)return!1;var B={},j=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Z){B[Z]=j?t.CSS.supports("touch-action",Z):!0}),B}var Li=1,Qt=2,mr=4,jn=8,$n=jn,_r=16,wn=32;function Hn(B){this.options=S({},this.defaults,B||{}),this.id=we(),this.manager=null,this.options.enable=b(this.options.enable,!0),this.state=Li,this.simultaneous={},this.requireFail=[]}Hn.prototype={defaults:{},set:function(B){return S(this.options,B),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(B){if(y(B,"recognizeWith",this))return this;var j=this.simultaneous;return B=Kr(B,this),j[B.id]||(j[B.id]=B,B.recognizeWith(this)),this},dropRecognizeWith:function(B){return y(B,"dropRecognizeWith",this)?this:(B=Kr(B,this),delete this.simultaneous[B.id],this)},requireFailure:function(B){if(y(B,"requireFailure",this))return this;var j=this.requireFail;return B=Kr(B,this),G(j,B)===-1&&(j.push(B),B.requireFailure(this)),this},dropRequireFailure:function(B){if(y(B,"dropRequireFailure",this))return this;B=Kr(B,this);var j=G(this.requireFail,B);return j>-1&&this.requireFail.splice(j,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(B){return!!this.simultaneous[B.id]},emit:function(B){var j=this,Z=this.state;function ie(_e){j.manager.emit(_e,B)}Z<jn&&ie(j.options.event+Fo(Z)),ie(j.options.event),B.additionalEvent&&ie(B.additionalEvent),Z>=jn&&ie(j.options.event+Fo(Z))},tryEmit:function(B){if(this.canEmit())return this.emit(B);this.state=wn},canEmit:function(){for(var B=0;B<this.requireFail.length;){if(!(this.requireFail[B].state&(wn|Li)))return!1;B++}return!0},recognize:function(B){var j=S({},B);if(!x(this.options.enable,[this,j])){this.reset(),this.state=wn;return}this.state&($n|_r|wn)&&(this.state=Li),this.state=this.process(j),this.state&(Qt|mr|jn|_r)&&this.tryEmit(j)},process:function(B){},getTouchAction:function(){},reset:function(){}};function Fo(B){return B&_r?"cancel":B&jn?"end":B&mr?"move":B&Qt?"start":""}function jo(B){return B==Le?"down":B==ve?"up":B==H?"left":B==re?"right":""}function Kr(B,j){var Z=j.manager;return Z?Z.get(B):B}function on(){Hn.apply(this,arguments)}T(on,Hn,{defaults:{pointers:1},attrTest:function(B){var j=this.options.pointers;return j===0||B.pointers.length===j},process:function(B){var j=this.state,Z=B.eventType,ie=j&(Qt|mr),_e=this.attrTest(B);return ie&&(Z&V||!_e)?j|_r:ie||_e?Z&ee?j|jn:j&Qt?j|mr:Qt:wn}});function It(){on.apply(this,arguments),this.pX=null,this.pY=null}T(It,on,{defaults:{event:"pan",threshold:10,pointers:1,direction:R},getTouchAction:function(){var B=this.options.direction,j=[];return B&F&&j.push(yr),B&C&&j.push(gr),j},directionTest:function(B){var j=this.options,Z=!0,ie=B.distance,_e=B.direction,Ce=B.deltaX,Je=B.deltaY;return _e&j.direction||(j.direction&F?(_e=Ce===0?$:Ce<0?H:re,Z=Ce!=this.pX,ie=Math.abs(B.deltaX)):(_e=Je===0?$:Je<0?ve:Le,Z=Je!=this.pY,ie=Math.abs(B.deltaY))),B.direction=_e,Z&&ie>j.threshold&&_e&j.direction},attrTest:function(B){return on.prototype.attrTest.call(this,B)&&(this.state&Qt||!(this.state&Qt)&&this.directionTest(B))},emit:function(B){this.pX=B.deltaX,this.pY=B.deltaY;var j=jo(B.direction);j&&(B.additionalEvent=this.options.event+j),this._super.emit.call(this,B)}});function Yn(){on.apply(this,arguments)}T(Yn,on,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Gn]},attrTest:function(B){return this._super.attrTest.call(this,B)&&(Math.abs(B.scale-1)>this.options.threshold||this.state&Qt)},emit:function(B){if(B.scale!==1){var j=B.scale<1?"in":"out";B.additionalEvent=this.options.event+j}this._super.emit.call(this,B)}});function Zr(){Hn.apply(this,arguments),this._timer=null,this._input=null}T(Zr,Hn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ja]},process:function(B){var j=this.options,Z=B.pointers.length===j.pointers,ie=B.distance<j.threshold,_e=B.deltaTime>j.time;if(this._input=B,!ie||!Z||B.eventType&(ee|V)&&!_e)this.reset();else if(B.eventType&A)this.reset(),this._timer=p(function(){this.state=$n,this.tryEmit()},j.time,this);else if(B.eventType&ee)return $n;return wn},reset:function(){clearTimeout(this._timer)},emit:function(B){this.state===$n&&(B&&B.eventType&ee?this.manager.emit(this.options.event+"up",B):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}});function $o(){on.apply(this,arguments)}T($o,on,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Gn]},attrTest:function(B){return this._super.attrTest.call(this,B)&&(Math.abs(B.rotation)>this.options.threshold||this.state&Qt)}});function Ho(){on.apply(this,arguments)}T(Ho,on,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:F|C,pointers:1},getTouchAction:function(){return It.prototype.getTouchAction.call(this)},attrTest:function(B){var j=this.options.direction,Z;return j&(F|C)?Z=B.overallVelocity:j&F?Z=B.overallVelocityX:j&C&&(Z=B.overallVelocityY),this._super.attrTest.call(this,B)&&j&B.offsetDirection&&B.distance>this.options.threshold&&B.maxPointers==this.options.pointers&&f(Z)>this.options.velocity&&B.eventType&ee},emit:function(B){var j=jo(B.offsetDirection);j&&this.manager.emit(this.options.event+j,B),this.manager.emit(this.options.event,B)}});function Qr(){Hn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}T(Qr,Hn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Xn]},process:function(B){var j=this.options,Z=B.pointers.length===j.pointers,ie=B.distance<j.threshold,_e=B.deltaTime<j.time;if(this.reset(),B.eventType&A&&this.count===0)return this.failTimeout();if(ie&&_e&&Z){if(B.eventType!=ee)return this.failTimeout();var Ce=this.pTime?B.timeStamp-this.pTime<j.interval:!0,Je=!this.pCenter||Oi(this.pCenter,B.center)<j.posThreshold;this.pTime=B.timeStamp,this.pCenter=B.center,!Je||!Ce?this.count=1:this.count+=1,this._input=B;var mt=this.count%j.taps;if(mt===0)return this.hasRequireFailures()?(this._timer=p(function(){this.state=$n,this.tryEmit()},j.interval,this),Qt):$n}return wn},failTimeout:function(){return this._timer=p(function(){this.state=wn},this.options.interval,this),wn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==$n&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function En(B,j){return j=j||{},j.recognizers=b(j.recognizers,En.defaults.preset),new qo(B,j)}En.VERSION="2.0.7",En.defaults={domEvents:!1,touchAction:Bo,enable:!0,inputTarget:null,inputClass:null,preset:[[$o,{enable:!1}],[Yn,{enable:!1},["rotate"]],[Ho,{direction:F}],[It,{direction:F},["swipe"]],[Qr],[Qr,{event:"doubletap",taps:2},["tap"]],[Zr]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var uo=1,Uo=2;function qo(B,j){this.options=S({},En.defaults,j||{}),this.options.inputTarget=this.options.inputTarget||B,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=B,this.input=me(this),this.touchAction=new so(this,this.options.touchAction),es(this,!0),g(this.options.recognizers,function(Z){var ie=this.add(new Z[0](Z[1]));Z[2]&&ie.recognizeWith(Z[2]),Z[3]&&ie.requireFailure(Z[3])},this)}qo.prototype={set:function(B){return S(this.options,B),B.touchAction&&this.touchAction.update(),B.inputTarget&&(this.input.destroy(),this.input.target=B.inputTarget,this.input.init()),this},stop:function(B){this.session.stopped=B?Uo:uo},recognize:function(B){var j=this.session;if(!j.stopped){this.touchAction.preventDefaults(B);var Z,ie=this.recognizers,_e=j.curRecognizer;(!_e||_e&&_e.state&$n)&&(_e=j.curRecognizer=null);for(var Ce=0;Ce<ie.length;)Z=ie[Ce],j.stopped!==Uo&&(!_e||Z==_e||Z.canRecognizeWith(_e))?Z.recognize(B):Z.reset(),!_e&&Z.state&(Qt|mr|jn)&&(_e=j.curRecognizer=Z),Ce++}},get:function(B){if(B instanceof Hn)return B;for(var j=this.recognizers,Z=0;Z<j.length;Z++)if(j[Z].options.event==B)return j[Z];return null},add:function(B){if(y(B,"add",this))return this;var j=this.get(B.options.event);return j&&this.remove(j),this.recognizers.push(B),B.manager=this,this.touchAction.update(),B},remove:function(B){if(y(B,"remove",this))return this;if(B=this.get(B),B){var j=this.recognizers,Z=G(j,B);Z!==-1&&(j.splice(Z,1),this.touchAction.update())}return this},on:function(B,j){if(B!==o&&j!==o){var Z=this.handlers;return g(U(B),function(ie){Z[ie]=Z[ie]||[],Z[ie].push(j)}),this}},off:function(B,j){if(B!==o){var Z=this.handlers;return g(U(B),function(ie){j?Z[ie]&&Z[ie].splice(G(Z[ie],j),1):delete Z[ie]}),this}},emit:function(B,j){this.options.domEvents&&cn(B,j);var Z=this.handlers[B]&&this.handlers[B].slice();if(!(!Z||!Z.length)){j.type=B,j.preventDefault=function(){j.srcEvent.preventDefault()};for(var ie=0;ie<Z.length;)Z[ie](j),ie++}},destroy:function(){this.element&&es(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function es(B,j){var Z=B.element;if(Z.style){var ie;g(B.options.cssProps,function(_e,Ce){ie=fe(Z.style,Ce),j?(B.oldCssProps[ie]=Z.style[ie],Z.style[ie]=_e):Z.style[ie]=B.oldCssProps[ie]||""}),j||(B.oldCssProps={})}}function cn(B,j){var Z=n.createEvent("Event");Z.initEvent(B,!0,!0),Z.gesture=j,j.target.dispatchEvent(Z)}S(En,{INPUT_START:A,INPUT_MOVE:D,INPUT_END:ee,INPUT_CANCEL:V,STATE_POSSIBLE:Li,STATE_BEGAN:Qt,STATE_CHANGED:mr,STATE_ENDED:jn,STATE_RECOGNIZED:$n,STATE_CANCELLED:_r,STATE_FAILED:wn,DIRECTION_NONE:$,DIRECTION_LEFT:H,DIRECTION_RIGHT:re,DIRECTION_UP:ve,DIRECTION_DOWN:Le,DIRECTION_HORIZONTAL:F,DIRECTION_VERTICAL:C,DIRECTION_ALL:R,Manager:qo,Input:he,TouchAction:so,TouchInput:Fn,MouseInput:Di,PointerEventInput:oo,TouchMouseInput:ko,SingleTouchInput:ao,Recognizer:Hn,AttrRecognizer:on,Tap:Qr,Pan:It,Swipe:Ho,Pinch:Yn,Rotate:$o,Press:Zr,on:I,off:d,each:g,merge:P,extend:M,assign:S,inherit:T,bindFn:m,prefixed:fe});var ts=typeof t<"u"?t:typeof self<"u"?self:{};ts.Hammer=En,typeof o=="function"&&o.amd?o(function(){return En}):e.exports?e.exports=En:t[r]=En})(window,document,"Hammer")})(pm);var Ib=pm.exports;const $i=xo(Ib);var Lb=.2,kb=4,qd=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function gs(e,t){return t.get(e,!1)}function nl(e){e.preventDefault(),typeof e.stopPropagation=="function"?e.stopPropagation():e.srcEvent&&typeof e.srcEvent.stopPropagation=="function"&&e.srcEvent.stopPropagation(),typeof e.stopImmediatePropagation=="function"&&e.stopImmediatePropagation()}function wf(e){function t(f){ne(qd,function(l){De.bind(e,l,nl,!0)})}function n(f){setTimeout(function(){ne(qd,function(l){De.unbind(e,l,nl,!0)})},500)}De.bind(e,"touchstart",t,!0),De.bind(e,"touchend",n,!0),De.bind(e,"touchcancel",n,!0);var r=new $i.Manager(e,{inputClass:$i.TouchInput,recognizers:[],domEvents:!0}),o=new $i.Tap,i=new $i.Pan({threshold:10}),a=new $i.Press,s=new $i.Pinch,u=new $i.Tap({event:"doubletap",taps:2});return s.requireFailure(i),s.requireFailure(a),r.add([i,a,s,u,o]),r.reset=function(f){var l=this.recognizers,p=this.session;p.stopped||(r.stop(f),setTimeout(function(){var y,g;for(y=0;g=l[y];y++)g.reset(),g.state=8;p.curRecognizer=null},0))},r.on("hammer.input",function(f){f.srcEvent.defaultPrevented&&r.reset(!0)}),r}function dm(e,t,n,r,o){var i=gs("dragging",e),a=gs("move",e),s=gs("contextPad",e),u=gs("palette",e),f;function l(g,v){return function(S){var M=p(S.target),P=M&&r.get(M);return v&&(S.srcEvent.button=v),o.fire(g,S,P)}}function p(g){var v=Ir(g,"svg, .djs-element",!0);return v}function y(g){f=wf(g);function v(P){var T=0,m=0;function x(I){var d=I.deltaX-T,L=I.deltaY-m;t.scroll({dx:d,dy:L}),T=I.deltaX,m=I.deltaY}function b(I){f.off("panmove",x),f.off("panend",b),f.off("pancancel",b)}f.on("panmove",x),f.on("panend",b),f.on("pancancel",b)}function S(P){var T=p(P.target),m=T&&r.get(T);if(a&&t.getRootElement()!==m)return a.start(P,m,!0);v()}function M(P){var T=t.zoom(),m=P.center;function x(I){var d=1-(1-I.scale)/1.5,L=Math.max(Lb,Math.min(kb,d*T));t.zoom(L,m),nl(I)}function b(I){f.off("pinchmove",x),f.off("pinchend",b),f.off("pinchcancel",b),f.reset(!0)}f.on("pinchmove",x),f.on("pinchend",b),f.on("pinchcancel",b)}f.on("tap",l("element.click")),f.on("doubletap",l("element.dblclick",1)),f.on("panstart",S),f.on("press",S),f.on("pinchstart",M)}i&&n.on("drag.move",function(g){var v=g.originalEvent;if(!(!v||v instanceof MouseEvent)){var S=mi(v),M=document.elementFromPoint(S.x,S.y),P=p(M),T=P&&r.get(P);T!==g.hover&&(g.hover&&i.out(g),T&&(i.hover({element:T,gfx:P}),g.hover=T,g.hoverGfx=P))}}),s&&n.on("contextPad.create",function(g){var v=g.pad.html,S=wf(v);S.on("panstart",function(M){s.trigger("dragstart",M,!0)}),S.on("press",function(M){s.trigger("dragstart",M,!0)}),S.on("tap",function(M){s.trigger("click",M)})}),u&&n.on("palette.create",function(g){var v=g.container,S=wf(v);S.on("panstart",function(M){u.trigger("dragstart",M,!0)}),S.on("press",function(M){u.trigger("dragstart",M,!0)}),S.on("tap",function(M){u.trigger("click",M)})}),n.on("canvas.init",function(g){y(g.svg)})}dm.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];function sh(e){var t=this;e.on("canvas.init",function(n){t.addBBoxMarker(n.svg)})}sh.$inject=["eventBus"];sh.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=Pe("rect");xe(n,{x:-1e4,y:1e4,width:10,height:10}),xe(n,t),ke(e,n);var r=Pe("rect");xe(r,{x:1e4,y:1e4,width:10,height:10}),xe(r,t),ke(e,r)};const Bb={__depends__:[Ma],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",dm],touchFix:["type",sh]},Fb={__depends__:[Bb]};function Ef(e){return e&&e[e.length-1]}function Wd(e){return e.y}function zd(e){return e.x}var jb={left:zd,center:zd,right:function(e){return e.x+e.width},top:Wd,middle:Wd,bottom:function(e){return e.y+e.height}};function Po(e,t){this._modeling=e,this._rules=t}Po.$inject=["modeling","rules"];Po.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",r="width";return t.indexOf(e)!==-1&&(n="y",r="height"),{axis:n,dimension:r}};Po.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Po.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),r=n.axis,o=n.dimension,i={},a={},s=!1,u,f,l;function p(y,g){return Math.round((y[r]+g[r]+g[o])/2)}if(this._isType(e,["left","top"]))i[e]=t[0][r];else if(this._isType(e,["right","bottom"]))l=Ef(t),i[e]=l[r]+l[o];else if(this._isType(e,["center","middle"])){if(ne(t,function(y){var g=y[r]+Math.round(y[o]/2);a[g]?a[g].elements.push(y):a[g]={elements:[y],center:g}}),u=Ar(a,function(y){return y.elements.length>1&&(s=!0),y.elements.length}),s)return i[e]=Ef(u).center,i;f=t[0],t=Ar(t,function(y){return y[r]+y[o]}),l=Ef(t),i[e]=p(f,l)}return i};Po.prototype.trigger=function(e,t){var n=this._modeling,r,o=Dt(e,function(u){return!(u.waypoints||u.host||u.labelTarget)});if(r=this._rules.allowed("elements.align",{elements:o}),ze(r)&&(o=r),!(o.length<2||!r)){var i=jb[t],a=Ar(o,i),s=this._alignmentPosition(t,a);n.alignElements(a,s)}};const $b={__init__:["alignElements"],alignElements:["type",Po]};var Vd=1500;function gm(e,t,n){var r=this,o=n.get("dragging",!1);function i(a){if(!a.hover){var s=a.originalEvent,u=r._findTargetGfx(s),f=u&&e.get(u);u&&f&&(a.stopPropagation(),o.hover({element:f,gfx:u}),o.move(s))}}o&&t.on("drag.start",function(a){t.once("drag.move",Vd,function(s){i(s)})}),function(){var a,s;t.on("element.hover",function(u){a=u.gfx,s=u.element}),t.on("element.hover",Vd,function(u){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,u;if(a instanceof MouseEvent)return s=mi(a),u=document.elementFromPoint(s.x,s.y),Hb(u)}}gm.$inject=["elementRegistry","eventBus","injector"];function Hb(e){return Ir(e,"svg, .djs-element",!0)}const Ub={__init__:["hoverFix"],hoverFix:["type",gm]};var po=Math.round,Xd="djs-drag-active";function Hi(e){e.preventDefault()}function qb(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function Wb(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function ym(e,t,n,r){var o={threshold:5,trapClick:!0},i;function a(m){var x=t.viewbox(),b=t._container.getBoundingClientRect();return{x:x.x+(m.x-b.left)/x.scale,y:x.y+(m.y-b.top)/x.scale}}function s(m,x){x=x||i;var b=e.createEvent(ue({},x.payload,x.data,{isTouch:x.isTouch}));return e.fire("drag."+m,b)===!1?!1:e.fire(x.prefix+"."+m,b)}function u(m){var x=m.filter(function(b){return r.get(b.id)});x.length&&n.select(x)}function f(m,x){var b=i.payload,I=i.displacement,d=i.globalStart,L=mi(m),w=or(L,d),U=i.localStart,G=a(L),Y=or(G,U);if(!i.active&&(x||Wb(w)>i.threshold)){if(ue(b,{x:po(U.x+I.x),y:po(U.y+I.y),dx:0,dy:0},{originalEvent:m}),s("start")===!1)return M();i.active=!0,i.keepSelection||(b.previousSelection=n.get(),n.select(null)),i.cursor&&Cu(i.cursor),t.addMarker(t.getRootElement(),Xd)}xf(m),i.active&&(ue(b,{x:po(G.x+I.x),y:po(G.y+I.y),dx:po(Y.x),dy:po(Y.y)},{originalEvent:m}),s("move"))}function l(m){var x,b=!0;i.active&&(m&&(i.payload.originalEvent=m,xf(m)),b=s("end")),b===!1&&s("rejected"),x=P(b!==!0),s("ended",x)}function p(m){Sn("Escape",m)&&(Hi(m),M())}function y(m){var x;i.active&&(x=sm(e),setTimeout(x,400),Hi(m)),l(m)}function g(m){f(m)}function v(m){var x=i.payload;x.hoverGfx=m.gfx,x.hover=m.element,s("hover")}function S(m){s("out");var x=i.payload;x.hoverGfx=null,x.hover=null}function M(m){var x;if(i){var b=i.active;b&&s("cancel"),x=P(m),b&&s("canceled",x)}}function P(m){var x,b;s("cleanup"),am(),i.trapClick?b=y:b=l,De.unbind(document,"mousemove",f),De.unbind(document,"dragstart",Hi),De.unbind(document,"selectstart",Hi),De.unbind(document,"mousedown",b,!0),De.unbind(document,"mouseup",b,!0),De.unbind(document,"keyup",p),De.unbind(document,"touchstart",g,!0),De.unbind(document,"touchcancel",M,!0),De.unbind(document,"touchmove",f,!0),De.unbind(document,"touchend",l,!0),e.off("element.hover",v),e.off("element.out",S),t.removeMarker(t.getRootElement(),Xd);var I=i.payload.previousSelection;return m!==!1&&I&&!n.get().length&&u(I),x=i,i=null,x}function T(m,x,b,I){i&&M(!1),typeof x=="string"&&(I=b,b=x,x=null),I=ue({},o,I||{});var d=I.data||{},L,w,U,G,Y;I.trapClick?G=y:G=l,m?(L=Co(m)||m,w=mi(m),xf(m),L.type==="dragstart"&&Hi(L)):(L=null,w={x:0,y:0}),U=a(w),x||(x=U),Y=qb(L),i=ue({prefix:b,data:d,payload:{},globalStart:w,displacement:or(x,U),localStart:U,isTouch:Y},I),I.manual||(Y?(De.bind(document,"touchstart",g,!0),De.bind(document,"touchcancel",M,!0),De.bind(document,"touchmove",f,!0),De.bind(document,"touchend",l,!0)):(De.bind(document,"mousemove",f),De.bind(document,"dragstart",Hi),De.bind(document,"selectstart",Hi),De.bind(document,"mousedown",G,!0),De.bind(document,"mouseup",G,!0)),De.bind(document,"keyup",p),e.on("element.hover",v),e.on("element.out",S)),s("init"),I.autoActivate&&f(m,!0)}e.on("diagram.destroy",M),this.init=T,this.move=f,this.hover=v,this.out=S,this.end=l,this.cancel=M,this.context=function(){return i},this.setOptions=function(m){ue(o,m)}}ym.$inject=["eventBus","canvas","selection","elementRegistry"];const $r={__depends__:[Ub,jr],dragging:["type",ym]};function Ao(e,t,n){this._canvas=n,this._opts=ue({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(o){var i=r._toBorderPoint(o);r.startScroll(i)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}Ao.$inject=["config.autoScroll","eventBus","canvas"];Ao.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,r=this,o=t.getContainer().getBoundingClientRect(),i=[e.x,e.y,o.width-e.x,o.height-e.y];this.stopScroll();for(var a=0,s=0,u=0;u<4;u++)zb(i[u],n.scrollThresholdOut[u],n.scrollThresholdIn[u])&&(u===0?a=n.scrollStep:u==1?s=n.scrollStep:u==2?a=-n.scrollStep:u==3&&(s=-n.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){r.startScroll(e)},n.scrollRepeatTimeout))};function zb(e,t,n){return t<e&&e<n}Ao.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Ao.prototype.setOptions=function(e){this._opts=ue({},this._opts,e)};Ao.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=mi(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const Vb={__depends__:[$r],__init__:["autoScroll"],autoScroll:["type",Ao]};function uh(e){this._commandStack=e.get("commandStack",!1)}uh.$inject=["injector"];uh.prototype.allowed=function(e,t){var n=!0,r=this._commandStack;return r&&(n=r.canExecute(e,t)),n===void 0?!0:n};const fr={__init__:["rules"],rules:["type",uh]};var ys=Math.round,Xb=Math.max;function Gb(e,t){var n=e.x,r=e.y;return[["M",n,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function Yb(e){var t=[];return e.forEach(function(n,r){t.push([r===0?"M":"L",n.x,n.y])}),t}var vm=10;function Kb(e,t){var n,r;for(n=0;r=e[n];n++)if(wa(r,t)<=vm)return{point:e[n],bendpoint:!0,index:n};return null}function Zb(e,t){var n=tv(Gb(t,vm),Yb(e)),r=n[0],o=n[n.length-1],i;return r?r!==o?r.segment2!==o.segment2?(i=Xb(r.segment2,o.segment2)-1,{point:e[i],bendpoint:!0,index:i}):{point:{x:ys(r.x+o.x)/2,y:ys(r.y+o.y)/2},index:r.segment2}:{point:{x:ys(r.x),y:ys(r.y)},index:r.segment2}:null}function Qb(e,t){return Kb(e,t)||Zb(e,t)}function Jb(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function eT(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],o=r[0].n*t[0]+r[1].n*t[1],i=r[0].lambda*t[0]+r[1].lambda*t[1];return-o/i}function mm(e,t){var n=t[0],r=t[1],o={x:r.x-n.x,y:r.y-n.y},i=eT([n.x,n.y],[o.x,o.y],[e.x,e.y]);return{x:n.x+i*o.x,y:n.y+i*o.y}}function tT(e,t){var n=mm(e,t),r={x:n.x-e.x,y:n.y-e.y};return Jb(r)}var _m="djs-bendpoint",xm="djs-segment-dragger";function nT(e,t){var n=mi(t),r=e._container.getBoundingClientRect(),o;o={x:r.left,y:r.top};var i=e.viewbox();return{x:i.x+(n.x-o.x)/i.scale,y:i.y+(n.y-o.y)/i.scale}}function rl(e,t,n){var r=nT(e,n),o=Qb(t,r);return o}function il(e,t){var n=Pe("g");Ke(n).add(_m),ke(e,n);var r=Pe("circle");xe(r,{cx:0,cy:0,r:4}),Ke(r).add("djs-visual"),ke(n,r);var o=Pe("circle");return xe(o,{cx:0,cy:0,r:10}),Ke(o).add("djs-hit"),ke(n,o),t&&Ke(n).add(t),n}function rT(e,t,n,r){var o=Pe("g");ke(e,o);var i=18,a=6,s=11,u=oT(t,n,r),f=a+s,l=Pe("rect");xe(l,{x:-i/2,y:-a/2,width:i,height:a}),Ke(l).add("djs-visual"),ke(o,l);var p=Pe("rect");return xe(p,{x:-u/2,y:-f/2,width:u,height:f}),Ke(p).add("djs-hit"),ke(o,p),bx(o,r==="v"?90:0),o}function wm(e,t,n){var r=Pe("g"),o=zf(t,n),i=Sr(t,n);return ke(e,r),rT(r,t,n,i),Ke(r).add(xm),Ke(r).add(i==="h"?"horizontal":"vertical"),Cn(r,o.x,o.y),r}function ol(e){return Math.abs(Math.round(e*2/3))}function iT(e,t){var n=aT(e,t);return mm(e,n)}function oT(e,t,n){var r=t.x-e.x,o=t.y-e.y;return ol(n==="h"?r:o)}function aT(e,t){for(var n=t.waypoints,r=1/0,o,i=0;i<n.length-1;i++){var a=n[i],s=n[i+1],u=tT(e,[a,s]);u<r&&(r=u,o=i)}return[n[o],n[o+1]]}function ch(e){return CSS.escape(e)}function Em(e,t,n,r,o){function i(m,x,b){var I=m.index,d=m.point,L,w,U,G,Y,q;return I<=0||m.bendpoint?!1:(L=x[I-1],w=x[I],U=zf(L,w),G=Sr(L,w),Y=Math.abs(d.x-U.x),q=Math.abs(d.y-U.y),G&&Y<=b&&q<=b)}function a(m,x){var b=m.waypoints,I,d,L,w;return x.index<=0||x.bendpoint||(I={start:b[x.index-1],end:b[x.index]},d=Sr(I.start,I.end),!d)?null:(d==="h"?L=I.end.x-I.start.x:L=I.end.y-I.start.y,w=ol(L)/2,w)}function s(m,x){var b=x.waypoints,I=rl(t,b,m),d;if(I)return d=a(x,I),i(I,b,d)?o.start(m,x,I.index):r.start(m,x,I.index,!I.bendpoint),!0}function u(m,x,b){De.bind(m,x,function(I){n.triggerMouseEvent(x,I,b),I.stopPropagation()})}function f(m,x){var b=t.getLayer("overlays"),I=Ot('.djs-bendpoints[data-element-id="'+ch(m.id)+'"]',b);return!I&&x&&(I=Pe("g"),xe(I,{"data-element-id":m.id}),Ke(I).add("djs-bendpoints"),ke(b,I),u(I,"mousedown",m),u(I,"click",m),u(I,"dblclick",m)),I}function l(m,x){return Ot('.djs-segment-dragger[data-segment-idx="'+m+'"]',x)}function p(m,x){x.waypoints.forEach(function(b,I){var d=il(m);ke(m,d),Cn(d,b.x,b.y)}),il(m,"floating")}function y(m,x){for(var b=x.waypoints,I,d,L,w=1;w<b.length;w++)I=b[w-1],d=b[w],Sr(I,d)&&(L=wm(m,I,d),xe(L,{"data-segment-idx":w}),u(L,"mousemove",x))}function g(m){ne(Hf("."+_m,m),function(x){Tt(x)})}function v(m){ne(Hf("."+xm,m),function(x){Tt(x)})}function S(m){var x=f(m);return x||(x=f(m,!0),p(x,m),y(x,m)),x}function M(m){var x=f(m);x&&(v(x),g(x),y(x,m),p(x,m))}function P(m,x){var b=Ot(".floating",m),I=x.point;b&&Cn(b,I.x,I.y)}function T(m,x,b){var I=l(x.index,m),d=b[x.index-1],L=b[x.index],w=x.point,U=zf(d,L),G=Sr(d,L),Y,q;I&&(Y=sT(I),q={x:w.x-U.x,y:w.y-U.y},G==="v"&&(q={x:q.y,y:q.x}),Cn(Y,q.x,q.y))}e.on("connection.changed",function(m){M(m.element)}),e.on("connection.remove",function(m){var x=f(m.element);x&&Tt(x)}),e.on("element.marker.update",function(m){var x=m.element,b;x.waypoints&&(b=S(x),m.add?Ke(b).add(m.marker):Ke(b).remove(m.marker))}),e.on("element.mousemove",function(m){var x=m.element,b=x.waypoints,I,d;if(b){if(I=f(x,!0),d=rl(t,b,m.originalEvent),!d)return;P(I,d),d.bendpoint||T(I,d,b)}}),e.on("element.mousedown",function(m){if(wi(m)){var x=m.originalEvent,b=m.element;if(b.waypoints)return s(x,b)}}),e.on("selection.changed",function(m){var x=m.newSelection,b=x[0];b&&b.waypoints&&S(b)}),e.on("element.hover",function(m){var x=m.element;x.waypoints&&(S(x),n.registerEvent(m.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(m){n.unregisterEvent(m.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(m){var x=m.element,b=m.newId;if(x.waypoints){var I=f(x);I&&xe(I,{"data-element-id":b})}}),this.addHandles=S,this.updateHandles=M,this.getBendpointsContainer=f,this.getSegmentDragger=l}Em.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function sT(e){return Ot(".djs-visual",e)}var Gd=Math.round,Ui="reconnectStart",qi="reconnectEnd",Zo="updateWaypoints";function fh(e,t,n,r,o,i){this._injector=e,this.start=function(a,s,u,f){var l=n.getGraphics(s),p=s.source,y=s.target,g=s.waypoints,v;!f&&u===0?v=Ui:!f&&u===g.length-1?v=qi:v=Zo;var S=v===Zo?"connection.updateWaypoints":"connection.reconnect",M=o.allowed(S,{connection:s,source:p,target:y});M===!1&&(M=o.allowed(S,{connection:s,source:y,target:p})),M!==!1&&r.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:l,context:{allowed:M,bendpointIndex:u,connection:s,source:p,target:y,insert:f,type:v}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,u=s.connection,f=u.source,l=u.target,p=a.hover,y=s.type;s.hover=p;var g;if(p){var v=y===Zo?"connection.updateWaypoints":"connection.reconnect";if(g=s.allowed=o.allowed(v,{connection:u,source:y===Ui?p:f,target:y===qi?p:l}),g){s.source=y===Ui?p:f,s.target=y===qi?p:l;return}g===!1&&(g=s.allowed=o.allowed(v,{connection:u,source:y===qi?p:l,target:y===Ui?p:f})),g&&(s.source=y===qi?p:l,s.target=y===Ui?p:f)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,u=s.type;s.hover=null,s.source=null,s.target=null,u!==Zo&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,u=s.allowed,f=s.bendpointIndex,l=s.connection,p=s.insert,y=l.waypoints.slice(),g=s.source,v=s.target,S=s.type,M=s.hints||{},P={x:Gd(a.x),y:Gd(a.y)};if(!u)return!1;S===Zo?(p?y.splice(f,0,P):y[f]=P,M.bendpointMove={insert:p,bendpointIndex:f},y=this.cropWaypoints(l,y),i.updateWaypoints(l,rx(y),M)):(S===Ui?(M.docking="source",Gs(s)&&(M.docking="target",M.newWaypoints=y.reverse())):S===qi&&(M.docking="target",Gs(s)&&(M.docking="source",M.newWaypoints=y.reverse())),i.reconnect(l,g,v,P,M))},this)}fh.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];fh.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var r=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=r,t};function Gs(e){var t=e.hover,n=e.source,r=e.target,o=e.type;if(o===Ui)return t&&r&&t===r&&n!==r;if(o===qi)return t&&n&&t===n&&n!==r}var uT="reconnectStart",cT="reconnectEnd",Yd="updateWaypoints",Qo="connect-ok",vs="connect-not-ok",Kd="connect-hover",Zd="djs-updating",Qd="djs-element-hidden",Jd=1100;function bm(e,t,n,r){this._injector=t;var o=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(i){var a=i.context,s=a.bendpointIndex,u=a.connection,f=a.insert,l=u.waypoints,p=l.slice();a.waypoints=l,f&&p.splice(s,0,{x:i.x,y:i.y}),u.waypoints=p;var y=a.draggerGfx=il(r.getLayer("overlays"));Ke(y).add("djs-dragging"),r.addMarker(u,Qd),r.addMarker(u,Zd)}),n.on("bendpoint.move.hover",function(i){var a=i.context,s=a.allowed,u=a.hover,f=a.type;if(u){if(r.addMarker(u,Kd),f===Yd)return;s?(r.removeMarker(u,vs),r.addMarker(u,Qo)):s===!1&&(r.removeMarker(u,Qo),r.addMarker(u,vs))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],Jd,function(i){var a=i.context,s=a.hover,u=a.target;s&&(r.removeMarker(s,Kd),r.removeMarker(s,u?Qo:vs))}),n.on("bendpoint.move.move",function(i){var a=i.context,s=a.allowed,u=a.bendpointIndex,f=a.draggerGfx,l=a.hover,p=a.type,y=a.connection,g=y.source,v=y.target,S=y.waypoints.slice(),M={x:i.x,y:i.y},P=a.hints||{},T={};o&&(P.connectionStart&&(T.connectionStart=P.connectionStart),P.connectionEnd&&(T.connectionEnd=P.connectionEnd),p===uT?Gs(a)?(T.connectionEnd=T.connectionEnd||M,T.source=v,T.target=l||g,S=S.reverse()):(T.connectionStart=T.connectionStart||M,T.source=l||g,T.target=v):p===cT?Gs(a)?(T.connectionStart=T.connectionStart||M,T.source=l||v,T.target=g,S=S.reverse()):(T.connectionEnd=T.connectionEnd||M,T.source=g,T.target=l||v):(T.noCropping=!0,T.noLayout=!0,S[u]=M),p===Yd&&(S=e.cropWaypoints(y,S)),T.waypoints=S,o.drawPreview(a,s,T)),Cn(f,i.x,i.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],Jd,function(i){var a=i.context,s=a.connection,u=a.draggerGfx,f=a.hover,l=a.target,p=a.waypoints;s.waypoints=p,Tt(u),r.removeMarker(s,Zd),r.removeMarker(s,Qd),f&&(r.removeMarker(f,Qo),r.removeMarker(f,l?Qo:vs)),o&&o.cleanUp(a)})}bm.$inject=["bendpointMove","injector","eventBus","canvas"];var eg="connect-hover",tg="djs-updating";function ng(e,t,n){return lh(e,t,e[t]+n)}function lh(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function fT(e,t,n,r){var o=Math.max(t[r],n[r]),i=Math.min(t[r],n[r]),a=20,s=Math.min(Math.max(i+a,e[r]),o-a);return lh(t,r,s)}function Tm(e){return e==="x"?"y":"x"}function rg(e,t,n){var r,o;return e.original?e.original:(r=nt(t),o=Tm(n),lh(e,o,r[o]))}function Sm(e,t,n,r,o,i){var a=e.get("connectionDocking",!1);this.start=function(p,y,g){var v,S=n.getGraphics(y),M=g-1,P=g,T=y.waypoints,m=T[M],x=T[P],b=rl(n,T,p),I,d,L;I=Sr(m,x),I&&(d=I==="v"?"x":"y",M===0&&(m=rg(m,y.source,d)),P===T.length-1&&(x=rg(x,y.target,d)),b?L=b.point:L={x:(m.x+x.x)/2,y:(m.y+x.y)/2},v={connection:y,segmentStartIndex:M,segmentEndIndex:P,segmentStart:m,segmentEnd:x,axis:d,dragPosition:L},r.init(p,L,"connectionSegment.move",{cursor:d==="x"?"resize-ew":"resize-ns",data:{connection:y,connectionGfx:S,context:v}}))};function s(p,y){if(!a)return y;var g=p.waypoints,v;return p.waypoints=y,v=a.getCroppedWaypoints(p),p.waypoints=g,v}function u(p){o.update("connection",p.connection,p.connectionGfx)}function f(p,y,g){var v=p.newWaypoints,S=p.segmentStartIndex+y,M=v[S],P=p.segmentEndIndex+y,T=v[P],m=Tm(p.axis),x=fT(g,M,T,m);Cn(p.draggerGfx,x.x,x.y)}function l(p,y){var g=0,v=p.filter(function(S,M){return bl(p[M-1],p[M+1],S)?(g=M<=y?g-1:g,!1):!0});return{waypoints:v,segmentOffset:g}}t.on("connectionSegment.move.start",function(p){var y=p.context,g=p.connection,v=n.getLayer("overlays");y.originalWaypoints=g.waypoints.slice(),y.draggerGfx=wm(v,y.segmentStart,y.segmentEnd),Ke(y.draggerGfx).add("djs-dragging"),n.addMarker(g,tg)}),t.on("connectionSegment.move.move",function(p){var y=p.context,g=y.connection,v=y.segmentStartIndex,S=y.segmentEndIndex,M=y.segmentStart,P=y.segmentEnd,T=y.axis,m=y.originalWaypoints.slice(),x=ng(M,T,p["d"+T]),b=ng(P,T,p["d"+T]),I=m.length,d=0;m[v]=x,m[S]=b;var L,w;v<2&&(L=An(g.source,x),v===1?L==="intersect"&&(m.shift(),m[0]=x,d--):L!=="intersect"&&(m.unshift(M),d++)),S>I-3&&(w=An(g.target,b),S===I-2?w==="intersect"&&(m.pop(),m[m.length-1]=b):w!=="intersect"&&m.push(P)),y.newWaypoints=g.waypoints=s(g,m),f(y,d,p),y.newSegmentStartIndex=v+d,u(p)}),t.on("connectionSegment.move.hover",function(p){p.context.hover=p.hover,n.addMarker(p.hover,eg)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(p){var y=p.context.hover;y&&n.removeMarker(y,eg)}),t.on("connectionSegment.move.cleanup",function(p){var y=p.context,g=y.connection;y.draggerGfx&&Tt(y.draggerGfx),n.removeMarker(g,tg)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(p){var y=p.context,g=y.connection;g.waypoints=y.originalWaypoints,u(p)}),t.on("connectionSegment.move.end",function(p){var y=p.context,g=y.connection,v=y.newWaypoints,S=y.newSegmentStartIndex;v=v.map(function(b){return{original:b.original,x:Math.round(b.x),y:Math.round(b.y)}});var M=l(v,S),P=M.waypoints,T=s(g,P),m=M.segmentOffset,x={segmentMove:{segmentStartIndex:y.segmentStartIndex,newSegmentStartIndex:S+m}};i.updateWaypoints(g,T,x)})}Sm.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var lT=Math.abs,ig=Math.round;function hT(e,t,n){n=n===void 0?10:n;var r,o;for(r=0;r<t.length;r++)if(o=t[r],lT(o-e)<=n)return o}function pT(e){return{x:e.x,y:e.y}}function dT(e){return{x:e.x+e.width,y:e.y+e.height}}function li(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:ig(e.x+e.width/2),y:ig(e.y+e.height/2)}}function pa(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function hn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var r,o=e[t],i=e.snapped=e.snapped||{};return n===!1?i[t]=!1:(i[t]=!0,r=n-o,e[t]+=r,e["d"+t]+=r),o}function Cm(e){return e.children||[]}var gT=Math.abs,og=Math.round,bf=10;function Mm(e){function t(i,a){if(ze(i)){for(var s=i.length;s--;)if(gT(i[s]-a)<=bf)return i[s]}else{i=+i;var u=a%i;if(u<bf)return a-u;if(u>i-bf)return a-u+i}return a}function n(i,a){if(i.waypoints)return iT(a,i);if(i.width)return{x:og(i.width/2+i.x),y:og(i.height/2+i.y)}}function r(i){var a=i.context,s=a.snapPoints,u=a.connection,f=u.waypoints,l=a.segmentStart,p=a.segmentStartIndex,y=a.segmentEnd,g=a.segmentEndIndex,v=a.axis;if(s)return s;var S=[f[p-1],l,y,f[g+1]];return p<2&&S.unshift(n(u.source,i)),g>f.length-3&&S.unshift(n(u.target,i)),a.snapPoints=s={horizontal:[],vertical:[]},ne(S,function(M){M&&(M=M.original||M,v==="y"&&s.horizontal.push(M.y),v==="x"&&s.vertical.push(M.x))}),s}e.on("connectionSegment.move.move",1500,function(i){var a=r(i),s=i.x,u=i.y,f,l;if(a){f=t(a.vertical,s),l=t(a.horizontal,u);var p=s-f,y=u-l;ue(i,{dx:i.dx-p,dy:i.dy-y,x:f,y:l}),(p||a.vertical.indexOf(s)!==-1)&&hn(i,"x",f),(y||a.horizontal.indexOf(u)!==-1)&&hn(i,"y",l)}});function o(i){var a=i.snapPoints,s=i.connection.waypoints,u=i.bendpointIndex;if(a)return a;var f=[s[u-1],s[u+1]];return i.snapPoints=a={horizontal:[],vertical:[]},ne(f,function(l){l&&(l=l.original||l,a.horizontal.push(l.y),a.vertical.push(l.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(i){var a=i.context,s=a.hover,u=s&&n(s,i);!St(s)||!u||!u.x||!u.y||(hn(i,"x",u.x),hn(i,"y",u.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(i){var a=i.context,s=o(a),u=a.hover,f=u&&n(u,i),l=i.x,p=i.y,y,g;if(s){y=t(f?s.vertical.concat([f.x]):s.vertical,l),g=t(f?s.horizontal.concat([f.y]):s.horizontal,p);var v=l-y,S=p-g;ue(i,{dx:i.dx-v,dy:i.dy-S,x:i.x-v,y:i.y-S}),(v||s.vertical.indexOf(l)!==-1)&&hn(i,"x",y),(S||s.horizontal.indexOf(p)!==-1)&&hn(i,"y",g)}})}Mm.$inject=["eventBus"];const yT={__depends__:[$r,fr],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Em],bendpointMove:["type",fh],bendpointMovePreview:["type",bm],connectionSegmentMove:["type",Sm],bendpointSnapping:["type",Mm]};function Rm(e,t,n,r){function o(a,s){return r.allowed("connection.create",{source:a,target:s})}function i(a,s){return o(s,a)}e.on("connect.hover",function(a){var s=a.context,u=s.start,f=a.hover,l;if(s.hover=f,l=s.canExecute=o(u,f),!Ff(l)){if(l!==!1){s.source=u,s.target=f;return}l=s.canExecute=i(u,f),!Ff(l)&&l!==!1&&(s.source=f,s.target=u)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,u=s.canExecute,f=s.connectionStart,l={x:a.x,y:a.y},p=s.source,y=s.target;if(!u)return!1;var g=null,v={connectionStart:al(s)?l:f,connectionEnd:al(s)?f:l};Vt(u)&&(g=u),s.connection=n.connect(p,y,g,v)}),this.start=function(a,s,u,f){Vt(u)||(f=u,u=nt(s)),t.init(a,"connect",{autoActivate:f,data:{shape:s,context:{start:s,connectionStart:u}}})}}Rm.$inject=["eventBus","dragging","modeling","rules"];function al(e){var t=e.hover,n=e.source,r=e.target;return t&&n&&t===n&&n!==r}var vT=1100,mT=900,ag="connect-ok",sg="connect-not-ok";function Pm(e,t,n){var r=e.get("connectionPreview",!1);r&&t.on("connect.move",function(o){var i=o.context,a=i.canExecute,s=i.hover,u=i.source,f=i.start,l=i.startPosition,p=i.target,y=i.connectionStart||l,g=i.connectionEnd||{x:o.x,y:o.y},v=y,S=g;al(i)&&(v=g,S=y),r.drawPreview(i,a,{source:u||f,target:p||s,connectionStart:v,connectionEnd:S})}),t.on("connect.hover",mT,function(o){var i=o.context,a=o.hover,s=i.canExecute;s!==null&&n.addMarker(a,s?ag:sg)}),t.on(["connect.out","connect.cleanup"],vT,function(o){var i=o.hover;i&&(n.removeMarker(i,ag),n.removeMarker(i,sg))}),r&&t.on("connect.cleanup",function(o){r.cleanUp(o.context)})}Pm.$inject=["injector","eventBus","canvas"];const hh={__depends__:[jr,fr,$r],__init__:["connectPreview"],connect:["type",Rm],connectPreview:["type",Pm]};var _T="djs-connection-preview";function Hr(e,t,n,r){this._canvas=t,this._graphicsFactory=n,this._elementFactory=r,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Hr.$inject=["injector","canvas","graphicsFactory","elementFactory"];Hr.prototype.drawPreview=function(e,t,n){n=n||{};var r=e.connectionPreviewGfx,o=e.getConnection,i=n.source,a=n.target,s=n.waypoints,u=n.connectionStart,f=n.connectionEnd,l=n.noLayout,p=n.noCropping,y=n.noNoop,g,v=this;if(r||(r=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),uu(r),o||(o=e.getConnection=xT(function(S,M,P){return v.getConnection(S,M,P)})),t&&(g=o(t,i,a)),!g){!y&&this.drawNoopPreview(r,n);return}g.waypoints=s||[],this._layouter&&!l&&(g.waypoints=this._layouter.layoutConnection(g,{source:i,target:a,connectionStart:u,connectionEnd:f,waypoints:n.waypoints||g.waypoints})),(!g.waypoints||!g.waypoints.length)&&(g.waypoints=[i?nt(i):u,a?nt(a):f]),this._connectionDocking&&(i||a)&&!p&&(g.waypoints=this._connectionDocking.getCroppedWaypoints(g,i,a)),this._graphicsFactory.drawConnection(r,g)};Hr.prototype.drawNoopPreview=function(e,t){var n=t.source,r=t.target,o=t.connectionStart||nt(n),i=t.connectionEnd||nt(r),a=this.cropWaypoints(o,i,n,r),s=this.createNoopConnection(a[0],a[1]);ke(e,s)};Hr.prototype.cropWaypoints=function(e,t,n,r){var o=this._graphicsFactory,i=n&&o.getShapePath(n),a=r&&o.getShapePath(r),s=o.getConnectionPath({waypoints:[e,t]});return e=n&&Xf(i,s,!0)||e,t=r&&Xf(a,s,!1)||t,[e,t]};Hr.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Tt(e.connectionPreviewGfx)};Hr.prototype.getConnection=function(e){var t=wT(e);return this._elementFactory.createConnection(t)};Hr.prototype.createConnectionPreviewGfx=function(){var e=Pe("g");return xe(e,{pointerEvents:"none"}),Ke(e).add(_T),ke(this._canvas.getActiveLayer(),e),e};Hr.prototype.createNoopConnection=function(e,t){return fu([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function xT(e){var t={};return function(n){var r=JSON.stringify(n),o=t[r];return o||(o=t[r]=e.apply(null,arguments)),o}}function wT(e){return Vt(e)?e:{}}const ET={__init__:["connectionPreview"],connectionPreview:["type",Hr]};var ug=Math.min,cg=Math.max;function Tf(e){e.preventDefault()}function sa(e){e.stopPropagation()}function bT(e){return e.nodeType===Node.TEXT_NODE}function TT(e){return[].slice.call(e)}function zn(e){this.container=e.container,this.parent=Bt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Ot("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=en(this.autoResize,this),this.handlePaste=en(this.handlePaste,this)}zn.prototype.create=function(e,t,n,r){var o=this,i=this.parent,a=this.content,s=this.container;r=this.options=r||{},t=this.style=t||{};var u=Or(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);ue(i.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},u);var f=Or(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return ue(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},f),r.centerVertically&&ue(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},f),a.innerText=n,De.bind(a,"keydown",this.keyHandler),De.bind(a,"mousedown",sa),De.bind(a,"paste",o.handlePaste),r.autoResize&&De.bind(a,"input",this.autoResize),r.resizable&&this.resizable(t),s.appendChild(i),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),i};zn.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var r;if(e.clipboardData?r=e.clipboardData.getData("text/plain"):r=window.clipboardData.getData("Text"),this.insertText(r),t.autoResize){var o=this.autoResize(n);o&&this.resizeHandler(o)}};zn.prototype.insertText=function(e){e=ST(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};zn.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,r=t.endContainer,o=t.startOffset,i=t.endOffset,a=t.commonAncestorContainer,s=TT(a.childNodes),u,f;if(bT(a)){var l=n.textContent;n.textContent=l.substring(0,o)+e+l.substring(i),u=n,f=o+e.length}else if(n===this.content&&r===this.content){var p=document.createTextNode(e);this.content.insertBefore(p,s[o]),u=p,f=p.textContent.length}else{var y=s.indexOf(n),g=s.indexOf(r);s.forEach(function(v,S){S===y?v.textContent=n.textContent.substring(0,o)+e+r.textContent.substring(i):S>y&&S<=g&&ur(v)}),u=n,f=o+e.length}u&&f!==void 0&&setTimeout(function(){self.setSelection(u,f)})};zn.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var r=e.getBoundingClientRect(),o=t.scrollHeight;e.style.height=o+"px",this.resizeHandler({width:r.width,height:r.height,dx:0,dy:o-r.height})}};zn.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,r=parseInt(this.style.minWidth)||0,o=parseInt(this.style.minHeight)||0,i=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=Bt('<div class="djs-direct-editing-resize-handle"></div>');var s,u,f,l,p=function(v){Tf(v),sa(v),s=v.clientX,u=v.clientY;var S=t.getBoundingClientRect();f=S.width,l=S.height,De.bind(document,"mousemove",y),De.bind(document,"mouseup",g)},y=function(v){Tf(v),sa(v);var S=ug(cg(f+v.clientX-s,r),i),M=ug(cg(l+v.clientY-u,o),a);t.style.width=S+"px",t.style.height=M+"px",e.resizeHandler({width:f,height:l,dx:v.clientX-s,dy:v.clientY-u})},g=function(v){Tf(v),sa(v),De.unbind(document,"mousemove",y,!1),De.unbind(document,"mouseup",g,!1)};De.bind(n,"mousedown",p)}ue(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};zn.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),De.unbind(t,"keydown",this.keyHandler),De.unbind(t,"mousedown",sa),De.unbind(t,"input",this.autoResize),De.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),ur(n)),ur(e)};zn.prototype.getValue=function(){return this.content.innerText.trim()};zn.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};zn.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)};function ST(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Nn(e,t){this._eventBus=e,this._providers=[],this._textbox=new zn({container:t.getContainer(),keyHandler:en(this._handleKey,this),resizeHandler:en(this._handleResize,this)})}Nn.$inject=["eventBus","canvas"];Nn.prototype.registerProvider=function(e){this._providers.push(e)};Nn.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};Nn.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};Nn.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};Nn.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0};Nn.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,r=this.$textbox.getBoundingClientRect(),o=this.getValue(),i=e.context.text;(o!==i||r.height!==n.height||r.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,o,e.context.text,{x:r.left-t.left,y:r.top-t.top,width:r.width,height:r.height})),this._fire("complete"),this.close()}};Nn.prototype.getValue=function(){return this._textbox.getValue()};Nn.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};Nn.prototype._handleResize=function(e){this._fire("resize",e)};Nn.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=_t(this._providers,function(r){return(t=r.activate(e))?r:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const Am={__depends__:[Ma],__init__:["directEditing"],directEditing:["type",Nn]};var fg=".entry",CT=1e3,lg=12;function tn(e,t,n,r){this._canvas=e,this._eventBus=n,this._overlays=r;var o=$t(t&&t.scale)?t.scale:{min:1,max:1.5};this._overlaysConfig={scale:o},this._current=null,this._init()}tn.$inject=["canvas","config.contextPad","eventBus","overlays"];tn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,r=n.length?n.length===1?n[0]:n:null;r?e.open(r,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,r=e._current;if(r){var o=r.target,i=au(ze(o)?o:[o],function(a){return Om(n,a)});i&&e.open(o,!0)}})};tn.prototype.registerProvider=function(e,t){t||(t=e,e=CT),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};tn.prototype.getEntries=function(e){var t=this._getProviders(),n=ze(e)?"getMultiElementContextPadEntries":"getContextPadEntries",r={};return ne(t,function(o){if(Wt(o[n])){var i=o[n](e);Wt(i)?r=i(r):ne(i,function(a,s){r[s]=a})}}),r};tn.prototype.trigger=function(e,t,n){var r,o,i=t.delegateTarget||t.target;return i?(r=pn(i,"data-action"),o=t.originalEvent||t,this.triggerEntry(r,e,o,n)):t.preventDefault()};tn.prototype.triggerEntry=function(e,t,n,r){if(this.isShown()){var o=this._current.target,i=this._current.entries,a=i[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:n})!==!1){if(Wt(s)){if(t==="click")return s(n,o,r)}else if(s[t])return s[t](n,o,r);n.preventDefault()}}}};tn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};tn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};tn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),r=n.html,o;ne(t,function(i,a){var s=i.group||"default",u=Bt(i.html||'<div class="entry" draggable="true"></div>'),f;pn(u,"data-action",a),f=Ot("[data-group="+ch(s)+"]",r),f||(f=Bt('<div class="group"></div>'),pn(f,"data-group",s),r.appendChild(f)),f.appendChild(u),i.className&&MT(u,i.className),i.title&&pn(u,"title",i.title),i.imageUrl&&(o=Bt("<img>"),pn(o,"src",i.imageUrl),o.style.width="100%",o.style.height="100%",u.appendChild(o))}),yn(r).add("open"),this._current={target:e,entries:t,pad:n},this._eventBus.fire("contextPad.open",{current:this._current})};tn.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,r=Bt('<div class="djs-context-pad"></div>'),o=this._getPosition(e),i=ue({html:r},this._overlaysConfig,o);Cr.bind(r,fg,"click",function(u){t.trigger("click",u)}),Cr.bind(r,fg,"dragstart",function(u){t.trigger("dragstart",u)}),De.bind(r,"mousedown",function(u){u.stopPropagation()});var a=this._canvas.getRootElement();this._overlayId=n.add(a,"context-pad",i);var s=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{target:e,pad:s}),s};tn.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};tn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return ze(e)!==ze(n)?!1:ze(e)?e.length===n.length&&_a(e,function(r){return Om(n,r)}):n===e};tn.prototype.isShown=function(){return this.isOpen()&&this._overlays.isShown()};tn.prototype._getPosition=function(e){var t=ze(e)?e:[e],n=Ht(t);return{position:{left:n.x+n.width+lg,top:n.y-lg/2}}};function MT(e,t){var n=yn(e);t=ze(t)?t:t.split(/\s+/g),t.forEach(function(r){n.add(r)})}function Om(e,t){return e.indexOf(t)!==-1}const RT={__depends__:[Ma,nm],contextPad:["type",tn]};var PT=["marker-start","marker-mid","marker-end"],AT=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Ki(e,t,n,r){this._elementRegistry=e,this._canvas=n,this._styles=r,this._clonedMarkers={};var o=this;t.on("drag.cleanup",function(){ne(o._clonedMarkers,function(i){Tt(i)}),o._clonedMarkers={}})}Ki.$inject=["elementRegistry","eventBus","canvas","styles"];Ki.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Ki.prototype.addDragger=function(e,t,n){n=n||this.getGfx(e);var r=Wy(n),o=n.getBoundingClientRect();return this._cloneMarkers(zs(r)),xe(r,this._styles.cls("djs-dragger",[],{x:o.top,y:o.left})),ke(t,r),r};Ki.prototype.addFrame=function(e,t){var n=Pe("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return ke(t,n),n};Ki.prototype._cloneMarkers=function(e){var t=this;if(e.childNodes)for(var n=0;n<e.childNodes.length;n++)t._cloneMarkers(e.childNodes[n]);IT(e)&&PT.forEach(function(r){if(xe(e,r)){var o=OT(e,r,t._canvas.getContainer());t._cloneMarker(e,o,r)}})};Ki.prototype._cloneMarker=function(e,t,n){var r=t.id,o=this._clonedMarkers[r];if(!o){o=Wy(t);var i=r+"-clone";o.id=i,Ke(o).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[r]=o;var a=Ot("defs",this._canvas._svg);a||(a=Pe("defs"),ke(this._canvas._svg,a)),ke(a,o)}var s=NT(this._clonedMarkers[r].id);xe(e,n,s)};function OT(e,t,n){var r=DT(xe(e,t));return Ot("marker#"+r,n||document)}function DT(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function NT(e){return"url(#"+e+")"}function IT(e){return AT.indexOf(e.nodeName)!==-1}const Ra={__init__:["previewSupport"],previewSupport:["type",Ki]};var LT="drop-ok",hg="drop-not-ok",pg="attach-ok",dg="new-parent",gg="create",kT=2e3;function Dm(e,t,n,r,o){function i(u,f,l,p,y){if(!f)return!1;u=Dt(u,function(T){var m=T.labelTarget;return!T.parent&&!(vn(T)&&u.indexOf(m)!==-1)});var g=_t(u,function(T){return!St(T)}),v=!1,S=!1,M=!1;vg(u)&&(v=o.allowed("shape.attach",{position:l,shape:g,target:f})),v||(vg(u)?M=o.allowed("shape.create",{position:l,shape:g,source:p,target:f}):M=o.allowed("elements.create",{elements:u,position:l,target:f}));var P=y.connectionTarget;return M||v?(g&&p&&(S=o.allowed("connection.create",{source:P===p?g:p,target:P===p?p:g,hints:{targetParent:f,targetAttach:v}})),{attach:v,connect:S}):M===null||v===null?null:!1}function a(u,f){[pg,LT,hg,dg].forEach(function(l){l===f?e.addMarker(u,l):e.removeMarker(u,l)})}n.on(["create.move","create.hover"],function(u){var f=u.context,l=f.elements,p=u.hover,y=f.source,g=f.hints||{};if(!p){f.canExecute=!1,f.target=null;return}yg(u);var v={x:u.x,y:u.y},S=f.canExecute=p&&i(l,p,v,y,g);p&&S!==null&&(f.target=p,S&&S.attach?a(p,pg):a(p,S?dg:hg))}),n.on(["create.end","create.out","create.cleanup"],function(u){var f=u.hover;f&&a(f,null)}),n.on("create.end",function(u){var f=u.context,l=f.source,p=f.shape,y=f.elements,g=f.target,v=f.canExecute,S=v&&v.attach,M=v&&v.connect,P=f.hints||{};if(v===!1||!g)return!1;yg(u);var T={x:u.x,y:u.y};M?p=r.appendShape(l,p,T,g,{attach:S,connection:M===!0?{}:M,connectionTarget:P.connectionTarget}):(y=r.createElements(y,T,g,ue({},P,{attach:S})),p=_t(y,function(m){return!St(m)})),ue(f,{elements:y,shape:p}),ue(u,{elements:y,shape:p})});function s(){var u=t.context();u&&u.prefix===gg&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],kT,function(){n.off("elements.changed",s)})}),this.start=function(u,f,l){ze(f)||(f=[f]);var p=_t(f,function(v){return!St(v)});if(p){l=ue({elements:f,hints:{},shape:p},l||{}),ne(f,function(v){Ie(v.x)||(v.x=0),Ie(v.y)||(v.y=0)});var y=Dt(f,function(v){return!v.hidden}),g=Ht(y);ne(f,function(v){St(v)&&(v.waypoints=zt(v.waypoints,function(S){return{x:S.x-g.x-g.width/2,y:S.y-g.y-g.height/2}})),ue(v,{x:v.x-g.x-g.width/2,y:v.y-g.y-g.height/2})}),t.init(u,gg,{cursor:"grabbing",autoActivate:!0,data:{shape:p,elements:f,context:l}})}}}Dm.$inject=["canvas","dragging","eventBus","modeling","rules"];function yg(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function vg(e){return e&&e.length===1&&!St(e[0])}var BT=750;function Nm(e,t,n,r,o){function i(a){var s=Pe("g");xe(s,o.cls("djs-drag-group",["no-events"]));var u=Pe("g");return a.forEach(function(f){var l;f.hidden||(f.waypoints?(l=n._createContainer("connection",u),n.drawConnection(zs(l),f)):(l=n._createContainer("shape",u),n.drawShape(zs(l),f),Cn(l,f.x,f.y)),r.addDragger(f,s,l))}),s}t.on("create.move",BT,function(a){var s=a.hover,u=a.context,f=u.elements,l=u.dragGroup;l||(l=u.dragGroup=i(f));var p;s?(l.parentNode||(p=e.getActiveLayer(),ke(p,l)),Cn(l,a.x,a.y)):Tt(l)}),t.on("create.cleanup",function(a){var s=a.context,u=s.dragGroup;u&&Tt(u)})}Nm.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Mu={__depends__:[$r,Ra,fr,jr],__init__:["create","createPreview"],create:["type",Dm],createPreview:["type",Nm]};function ph(e,t,n,r,o,i,a,s,u,f,l){e=e||{},a.registerProvider(this),this._connect=r,this._create=o,this._elementFactory=i,this._contextPad=a,this._modeling=s,this._rules=u,this._translate=f,this._popupMenu=l,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(p){let y=p.context,g=y.shape;if(!la(p)||!a.isOpen(g))return;let v=a.getEntries(g);v.replace&&v.replace.action.click(p,g)})}ph.$inject=["config.contextPad","injector","eventBus","connect","create","elementFactory","contextPad","modeling","rules","translate","popupMenu"];ph.prototype.getContextPadEntries=function(e){const{_rules:t,_modeling:n,_translate:r,_connect:o,_elementFactory:i,_contextPad:a,_autoPlace:s,_create:u,_popupMenu:f}=this;let l={};if(e.type==="label")return l;return y(l),e.type==="dcr:Event"?(T(l),m(l),v(l)):e.type==="dcr:Relation"?M(l):e.type==="dcr:Nesting"?(T(l),S(l)):e.type==="dcr:SubProcess"&&(T(l),v(l)),l;function p(){n.removeElements([e])}function y(b){let I=t.allowed("elements.delete",{elements:[e]});ze(I)&&(I=I[0]===e),I&&ue(b,{delete:{group:"edit",className:"bpmn-icon-trash",title:r("Remove"),action:{click:p}}})}function g(b){var I=5,d=a.getPad(b).html,L=d.getBoundingClientRect(),w={x:L.left,y:L.bottom+I};return w}function v(b){ue(b,{"dcr-replace":{group:"edit",className:"bpmn-icon-screw-wrench",title:"Change type",action:{click:function(I,d){var L=ue(g(d),{cursor:{x:I.x,y:I.y}});const w=We(d,"dcr:SubProcess")&&d.businessObject["multi-instance"];f.open(d,"dcr-object-popup",L,{title:w?void 0:"Marking:"})}}}})}function S(b){ue(b,{"dcr-replace":{group:"edit",className:"bpmn-icon-screw-wrench",title:"Change type of children",action:{click:function(I,d){var L=ue(g(d),{cursor:{x:I.x,y:I.y}});f.open(d,"dcr-nesting-popup",L,{title:"Marking:"})}}}})}function M(b){ue(b,{"dcr-replace":{group:"edit",className:"bpmn-icon-screw-wrench",title:"Change DCR Relation type",action:{click:function(I,d){var L=ue(g(d),{cursor:{x:I.x,y:I.y}});f.open(d,"dcr-link-popup",L,{title:"DCR Relation Types"})}}}})}function P(b,I){o.start(b,I)}function T(b){ue(b,{connect:{group:"connect",className:"bpmn-icon-connection",title:"Connect using DCR Relations",action:{click:P,dragstart:P}}})}function m(b){ue(b,{"append.append-task":x("dcr:Event","od-no-font-icon-object",r("Append new DCR Event"),{attrs:{included:!0,pending:!1,executed:!1}})})}function x(b,I,d,L){typeof d!="string"&&(L=d,d=r("Append {type}",{type:b.replace(/^bpmn:/,"")}));function w(G,Y){var q=i.createShape(ue({type:b},L));u.start(G,q,{source:Y})}var U=s?function(G,Y){var q=i.createShape(ue({type:b},L));s.append(Y,q)}:w;return{group:"model",className:I,title:d,action:{dragstart:w,click:U}}}};const FT={__depends__:[Am,RT,jr,hh,Mu],__init__:["contextPadProvider"],contextPadProvider:["type",ph]};function Pa(){}Pa.prototype.get=function(){return this._data};Pa.prototype.set=function(e){this._data=e};Pa.prototype.clear=function(){var e=this._data;return delete this._data,e};Pa.prototype.isEmpty=function(){return!this._data};const jT={clipboard:["type",Pa]};function dh(e){var t=this;this._lastMoveEvent=null;function n(r){t._lastMoveEvent=r}e.on("canvas.init",function(r){var o=t._svg=r.svg;o.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}dh.$inject=["eventBus"];dh.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||$T(0,0)};function $T(e,t){var n=document.createEvent("MouseEvent"),r=e,o=t,i=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,r,o,i,a,!1,!1,!1,!1,0,null),n}const Aa={__init__:["mouse"],mouse:["type",dh]};function Vn(e,t,n,r,o,i,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=r,this._eventBus=o,this._modeling=i,this._mouse=a,this._rules=s,o.on("copyPaste.copyElement",function(u){var f=u.descriptor,l=u.element,p=u.elements;f.priority=1,f.id=l.id;var y=_t(p,function(g){return g===l.parent});y&&(f.parent=l.parent.id),HT(l)&&(f.priority=2,f.host=l.host.id),St(l)&&(f.priority=3,f.source=l.source.id,f.target=l.target.id,f.waypoints=UT(l)),vn(l)&&(f.priority=4,f.labelTarget=l.labelTarget.id),ne(["x","y","width","height"],function(g){Ie(l[g])&&(f[g]=l[g])}),f.hidden=l.hidden,f.collapsed=l.collapsed}),o.on("copyPaste.pasteElements",function(u){var f=u.hints;ue(f,{createElementsBehavior:!1})})}Vn.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Vn.prototype.copy=function(e){var t,n;return ze(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(ze(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};Vn.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(t);if(e&&e.element&&e.point)return this._paste(r,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}};Vn.prototype._paste=function(e,t,n,r){ne(e,function(i){Ie(i.x)||(i.x=0),Ie(i.y)||(i.y=0)});var o=Ht(e);return ne(e,function(i){St(i)&&(i.waypoints=zt(i.waypoints,function(a){return{x:a.x-o.x-o.width/2,y:a.y-o.y-o.height/2}})),ue(i,{x:i.x-o.x-o.width/2,y:i.y-o.y-o.height/2})}),this._modeling.createElements(e,n,t,ue({},r))};Vn.prototype._createElements=function(e){var t=this,n=this._eventBus,r={},o=[];return ne(e,function(i,a){i=Ar(i,"priority"),ne(i,function(s){var u=ue({},Dr(s,["priority"]));r[s.parent]?u.parent=r[s.parent]:delete u.parent,n.fire("copyPaste.pasteElement",{cache:r,descriptor:u});var f;if(St(u)){u.source=r[s.source],u.target=r[s.target],f=r[s.id]=t.createConnection(u),o.push(f);return}if(vn(u)){u.labelTarget=r[u.labelTarget],f=r[s.id]=t.createLabel(u),o.push(f);return}u.host&&(u.host=r[u.host]),f=r[s.id]=t.createShape(u),o.push(f)})}),o};Vn.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Dr(e,["id"]));return t};Vn.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Dr(e,["id"]));return t};Vn.prototype.createShape=function(e){var t=this._elementFactory.createShape(Dr(e,["id"]));return t};Vn.prototype.hasRelations=function(e,t){var n,r,o;return!(St(e)&&(r=_t(t,ci({id:e.source.id})),o=_t(t,ci({id:e.target.id})),!r||!o)||vn(e)&&(n=_t(t,ci({id:e.labelTarget.id})),!n))};Vn.prototype.createTree=function(e){var t=this._rules,n=this,r={},o=[],i=Yy(e);function a(f,l){return t.allowed("element.copy",{element:f,elements:l})}function s(f,l){var p=_t(o,function(y){return f===y.element});if(!p){o.push({element:f,depth:l});return}p.depth<l&&(o=u(p,o),o.push({element:p.element,depth:l}))}function u(f,l){var p=l.indexOf(f);return p!==-1&&l.splice(p,1),l}return lu(i,function(f,l,p){if(vn(f))return;ne(f.labels,function(v){s(v,p)});function y(v){v&&v.length&&ne(v,function(S){ne(S.labels,function(M){s(M,p)}),s(S,p)})}ne([f.attachers,f.incoming,f.outgoing],y),s(f,p);var g=[];return f.children&&(g=f.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:f,children:g}),g}),e=zt(o,function(f){return f.element}),o=zt(o,function(f){return f.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:f.descriptor,element:f.element,elements:e}),f}),o=Ar(o,function(f){return f.descriptor.priority}),e=zt(o,function(f){return f.element}),ne(o,function(f){var l=f.depth;if(!n.hasRelations(f.element,e)){_g(f.element,e);return}if(!a(f.element,e)){_g(f.element,e);return}r[l]||(r[l]=[]),r[l].push(f.descriptor)}),r};function HT(e){return!!e.host}function UT(e){return zt(e.waypoints,function(t){return t=mg(t),t.original&&(t.original=mg(t.original)),t})}function mg(e){return ue({},e)}function _g(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const qT={__depends__:[jT,Mu,Aa,fr],__init__:["copyPaste"],copyPaste:["type",Vn]};function Sf(e,t,n){ze(n)||(n=[n]),ne(n,function(r){zi(e[r])||(t[r]=e[r])})}function WT(e,t){ze(t)||(t=[t]),ne(t,function(n){e[n]&&delete e[n]})}var zT=750;function Im(e,t,n){t.on("copyPaste.copyElement",zT,function(i){var a=i.descriptor,s=i.element,u=a.oldBusinessObject=dn(s);if(a.type=s.type,Sf(u,a,"name"),a.di={},Sf(u.di,a.di,["fill","stroke"]),xg(a))return a});var r;function o(i,a){var s=dn(i);i.default&&(r[i.default]={element:s,property:"default"}),r=Dr(r,Pn(r,function(u,f,l){var p=f.element,y=f.property;return l===i.id&&(p[y]=s,u.push(i.id)),u},[]))}t.on("copyPaste.pasteElements",function(){r={}}),t.on("copyPaste.pasteElement",function(i){var a=i.cache,s=i.descriptor,u=s.oldBusinessObject,f;if(xg(s)){s.businessObject=dn(a[s.labelTarget]);return}f=e.create(u.$type),s.businessObject=n.copyElement(u,f),o(s),Sf(s,f,["color","name"]),WT(s,"oldBusinessObject")})}Im.$inject=["dcrFactory","eventBus","moddleCopy"];function xg(e){return!!e.labelTarget}var VT=["boardElements"];function Ru(e,t,n){this._dcrFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(r){var o=r.propertyNames;if(!(!o||!o.length))return Ar(o,function(i){return i==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(r){var o=r.parent,i=Vt(o)&&o.$descriptor,a=r.propertyName;if(a&&VT.indexOf(a)!==-1||a&&i&&!_t(i.properties,ci({name:a})))return!1})}Ru.$inject=["eventBus","dcrFactory","moddle"];Ru.prototype.copyElement=function(e,t,n){var r=this;n&&!ze(n)&&(n=[n]),n=n||sl(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t});return o===!1||(ze(o)&&(n=o),ne(n,function(i){var a;ma(e,i)&&(a=e.get(i));var s=r.copyProperty(a,t,i),u=r._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:s,propertyName:i});u!==!1&&$t(s)&&t.set(i,s)})),t};Ru.prototype.copyProperty=function(e,t,n){var r=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n});if(o!==!1){if(o)return Vt(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var i=this._moddle.getPropertyDescriptor(t,n);if(!(i.isId||i.isReference))return ze(e)?Pn(e,function(a,s){return o=r.copyProperty(s,t,n),o?(o.$parent=t,a.concat(o)):a},[]):Vt(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=r._dcrFactory.create(e.$type),o.$parent=t,o=r.copyElement(e,o),o):e}};function sl(e,t){return Pn(e.properties,function(n,r){return t&&r.default?n:n.concat(r.name)},[])}const Lm={__depends__:[qT],__init__:["odCopyPaste","moddleCopy"],odCopyPaste:["type",Im],moddleCopy:["type",Ru]};var km="is not a registered action",XT="is already registered";function In(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}In.$inject=["eventBus","injector"];In.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),r=e.get("selection",!1),o=e.get("zoomScroll",!1),i=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),u=e.get("keyboardMove",!1),f=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),i&&r&&this.register("copy",function(){var l=r.get();if(l.length)return i.copy(l)}),i&&this.register("paste",function(){i.paste()}),o&&this.register("stepZoom",function(l){o.stepZoom(l.value)}),a&&this.register("zoom",function(l){a.zoom(l.value)}),n&&r&&s&&this.register("removeSelection",function(){var l=r.get();if(l.length){var p=s.allowed("elements.delete",{elements:l}),y;p!==!1&&(ze(p)?y=p:y=l,y.length&&n.removeElements(y.slice()))}}),u&&this.register("moveCanvas",function(l){u.moveCanvas(l)}),f&&this.register("moveSelection",function(l){f.moveSelection(l.direction,l.accelerated)})};In.prototype.trigger=function(e,t){if(!this._actions[e])throw gh(e,km);return this._actions[e](t)};In.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);ne(e,function(r,o){n._registerAction(o,r)})};In.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw gh(e,XT);this._actions[e]=t};In.prototype.unregister=function(e){if(!this.isRegistered(e))throw gh(e,km);this._actions[e]=void 0};In.prototype.getActions=function(){return Object.keys(this._actions)};In.prototype.isRegistered=function(e){return!!this._actions[e]};function gh(e,t){return new Error(e+" "+t)}const GT={__init__:["editorActions"],editorActions:["type",In]};function Pu(e){e.invoke(In,this)}ct(Pu,In);Pu.$inject=["injector"];Pu.prototype._registerDefaultActions=function(e){In.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),r=e.get("selection",!1),o=e.get("spaceTool",!1),i=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),u=e.get("distributeElements",!1),f=e.get("alignElements",!1),l=e.get("directEditing",!1),p=e.get("searchPad",!1),y=e.get("modeling",!1);t&&n&&r&&this._registerAction("selectElements",function(){var g=t.getRootElement(),v=n.filter(function(S){return S!==g});return r.select(v),v}),o&&this._registerAction("spaceTool",function(){o.toggle()}),i&&this._registerAction("lassoTool",function(){i.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),r&&u&&this._registerAction("distributeElements",function(g){var v=r.get(),S=g.type;v.length&&u.trigger(v,S)}),r&&f&&this._registerAction("alignElements",function(g){var v=r.get(),S=g.type;v.length&&f.trigger(v,S)}),r&&l&&this._registerAction("directEditing",function(){var g=r.get();g.length&&l.activate(g[0])}),p&&this._registerAction("find",function(){p.toggle()}),t&&y&&this._registerAction("moveToOrigin",function(){var g=t.getRootElement(),v,S=n.filter(function(M){return M!==g});v=Ht(S),y.moveElements(S,{x:-v.x,y:-v.y},g)})};const YT={__depends__:[GT],editorActions:["type",Pu]};function Bm(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context;n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left"})}Bm.$inject=["eventBus"];var Ds=10;function Cf(e,t,n){return n||(n="round"),Math[n](e/t)*t}var KT=1200,ZT=800;function bi(e,t,n){var r=!n||n.active!==!1;this._eventBus=t;var o=this;t.on("diagram.init",ZT,function(){o.setActive(r)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],KT,function(i){var a=i.originalEvent;if(!(!o.active||a&&gn(a))){var s=i.context,u=s.gridSnappingContext;u||(u=s.gridSnappingContext={}),["x","y"].forEach(function(f){var l={},p=JT(i,f,e);p&&(l.offset=p);var y=QT(i,f);y&&ue(l,y),pa(i,f)||o.snapEvent(i,f,l)})}})}bi.prototype.snapEvent=function(e,t,n){var r=this.snapValue(e[t],n);hn(e,t,r)};bi.prototype.getGridSpacing=function(){return Ds};bi.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=Cf(e,Ds);var r,o;return t&&t.min&&(r=t.min,Ie(r)&&(r=Cf(r+n,Ds,"ceil"),e=Math.max(e,r))),t&&t.max&&(o=t.max,Ie(o)&&(o=Cf(o+n,Ds,"floor"),e=Math.min(e,o))),e-=n,e};bi.prototype.isActive=function(){return this.active};bi.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};bi.prototype.toggleActive=function(){this.setActive(!this.active)};bi.$inject=["elementRegistry","eventBus","config.gridSnapping"];function QT(e,t){var n=e.context,r=n.createConstraints,o=n.resizeConstraints||{},i=n.gridSnappingContext,a=i.snapConstraints;if(a&&a[t])return a[t];a||(a=i.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;r&&(Ns(t)?(a.x.min=r.left,a.x.max=r.right):(a.y.min=r.top,a.y.max=r.bottom));var u=o.min,f=o.max;return u&&(Ns(t)?Eg(s)?a.x.max=u.left:a.x.min=u.right:wg(s)?a.y.max=u.top:a.y.min=u.bottom),f&&(Ns(t)?Eg(s)?a.x.min=f.left:a.x.max=f.right:wg(s)?a.y.min=f.top:a.y.max=f.bottom),a[t]}function JT(e,t,n){var r=e.context,o=e.shape,i=r.gridSnappingContext,a=i.snapLocation,s=i.snapOffset;return s&&Ie(s[t])||(s||(s=i.snapOffset={}),Ie(s[t])||(s[t]=0),!o)||(n.get(o.id)||(Ns(t)?s[t]+=o[t]+o.width/2:s[t]+=o[t]+o.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=o.width/2:/right/.test(a)&&(s[t]+=o.width/2):/top/.test(a)?s[t]-=o.height/2:/bottom/.test(a)&&(s[t]+=o.height/2)),s[t]}function Ns(e){return e==="x"}function wg(e){return e.indexOf("n")!==-1}function Eg(e){return e.indexOf("w")!==-1}var eS=1e3;function rt(e){this._eventBus=e}rt.$inject=["eventBus"];function tS(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}rt.prototype.on=function(e,t,n,r,o,i){if((Wt(t)||Ie(t))&&(i=o,o=r,r=n,n=t,t=null),Wt(n)&&(i=o,o=r,r=n,n=eS),Vt(o)&&(i=o,o=!1),!Wt(r))throw new Error("handlerFn must be a function");ze(e)||(e=[e]);var a=this._eventBus;ne(e,function(s){var u=["commandStack",s,t].filter(function(f){return f}).join(".");a.on(u,n,o?tS(r,i):r,i)})};rt.prototype.canExecute=Ur("canExecute");rt.prototype.preExecute=Ur("preExecute");rt.prototype.preExecuted=Ur("preExecuted");rt.prototype.execute=Ur("execute");rt.prototype.executed=Ur("executed");rt.prototype.postExecute=Ur("postExecute");rt.prototype.postExecuted=Ur("postExecuted");rt.prototype.revert=Ur("revert");rt.prototype.reverted=Ur("reverted");function Ur(e){return function(n,r,o,i,a){(Wt(n)||Ie(n))&&(a=i,i=o,o=r,r=n,n=null),this.on(n,e,r,o,i,a)}}function Zi(e,t){rt.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(r){var o=r.context,i=o.hints||{},a=i.autoResize;if(a){var s=o.shape,u=o.newBounds;Rn(a)?o.newBounds=n.snapComplex(u,a):o.newBounds=n.snapSimple(s,u)}})}Zi.$inject=["eventBus","gridSnapping","modeling"];ct(Zi,rt);Zi.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Zi.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Zi.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,r=/w/.test(t),o=/e/.test(t),i={};return i.width=n.snapValue(e.width,{min:e.width}),o&&(r?(i.x=n.snapValue(e.x,{max:e.x}),i.width+=n.snapValue(e.x-i.x,{min:e.x-i.x})):e.x=e.x+e.width-i.width),ue(e,i),e};Zi.prototype.snapVertically=function(e,t){var n=this._gridSnapping,r=/n/.test(t),o=/s/.test(t),i={};return i.height=n.snapValue(e.height,{min:e.height}),r&&(o?(i.y=n.snapValue(e.y,{max:e.y}),i.height+=n.snapValue(e.y-i.y,{min:e.y-i.y})):e.y=e.y+e.height-i.height),ue(e,i),e};var nS=2e3;function Fm(e,t){e.on(["spaceTool.move","spaceTool.end"],nS,function(n){var r=n.context;if(r.initialized){var o=r.axis,i;o==="x"?(i=t.snapValue(n.dx),n.x=n.x+i-n.dx,n.dx=i):(i=t.snapValue(n.dy),n.y=n.y+i-n.dy,n.dy=i)}})}Fm.$inject=["eventBus","gridSnapping"];const rS={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Zi],gridSnappingSpaceToolBehavior:["type",Fm]},iS={__depends__:[rS],__init__:["gridSnapping"],gridSnapping:["type",bi]};var oS=10,jm=50,aS=250;function sS(e,t,n,r){for(var o;o=cS(e,n,t);)n=r(t,n,o);return n}function uS(e){return function(t,n,r){var o={x:n.x,y:n.y};return["x","y"].forEach(function(i){var a=e[i];if(a){var s=i==="x"?"width":"height",u=a.margin,f=a.minDistance;u<0?o[i]=Math.min(r[i]+u-t[s]/2,n[i]-f+u):o[i]=Math.max(r[i]+r[s]+u+t[s]/2,n[i]+f+u)}}),o}}function cS(e,t,n){var r={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},o=lS(e);return _t(o,function(i){if(i===n)return!1;var a=An(i,r,oS);return a==="intersect"})}function fS(e,t){t||(t={});function n(v){return v.source===e?1:-1}var r=t.defaultDistance||jm,o=t.direction||"e",i=t.filter,a=t.getWeight||n,s=t.maxDistance||aS,u=t.reference||"start";i||(i=dS);function f(v,S){return o==="n"?u==="start"?Ye(v).top-Ye(S).bottom:u==="center"?Ye(v).top-nt(S).y:Ye(v).top-Ye(S).top:o==="w"?u==="start"?Ye(v).left-Ye(S).right:u==="center"?Ye(v).left-nt(S).x:Ye(v).left-Ye(S).left:o==="s"?u==="start"?Ye(S).top-Ye(v).bottom:u==="center"?nt(S).y-Ye(v).bottom:Ye(S).bottom-Ye(v).bottom:u==="start"?Ye(S).left-Ye(v).right:u==="center"?nt(S).x-Ye(v).right:Ye(S).right-Ye(v).right}var l=e.incoming.filter(i).map(function(v){var S=a(v),M=S<0?f(v.source,e):f(e,v.source);return{id:v.source.id,distance:M,weight:S}}),p=e.outgoing.filter(i).map(function(v){var S=a(v),M=S>0?f(e,v.target):f(v.target,e);return{id:v.target.id,distance:M,weight:S}}),y=l.concat(p).reduce(function(v,S){return v[S.id+"__weight_"+S.weight]=S,v},{}),g=Pn(y,function(v,S){var M=S.distance,P=S.weight;return M<0||M>s||(v[String(M)]||(v[String(M)]=0),v[String(M)]+=1*P,(!v.distance||v[v.distance]<v[String(M)])&&(v.distance=M)),v},{});return g.distance||r}function lS(e){var t=Mf(e);return e.host&&(t=t.concat(Mf(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,r){return n.concat(Mf(r))},[]))),t}function Mf(e){return pS(e).concat(hS(e))}function hS(e){return e.incoming.map(function(t){return t.source})}function pS(e){return e.outgoing.map(function(t){return t.target})}function dS(){return!0}function $m(e,t){if(We(t,"dcr:Event"))return gS(e,t)}function gS(e,t){var n=Ye(e),r=nt(e),o=fS(e,{filter:function(l){return We(l,"dcr:Relation")}}),i=30,a=80,s="left",u={x:n.right+o+t.width/2,y:r.y+yS(s,a)},f={y:{margin:i,minDistance:a}};return sS(e,t,u,uS(f))}function yS(e,t){return e.indexOf("top")!=-1?-1*t:e.indexOf("bottom")!=-1?t:0}var vS=2e3;function Hm(e,t){e.on("autoPlace",vS,function(n){var r=n.source,o=nt(r),i=n.shape,a=$m(r,i);return["x","y"].forEach(function(s){var u={};a[s]!==o[s]&&(a[s]>o[s]?u.min=a[s]:u.max=a[s],a[s]=t.snapValue(a[s],u))}),a})}Hm.$inject=["eventBus","gridSnapping"];var mS=3e3;function Au(e,t,n){rt.call(this,e),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],mS,function(o){var i=o.context,a=i.connection,s=i.hints||{},u=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||_S(u)&&n.updateWaypoints(a,r.snapMiddleSegments(u))})}Au.$inject=["eventBus","gridSnapping","modeling"];ct(Au,rt);Au.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var r=1;r<e.length-2;r++)n=ES(t,e[r],e[r+1]),e[r]=n[0],e[r+1]=n[1];return e};function _S(e){return e.length>3}function xS(e){return e==="h"}function wS(e){return e==="v"}function ES(e,t,n){var r=Sr(t,n),o={};return xS(r)&&(o.y=e.snapValue(t.y)),wS(r)&&(o.x=e.snapValue(t.x)),("x"in o||"y"in o)&&(t=ue({},t,o),n=ue({},n,o)),[t,n]}const bS={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",Hm],gridSnappingLayoutConnectionBehavior:["type",Au]},TS={__depends__:[iS,bS],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",Bm]};function Ou(e){e.invoke(Ro,this)}ct(Ou,Ro);Ou.$inject=["injector"];Ou.prototype.registerBindings=function(e,t){Ro.prototype.registerBindings.call(this,e,t);function n(r,o){t.isRegistered(r)&&e.addListener(o)}n("selectElements",function(r){var o=r.keyEvent;if(e.isKey(["a","A"],o)&&e.isCmd(o))return t.trigger("selectElements"),!0}),n("find",function(r){var o=r.keyEvent;if(e.isKey(["f","F"],o)&&e.isCmd(o))return t.trigger("find"),!0}),n("spaceTool",function(r){var o=r.keyEvent;if(!e.hasModifier(o)&&e.isKey(["s","S"],o))return t.trigger("spaceTool"),!0}),n("lassoTool",function(r){var o=r.keyEvent;if(!e.hasModifier(o)&&e.isKey(["l","L"],o))return t.trigger("lassoTool"),!0}),n("handTool",function(r){var o=r.keyEvent;if(!e.hasModifier(o)&&e.isKey(["h","H"],o))return t.trigger("handTool"),!0}),n("directEditing",function(r){var o=r.keyEvent;if(!e.hasModifier(o)&&e.isKey(["e","E"],o))return t.trigger("directEditing"),!0})};const SS={__depends__:[oh],__init__:["keyboardBindings"],keyboardBindings:["type",Ou]};var CS=100;function Um(e,t,n){e.on("autoPlace",CS,function(r){var o=r.shape,i=r.source;return MS(i,o)}),e.on("autoPlace.end",function(r){n.scrollToElement(r.shape)}),this.append=function(r,o,i){e.fire("autoPlace.start",{source:r,shape:o});var a=e.fire("autoPlace",{source:r,shape:o}),s=t.appendShape(r,o,a,r.parent,i);return e.fire("autoPlace.end",{source:r,shape:s}),s}}Um.$inject=["eventBus","modeling","canvas"];function MS(e,t,n){n||(n={});var r=n.defaultDistance||jm,o=nt(e),i=Ye(e);return{x:i.right+r+t.width/2,y:o.y}}function qm(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}qm.$inject=["eventBus","selection"];const RS={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",Um],autoPlaceSelectionBehavior:["type",qm]};function Wm(e){e.on("autoPlace",function(t){var n=t.shape,r=t.source;return $m(r,n)})}Wm.$inject=["eventBus"];const PS={__depends__:[RS],__init__:["odAutoPlace"],odAutoPlace:["type",Wm]};var AS={moveSpeed:1,moveSpeedAccelerated:10},OS=1500,bg="left",Tg="up",Sg="right",Cg="down",DS={ArrowLeft:bg,Left:bg,ArrowUp:Tg,Up:Tg,ArrowRight:Sg,Right:Sg,ArrowDown:Cg,Down:Cg},NS={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function zm(e,t,n,r,o){var i=this;this._config=ue({},AS,e||{}),t.addListener(OS,function(a){var s=a.keyEvent,u=DS[s.key];if(u&&!t.isCmd(s)){var f=t.isShift(s);return i.moveSelection(u,f),!0}}),this.moveSelection=function(a,s){var u=o.get();if(u.length){var f=this._config[s?"moveSpeedAccelerated":"moveSpeed"],l=NS[a](f),p=r.allowed("elements.move",{shapes:u});p&&n.moveElements(u,l)}}}zm.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const IS={__depends__:[oh,jr],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",zm]};function Vm(e,t,n,r){e.on("element.changed",function(o){var i=o.element;(i.parent||i===t.getRootElement())&&(o.gfx=n.getGraphics(i)),o.gfx&&e.fire(Zy(i)+".changed",o)}),e.on("elements.changed",function(o){var i=o.elements;i.forEach(function(a){e.fire("element.changed",{element:a})}),r.updateContainments(i)}),e.on("shape.changed",function(o){r.update("shape",o.element,o.gfx)}),e.on("connection.changed",function(o){r.update("connection",o.element,o.gfx)})}Vm.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Xm={__init__:["changeSupport"],changeSupport:["type",Vm]};var Ys=Math.max,Ks=Math.min,LS=20;function kS(e,t,n){var r=n.x,o=n.y,i={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(i.y=e.y+o,i.height=e.height-o):t.indexOf("s")!==-1&&(i.height=e.height+o),t.indexOf("e")!==-1?i.width=e.width+r:t.indexOf("w")!==-1&&(i.x=e.x+r,i.width=e.width-r),i}function ms(e,t,n){var r=t[e],o=n.min&&n.min[e],i=n.max&&n.max[e];return Ie(o)&&(r=(/top|left/.test(e)?Ks:Ys)(r,o)),Ie(i)&&(r=(/top|left/.test(e)?Ys:Ks)(r,i)),r}function BS(e,t){if(!t)return e;var n=Ye(e);return nv({top:ms("top",n,t),right:ms("right",n,t),bottom:ms("bottom",n,t),left:ms("left",n,t)})}function FS(e,t,n,r){var o=Ye(t),i={top:/n/.test(e)?o.bottom-n.height:o.top,left:/w/.test(e)?o.right-n.width:o.left,bottom:/s/.test(e)?o.top+n.height:o.bottom,right:/e/.test(e)?o.left+n.width:o.right},a=r?Ye(r):i,s={top:Ks(i.top,a.top),left:Ks(i.left,a.left),bottom:Ys(i.bottom,a.bottom),right:Ys(i.right,a.right)};return nv(s)}function Jo(e,t){return typeof e<"u"?e:LS}function jS(e,t){var n,r,o,i;return typeof t=="object"?(n=Jo(t.left),r=Jo(t.right),o=Jo(t.top),i=Jo(t.bottom)):n=r=o=i=Jo(t),{x:e.x-n,y:e.y-o,width:e.width+n+r,height:e.height+o+i}}function $S(e){return!(e.waypoints||e.type==="label")}function HS(e,t){var n;if(e.length===void 0?n=Dt(e.children,$S):n=e,n.length)return jS(Ht(n),t)}var Mg=10;function Oa(e,t,n,r){this._dragging=r,this._rules=t;var o=this;function i(u,f){var l=u.shape,p=u.direction,y=u.resizeConstraints,g;u.delta=f,g=kS(l,p,f),u.newBounds=BS(g,y),u.canExecute=o.canResize(u)}function a(u){var f=u.resizeConstraints,l=u.minBounds;f===void 0&&(l===void 0&&(l=o.computeMinResizeBox(u)),u.resizeConstraints={min:Ye(l)})}function s(u){var f=u.shape,l=u.canExecute,p=u.newBounds;if(l){if(p=J1(p),!US(f,p))return;n.resizeShape(f,p)}}e.on("resize.start",function(u){a(u.context)}),e.on("resize.move",function(u){var f={x:u.dx,y:u.dy};i(u.context,f)}),e.on("resize.end",function(u){s(u.context)})}Oa.prototype.canResize=function(e){var t=this._rules,n=Or(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};Oa.prototype.activate=function(e,t,n){var r=this._dragging,o,i;if(typeof n=="string"&&(n={direction:n}),o=ue({shape:t},n),i=o.direction,!i)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");r.init(e,Gm(t,i),"resize",{autoActivate:!0,cursor:qS(i),data:{shape:t,context:o}})};Oa.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,r,o;return r=e.minDimensions||{width:Mg,height:Mg},o=HS(t,e.childrenBoxPadding),FS(n,t,r,o)};Oa.$inject=["eventBus","rules","modeling","dragging"];function US(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function Gm(e,t){var n=nt(e),r=Ye(e),o={x:n.x,y:n.y};return t.indexOf("n")!==-1?o.y=r.top:t.indexOf("s")!==-1&&(o.y=r.bottom),t.indexOf("e")!==-1?o.x=r.right:t.indexOf("w")!==-1&&(o.x=r.left),o}function qS(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var Rg="djs-resizing",Pg="resize-not-ok",WS=500;function Ym(e,t,n){function r(i){var a=i.shape,s=i.newBounds,u=i.frame;u||(u=i.frame=n.addFrame(a,t.getActiveLayer()),t.addMarker(a,Rg)),s.width>5&&xe(u,{x:s.x,width:s.width}),s.height>5&&xe(u,{y:s.y,height:s.height}),i.canExecute?Ke(u).remove(Pg):Ke(u).add(Pg)}function o(i){var a=i.shape,s=i.frame;s&&Tt(i.frame),t.removeMarker(a,Rg)}e.on("resize.move",WS,function(i){r(i.context)}),e.on("resize.cleanup",function(i){o(i.context)})}Ym.$inject=["eventBus","canvas","previewSupport"];var _s=-6,xs=8,ws=20,ea="djs-resizer",zS=["n","w","s","e","nw","ne","se","sw"];function Ti(e,t,n,r){this._resize=r,this._canvas=t;var o=this;e.on("selection.changed",function(i){var a=i.newSelection;o.removeResizers(),a.length===1&&ne(a,en(o.addResizer,o))}),e.on("shape.changed",function(i){var a=i.element;n.isSelected(a)&&(o.removeResizers(),o.addResizer(a))})}Ti.prototype.makeDraggable=function(e,t,n){var r=this._resize;function o(i){wi(i)&&r.activate(i,e,n)}De.bind(t,"mousedown",o),De.bind(t,"touchstart",o)};Ti.prototype._createResizer=function(e,t,n,r){var o=this._getResizersParent(),i=VS(r),a=Pe("g");Ke(a).add(ea),Ke(a).add(ea+"-"+e.id),Ke(a).add(ea+"-"+r),ke(o,a);var s=Pe("rect");xe(s,{x:-xs/2+i.x,y:-xs/2+i.y,width:xs,height:xs}),Ke(s).add(ea+"-visual"),ke(a,s);var u=Pe("rect");return xe(u,{x:-ws/2+i.x,y:-ws/2+i.y,width:ws,height:ws}),Ke(u).add(ea+"-hit"),ke(a,u),Ex(a,t,n),a};Ti.prototype.createResizer=function(e,t){var n=Gm(e,t),r=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,r,t)};Ti.prototype.addResizer=function(e){var t=this;St(e)||!this._resize.canResize({shape:e})||ne(zS,function(n){t.createResizer(e,n)})};Ti.prototype.removeResizers=function(){var e=this._getResizersParent();uu(e)};Ti.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};Ti.$inject=["eventBus","canvas","selection","resize"];function VS(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-_s:e.indexOf("w")!==-1&&(t.x=_s),e.indexOf("s")!==-1?t.y=-_s:e.indexOf("n")!==-1&&(t.y=_s),t}const Km={__depends__:[fr,$r,Ra],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Oa],resizePreview:["type",Ym],resizeHandles:["type",Ti]};function Da(e,t,n,r,o,i,a,s){this._dcrFactory=t,this._canvas=n,this._modeling=o,this._textRenderer=a,r.registerProvider(this);function u(l){var p=n.zoom(),y=(l.element.y+30-n._cachedViewbox.y)*p,g=l.originalEvent.offsetY;g>=y?l.element.businessObject.labelAttribute="description":l.element.businessObject.labelAttribute="role"}e.on("element.dblclick",function(l){Ft(l.element,["dcr:SubProcess"])?l.element.businessObject.labelAttribute="description":u(l),f(l.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],function(l){r.isActive()&&r.complete()}),e.on(["commandStack.changed"],function(l){r.isActive()&&r.cancel()}),e.on("directEditing.activate",function(l){i.removeResizers()}),e.on("create.end",500,function(l){var p=l.context,y=p.shape,g=l.context.canExecute,v=l.isTouch;v||g&&(p.hints&&p.hints.createElementsBehavior===!1||f(y,!1))}),e.on("autoPlace.end",500,function(l){f(l.shape,!1)});function f(l,p){s.canHaveLabel(l)&&(p||Ft(l,["dcr:TextBox","dcr:Event"]))&&r.activate(l)}}Da.$inject=["eventBus","dcrFactory","canvas","directEditing","modeling","resizeHandles","textRenderer","dcrRules"];Da.prototype.activate=function(e){var t=vi(e);if(t!==void 0){var n={text:t},r=this.getEditingBBox(e);ue(n,r);var o={};return Ft(e,["dcr:TextBox"])&&ue(o,{centerVertically:!0}),ue(n,{options:o}),n}};Da.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,r=t.getAbsoluteBBox(n),o={x:r.x+r.width/2,y:r.y+r.height/2},i={x:r.x,y:r.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),u=this._textRenderer.getExternalStyle(),f=u.fontSize*a,l=u.lineHeight,p=s.fontSize*a,y=s.lineHeight,g={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};Ft(e,["dcr:Nesting","dcr:Event","dcr:SubProcess"])&&(ue(i,{width:r.width,height:r.height}),ue(g,{fontSize:p+"px",lineHeight:y,paddingTop:5*a+"px",paddingBottom:5*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}),Ft(e,["dcr:Event","dcr:Nesting"])&&(e.businessObject.labelAttribute==="description"?ue(i,{y:r.y+30*a,height:r.height-30*a}):ue(i,{height:30*a})));var v=90*a,S=7*a,M=4*a;return n.labelTarget&&(ue(i,{width:v,height:r.height+S+M,x:o.x-v/2,y:r.y-S}),ue(g,{fontSize:f+"px",lineHeight:l,paddingTop:S+"px",paddingBottom:M+"px"})),{bounds:i,style:g}};Da.prototype.update=function(e,t){XS(t)&&(t=null),this._modeling.updateLabel(e,t)};function XS(e){return!e||!e.trim()}var Ag="djs-element-hidden";function Zm(e,t){var n;e.on("directEditing.activate",function(r){var o=r.active;n=o.element.label||o.element,n.labelTarget&&t.addMarker(n,Ag)}),e.on(["directEditing.complete","directEditing.cancel"],function(r){var o=r.active;o&&t.removeMarker(o.element.label||o.element,Ag),n=void 0})}Zm.$inject=["eventBus","canvas"];const GS={__depends__:[Xm,Km,Am],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Da],labelEditingPreview:["type",Zm]};var yh=["top","bottom","left","right"],Es=10;function vh(e,t){rt.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(o){var i=o.context,a=i.connection,s=a.source,u=a.target,f=i.hints||{};f.createElementsBehavior!==!1&&(n(s),n(u))}),this.postExecuted(["label.create"],function(o){var i=o.context,a=i.shape,s=i.hints||{};s.createElementsBehavior!==!1&&n(a.labelTarget)}),this.postExecuted(["elements.create"],function(o){var i=o.context,a=i.elements,s=i.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(u){n(u)})});function n(o){if(eh(o)){var i=ZS(o);i&&r(o,i)}}function r(o,i){var a=nt(o),s=o.label,u=nt(s);if(s.parent){var f=Ye(o),l;switch(i){case"top":l={x:a.x,y:f.top-Es-s.height/2};break;case"left":l={x:f.left-Es-s.width/2,y:a.y};break;case"bottom":l={x:a.x,y:f.bottom+Es+s.height/2};break;case"right":l={x:f.right+Es+s.width/2,y:a.y};break}var p=or(l,u);t.moveShape(s,p)}}}ct(vh,rt);vh.$inject=["eventBus","modeling"];function YS(e){var t=e.host,n=nt(e),r=An(n,t),o;r.indexOf("-")>=0?o=r.split("-"):o=[r];var i=yh.filter(function(a){return o.indexOf(a)===-1});return i}function KS(e){var t=nt(e),n=[].concat(e.incoming.map(function(r){return r.waypoints[r.waypoints.length-2]}),e.outgoing.map(function(r){return r.waypoints[1]})).map(function(r){return Qm(t,r)});return n}function ZS(e){var t=nt(e.label),n=nt(e),r=Qm(n,t);if(QS(r)){var o=KS(e);if(e.host){var i=YS(e);o=o.concat(i)}var a=yh.filter(function(s){return o.indexOf(s)===-1});if(a.indexOf(r)===-1)return a[0]}}function Qm(e,t){return An(t,e,5)}function QS(e){return yh.indexOf(e)!==-1}function mh(e){rt.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,r=t.shape;t.position||(t.position={x:n.x+n.width+80+r.width/2,y:n.y+n.height/2})},!0)}ct(mh,rt);mh.$inject=["eventBus"];var JS=1500;function Jm(e,t,n){t.on(["create.hover","create.move","create.end","shape.move.hover","shape.move.move","shape.move.end"],JS,function(r){var o=r.context,i=o.shape||r.shape,a=r.hover,s=n.getRootElement();a!==s&&i.labelTarget&&(r.hover=s,r.hoverGfx=e.getGraphics(r.hover))})}Jm.$inject=["elementRegistry","eventBus","canvas"];function Og(e,t,n,r){var o,i,a,s,u;return o=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y),o==0?null:(i=e.y-n.y,a=e.x-n.x,u=(r.x-n.x)*i-(r.y-n.y)*a,s=u/o,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function e0(e){function t(r,o,i){var a={x:i.x,y:i.y-50},s={x:i.x-50,y:i.y},u=Og(r,o,i,a),f=Og(r,o,i,s),l;u&&f?Dg(u,i)>Dg(f,i)?l=f:l=u:l=u||f,r.original=l}function n(r){var o=r.waypoints;t(o[0],o[1],nt(r.source)),t(o[o.length-1],o[o.length-2],nt(r.target))}e.on("boardElement.added",function(r){var o=r.element;o.waypoints&&n(o)})}e0.$inject=["eventBus"];function Dg(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function t0(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Ng(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function eC(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function tC(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],o=r[0].n*t[0]+r[1].n*t[1],i=r[0].lambda*t[0]+r[1].lambda*t[1];return-o/i}function n0(e,t){var n=t[0],r=t[1],o={x:r.x-n.x,y:r.y-n.y},i=tC([n.x,n.y],[o.x,o.y],[e.x,e.y]);return{x:n.x+i*o.x,y:n.y+i*o.y}}function nC(e,t){var n=n0(e,t),r={x:n.x-e.x,y:n.y-e.y};return t0(r)}function Zs(e,t){return t0({x:e.x-t.x,y:e.y-t.y})}var r0=Math.sqrt,i0=Math.min,rC=Math.max,Ig=Math.abs;function Lg(e){return Math.pow(e,2)}function ta(e,t){return r0(Lg(e.x-t.x)+Lg(e.y-t.y))}function iC(e,t){var n=0,r,o,i,a,s,u,f,l,p,y,g;for(n=0;n<t.length-1;n++){if(r=t[n],o=t[n+1],Bg(r,o)?f=[r]:(i=ta(e,r),a=ta(e,o),u=i0(i,a),f=oC(r,o,e,u)),f.length<1)throw new Error("expected between [1, 2] circle -> line intersections");f.length===1&&(l={type:"bendpoint",position:f[0],segmentIndex:n,bendpointIndex:Bg(r,f[0])?n:n+1}),f.length===2&&(s=sC(f[0],f[1]),l={type:"segment",position:s,segmentIndex:n,relativeLocation:ta(r,s)/ta(r,o)}),p=ta(l.position,e),(!g||y>p)&&(g=l,y=p)}return g}function oC(e,t,n,r){var o=t.x-e.x,i=t.y-e.y,a=n.x-e.x,s=n.y-e.y,u=o*o+i*i,f=o*a+i*s,l=a*a+s*s-r*r,p=f/u,y=l/u,g=p*p-y;if(g<0&&g>-1e-6&&(g=0),g<0)return[];var v=r0(g),S=-p+v,M=-p-v,P={x:e.x-o*S,y:e.y-i*S};if(g===0)return[P];var T={x:e.x-o*M,y:e.y-i*M};return[P,T].filter(function(m){return aC(m,e,t)})}function aC(e,t,n){return kg(e.x,t.x,n.x)&&kg(e.y,t.y,n.y)}function kg(e,t,n){return e>=i0(t,n)-Qs&&e<=rC(t,n)+Qs}function sC(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var Qs=.1;function Bg(e,t){return Ig(e.x-t.x)<=Qs&&Ig(e.y-t.y)<=Qs}function uC(e,t,n,r){var o=n.segmentIndex,i=t.length-e.length;if(r.segmentMove){var a=r.segmentMove.segmentStartIndex,s=r.segmentMove.newSegmentStartIndex;return o===a?s:o>=s?o+i<s?s:o+i:o}if(r.bendpointMove){var u=r.bendpointMove.insert,f=r.bendpointMove.bendpointIndex,l;if(i===0)return o;if(o>=f&&(l=u?o+1:o-1),o<f&&(l=o,u&&n.type!=="bendpoint"&&f-1===o)){var p=o0(t,f);p<n.relativeLocation&&l++}return l}return i===0?o:r.connectionStart?o===0?0:null:r.connectionEnd&&o===e.length-2?t.length-2:null}function cC(e,t,n,r){var o=0,i=0,a=fC(e),s=iC(a,n),u=s.segmentIndex,f=uC(n,t,s,r);if(f===null)return{x:o,y:i};if(f<0||f>t.length-2)return{x:o,y:i};var l=Fg(n,u),p=Fg(t,f),y=s.position,g=hC(l,y),v=lC(l,p);if(s.type==="bendpoint"){var S=t.length-n.length,M=s.bendpointIndex,P=n[M];if(t.indexOf(P)!==-1)return{x:o,y:i};if(S===0){var T=t[M];return{x:T.x-s.position.x,y:T.y-s.position.y}}S<0&&M!==0&&M<n.length-1&&(g=o0(n,M))}var m={x:(p[1].x-p[0].x)*g+p[0].x,y:(p[1].y-p[0].y)*g+p[0].y},x=eC({x:a.x-y.x,y:a.y-y.y},v);return o=m.x+x.x-a.x,i=m.y+x.y-a.y,fi({x:o,y:i})}function o0(e,t){var n=Zs(e[t-1],e[t]),r=Zs(e[t],e[t+1]),o=n/(n+r);return o}function fC(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function lC(e,t){var n=Ng(e),r=Ng(t);return r-n}function Fg(e,t){return[e[t],e[t+1]]}function hC(e,t){var n=Zs(e[0],e[1]),r=Zs(e[0],t);return n===0?0:r/n}function Na(e,t,n){var r=aa(t),o=aa(n),i=or(e,r),a={x:i.x*(n.width/t.width),y:i.y*(n.height/t.height)};return fi({x:o.x+a.x,y:o.y+a.y})}function jg(e,t,n){var r=aa(e),o=aa(t),i=aa(n),a=or(e,r),s=or(r,o),u=pC(r,t,n);if(u)return u;var f={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},l={x:i.x+f.x,y:i.y+f.y};return fi({x:l.x+a.x-e.x,y:l.y+a.y-e.y})}function pC(e,t,n){var r=Ye(t),o=Ye(n);if(dC(r,o))return null;var i=An(t,e),a,s,u;if(i==="top")a={x:0,y:o.bottom-r.bottom};else if(i==="bottom")a={x:0,y:o.top-r.top};else if(i==="right")a={x:o.left-r.left,y:0};else if(i==="left")a={x:o.right-r.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},u=An(n,s),u!==i?null:a}function dC(e,t){return gC(e,t)||yC(e,t)}function gC(e,t){return e.right!==t.right&&e.left!==t.left}function yC(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var vC={width:90,height:20},$g="name";function _h(e,t,n,r){rt.call(this,e),this.postExecute("element.updateProperties",function(i){var a=i.context,s=a.element,u=a.properties;$g in u&&t.updateLabel(s,u[$g])}),this.postExecute(["shape.create","connection.create"],function(i){var a=i.context,s=a.hints||{};if(s.createElementsBehavior!==!1){var u=a.shape||a.connection,f=u.businessObject;if(!(Mn(u)||!el())&&vi(u)){var l=th(u),p=r.getExternalLabelBounds(vC,vi(u));t.createLabel(u,l,{id:f.id+"_label",businessObject:f,width:p.width,height:p.height})}}}),this.postExecute("shape.delete",function(i){var a=i.context,s=a.labelTarget,u=a.hints||{};s&&u.unsetLabel!==!1&&t.updateLabel(s,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(i){var a=i.context,s=a.shape,u,f;s.labelTarget&&We(s.labelTarget||s,"dcr:BoardElement")&&(u=s.businessObject,f=u.di,f.label||(f.label=n.create("dcrDi:OdLabel",{bounds:n.create("dc:Bounds")})),ue(f.label.bounds,{x:s.x,y:s.y,width:s.width,height:s.height}))});function o(i){var a=i.context,s=a.connection,u=s.label,f=ue({},a.hints),l=a.newWaypoints||s.waypoints,p=a.oldWaypoints;return typeof f.startChanged>"u"&&(f.startChanged=!!f.connectionStart),typeof f.endChanged>"u"&&(f.endChanged=!!f.connectionEnd),cC(u,l,p,f)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var a=i.context,s=a.hints||{};if(s.labelBehavior!==!1){var u=a.connection,f=u.label,l;!f||!f.parent||(l=o(i),t.moveShape(f,l))}}),this.postExecute(["shape.replace"],function(i){var a=i.context,s=a.newShape,u=a.oldShape,f=dn(s);f&&el()&&u.label&&s.label&&(s.label.x=u.label.x,s.label.y=u.label.y)}),this.postExecute("shape.resize",function(i){var a=i.context,s=a.shape,u=a.newBounds,f=a.oldBounds;if(eh(s)){var l=s.label,p=nt(l),y=xC(f),g=_C(p,y),v=mC(g,f,u);t.moveShape(l,v)}})}ct(_h,rt);_h.$inject=["eventBus","modeling","dcrFactory","textRenderer"];function mC(e,t,n){var r=Na(e,t,n);return fi(or(r,e))}function _C(e,t){if(t.length){var n=wC(e,t);return n0(e,n)}}function xC(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function wC(e,t){var n=t.map(function(o){return{line:o,distance:nC(e,o)}}),r=Ar(n,"distance");return r[0].line}function xh(e,t,n,r){t.invoke(rt,this),this.preExecute("shape.delete",function(o){var i=o.context,a=i.shape,s=a.businessObject;Mn(a)||r.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var o=e.getRootElement(),i=o.businessObject;n.ids.unclaim(i.id)})}ct(xh,rt);xh.$inject=["canvas","injector","moddle","modeling"];function wh(e,t,n){rt.call(this,e),this.postExecute("element.updateLabel",function(r){var o=r.element,i=r.newLabel;We(o,"dcr:TextBox")&&Hg(i)&&t.removeElements([o])},!0),e.on("directEditing.cancel",1001,function(r){var o=r.active,i=o.element;We(i,"dcr:TextBox")&&Hg(dn(i).name)&&(n._active=!1,t.removeElements([i]))})}ct(wh,rt);wh.$inject=["eventBus","modeling","directEditing"];function Hg(e){return!e||e===""}const EC={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","fixHoverBehavior","importDockingFix","labelBehavior","unclaimIdBehavior","emptyTextBoxBehavior"],adaptiveLabelPositioningBehavior:["type",vh],appendBehavior:["type",mh],fixHoverBehavior:["type",Jm],importDockingFix:["type",e0],labelBehavior:["type",_h],unclaimIdBehavior:["type",xh],emptyTextBoxBehavior:["type",wh]};function Oo(e){rt.call(this,e),this.init()}Oo.$inject=["eventBus"];ct(Oo,rt);Oo.prototype.addRule=function(e,t,n){var r=this;typeof e=="string"&&(e=[e]),e.forEach(function(o){r.canExecute(o,t,function(i,a,s){return n(i)},!0)})};Oo.prototype.init=function(){};function un(e){Oo.call(this,e)}ct(un,Oo);un.$inject=["eventBus"];un.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return TC(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,r=e.hints||{},o=r.targetParent;o&&(n.parent=o);try{return fl(t,n)}finally{o&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){e.connection;var t=e.source,n=e.target;return fl(t,n)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return c0(t,n)}),this.addRule("elements.create",function(e){var t=e.elements;e.position;var n=e.target;return _a(t,function(r){return r.host?Is(r,r.host):ll(r,n,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes;return e.position,Is(n,t)||u0(n,t)}),this.addRule("shape.create",function(e){return ll(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return Is(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){return e.element,e.elements,f0()})};un.prototype.canConnect=fl;un.prototype.canMove=u0;un.prototype.canAttach=Is;un.prototype.canDrop=Eh;un.prototype.canCreate=ll;un.prototype.canReplace=CC;un.prototype.canResize=c0;un.prototype.canCopy=f0;un.prototype.isLinkAllowed=MC;un.prototype.canHaveLabel=RC;function ul(e,t){return e===t}function bC(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function a0(e,t){var n=bC(t);return n.indexOf(e)!==-1}function s0(e){return We(e,"dcr:Group")&&!e.labelTarget}function TC(e){return cl(e)?null:We(e,"dcr:Event")}function cl(e){return!e||Mn(e)}function fl(e,t){return cl(e)||cl(t)?null:SC(e,t)?e===t&&We(e,"dcr:SubProcess")||We(t,"dcr:SubProcess")&&t.businessObject["multi-instance"]&&!Ft(e,["dcr:Event","dcr:Nesting"])?!1:We(t,"dcr:SubProcess")&&t.businessObject["multi-instance"]?{type:"dcr:Relation",attrs:{type:"spawn"}}:e===t?{type:"dcr:Relation",attrs:{type:"exclude"}}:{type:"dcr:Relation",attrs:{type:"condition"}}:!1}function SC(e,t){return Ft(e,["dcr:Event","dcr:Nesting","dcr:SubProcess"])&&Ft(t,["dcr:Event","dcr:Nesting","dcr:SubProcess"])&&!a0(e,t)&&!(We(e,"dcr:SubProcess")&&e.businessObject["multi-instance"])}function Eh(e,t){return Mn(e)||s0(e)||(Ft(e,["dcr:Event","dcr:Nesting","dcr:Relation"])||We(e,"dcr:SubProcess")&&!e.businessObject["multi-instance"])&&Ft(t,["dcr:Nesting","dcr:SubProcess"])&&!(We(e,"dcr:Nesting")&&We(t,"dcr:SubProcess")&&!t.businessObject["multi-instance"])?!0:We(e,"dcr:BoardElement")&&We(t,"dcr:DcrGraph")}function CC(e,t){return t}function Is(e,t){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var n=e[0];return Mn(n)||We(t,"dcr:BoardElement")?!1:"attach"}function u0(e,t){return t?e.every(function(n){return Eh(n,t)}):!0}function ll(e,t,n,r){return t?Mn(e)||s0(e)?!0:ul(n,t)||n&&a0(n,t)?!1:Eh(e,t):!1}function c0(e,t){return Ft(e,["dcr:Nesting","dcr:SubProcess"])?!t||t.width>=50&&t.height>=50:!1}function f0(e,t){return!0}function MC(e,t){return!(t==="exclude"&&ul(e.source,e.target)&&!We(e.target,"dcr:Event")||t==="spawn"&&(!We(e.target,"dcr:SubProcess")||!e.target.businessObject["multi-instance"]||!Ft(e.source,["dcr:Event","dcr:Nesting"]))||We(e.target,"dcr:SubProcess")&&e.target.businessObject["multi-instance"]&&t!=="spawn"||ul(e.source,e.target)&&t!=="exclude")}function RC(e){return!Ft(e,["dcr:Relation"])}const PC={__depends__:[fr],__init__:["dcrRules"],dcrRules:["type",un]};var AC=2e3;function l0(e,t){e.on("saveXML.start",AC,n);function n(){var r=t.getRootElement(),o=dn(r).di,i,a;i=wl([r],!1),i=Dt(i,function(s){return s!==r&&!s.labelTarget}),a=zt(i,Jl),o.set("planeElement",a)}}l0.$inject=["eventBus","canvas"];const OC={__init__:["dcrDiOrdering"],dcrDiOrdering:["type",l0]};function Du(e){rt.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var r=n.context,o=r.shape||r.connection,i=r.parent,a=t.getOrdering(o,i);a&&(a.parent!==void 0&&(r.parent=a.parent),r.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var r=n.context,o=r.shape||r.connection,i=r.newParent||o.parent,a=t.getOrdering(o,i);a&&(a.parent!==void 0&&(r.newParent=a.parent),r.newParentIndex=a.index)})}Du.prototype.getOrdering=function(e,t){return null};ct(Du,rt);function bh(e,t,n){Du.call(this,e);var r=[{type:"dcr:Event",order:{level:5}},{type:"dcr:Relation",order:{level:3}}];function o(s){if(s.labelTarget)return{level:10};var u=_t(r,function(f){return Ft(s,[f.type])});return u&&u.order||{level:1}}function i(s){var u=s.order;if(u||(s.order=u=o(s)),!u)throw new Error("no order for <"+s.id+">");return u}function a(s,u,f){for(var l=u;l&&!Ft(l,f);)l=l.parent;if(!l)throw new Error(n("no parent for {element} in {parent}",{element:s.id,parent:u.id}));return l}this.getOrdering=function(s,u){if(s.labelTarget)return{parent:t.getRootElement(),index:-1};var f=i(s);f.containers&&(u=a(s,u,f.containers));var l=u.children.indexOf(s),p=Iy(u.children,function(y){return!s.labelTarget&&y.labelTarget?!1:f.level<i(y).level});return p!==-1&&l!==-1&&l<p&&(p-=1),{index:p,parent:u}}}bh.$inject=["eventBus","canvas","translate"];ct(bh,Du);const DC={__depends__:[Eu],__init__:["odOrderingProvider"],odOrderingProvider:["type",bh]};var Ug=Math.round;function Th(e,t){this._modeling=e,this._eventBus=t}Th.$inject=["modeling","eventBus"];Th.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var r=this._modeling,o=this._eventBus;o.fire("replace.start",{element:e,attrs:t,hints:n});var i=t.width||e.width,a=t.height||e.height,s=t.x||e.x,u=t.y||e.y,f=Ug(s+i/2),l=Ug(u+a/2),p=r.replaceShape(e,ue({},t,{x:f,y:l,width:i,height:a}),n);return o.fire("replace.end",{element:e,newElement:p,hints:n}),p};function h0(e,t){t.on("replace.end",500,function(n){const{newElement:r,hints:o={}}=n;o.select!==!1&&e.select(r)})}h0.$inject=["selection","eventBus"];const NC={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",h0],replace:["type",Th]};function IC(e,t,n){ze(n)||(n=[n]),ne(n,function(r){zi(e[r])||(t[r]=e[r])})}var LC=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function p0(e,t,n,r,o,i){function a(s,u,f){f=f||{};var l=u.type,p=s.businessObject,y=e.create(l),g={type:l,businessObject:y};g.di={},IC(s.di,g.di,["fill","stroke","background-color","border-color","color"]);var v=sl(p.$descriptor),S=sl(y.$descriptor,!0),M=kC(v,S);ue(y,Or(u,LC));var P=M;return y=n.copyElement(p,y,P),y.name=p.name,g=o.replaceElement(s,g,f),f.select!==!1&&i.select(g),g}this.replaceElement=a}p0.$inject=["dcrFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];function kC(e,t){return e.filter(function(n){return t.indexOf(n)!==-1})}const d0={__depends__:[Lm,NC,jr],dcrReplace:["type",p0]};function vt(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}vt.$inject=["eventBus","injector"];vt.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};vt.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let o=this._fire(e,"canExecute",n);if(o===void 0){if(!r)return!1;r.canExecute&&(o=r.canExecute(t))}return o};vt.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};vt.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};vt.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};vt.prototype.register=function(e,t){this._setHandler(e,t)};vt.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};vt.prototype.canUndo=function(){return!!this._getUndoAction()};vt.prototype.canRedo=function(){return!!this._getRedoAction()};vt.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};vt.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};vt.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};vt.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let o;n=this._eventBus.createEvent(n);for(const i of r)if(o=this._eventBus.fire("commandStack."+i,n),n.cancelBubble)break;return o};vt.prototype._createId=function(){return this._uid++};vt.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};vt.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,o=this._getHandler(n);if(!o)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),o.preExecute&&o.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),o.execute&&this._markDirty(o.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),o.postExecute&&o.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()};vt.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)};vt.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:ky("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};vt.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=ze(e)?e:[e],t.dirty=t.dirty.concat(e))};vt.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};vt.prototype._revertedAction=function(e){this._stackIdx--};vt.prototype._getHandler=function(e){return this._handlerMap[e]};vt.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const BC={commandStack:["type",vt]};var FC=new rh("tt");function jC(e){var t=Bt('<div class="djs-tooltip-container" />');return Nr(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function $C(e,t,n){Nr(e,{left:t+"px",top:n+"px"})}function Sh(e,t){e.style.display=t===!1?"none":""}var g0="djs-tooltip",Rf="."+g0;function nn(e,t){this._eventBus=e,this._canvas=t,this._ids=FC,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=jC(t.getContainer());var n=this;Cr.bind(this._tooltipRoot,Rf,"mousedown",function(r){r.stopPropagation()}),Cr.bind(this._tooltipRoot,Rf,"mouseover",function(r){n.trigger("mouseover",r)}),Cr.bind(this._tooltipRoot,Rf,"mouseout",function(r){n.trigger("mouseout",r)}),this._init()}nn.$inject=["eventBus","canvas"];nn.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=ue({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};nn.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,r=this.get(pn(n,"data-tooltip-id"));r&&(e==="mouseover"&&r.timeout&&this.clearTimeout(r),e==="mouseout"&&r.timeout&&(r.timeout=1e3,this.setTimeout(r)))};nn.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};nn.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};nn.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};nn.prototype.remove=function(e){var t=this.get(e);t&&(ur(t.html),ur(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};nn.prototype.show=function(){Sh(this._tooltipRoot)};nn.prototype.hide=function(){Sh(this._tooltipRoot,!1)};nn.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,r="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=r,this._tooltipRoot.style["-ms-transform"]=r};nn.prototype._addTooltip=function(e){var t=e.id,n=e.html,r,o=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),Rn(n)&&(n=Bt(n)),r=Bt('<div data-tooltip-id="'+t+'" class="'+g0+'">'),Nr(r,{position:"absolute"}),r.appendChild(n),e.type&&yn(r).add("djs-tooltip-"+e.type),e.className&&yn(r).add(e.className),e.htmlContainer=r,o.appendChild(r),this._tooltips[t]=e,this._updateTooltip(e)};nn.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;$C(n,t.x,t.y)};nn.prototype._updateTooltipVisibilty=function(e){ne(this._tooltips,function(t){var n=t.show,r=t.htmlContainer,o=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(o=!1),Sh(r,o))})};nn.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const HC={__init__:["tooltips"],tooltips:["type",nn]};function hi(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var UC=250,qg=1400;function Ch(e,t,n){rt.call(this,t);var r=e.get("movePreview",!1);t.on("shape.move.start",qg,function(o){var i=o.context,a=i.shapes,s=i.validatedShapes;i.shapes=Wg(a),i.validatedShapes=Wg(s)}),r&&t.on("shape.move.start",UC,function(o){var i=o.context,a=i.shapes,s=[];ne(a,function(u){ne(u.labels,function(f){!f.hidden&&i.shapes.indexOf(f)===-1&&s.push(f),u.labelTarget&&s.push(u)})}),ne(s,function(u){r.makeDraggable(i,u,!0)})}),this.preExecuted("elements.move",qg,function(o){var i=o.context,a=i.closure,s=a.enclosedElements,u=[];ne(s,function(f){ne(f.labels,function(l){s[l.id]||u.push(l)})}),a.addAll(u)}),this.preExecute(["connection.delete","shape.delete"],function(o){var i=o.context,a=i.connection||i.shape;hi(a.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(o){var i=o.context,a=i.shape,s=a.labelTarget;s&&(i.labelTargetIndex=El(s.labels,a),i.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(o){var i=o.context,a=i.shape,s=i.labelTarget,u=i.labelTargetIndex;s&&(Wn(s.labels,a,u),a.labelTarget=s)})}ct(Ch,rt);Ch.$inject=["injector","eventBus","modeling"];function Wg(e){return Dt(e,function(t){return e.indexOf(t.labelTarget)===-1})}const qC={__init__:["labelSupport"],labelSupport:["type",Ch]};var WC=251,zg=1401,Vg="attach-ok";function Mh(e,t,n,r,o){rt.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",zg,function(a){var s=a.context,u=s.shapes,f=s.validatedShapes;s.shapes=zC(u),s.validatedShapes=VC(f)}),i&&t.on("shape.move.start",WC,function(a){var s=a.context,u=s.shapes,f=hl(u);ne(f,function(l){i.makeDraggable(s,l,!0),ne(l.labels,function(p){i.makeDraggable(s,p,!0)})})}),i&&t.on("shape.move.start",function(a){var s=a.context,u=s.shapes;if(u.length===1){var f=u[0],l=f.host;l&&(n.addMarker(l,Vg),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(l,Vg)}))}}),this.preExecuted("elements.move",zg,function(a){var s=a.context,u=s.closure,f=s.shapes,l=hl(f);ne(l,function(p){u.add(p,u.topLevel[p.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,u=s.shapes,f=s.newHost,l;f&&u.length!==1||(f?l=u:l=Dt(u,function(p){var y=p.host;return XC(p)&&!GC(u,y)}),ne(l,function(p){o.updateAttachment(p,f)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;ne(s,function(u){ne(u.attachers,function(f){ne(f.outgoing.slice(),function(l){var p=r.allowed("connection.reconnect",{connection:l,source:l.source,target:l.target});p||o.removeConnection(l)}),ne(f.incoming.slice(),function(l){var p=r.allowed("connection.reconnect",{connection:l,source:l.source,target:l.target});p||o.removeConnection(l)})})})}),this.postExecute("shape.create",function(a){var s=a.context,u=s.shape,f=s.host;f&&o.updateAttachment(u,f)}),this.postExecute("shape.replace",function(a){var s=a.context,u=s.oldShape,f=s.newShape;hi(u.attachers,function(l){var p=r.allowed("elements.move",{target:f,shapes:[l]});p==="attach"?o.updateAttachment(l,f):o.removeShape(l)}),f.attachers.length&&ne(f.attachers,function(l){var p=jg(l,u,f);o.moveShape(l,p,l.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,u=s.shape,f=s.oldBounds,l=s.newBounds,p=u.attachers,y=s.hints||{};y.attachSupport!==!1&&ne(p,function(g){var v=jg(g,f,l);o.moveShape(g,v,g.parent),ne(g.labels,function(S){o.moveShape(S,v,S.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;hi(s.attachers,function(u){o.removeShape(u)}),s.host&&o.updateAttachment(s,null)})}ct(Mh,rt);Mh.$inject=["injector","eventBus","canvas","rules","modeling"];function hl(e){return Bf(zt(e,function(t){return t.attachers||[]}))}function zC(e){var t=hl(e);return U_("id",e,t)}function VC(e){var t=xa(e,"id");return Dt(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function XC(e){return!!e.host}function GC(e,t){return e.indexOf(t)!==-1}const YC={__depends__:[fr],__init__:["attachSupport"],attachSupport:["type",Mh]};var KC=250;function Qi(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}Qi.$inject=["eventBus","dragging"];Qi.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Qi.prototype.isActive=function(e){return e&&this._active===e};Qi.prototype.length=function(e){return this._tools.length};Qi.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Qi.prototype.bindEvents=function(e,t){var n=this._eventBus,r=this._dragging,o=[];n.on(t.tool+".init",function(i){var a=i.context;if(!a.reactivate&&this.isActive(e)){this.setActive(null),r.cancel();return}this.setActive(e)},this),ne(t,function(i){o.push(i+".ended"),o.push(i+".canceled")}),n.on(o,KC,function(i){this._active&&(ZC(i)||this.setActive(null))},this)};function ZC(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Ir(t,'.group[data-group="tools"]')}const Nu={__depends__:[$r],__init__:["toolManager"],toolManager:["type",Qi]};function QC(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function JC(e,t){var n=[];return ne(e.concat(t),function(r){var o=r.incoming,i=r.outgoing;ne(o.concat(i),function(a){var s=a.source,u=a.target;(na(e,s)||na(e,u)||na(t,s)||na(t,u))&&(na(n,a)||n.push(a))})}),n}function na(e,t){return e.indexOf(t)!==-1}function eM(e,t,n){var r=e.x,o=e.y,i=e.width,a=e.height,s=n.x,u=n.y;switch(t){case"n":return{x:r,y:o+u,width:i,height:a-u};case"s":return{x:r,y:o,width:i,height:a+u};case"w":return{x:r+s,y:o,width:i-s,height:a};case"e":return{x:r,y:o,width:i+s,height:a};default:throw new Error("unknown direction: "+t)}}var Pf=Math.abs,tM=Math.round,Tr={x:"width",y:"height"},y0="crosshair",ii={n:"top",w:"left",s:"bottom",e:"right"},nM=1500,bs={n:"s",w:"e",s:"n",e:"w"},Ts=20;function qr(e,t,n,r,o,i,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=r,this._rules=o,this._toolManager=i,this._mouse=a;var s=this;i.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(u){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(u.originalEvent)})}),n.on("spaceTool.move",nM,function(u){var f=u.context,l=f.initialized;l||(l=f.initialized=s.init(u,f)),l&&Gg(u)}),n.on("spaceTool.end",function(u){var f=u.context,l=f.axis,p=f.direction,y=f.movingShapes,g=f.resizingShapes,v=f.start;if(f.initialized){Gg(u);var S={x:0,y:0};S[l]=tM(u["d"+l]),s.makeSpace(y,g,S,p,v),n.once("spaceTool.ended",function(M){s.activateSelection(M.originalEvent,!0,!0)})}})}qr.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];qr.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:y0,data:{context:{reactivate:n}},trapClick:!1})};qr.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:y0,data:{context:{}}})};qr.prototype.makeSpace=function(e,t,n,r,o){return this._modeling.createSpace(e,t,n,r,o)};qr.prototype.init=function(e,t){var n=Pf(e.dx)>Pf(e.dy)?"x":"y",r=e["d"+n],o=e[n]-r;if(Pf(r)<5)return!1;r<0&&(r*=-1),la(e)&&(r*=-1);var i=QC(n,r),a=this._canvas.getRootElement(),s=wl(a,!0),u=this.calculateAdjustments(s,n,r,o),f=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:i,shapes:u.resizingShapes,start:o}),l=rM(u,n,i,o,f);return ue(t,u,{axis:n,direction:i,spaceToolConstraints:l,start:o}),Cu("resize-"+(n==="x"?"ew":"ns")),!0};qr.prototype.calculateAdjustments=function(e,t,n,r){var o=this._rules,i=[],a=[],s=[],u=[];function f(y){i.includes(y)||i.push(y);var g=y.label;g&&!i.includes(g)&&i.push(g)}function l(y){a.includes(y)||a.push(y)}ne(e,function(y){if(!(!y.parent||vn(y))){if(St(y)){u.push(y);return}var g=y[t],v=g+y[Tr[t]];if(iM(y)&&(n>0&&nt(y)[t]>r||n<0&&nt(y)[t]<r)){s.push(y);return}if(n>0&&g>r||n<0&&v<r){f(y);return}if(g<r&&v>r&&o.allowed("shape.resize",{shape:y})){l(y);return}}}),ne(i,function(y){var g=y.attachers;g&&ne(g,function(v){f(v)})});var p=i.concat(a);return ne(s,function(y){var g=y.host;Wi(p,g)&&f(y)}),p=i.concat(a),ne(u,function(y){var g=y.source,v=y.target,S=y.label;Wi(p,g)&&Wi(p,v)&&S&&f(S)}),{movingShapes:i,resizingShapes:a}};qr.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};qr.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function Xg(e){return{top:e.top-Ts,right:e.right+Ts,bottom:e.bottom+Ts,left:e.left-Ts}}function Gg(e){var t=e.context,n=t.spaceToolConstraints;if(n){var r,o;Ie(n.left)&&(r=Math.max(e.x,n.left),e.dx=e.dx+r-e.x,e.x=r),Ie(n.right)&&(r=Math.min(e.x,n.right),e.dx=e.dx+r-e.x,e.x=r),Ie(n.top)&&(o=Math.max(e.y,n.top),e.dy=e.dy+o-e.y,e.y=o),Ie(n.bottom)&&(o=Math.min(e.y,n.bottom),e.dy=e.dy+o-e.y,e.y=o)}}function rM(e,t,n,r,o){var i=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},u,f;return ne(a,function(l){var p=l.attachers,y=l.children,g=Ye(l),v=Dt(y,function(U){return!St(U)&&!vn(U)&&!Wi(i,U)&&!Wi(a,U)}),S=Dt(y,function(U){return!St(U)&&!vn(U)&&Wi(i,U)}),M,P,T,m=[],x=[],b,I,d,L;v.length&&(P=Xg(Ye(Ht(v))),M=r-g[ii[n]]+P[ii[n]],n==="n"?s.bottom=f=Ie(f)?Math.min(f,M):M:n==="w"?s.right=f=Ie(f)?Math.min(f,M):M:n==="s"?s.top=u=Ie(u)?Math.max(u,M):M:n==="e"&&(s.left=u=Ie(u)?Math.max(u,M):M)),S.length&&(T=Xg(Ye(Ht(S))),M=r-T[ii[bs[n]]]+g[ii[bs[n]]],n==="n"?s.bottom=f=Ie(f)?Math.min(f,M):M:n==="w"?s.right=f=Ie(f)?Math.min(f,M):M:n==="s"?s.top=u=Ie(u)?Math.max(u,M):M:n==="e"&&(s.left=u=Ie(u)?Math.max(u,M):M)),p&&p.length&&(p.forEach(function(U){Wi(i,U)?m.push(U):x.push(U)}),m.length&&(b=Ye(Ht(m.map(nt))),I=g[ii[bs[n]]]-(b[ii[bs[n]]]-r)),x.length&&(d=Ye(Ht(x.map(nt))),L=d[ii[n]]-(g[ii[n]]-r)),n==="n"?(M=Math.min(I||1/0,L||1/0),s.bottom=f=Ie(f)?Math.min(f,M):M):n==="w"?(M=Math.min(I||1/0,L||1/0),s.right=f=Ie(f)?Math.min(f,M):M):n==="s"?(M=Math.max(I||-1/0,L||-1/0),s.top=u=Ie(u)?Math.max(u,M):M):n==="e"&&(M=Math.max(I||-1/0,L||-1/0),s.left=u=Ie(u)?Math.max(u,M):M));var w=o&&o[l.id];w&&(n==="n"?(M=r+l[Tr[t]]-w[Tr[t]],s.bottom=f=Ie(f)?Math.min(f,M):M):n==="w"?(M=r+l[Tr[t]]-w[Tr[t]],s.right=f=Ie(f)?Math.min(f,M):M):n==="s"?(M=r-l[Tr[t]]+w[Tr[t]],s.top=u=Ie(u)?Math.max(u,M):M):n==="e"&&(M=r-l[Tr[t]]+w[Tr[t]],s.left=u=Ie(u)?Math.max(u,M):M))}),s}}function Wi(e,t){return e.indexOf(t)!==-1}function iM(e){return!!e.host}var Af="djs-dragging",Yg="djs-resizing",oM=250,Ss=Math.max;function v0(e,t,n,r,o){function i(a,s){ne(a,function(u){o.addDragger(u,s),n.addMarker(u,Af)})}e.on("spaceTool.selection.start",function(a){var s=n.getLayer("space"),u=a.context,f={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},l=Pe("g");xe(l,r.cls("djs-crosshair-group",["no-events"])),ke(s,l);var p=Pe("path");xe(p,"d",f.x),Ke(p).add("djs-crosshair"),ke(l,p);var y=Pe("path");xe(y,"d",f.y),Ke(y).add("djs-crosshair"),ke(l,y),u.crosshairGroup=l}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;Cn(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,u=s.crosshairGroup;u&&Tt(u)}),e.on("spaceTool.move",oM,function(a){var s=a.context,u=s.line,f=s.axis,l=s.movingShapes,p=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var y=n.getLayer("space");u=Pe("path"),xe(u,"d","M0,0 L0,0"),Ke(u).add("djs-crosshair"),ke(y,u),s.line=u;var g=Pe("g");xe(g,r.cls("djs-drag-group",["no-events"])),ke(n.getActiveLayer(),g),i(l,g);var v=s.movingConnections=t.filter(function(x){var b=!1;ne(l,function(w){ne(w.outgoing,function(U){x===U&&(b=!0)})});var I=!1;ne(l,function(w){ne(w.incoming,function(U){x===U&&(I=!0)})});var d=!1;ne(p,function(w){ne(w.outgoing,function(U){x===U&&(d=!0)})});var L=!1;return ne(p,function(w){ne(w.incoming,function(U){x===U&&(L=!0)})}),St(x)&&(b||d)&&(I||L)});i(v,g),s.dragGroup=g}if(!s.frameGroup){var S=Pe("g");xe(S,r.cls("djs-frame-group",["no-events"])),ke(n.getActiveLayer(),S);var M=[];ne(p,function(x){var b=o.addFrame(x,S),I=b.getBBox();M.push({element:b,initialBounds:I}),n.addMarker(x,Yg)}),s.frameGroup=S,s.frames=M}var P={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};xe(u,{d:P[f]});var T={x:"y",y:"x"},m={x:a.dx,y:a.dy};m[T[s.axis]]=0,Cn(s.dragGroup,m.x,m.y),ne(s.frames,function(x){var b=x.element,I=x.initialBounds,d,L;s.direction==="e"?xe(b,{width:Ss(I.width+m.x,5)}):(d=Ss(I.width-m.x,5),xe(b,{width:d,x:I.x+I.width-d})),s.direction==="s"?xe(b,{height:Ss(I.height+m.y,5)}):(L=Ss(I.height-m.y,5),xe(b,{height:L,y:I.y+I.height-L}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,u=s.movingShapes,f=s.movingConnections,l=s.resizingShapes,p=s.line,y=s.dragGroup,g=s.frameGroup;ne(u,function(v){n.removeMarker(v,Af)}),ne(f,function(v){n.removeMarker(v,Af)}),y&&(Tt(p),Tt(y)),ne(l,function(v){n.removeMarker(v,Yg)}),g&&Tt(g)})}v0.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const m0={__init__:["spaceToolPreview"],__depends__:[$r,fr,Nu,Ra,Aa],spaceTool:["type",qr],spaceToolPreview:["type",v0]};function Ln(e){this._model=e}Ln.$inject=["moddle"];Ln.prototype._needsId=function(e){return Ft(e,["dcr:BoardElement"])};Ln.prototype._ensureId=function(e){var t;We(e,"dcr:Event")?t="Event":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};Ln.prototype.create=function(e,t){var n=this._model.create(e,t||{});return e==="dcr:Event"&&(n.description=""),this._ensureId(n),n};Ln.prototype.createDiLabel=function(){return this.create("dcrDi:OdLabel",{bounds:this.createDiBounds()})};Ln.prototype.createDiShape=function(e,t,n){return this.create("dcrDi:DcrShape",ue({boardElement:e,bounds:this.createDiBounds(t)},n))};Ln.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};Ln.prototype.createDiEdge=function(e,t,n){return this.create("dcrDi:Relation",ue({boardElement:e},n))};Ln.prototype.createDiPlane=function(e){return this.create("dcrDi:DcrPlane",{boardElement:e})};Ln.prototype.createDiWaypoints=function(e){var t=this;return zt(e,function(n){return t.createDiWaypoint(n)})};Ln.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Or(e,["x","y"]))};function kn(e,t,n,r){rt.call(this,e),this._dcrFactory=t,this._translate=r;var o=this;function i(g){var v=g.context,S=v.hints||{},M;!v.cropped&&S.createElementsBehavior!==!1&&(M=v.connection,M.waypoints=n.getCroppedWaypoints(M),v.cropped=!0)}this.executed(["connection.layout","connection.create"],i),this.reverted(["connection.layout"],function(g){delete g.context.cropped});function a(g){var v=g.context;o.updateParent(v.shape||v.connection,v.oldParent)}function s(g){var v=g.context,S=v.shape||v.connection,M=v.parent||v.newParent;o.updateParent(S,M)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],tr(a)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],tr(s));function u(g){var v=g.context,S=v.oldRoot,M=S.children;ne(M,function(P){We(P,"dcr:BoardElement")&&o.updateParent(P)})}this.executed(["canvas.updateRoot"],u),this.reverted(["canvas.updateRoot"],u);function f(g){var v=g.context.shape;We(v,"dcr:BoardElement")&&o.updateBounds(v)}this.executed(["shape.move","shape.create","shape.resize"],tr(function(g){g.context.shape.type!=="label"&&f(g)})),this.reverted(["shape.move","shape.create","shape.resize"],tr(function(g){g.context.shape.type!=="label"&&f(g)})),e.on("shape.changed",function(g){g.element.type==="label"&&f({context:{shape:g.element}})});function l(g){o.updateConnection(g.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],tr(l)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],tr(l));function p(g){o.updateConnectionWaypoints(g.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],tr(p)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],tr(p));function y(g){o.updateAttachment(g.context)}this.executed(["element.updateAttachment"],tr(y)),this.reverted(["element.updateAttachment"],tr(y))}ct(kn,rt);kn.$inject=["eventBus","dcrFactory","connectionDocking","translate"];kn.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,r=t.host;n.attachedToRef=r&&r.businessObject};kn.prototype.updateParent=function(e,t){if(!Mn(e)){var n=e.parent,r=e.businessObject,o=n&&n.businessObject,i=o&&o.di;this.updateSemanticParent(r,o),this.updateDiParent(r.di,i)}};kn.prototype.updateBounds=function(e){var t=e.businessObject.di,n=Mn(e)?this._getLabel(t):t,r=n.bounds;r||(r=this._dcrFactory.createDiBounds(),n.set("bounds",r)),ue(r,{x:e.x,y:e.y,width:e.width,height:e.height})};kn.prototype.updateDiParent=function(e,t){if(t&&!We(t,"dcrDi:DcrPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(qn(n,e),e.$parent=null)}};kn.prototype.updateSemanticParent=function(e,t,n){var r,o=this._translate;if(e.$parent!==t){if(We(e,"dcr:BoardElement")&&(r="boardElements"),!r)throw new Error(o("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var i;if(e.$parent&&(i=e.$parent.get(r),qn(i,e)),t?(i=t.get(r),i.push(e),e.$parent=t):e.$parent=null,n){var a=n.get(r);qn(i,e),t&&(a||(a=[],t.set(r,a)),a.push(e))}}};kn.prototype.updateConnection=function(e){var t=e.connection,n=dn(t),r=dn(t.source),o=dn(t.target),i=We(n,"dcr:Relation");n.sourceRef!==r&&(i&&(qn(n.sourceRef&&n.sourceRef.get("links"),n),r&&r.get("links")&&r.get("links").push(n)),n.sourceRef=r),n.targetRef!==o&&(n.targetRef=o),this.updateConnectionWaypoints(t),this.updateDiConnection(n.di,r,o)};kn.prototype.updateConnectionWaypoints=function(e){e.businessObject.di.set("waypoint",this._dcrFactory.createDiWaypoints(e.waypoints))};kn.prototype.updateDiConnection=function(e,t,n){e.sourceElement&&e.sourceElement.boardElement!==t&&(e.sourceElement=t&&t.di),e.targetElement&&e.targetElement.boardElement!==n&&(e.targetElement=n&&n.di)};kn.prototype._getLabel=function(e){return e.label||(e.label=this._dcrFactory.createDiLabel()),e.label};function tr(e){return function(t){var n=t.context,r=n.shape||n.connection;We(r,"dcr:BoardElement")&&e(t)}}function Ji(e,t,n){kr.call(this),this._dcrFactory=e,this._moddle=t,this._translate=n}ct(Ji,kr);Ji.$inject=["dcrFactory","moddle","translate"];Ji.prototype.baseCreate=kr.prototype.create;Ji.prototype.create=function(e,t){return e==="label"?(t.di||this._dcrFactory.createDiLabel(),this.baseCreate(e,ue({type:"label"},Xs,t))):this.createOdElement(e,t)};Ji.prototype.createOdElement=function(e,t){var n,r=this._translate;t=t||{};var o=t.businessObject;if(!o){if(!t.type)throw new Error(r("no shape type specified"));o=this._dcrFactory.create(t.type)}if(o.di||(e==="root"?o.di=this._dcrFactory.createDiPlane(o,[],{id:o.id+"_di"}):e==="connection"?o.di=this._dcrFactory.createDiEdge(o,[],{id:o.id+"_di"}):o.di=this._dcrFactory.createDiShape(o,{},{id:o.id+"_di"})),t.di&&(ue(o.di,t.di),delete t.di),aM(o,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),n=this._getDefaultSize(o),t=ue({businessObject:o,id:o.id},n,t),t.attrs)for(let i of Object.keys(t.attrs))o.set(i,t.attrs[i]);return this.baseCreate(e,t)};Ji.prototype._getDefaultSize=function(e){return We(e,"dcr:Event")?{width:130,height:150}:We(e,"dcr:Nesting")?{width:400,height:280}:We(e,"dcr:SubProcess")?{width:400,height:280}:{width:100,height:80}};function aM(e,t,n){ne(n,function(r){t[r]!==void 0&&sM(e,t,r)})}function sM(e,t,n){e[n]=t[n],delete t[n]}function Iu(e,t){this._modeling=e,this._canvas=t}Iu.$inject=["modeling","canvas"];Iu.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,r=e.alignment;ne(n,function(o){var i={x:0,y:0};$t(r.left)?i.x=r.left-o.x:$t(r.right)?i.x=r.right-o.width-o.x:$t(r.center)?i.x=r.center-Math.round(o.width/2)-o.x:$t(r.top)?i.y=r.top-o.y:$t(r.bottom)?i.y=r.bottom-o.height-o.y:$t(r.middle)&&(i.y=r.middle-Math.round(o.height/2)-o.y),t.moveElements([o],i,o.parent)})};Iu.prototype.postExecute=function(e){};function Lu(e){this._modeling=e}Lu.$inject=["modeling"];Lu.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,r=e.shape,o=e.hints||{};r=e.shape=this._modeling.createShape(r,e.position,n,{attach:o.attach}),e.shape=r};Lu.prototype.postExecute=function(e){var t=e.hints||{};uM(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function uM(e,t){return au(e.outgoing,function(n){return n.target===t})}function ku(e,t){this._canvas=e,this._layouter=t}ku.$inject=["canvas","layouter"];ku.prototype.execute=function(e){var t=e.connection,n=e.source,r=e.target,o=e.parent,i=e.parentIndex,a=e.hints;if(!n||!r)throw new Error("source and target required");if(!o)throw new Error("parent required");return t.source=n,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,o,i),t};ku.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Cs=Math.round;function Rh(e){this._modeling=e}Rh.$inject=["modeling"];Rh.prototype.preExecute=function(e){var t=e.elements,n=e.parent,r=e.parentIndex,o=e.position,i=e.hints,a=this._modeling;ne(t,function(p){Ie(p.x)||(p.x=0),Ie(p.y)||(p.y=0)});var s=Dt(t,function(p){return!p.hidden}),u=Ht(s);ne(t,function(p){St(p)&&(p.waypoints=zt(p.waypoints,function(y){return{x:Cs(y.x-u.x-u.width/2+o.x),y:Cs(y.y-u.y-u.height/2+o.y)}})),ue(p,{x:Cs(p.x-u.x-u.width/2+o.x),y:Cs(p.y-u.y-u.height/2+o.y)})});var f=Yy(t),l={};ne(t,function(p){if(St(p)){l[p.id]=Ie(r)?a.createConnection(l[p.source.id],l[p.target.id],r,p,p.parent||n,i):a.createConnection(l[p.source.id],l[p.target.id],p,p.parent||n,i);return}var y=ue({},i);f.indexOf(p)===-1&&(y.autoResize=!1),vn(p)&&(y=Dr(y,["attach"])),l[p.id]=Ie(r)?a.createShape(p,Or(p,["x","y","width","height"]),p.parent||n,r,y):a.createShape(p,Or(p,["x","y","width","height"]),p.parent||n,y)}),e.elements=Ly(l)};var Kg=Math.round;function Si(e){this._canvas=e}Si.$inject=["canvas"];Si.prototype.execute=function(e){var t=e.shape,n=e.position,r=e.parent,o=e.parentIndex;if(!r)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?ue(t,n):ue(t,{x:n.x-Kg(t.width/2),y:n.y-Kg(t.height/2)}),this._canvas.addShape(t,r,o),t};Si.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function Ia(e){Si.call(this,e)}ct(Ia,Si);Ia.$inject=["canvas"];var cM=Si.prototype.execute;Ia.prototype.execute=function(e){var t=e.shape;return lM(t),t.labelTarget=e.labelTarget,cM.call(this,e)};var fM=Si.prototype.revert;Ia.prototype.revert=function(e){return e.shape.labelTarget=null,fM.call(this,e)};function lM(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function La(e,t){this._canvas=e,this._modeling=t}La.$inject=["canvas","modeling"];La.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;hi(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),hi(n.outgoing,function(r){t.removeConnection(r,{nested:!0})})};La.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=El(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};La.prototype.revert=function(e){var t=e.connection,n=e.parent,r=e.parentIndex;return t.source=e.source,t.target=e.target,Wn(n.children,t,r),this._canvas.addConnection(t,n),t};function Ph(e,t){this._modeling=e,this._elementRegistry=t}Ph.$inject=["modeling","elementRegistry"];Ph.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,r=e.elements;ne(r,function(o){n.get(o.id)&&(o.waypoints?t.removeConnection(o):t.removeShape(o))})};function ka(e,t){this._canvas=e,this._modeling=t}ka.$inject=["canvas","modeling"];ka.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;hi(n.incoming,function(r){t.removeConnection(r,{nested:!0})}),hi(n.outgoing,function(r){t.removeConnection(r,{nested:!0})}),hi(n.children,function(r){St(r)?t.removeConnection(r,{nested:!0}):t.removeShape(r,{nested:!0})})};ka.prototype.execute=function(e){var t=this._canvas,n=e.shape,r=n.parent;return e.oldParent=r,e.oldParentIndex=El(r.children,n),t.removeShape(n),n};ka.prototype.revert=function(e){var t=this._canvas,n=e.shape,r=e.oldParent,o=e.oldParentIndex;return Wn(r.children,n,o),t.addShape(n,r),n};function Bu(e){this._modeling=e}Bu.$inject=["modeling"];var Zg={x:"y",y:"x"};Bu.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,r=e.axis,o=e.dimension;function i(M,P){M.range.min=Math.min(P[r],M.range.min),M.range.max=Math.max(P[r]+P[o],M.range.max)}function a(M){return M[r]+M[o]/2}function s(M){return M.length-1}function u(M){return M.max-M.min}function f(M,P){var T={y:0};T[r]=M-a(P),T[r]&&(T[Zg[r]]=0,t.moveElements([P],T,P.parent))}var l=n[0],p=s(n),y=n[p],g,v,S=0;ne(n,function(M,P){var T,m,x;if(M.elements.length<2){P&&P!==n.length-1&&(i(M,M.elements[0]),S+=u(M.range));return}T=Ar(M.elements,r),m=T[0],P===p&&(m=T[s(T)]),x=a(m),M.range=null,ne(T,function(b){if(f(x,b),M.range===null){M.range={min:b[r],max:b[r]+b[o]};return}i(M,b)}),P&&P!==n.length-1&&(S+=u(M.range))}),v=Math.abs(y.range.min-l.range.max),g=Math.round((v-S)/(n.length-1)),!(g<n.length-1)&&ne(n,function(M,P){var T={},m;M===l||M===y||(m=n[P-1],M.range.max=0,ne(M.elements,function(x,b){T[Zg[r]]=0,T[r]=m.range.max-x[r]+g,M.range.min!==x[r]&&(T[r]+=x[r]-M.range.min),T[r]&&t.moveElements([x],T,x.parent),M.range.max=Math.max(x[r]+x[o],b?M.range.max:0)}))})};Bu.prototype.postExecute=function(e){};function Fu(e,t){this._layouter=e,this._canvas=t}Fu.$inject=["layouter","canvas"];Fu.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return ue(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};Fu.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function Ah(){}Ah.prototype.execute=function(e){var t=e.connection,n=e.delta,r=e.newParent||t.parent,o=e.newParentIndex,i=t.parent;return e.oldParent=i,e.oldParentIndex=qn(i.children,t),Wn(r.children,t,o),t.parent=r,ne(t.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),t};Ah.prototype.revert=function(e){var t=e.connection,n=t.parent,r=e.oldParent,o=e.oldParentIndex,i=e.delta;return qn(n.children,t),Wn(r.children,t,o),t.parent=r,ne(t.waypoints,function(a){a.x-=i.x,a.y-=i.y,a.original&&(a.original.x-=i.x,a.original.y-=i.y)}),t};function Oh(e,t,n){var r=ju(e),o=x0(r,t),i=r[0];return o.length?o[o.length-1]:Na(i.original||i,n,t)}function Dh(e,t,n){var r=ju(e),o=x0(r,t),i=r[r.length-1];return o.length?o[0]:Na(i.original||i,n,t)}function Nh(e,t,n){var r=ju(e),o=_0(t,n),i=r[0];return Na(i.original||i,o,t)}function Ih(e,t,n){var r=ju(e),o=_0(t,n),i=r[r.length-1];return Na(i.original||i,o,t)}function _0(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function ju(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function x0(e,t){var n=zt(e,pM);return Dt(n,function(r){return hM(r,t)})}function hM(e,t){return An(t,e,1)==="intersect"}function pM(e){return e.original||e}function Lh(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}Lh.prototype.add=function(e,t){return this.addAll([e],t)};Lh.prototype.addAll=function(e,t){var n=N1(e,!!t,this);return ue(this,n),this};function Ba(e){this._modeling=e}Ba.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Ba.prototype.moveClosure=function(e,t,n,r,o){var i=this._modeling,a=e.allShapes,s=e.allConnections,u=e.enclosedConnections,f=e.topLevel,l=!1;o&&o.parent===n&&(l=!0),ne(a,function(p){i.moveShape(p,t,f[p.id]&&!l&&n,{recurse:!1,layout:!1})}),ne(s,function(p){var y=!!a[p.source.id],g=!!a[p.target.id];u[p.id]&&y&&g?i.moveConnection(p,t,f[p.id]&&!l&&n):i.layoutConnection(p,{connectionStart:y&&Nh(p,p.source,t),connectionEnd:g&&Ih(p,p.target,t)})})};Ba.prototype.getClosure=function(e){return new Lh().addAll(e,!0)};function $u(e){this._helper=new Ba(e)}$u.$inject=["modeling"];$u.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};$u.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function eo(e){this._modeling=e,this._helper=new Ba(e)}eo.$inject=["modeling"];eo.prototype.execute=function(e){var t=e.shape,n=e.delta,r=e.newParent||t.parent,o=e.newParentIndex,i=t.parent;return e.oldBounds=Or(t,["x","y","width","height"]),e.oldParent=i,e.oldParentIndex=qn(i.children,t),Wn(r.children,t,o),ue(t,{parent:r,x:t.x+n.x,y:t.y+n.y}),t};eo.prototype.postExecute=function(e){var t=e.shape,n=e.delta,r=e.hints,o=this._modeling;r.layout!==!1&&(ne(t.incoming,function(i){o.layoutConnection(i,{connectionEnd:Ih(i,t,n)})}),ne(t.outgoing,function(i){o.layoutConnection(i,{connectionStart:Nh(i,t,n)})})),r.recurse!==!1&&this.moveChildren(e)};eo.prototype.revert=function(e){var t=e.shape,n=e.oldParent,r=e.oldParentIndex,o=e.delta;return Wn(n.children,t,r),ue(t,{parent:n,x:t.x-o.x,y:t.y-o.y}),t};eo.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};eo.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Fa(e){this._modeling=e}Fa.$inject=["modeling"];Fa.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,r=e.connection,o=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return ze(o)&&(e.oldWaypoints=r.waypoints,r.waypoints=o),t&&(e.oldSource=r.source,r.source=t),n&&(e.oldTarget=r.target,r.target=n),r};Fa.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,r=e.newTarget,o=e.dockingOrPoints,i=e.hints||{},a={};i.connectionStart&&(a.connectionStart=i.connectionStart),i.connectionEnd&&(a.connectionEnd=i.connectionEnd),i.layoutConnection!==!1&&(n&&(!r||i.docking==="source")&&(a.connectionStart=a.connectionStart||Qg(ze(o)?o[0]:o)),r&&(!n||i.docking==="target")&&(a.connectionEnd=a.connectionEnd||Qg(ze(o)?o[o.length-1]:o)),i.newWaypoints&&(a.waypoints=i.newWaypoints),this._modeling.layoutConnection(t,a))};Fa.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,r=e.oldWaypoints,o=e.connection;return t&&(o.source=t),n&&(o.target=n),r&&(o.waypoints=r),o};function Qg(e){return e.original||e}function Wr(e,t){this._modeling=e,this._rules=t}Wr.$inject=["modeling","rules"];Wr.prototype.preExecute=function(e){var t=this,n=this._modeling,r=this._rules,o=e.oldShape,i=e.newData,a=e.hints||{},s;function u(v,S,M){return r.allowed("connection.reconnect",{connection:M,source:v,target:S})}var f={x:i.x,y:i.y},l={x:o.x,y:o.y,width:o.width,height:o.height};s=e.newShape=e.newShape||t.createShape(i,f,o.parent,a),o.host&&n.updateAttachment(s,o.host);var p;a.moveChildren!==!1&&(p=o.children.slice(),n.moveElements(p,{x:0,y:0},s,a));var y=o.incoming.slice(),g=o.outgoing.slice();ne(y,function(v){var S=v.source,M=u(S,s,v);M&&t.reconnectEnd(v,s,Dh(v,s,l),a)}),ne(g,function(v){var S=v.target,M=u(s,S,v);M&&t.reconnectStart(v,s,Oh(v,s,l),a)})};Wr.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Wr.prototype.execute=function(e){};Wr.prototype.revert=function(e){};Wr.prototype.createShape=function(e,t,n,r){return this._modeling.createShape(e,t,n,r)};Wr.prototype.reconnectStart=function(e,t,n,r){this._modeling.reconnectStart(e,t,n,r)};Wr.prototype.reconnectEnd=function(e,t,n,r){this._modeling.reconnectEnd(e,t,n,r)};function ja(e){this._modeling=e}ja.$inject=["modeling"];ja.prototype.execute=function(e){var t=e.shape,n=e.newBounds,r=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(r&&(n.width<r.width||n.height<r.height))throw new Error("width and height cannot be less than minimum height and width");if(!r&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},ue(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};ja.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,r=e.oldBounds,o=e.hints||{};o.layout!==!1&&(ne(n.incoming,function(i){t.layoutConnection(i,{connectionEnd:Dh(i,n,r)})}),ne(n.outgoing,function(i){t.layoutConnection(i,{connectionStart:Oh(i,n,r)})}))};ja.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return ue(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function Ci(e){this._modeling=e}Ci.$inject=["modeling"];Ci.prototype.preExecute=function(e){var t=e.delta,n=e.direction,r=e.movingShapes,o=e.resizingShapes,i=e.start,a={};this.moveShapes(r,t),ne(o,function(s){a[s.id]=gM(s)}),this.resizeShapes(o,t,n),this.updateConnectionWaypoints(JC(r,o),t,n,i,r,o,a)};Ci.prototype.execute=function(){};Ci.prototype.revert=function(){};Ci.prototype.moveShapes=function(e,t){var n=this;ne(e,function(r){n._modeling.moveShape(r,t,null,{autoResize:!1,layout:!1,recurse:!1})})};Ci.prototype.resizeShapes=function(e,t,n){var r=this;ne(e,function(o){var i=eM(o,n,t);r._modeling.resizeShape(o,i,null,{attachSupport:!1,autoResize:!1,layout:!1})})};Ci.prototype.updateConnectionWaypoints=function(e,t,n,r,o,i,a){var s=this,u=o.concat(i);ne(e,function(f){var l=f.source,p=f.target,y=dM(f),g=w0(n),v={};oi(u,l)&&oi(u,p)?(y=zt(y,function(S){return ey(S,r,n)&&(S[g]=S[g]+t[g]),S.original&&ey(S.original,r,n)&&(S.original[g]=S.original[g]+t[g]),S}),s._modeling.updateWaypoints(f,y,{labelBehavior:!1})):(oi(u,l)||oi(u,p))&&(oi(o,l)?v.connectionStart=Nh(f,l,t):oi(o,p)?v.connectionEnd=Ih(f,p,t):oi(i,l)?v.connectionStart=Oh(f,l,a[l.id]):oi(i,p)&&(v.connectionEnd=Dh(f,p,a[p.id])),s._modeling.layoutConnection(f,v))})};function Jg(e){return ue({},e)}function dM(e){return zt(e.waypoints,function(t){return t=Jg(t),t.original&&(t.original=Jg(t.original)),t})}function w0(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function ey(e,t,n){var r=w0(n);if(/e|s/.test(n))return e[r]>t;if(/n|w/.test(n))return e[r]<t}function oi(e,t){return e.indexOf(t)!==-1}function gM(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Hu(e){this._modeling=e}Hu.$inject=["modeling"];Hu.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=E0(n),t.collapsed=!t.collapsed;var r=b0(n,t.collapsed);return[t].concat(r)};Hu.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,r=t.children,o=T0(r,n);return t.collapsed=!t.collapsed,[t].concat(o)};function E0(e){var t={};return ne(e,function(n){t[n.id]=n.hidden,n.children&&(t=ue({},t,E0(n.children)))}),t}function b0(e,t){var n=[];return ne(e,function(r){r.hidden=t,n=n.concat(r),r.children&&(n=n.concat(b0(r.children,r.collapsed||t)))}),n}function T0(e,t){var n=[];return ne(e,function(r){r.hidden=t[r.id],n=n.concat(r),r.children&&(n=n.concat(T0(r.children,t)))}),n}function Uu(e){this._modeling=e}Uu.$inject=["modeling"];Uu.prototype.execute=function(e){var t=e.shape,n=e.newHost,r=t.host;return e.oldHost=r,e.attacherIdx=S0(r,t),C0(n,t),t.host=n,t};Uu.prototype.revert=function(e){var t=e.shape,n=e.newHost,r=e.oldHost,o=e.attacherIdx;return t.host=r,S0(n,t),C0(r,t,o),t};function S0(e,t){return qn(e&&e.attachers,t)}function C0(e,t,n){if(e){var r=e.attachers;r||(e.attachers=r=[]),Wn(r,t,n)}}function kh(){}kh.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};kh.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function ft(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var r=this;e.on("diagram.init",function(){r.registerHandlers(n)})}ft.$inject=["eventBus","elementFactory","commandStack"];ft.prototype.getHandlers=function(){return{"shape.append":Lu,"shape.create":Si,"shape.delete":ka,"shape.move":eo,"shape.resize":ja,"shape.replace":Wr,"shape.toggleCollapse":Hu,spaceTool:Ci,"label.create":Ia,"connection.create":ku,"connection.delete":La,"connection.move":Ah,"connection.layout":Fu,"connection.updateWaypoints":kh,"connection.reconnect":Fa,"elements.create":Rh,"elements.move":$u,"elements.delete":Ph,"elements.distribute":Bu,"elements.align":Iu,"element.updateAttachment":Uu}};ft.prototype.registerHandlers=function(e){ne(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};ft.prototype.moveShape=function(e,t,n,r,o){typeof r=="object"&&(o=r,r=null);var i={shape:e,delta:t,newParent:n,newParentIndex:r,hints:o||{}};this._commandStack.execute("shape.move",i)};ft.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};ft.prototype.moveElements=function(e,t,n,r){r=r||{};var o=r.attach,i=n,a;o===!0?(a=n,i=n.parent):o===!1&&(a=null);var s={shapes:e,delta:t,newParent:i,newHost:a,hints:r};this._commandStack.execute("elements.move",s)};ft.prototype.moveConnection=function(e,t,n,r,o){typeof r=="object"&&(o=r,r=void 0);var i={connection:e,delta:t,newParent:n,newParentIndex:r,hints:o||{}};this._commandStack.execute("connection.move",i)};ft.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};ft.prototype.createConnection=function(e,t,n,r,o,i){typeof n=="object"&&(i=o,o=r,r=n,n=void 0),r=this._create("connection",r);var a={source:e,target:t,parent:o,parentIndex:n,connection:r,hints:i};return this._commandStack.execute("connection.create",a),a.connection};ft.prototype.createShape=function(e,t,n,r,o){typeof r!="number"&&(o=r,r=void 0),o=o||{};var i=o.attach,a,s;e=this._create("shape",e),i?(a=n.parent,s=n):a=n;var u={position:t,shape:e,parent:a,parentIndex:r,host:s,hints:o};return this._commandStack.execute("shape.create",u),u.shape};ft.prototype.createElements=function(e,t,n,r,o){ze(e)||(e=[e]),typeof r!="number"&&(o=r,r=void 0),o=o||{};var i={position:t,elements:e,parent:n,parentIndex:r,hints:o};return this._commandStack.execute("elements.create",i),i.elements};ft.prototype.createLabel=function(e,t,n,r){n=this._create("label",n);var o={labelTarget:e,position:t,parent:r||e.parent,shape:n};return this._commandStack.execute("label.create",o),o.shape};ft.prototype.appendShape=function(e,t,n,r,o){o=o||{},t=this._create("shape",t);var i={source:e,position:n,target:r,shape:t,connection:o.connection,connectionParent:o.connectionParent,hints:o};return this._commandStack.execute("shape.append",i),i.shape};ft.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};ft.prototype.distributeElements=function(e,t,n){var r={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",r)};ft.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};ft.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};ft.prototype.replaceShape=function(e,t,n){var r={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",r),r.newShape};ft.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};ft.prototype.resizeShape=function(e,t,n,r){var o={shape:e,newBounds:t,minBounds:n,hints:r};this._commandStack.execute("shape.resize",o)};ft.prototype.createSpace=function(e,t,n,r,o){var i={delta:n,direction:r,movingShapes:e,resizingShapes:t,start:o};this._commandStack.execute("spaceTool",i)};ft.prototype.updateWaypoints=function(e,t,n){var r={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",r)};ft.prototype.reconnect=function(e,t,n,r,o){var i={connection:e,newSource:t,newTarget:n,dockingOrPoints:r,hints:o||{}};this._commandStack.execute("connection.reconnect",i)};ft.prototype.reconnectStart=function(e,t,n,r){r||(r={}),this.reconnect(e,t,e.target,n,ue(r,{docking:"source"}))};ft.prototype.reconnectEnd=function(e,t,n,r){r||(r={}),this.reconnect(e,e.source,t,n,ue(r,{docking:"target"}))};ft.prototype.connect=function(e,t,n,r){return this.createConnection(e,t,n||{},e.parent,r)};ft.prototype._create=function(e,t){return mx(t)?t:this._elementFactory.create(e,t)};ft.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};var Rr="id",M0="di",yM={width:0,height:0};function $a(e,t,n,r,o,i){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=r,this._textRenderer=o,this._dcrRules=i}$a.$inject=["elementRegistry","moddle","translate","modeling","textRenderer","dcrRules"];$a.prototype.execute=function(e){var t=e.element,n=[t],r=this._translate;if(!t)throw new Error(r("element required"));var o=this._elementRegistry,i=this._moddle.ids,a=t.businessObject,s=wM(e.properties),u=e.oldProperties||vM(a,s);return R0(s,a)&&(i.unclaim(a[Rr]),o.updateId(t,s[Rr]),i.claim(s[Rr],a)),P0(a,s),e.oldProperties=u,e.changed=n,n};$a.prototype.postExecute=function(e){var t=e.element,n=t.label,r=n&&dn(n).name;if(Ft(t,["dcr:Event","dcr:Nesting","dcr:SubProcess"])&&(t.incoming.forEach(i=>{console.log(i),this._dcrRules.isLinkAllowed(i,i.businessObject.get("type"))||this._modeling.removeElements([i])}),t.outgoing.forEach(i=>{this._dcrRules.isLinkAllowed(i,i.businessObject.get("type"))||this._modeling.removeElements([i])})),!!r){var o=this._textRenderer.getExternalLabelBounds(n,r);this._modeling.resizeShape(n,o,yM)}};$a.prototype.revert=function(e){var t=e.element,n=e.properties,r=e.oldProperties,o=t.businessObject,i=this._elementRegistry,a=this._moddle.ids;return P0(o,r),R0(n,o)&&(a.unclaim(n[Rr]),i.updateId(t,r[Rr]),a.claim(r[Rr],o)),e.changed};function R0(e,t){return Rr in e&&e[Rr]!==t[Rr]}function vM(e,t){var n=jf(t);return Pn(n,function(r,o){return o!==M0?r[o]=e.get(o):r[o]=mM(e.di,jf(t.di)),r},{})}function mM(e,t){return Pn(t,function(n,r){return n[r]=e.get(r),n},{})}function P0(e,t){ne(t,function(n,r){r!==M0?e.set(r,n):e.di&&_M(e.di,n)})}function _M(e,t){ne(t,function(n,r){e.set(r,n)})}var xM=["default"];function wM(e){var t=ue({},e);return xM.forEach(function(n){n in e&&(t[n]=dn(t[n]))}),t}function qu(e,t){this._canvas=e,this._modeling=t}qu.$inject=["canvas","modeling"];qu.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,o=t.getRootElement(),i=o.businessObject,a=i.$parent,s=i.di;t.setRootElement(n,!0),Wn(a.rootElements,r),r.$parent=a,qn(a.rootElements,i),i.$parent=null,i.di=null,s.boardElement=r,r.di=s,e.oldRoot=o};qu.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,o=e.oldRoot,i=o.businessObject,a=r.$parent,s=r.di;t.setRootElement(o,!0),qn(a.rootElements,r),r.$parent=null,Wn(a.rootElements,i),i.$parent=a,r.di=null,s.boardElement=i,i.di=s};function Wu(e){this._moddle=e}Wu.$inject=["moddle"];Wu.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element,o=e.claiming;o?t.claim(n,r):t.unclaim(n)};Wu.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element,o=e.claiming;o?t.unclaim(n):t.claim(n,r)};var EM={width:0,height:0};function A0(e,t){function n(s,u){var f=s.label||s,l=s.labelTarget||s;return hE(f,u),[f,l]}function r(s){var u=s.element,f=u.businessObject,l=s.newLabel;if(!Mn(u)&&el()&&!eh(u)&&!ty(l)){var p=7,y=th(u);y={x:y.x,y:y.y+p},e.createLabel(u,y,{id:f.id+"_label",businessObject:f})}}function o(s){return s.oldLabel=vi(s.element),n(s.element,s.newLabel)}function i(s){return n(s.element,s.oldLabel)}function a(s){var u=s.element,f=u.label||u,l=s.newLabel,p=s.newBounds,y=s.hints||{};if(Mn(f)){if(Mn(f)&&ty(l)){y.removeShape!==!1&&e.removeShape(f,{unsetLabel:!1});return}var g=vi(f);typeof p>"u"&&(p=t.getExternalLabelBounds(f,g)),p&&e.resizeShape(f,p,EM)}}this.preExecute=r,this.execute=o,this.revert=i,this.postExecute=a}A0.$inject=["modeling","textRenderer"];function ty(e){return!e||!e.trim()}function zr(e,t,n,r){ft.call(this,e,t,n),this._dcrRules=r}ct(zr,ft);zr.$inject=["eventBus","elementFactory","commandStack","dcrRules"];zr.prototype.getHandlers=function(){var e=ft.prototype.getHandlers.call(this);return e["element.updateProperties"]=$a,e["canvas.updateRoot"]=qu,e["id.updateClaim"]=Wu,e["element.updateLabel"]=A0,e};zr.prototype.updateLabel=function(e,t,n,r){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:r||{}})};zr.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};zr.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};zr.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};zr.prototype.connect=function(e,t,n,r){var o=this._dcrRules;if(n||(n=o.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,r)};function O0(){}O0.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||nt(t.source||e.source),t.connectionEnd||nt(t.target||e.target)]};var Ms=20,bM=5,Js=Math.round,ny=20,TM={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function SM(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function CM(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function D0(e,t,n){var r=An(t,e,bM),o=n.split(":")[0],i=Js((t.x-e.x)/2+e.x),a=Js((t.y-e.y)/2+e.y),s,u,f=CM(o,r),l=/h|r|l/.test(o),p=!1,y=!1;return f?(s=l?{x:i,y:e.y}:{x:e.x,y:a},u=l?"h:h":"v:v"):(p=SM(r,o),u=l?"h:v":"v:h",p?l?(y=a===e.y,s={x:e.x+Ms*(/l/.test(o)?-1:1),y:y?a+Ms:a}):(y=i===e.x,s={x:y?i+Ms:i,y:e.y+Ms*(/t/.test(o)?-1:1)}):s={x:i,y:a}),{waypoints:Bh(e,s,u).concat(s),directions:u,turnNextDirections:y}}function MM(e,t,n){return D0(e,t,n)}function RM(e,t,n){var r=D0(t,e,ry(n));return{waypoints:r.waypoints.slice().reverse(),directions:ry(r.directions),turnNextDirections:r.turnNextDirections}}function PM(e,t){var n=e.directions.split(":")[1],r=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(r=r=="h"?"v":"h");var o=n+":"+r,i=Bh(e.waypoints[e.waypoints.length-1],t.waypoints[0],o);return{waypoints:i,directions:o}}function ry(e){return e.split(":").reverse().join(":")}function AM(e,t,n){var r=Js((t.x-e.x)/2+e.x),o=Js((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:r,y:e.y},{x:r,y:t.y}];if(n==="v:v")return[{x:e.x,y:o},{x:t.x,y:o}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function Bh(e,t,n){if(n=n||"h:h",!jM(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(N0(n)){var r=MM(e,t,n),o=RM(e,t,n),i=PM(r,o);return[].concat(r.waypoints,i.waypoints,o.waypoints)}return AM(e,t,n)}function OM(e,t,n){var r=Bh(e,t,n);return r.unshift(e),r.push(t),I0(r)}function DM(e,t,n,r,o){var i=o&&o.preferredLayouts||[],a=$_(i,"straight")[0]||"h:h",s=TM[a]||0,u=An(e,t,s),f=FM(u,a);n=n||nt(e),r=r||nt(t);var l=f.split(":"),p=oy(n,e,l[0],$M(u)),y=oy(r,t,l[1],u);return OM(p,y,f)}function NM(e,t,n,r,o,i){ze(n)&&(o=n,i=r,n=nt(e),r=nt(t)),i=ue({preferredLayouts:[]},i),o=o||[];var a=i.preferredLayouts,s=a.indexOf("straight")!==-1,u;return u=s&&LM(e,t,n,r,i),u||(u=i.connectionEnd&&BM(t,e,r,o),u)||(u=i.connectionStart&&kM(e,t,n,o),u)?u:!i.connectionStart&&!i.connectionEnd&&o&&o.length?o:DM(e,t,n,r,i)}function IM(e,t,n){return e>=t&&e<=n}function iy(e,t,n){var r={x:"width",y:"height"};return IM(t[e],n[e],n[e]+n[r[e]])}function LM(e,t,n,r,o){var i={},a,s;return s=An(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),o.preserveDocking==="target"?iy(a,r,e)?(i[a]=r[a],[{x:i.x!==void 0?i.x:n.x,y:i.y!==void 0?i.y:n.y,original:{x:i.x!==void 0?i.x:n.x,y:i.y!==void 0?i.y:n.y}},{x:r.x,y:r.y}]):null:iy(a,n,t)?(i[a]=n[a],[{x:n.x,y:n.y},{x:i.x!==void 0?i.x:r.x,y:i.y!==void 0?i.y:r.y,original:{x:i.x!==void 0?i.x:r.x,y:i.y!==void 0?i.y:r.y}}]):null):null}function kM(e,t,n,r){return Fh(e,t,n,r)}function BM(e,t,n,r){var o=r.slice().reverse();return o=Fh(e,t,n,o),o?o.reverse():null}function Fh(e,t,n,r){function o(l){return l.length<3?!0:l.length>4?!1:!!_t(l,function(p,y){var g=l[y-1];return g&&wa(p,g)<3})}function i(l,p,y){var g=Sr(p,l);switch(g){case"v":return{x:y.x,y:l.y};case"h":return{x:l.x,y:y.y}}return{x:l.x,y:l.y}}function a(l,p,y){var g;for(g=l.length-2;g!==0;g--)if(up(l[g],p,ny)||up(l[g],y,ny))return l.slice(g);return l}if(o(r))return null;var s=r[0],u=r.slice(),f;return u[0]=n,u[1]=i(u[1],s,n),f=a(u,e,t),f!==u&&(u=Fh(e,t,n,f)),u&&Sr(u)?null:u}function FM(e,t){if(N0(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function jM(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function N0(e){return e&&/t|r|b|l/.test(e)}function $M(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function oy(e,t,n,r){if(n==="h"&&(n=/left/.test(r)?"l":"r"),n==="v"&&(n=/top/.test(r)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function I0(e){return e.reduce(function(t,n,r){var o=t[t.length-1],i=e[r+1];return bl(o,i,n,0)||t.push(n),t},[])}function jh(){}ct(jh,O0);jh.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,r=t.target||e.target,o=t.waypoints||e.waypoints,i=t.connectionStart,a=t.connectionEnd,s,u;return i||(i=ay(o&&o[0],n)),a||(a=ay(o&&o[o.length-1],r)),We(e,"dcr:Relation")&&(n===r?s={preferredLayouts:HM(n,e)}:s={preferredLayouts:["h:h"]}),s&&(s=ue(s,t),u=I0(NM(n,r,i,a,o,s))),u||[i,a]};function ay(e,t){return e?e.original||e:nt(t)}function HM(e,t){var n=t.waypoints,r=n&&n.length&&An(n[0],e);return r==="top"?["t:r"]:r==="right"?["r:b"]:r==="left"?["l:t"]:["b:l"]}function sy(e){return ue({original:e.point.original||e.point},e.actual)}function Mi(e,t){this._elementRegistry=e,this._graphicsFactory=t}Mi.$inject=["elementRegistry","graphicsFactory"];Mi.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var r=this.getDockingPoint(e,t,!0),o=this.getDockingPoint(e,n),i=e.waypoints.slice(r.idx+1,o.idx);return i.unshift(sy(r)),i.push(sy(o)),i};Mi.prototype.getDockingPoint=function(e,t,n){var r=e.waypoints,o,i,a;return o=n?0:r.length-1,i=r[o],a=this._getIntersection(t,e,n),{point:i,actual:a||i,idx:o}};Mi.prototype._getIntersection=function(e,t,n){var r=this._getShapePath(e),o=this._getConnectionPath(t);return Xf(r,o,n)};Mi.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};Mi.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};Mi.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const UM={__init__:["modeling","dcrUpdater"],__depends__:[EC,PC,OC,DC,d0,BC,HC,qC,YC,jr,Xm,m0],dcrFactory:["type",Ln],dcrUpdater:["type",kn],elementFactory:["type",Ji],modeling:["type",zr],layouter:["type",jh],connectionDocking:["type",Mi]};var qM=500,WM=1250,zM=1500,eu=Math.round;function VM(e){return{x:e.x+eu(e.width/2),y:e.y+eu(e.height/2)}}function L0(e,t,n,r,o){function i(s,u,f,l){return o.allowed("elements.move",{shapes:s,delta:u,position:f,target:l})}e.on("shape.move.start",zM,function(s){var u=s.context,f=s.shape,l=r.get().slice();l.indexOf(f)===-1&&(l=[f]),l=XM(l),ue(u,{shapes:l,validatedShapes:l,shape:f})}),e.on("shape.move.start",WM,function(s){var u=s.context,f=u.validatedShapes,l;if(l=u.canExecute=i(f),!l)return!1}),e.on("shape.move.move",qM,function(s){var u=s.context,f=u.validatedShapes,l=s.hover,p={x:s.dx,y:s.dy},y={x:s.x,y:s.y},g;if(g=i(f,p,y,l),u.delta=p,u.canExecute=g,g===null){u.target=null;return}u.target=l}),e.on("shape.move.end",function(s){var u=s.context,f=u.delta,l=u.canExecute,p=l==="attach",y=u.shapes;if(l===!1)return!1;f.x=eu(f.x),f.y=eu(f.y),!(f.x===0&&f.y===0)&&n.moveElements(y,f,u.target,{primaryShape:u.shape,attach:p})}),e.on("element.mousedown",function(s){if(wi(s)){var u=Co(s);if(!u)throw new Error("must supply DOM mousedown event");return a(u,s.element)}});function a(s,u,f,l){if(Vt(f)&&(l=f,f=!1),!(u.waypoints||!u.parent)&&!Ke(s.target).has("djs-hit-no-move")){var p=VM(u);return t.init(s,p,"shape.move",{cursor:"grabbing",autoActivate:f,data:{shape:u,context:l||{}}}),!0}}this.start=a}L0.$inject=["eventBus","dragging","modeling","selection","rules"];function XM(e){var t=xa(e,"id");return Dt(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var uy=499,Of="djs-dragging",cy="drop-ok",fy="drop-not-ok",ly="new-parent",hy="attach-ok";function k0(e,t,n,r){function o(u){var f=i(u),l=GM(f);return l}function i(u){var f=wl(u,!0),l=zt(f,function(p){return(p.incoming||[]).concat(p.outgoing||[])});return Bf(f.concat(l))}function a(u,f){[hy,cy,fy,ly].forEach(function(l){l===f?t.addMarker(u,l):t.removeMarker(u,l)})}function s(u,f,l){r.addDragger(f,u.dragGroup),l&&t.addMarker(f,Of),u.allDraggedElements?u.allDraggedElements.push(f):u.allDraggedElements=[f]}e.on("shape.move.start",uy,function(u){var f=u.context,l=f.shapes,p=f.allDraggedElements,y=o(l);if(!f.dragGroup){var g=Pe("g");xe(g,n.cls("djs-drag-group",["no-events"]));var v=t.getActiveLayer();ke(v,g),f.dragGroup=g}y.forEach(function(S){r.addDragger(S,f.dragGroup)}),p?p=Bf([p,i(l)]):p=i(l),ne(p,function(S){t.addMarker(S,Of)}),f.allDraggedElements=p,f.differentParents=YM(l)}),e.on("shape.move.move",uy,function(u){var f=u.context,l=f.dragGroup,p=f.target,y=f.shape.parent,g=f.canExecute;p&&(g==="attach"?a(p,hy):f.canExecute&&p&&p.id!==y.id?a(p,ly):a(p,f.canExecute?cy:fy)),Cn(l,u.dx,u.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(u){var f=u.context,l=f.target;l&&a(l,null)}),e.on("shape.move.cleanup",function(u){var f=u.context,l=f.allDraggedElements,p=f.dragGroup;ne(l,function(y){t.removeMarker(y,Of)}),p&&Tt(p)}),this.makeDraggable=s}k0.$inject=["eventBus","canvas","styles","previewSupport"];function GM(e){var t=Dt(e,function(n){return St(n)?_t(e,ci({id:n.source.id}))&&_t(e,ci({id:n.target.id})):!0});return t}function YM(e){return H_(xa(e,function(t){return t.parent&&t.parent.id}))!==1}const KM={__depends__:[Ma,jr,Qv,fr,$r,Ra],__init__:["move","movePreview"],move:["type",L0],movePreview:["type",k0]};var B0=".djs-palette-toggle",F0=".entry",ZM=B0+", "+F0,pl="djs-palette-",QM="shown",dl="open",py="two-column",JM=1e3;function Ct(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(r){var o=r.tool;n.updateToolHighlight(o)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}Ct.$inject=["eventBus","canvas"];Ct.prototype.registerProvider=function(e,t){t||(t=e,e=JM),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};Ct.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(t2,{})};Ct.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};Ct.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),r=this._container=Bt(Ct.HTML_MARKUP);n.appendChild(r),yn(n).add(pl+QM),Cr.bind(r,ZM,"click",function(o){var i=o.delegateTarget;if(ca(i,B0))return e.toggle();e.trigger("click",o)}),De.bind(r,"mousedown",function(o){o.stopPropagation()}),Cr.bind(r,F0,"dragstart",function(o){e.trigger("dragstart",o)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:r})};Ct.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};Ct.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,r=this._eventBus,o,i=yn(n),a=yn(t);"twoColumn"in e?o=e.twoColumn:o=this._needsCollapse(t.clientHeight,this._entries||{}),i.toggle(py,o),a.toggle(pl+py,o),"open"in e&&(i.toggle(dl,e.open),a.toggle(pl+dl,e.open)),r.fire("palette.changed",{twoColumn:o,open:this.isOpen()})};Ct.prototype._update=function(){var e=Ot(".djs-palette-entries",this._container),t=this._entries=this.getEntries();vl(e),ne(t,function(n,r){var o=n.group||"default",i=Ot("[data-group="+ch(o)+"]",e);i||(i=Bt('<div class="group"></div>'),pn(i,"data-group",o),e.appendChild(i));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=Bt(a);if(i.appendChild(s),!n.separator&&(pn(s,"data-action",r),n.title&&pn(s,"title",n.title),n.className&&e2(s,n.className),n.imageUrl)){var u=Bt("<img>");pn(u,"src",n.imageUrl),s.appendChild(u)}}),this.open()};Ct.prototype.trigger=function(e,t,n){var r,o,i=t.delegateTarget||t.target;return i?(r=pn(i,"data-action"),o=t.originalEvent||t,this.triggerEntry(r,e,o,n)):t.preventDefault()};Ct.prototype.triggerEntry=function(e,t,n,r){var o=this._entries,i,a;if(i=o[e],!!i&&(a=i.action,this._eventBus.fire("palette.trigger",{entry:i,event:n})!==!1)){if(Wt(a)){if(t==="click")return a(n,r)}else if(a[t])return a[t](n,r);n.preventDefault()}};Ct.prototype._layoutChanged=function(){this._toggleState({})};Ct.prototype._needsCollapse=function(e,t){var n=50,r=Object.keys(t).length*46;return e<r+n};Ct.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};Ct.prototype.open=function(){this._toggleState({open:!0})};Ct.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Ct.prototype.isActiveTool=function(e){return e&&this._activeTool===e};Ct.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Ot(".djs-palette-entries",this._container),this._toolsContainer=Ot("[data-group=tools]",t)),n=this._toolsContainer,ne(n.children,function(r){var o=r.getAttribute("data-action");if(o){var i=yn(r);o=o.replace("-tool",""),i.contains("entry")&&o===e?i.add("highlighted-entry"):i.remove("highlighted-entry")}})};Ct.prototype.isOpen=function(){return yn(this._container).has(dl)};Ct.prototype._getParentContainer=function(){return this._canvas.getContainer()};Ct.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function e2(e,t){var n=yn(e),r=ze(t)?t:t.split(/\s+/g);r.forEach(function(o){n.add(o)})}function t2(e,t){var n=t.getPaletteEntries();return Wt(n)?n(e):(ne(n,function(r,o){e[o]=r}),e)}const n2={__init__:["palette"],palette:["type",Ct]};var j0="crosshair";function to(e,t,n,r,o,i,a){this._selection=o,this._dragging=n,this._mouse=a;var s=this,u={create:function(f){var l=t.getActiveLayer(),p;p=f.frame=Pe("rect"),xe(p,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),ke(l,p)},update:function(f){var l=f.frame,p=f.bbox;xe(l,{x:p.x,y:p.y,width:p.width,height:p.height})},remove:function(f){f.frame&&Tt(f.frame)}};i.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(f){var l=f.originalEvent.target;!f.hover&&!(l instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(f.originalEvent,!0)})}),e.on("lasso.end",function(f){var l=Df(f),p=r.filter(function(y){return y});s.select(p,l)}),e.on("lasso.start",function(f){var l=f.context;l.bbox=Df(f),u.create(l)}),e.on("lasso.move",function(f){var l=f.context;l.bbox=Df(f),u.update(l)}),e.on("lasso.cleanup",function(f){var l=f.context;u.remove(l)}),e.on("element.mousedown",1500,function(f){if(Kv(f))return s.activateLasso(f.originalEvent),!0})}to.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];to.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:j0,data:{context:{}}})};to.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:j0,data:{context:{}}})};to.prototype.select=function(e,t){var n=I1(e,t);this._selection.select(Ly(n))};to.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};to.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Df(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},r;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?r={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?r={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?r={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?r={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:r={x:n.x,y:n.y,width:0,height:0},r}const r2={__depends__:[Nu,Aa],__init__:["lassoTool"],lassoTool:["type",to]};var Nf=1500,$0="grab";function Do(e,t,n,r,o,i){this._dragging=n,this._mouse=i;var a=this,s=r.get("keyboard",!1);o.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Nf,function(u){if(la(u))return a.activateMove(u.originalEvent,!0),!1}),s&&s.addListener(Nf,function(u){if(!(!dy(u.keyEvent)||a.isActive())){var f=a._mouse.getLastMoveEvent();a.activateMove(f,!!f)}},"keyboard.keydown"),s&&s.addListener(Nf,function(u){!dy(u.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(u){var f=u.originalEvent.target;if(!u.hover&&!(f instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(u.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(u){var f=t.viewbox().scale;t.scroll({dx:u.dx*f,dy:u.dy*f})}),e.on("hand.move.end",function(u){var f=u.context,l=f.reactivate;return!la(u)&&l&&e.once("hand.move.ended",function(p){a.activateHand(p.originalEvent,!0,!0)}),!1})}Do.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Do.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:$0,data:{context:n||{}}})};Do.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:$0,data:{context:{reactivate:n}}})};Do.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Do.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function dy(e){return Sn("Space",e)}const i2={__depends__:[Nu,Aa],__init__:["handTool"],handTool:["type",Do]};var gy="connect-ok",yy="connect-not-ok";function No(e,t,n,r,o,i,a){var s=this;this._dragging=t,this._rules=i,this._mouse=a,o.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(u){var f=u.context,l=u.hover,p=f.canStartConnect=s.canStartConnect(l);p!==null&&(f.startTarget=l,r.addMarker(l,p?gy:yy))}),e.on(["global-connect.out","global-connect.cleanup"],function(u){var f=u.context.startTarget,l=u.context.canStartConnect;f&&r.removeMarker(f,l?gy:yy)}),e.on(["global-connect.ended"],function(u){var f=u.context,l=f.startTarget,p={x:u.x,y:u.y},y=s.canStartConnect(l);if(y)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,l,p)}),!1})}No.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];No.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};No.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};No.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};No.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const o2={__depends__:[hh,fr,$r,Nu,Aa],globalConnect:["type",No]};function $h(e,t,n,r,o,i,a,s){this._create=t,this._elementFactory=n,this._spaceTool=r,this._lassoTool=o,this._handTool=i,this._globalConnect=a,this._translate=s,e.registerProvider(this)}$h.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];$h.prototype.getPaletteEntries=function(e){var t={},n=this._create,r=this._elementFactory,o=this._spaceTool,i=this._lassoTool,a=this._handTool,s=this._globalConnect,u=this._translate;function f(l,p,y,g,v){function S(P){var T=r.createShape(ue({type:l},v));n.start(P,T)}var M=l.replace(/^dcr:/,"");return{group:p,className:y,title:g||u("Create {type}",{type:M}),action:{dragstart:S,click:S}}}return ue(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:u("Activate the hand tool"),action:{click:function(l){a.activateHand(l)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:u("Activate the lasso tool"),action:{click:function(l){i.activateSelection(l)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:u("Activate the create/remove space tool"),action:{click:function(l){o.activateSelection(l)}}},"tool-separator":{group:"tools",separator:!0},"create-object":f("dcr:Event","dcr-elements","od-icon-object",u("Create a DCR Event"),{attrs:{included:!0,pending:!1,executed:!1}}),"object-linker":{group:"dcr-elements",className:"bpmn-icon-connection",title:u("Create a DCR Relation"),action:{click:function(l){s.start(l)}}},"create-subprocess":f("dcr:SubProcess","dcr-elements","bpmn-icon-subprocess-expanded",u("Create a Single-Instance SubProcess"),{attrs:{included:!0,pending:!1,executed:!1}}),"create-nesting":f("dcr:Nesting","dcr-elements","od-text-box-nesting",u("Create a Nesting"))}),t};const a2={__depends__:[n2,Mu,m0,r2,i2,o2,Eu],__init__:["paletteProvider"],paletteProvider:["type",$h]};var H0={exports:{}};/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */(function(e,t){(function(n,r){e.exports=r(n)})(Be,function(n){if(n.CSS&&n.CSS.escape)return n.CSS.escape;var r=function(o){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var i=String(o),a=i.length,s=-1,u,f="",l=i.charCodeAt(0);++s<a;){if(u=i.charCodeAt(s),u==0){f+="ï¿½";continue}if(u>=1&&u<=31||u==127||s==0&&u>=48&&u<=57||s==1&&u>=48&&u<=57&&l==45){f+="\\"+u.toString(16)+" ";continue}if(s==0&&a==1&&u==45){f+="\\"+i.charAt(s);continue}if(u>=128||u==45||u==95||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122){f+=i.charAt(s);continue}f+="\\"+i.charAt(s)}return f};return n.CSS||(n.CSS={}),n.CSS.escape=r,r})})(H0);var s2=H0.exports;const vy=xo(s2);var u2=250;function Hh(e,t,n,r,o){rt.call(this,e);function i(s){var u=s.canExecute.replacements;ne(u,function(f){var l=f.oldElementId,p={type:f.newElementType};if(!s.visualReplacements[l]){var y=t.get(l);ue(p,{x:y.x,y:y.y});var g=n.createShape(p);r.addShape(g,y.parent);var v=Ot('[data-element-id="'+vy(y.id)+'"]',s.dragGroup);v&&xe(v,{display:"none"});var S=o.addDragger(g,s.dragGroup);s.visualReplacements[l]=S,r.removeShape(g)}})}function a(s){var u=s.visualReplacements;ne(u,function(f,l){var p=Ot('[data-element-id="'+vy(l)+'"]',s.dragGroup);p&&xe(p,{display:"inline"}),f.remove(),u[l]&&delete u[l]})}e.on("shape.move.move",u2,function(s){var u=s.context,f=u.canExecute;u.visualReplacements||(u.visualReplacements={}),f&&f.replacements?i(u):a(u)})}Hh.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];Uw(Hh,rt);const c2={__depends__:[Ra],__init__:["dcrReplacePreview"],dcrReplacePreview:["type",Hh]};function Ri(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}Ri.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};Ri.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};Ri.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};Ri.prototype.getSnapLocations=function(){return this._snapLocations};Ri.prototype.setSnapLocations=function(e){this._snapLocations=e};Ri.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new zu,n.initDefaults(this._defaultSnaps)),n};function zu(){this._snapValues={}}zu.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};zu.prototype.snap=function(e,t,n,r){var o=this._snapValues[t];return o&&hT(e[n],o[n],r)};zu.prototype.initDefaults=function(e){var t=this;ne(e||{},function(n,r){ne(n,function(o){t.add(r,o)})})};var f2=1250;function lr(e,t,n){var r=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(o){r.initSnap(o)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],f2,function(o){var i=o.context,a=i.shape,s=i.snapContext,u=i.target;if(!(o.originalEvent&&gn(o.originalEvent))&&!(pa(o)||!u)){var f=s.pointsForTarget(u);f.initialized||(f=r.addSnapTargetPoints(f,a,u),f.initialized=!0),n.snap(o,f)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}lr.$inject=["elementRegistry","eventBus","snapping"];lr.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,r=n.shape,o=n.snapContext;o||(o=n.snapContext=new Ri);var i;t.get(r.id)?i=li(r,e):i={x:e.x+li(r).x,y:e.y+li(r).y};var a={x:i.x-r.width/2,y:i.y-r.height/2},s={x:i.x+r.width/2,y:i.y+r.height/2};return o.setSnapOrigin("mid",{x:i.x-e.x,y:i.y-e.y}),vn(r)||(o.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),o.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),o};lr.prototype.addSnapTargetPoints=function(e,t,n){var r=this.getSnapTargets(t,n);return ne(r,function(o){if(vn(o)){vn(t)&&e.add("mid",li(o));return}if(St(o)){if(o.waypoints.length<3)return;var i=o.waypoints.slice(1,-1);ne(i,function(a){e.add("mid",a)});return}e.add("mid",li(o))}),!Ie(t.x)||!Ie(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",li(t)),e};lr.prototype.getSnapTargets=function(e,t){return Cm(t).filter(function(n){return!l2(n)})};function l2(e){return!!e.hidden}function Io(e){e.invoke(lr,this)}ct(Io,lr);Io.$inject=["injector"];Io.prototype.initSnap=function(e){return lr.prototype.initSnap.call(this,e)};Io.prototype.addSnapTargetPoints=function(e,t,n){return lr.prototype.addSnapTargetPoints.call(this,e,t,n)};Io.prototype.getSnapTargets=function(e,t){return lr.prototype.getSnapTargets.call(this,e,t)};var h2=1250;function Ha(e,t){var n=this;e.on(["resize.start"],function(r){n.initSnap(r)}),e.on(["resize.move","resize.end"],h2,function(r){var o=r.context,i=o.shape,a=i.parent,s=o.direction,u=o.snapContext;if(!(r.originalEvent&&gn(r.originalEvent))&&!pa(r)){var f=u.pointsForTarget(a);f.initialized||(f=n.addSnapTargetPoints(f,i,a,s),f.initialized=!0),g2(s)&&hn(r,"x",r.x),y2(s)&&hn(r,"y",r.y),t.snap(r,f)}}),e.on(["resize.cleanup"],function(){t.hide()})}Ha.prototype.initSnap=function(e){var t=e.context,n=t.shape,r=t.direction,o=t.snapContext;o||(o=t.snapContext=new Ri);var i=U0(n,r);return o.setSnapOrigin("corner",{x:i.x-e.x,y:i.y-e.y}),o};Ha.prototype.addSnapTargetPoints=function(e,t,n,r){var o=this.getSnapTargets(t,n);return ne(o,function(i){e.add("corner",dT(i)),e.add("corner",pT(i))}),e.add("corner",U0(t,r)),e};Ha.$inject=["eventBus","snapping"];Ha.prototype.getSnapTargets=function(e,t){return Cm(t).filter(function(n){return!p2(n,e)&&!St(n)&&!d2(n)&&!vn(n)})};function U0(e,t){var n=nt(e),r=Ye(e),o={x:n.x,y:n.y};return t.indexOf("n")!==-1?o.y=r.top:t.indexOf("s")!==-1&&(o.y=r.bottom),t.indexOf("e")!==-1?o.x=r.right:t.indexOf("w")!==-1&&(o.x=r.left),o}function p2(e,t){return e.host===t}function d2(e){return!!e.hidden}function g2(e){return e==="n"||e==="s"}function y2(e){return e==="e"||e==="w"}var v2=7,m2=1e3;function Pi(e){this._canvas=e,this._asyncHide=By(en(this.hide,this),m2)}Pi.$inject=["canvas"];Pi.prototype.snap=function(e,t){var n=e.context,r=n.snapContext,o=r.getSnapLocations(),i={x:pa(e,"x"),y:pa(e,"y")};ne(o,function(a){var s=r.getSnapOrigin(a),u={x:e.x+s.x,y:e.y+s.y};if(ne(["x","y"],function(f){var l;i[f]||(l=t.snap(u,a,f,v2),l!==void 0&&(i[f]={value:l,originValue:l-s[f]}))}),i.x&&i.y)return!1}),this.showSnapLine("vertical",i.x&&i.x.value),this.showSnapLine("horizontal",i.y&&i.y.value),ne(["x","y"],function(a){var s=i[a];Vt(s)&&hn(e,a,s.originValue)})};Pi.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Pe("path");return xe(n,{d:"M0,0 L0,0"}),Ke(n).add("djs-snap-line"),ke(t,n),{update:function(r){Ie(r)?e==="horizontal"?xe(n,{d:"M-100000,"+r+" L+100000,"+r,display:""}):xe(n,{d:"M "+r+",-100000 L "+r+", +100000",display:""}):xe(n,{display:"none"})}}};Pi.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Pi.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};Pi.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};Pi.prototype.hide=function(){ne(this._snapLines,function(e){e.update()})};const _2={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",lr],resizeSnapping:["type",Ha],snapping:["type",Pi]};var x2=1250,w2=10,my=20,q0=["x","y"];function W0(e){e.on(["connect.hover","connect.move","connect.end"],x2,function(t){var n=t.context,r=n.canExecute,o=n.start,i=n.hover;t.originalEvent&&gn(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),r&&i&&E2(t,i,C2()),i&&S2(r,["dcr:Relation"])&&(n.connectionStart=li(o),Ft(i,["dcr:Event"])&&b2(t,i)))})}W0.$inject=["eventBus"];function E2(e,t,n){q0.forEach(function(r){var o=z0(r,t);e[r]<t[r]+n?hn(e,r,t[r]+n):e[r]>t[r]+o-n&&hn(e,r,t[r]+o-n)})}function b2(e,t){var n=li(t);q0.forEach(function(r){M2(e,t,r)&&hn(e,r,n[r])})}function T2(e,t){return e&&e.type===t}function S2(e,t){return au(t,function(n){return T2(e,n)})}function z0(e,t){return e==="x"?t.width:t.height}function C2(){return w2}function M2(e,t,n){return e[n]>t[n]+my&&e[n]<t[n]+z0(n,t)-my}const R2={__depends__:[_2],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",W0],createMoveSnapping:["type",Io]};var Vu,Ve,V0,ua,_y,tu={},X0=[],P2=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ui(e,t){for(var n in t)e[n]=t[n];return e}function G0(e){var t=e.parentNode;t&&t.removeChild(e)}function Y0(e,t,n){var r,o,i,a={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?Vu.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return Ls(e,a,r,o,null)}function Ls(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++V0};return o==null&&Ve.vnode!=null&&Ve.vnode(i),i}function Xu(e){return e.children}function ks(e,t){this.props=e,this.context=t}function da(e,t){if(t==null)return e.__?da(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?da(e):null}function K0(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return K0(e)}}function xy(e){(!e.__d&&(e.__d=!0)&&ua.push(e)&&!nu.__r++||_y!==Ve.debounceRendering)&&((_y=Ve.debounceRendering)||setTimeout)(nu)}function nu(){for(var e;nu.__r=ua.length;)e=ua.sort(function(t,n){return t.__v.__b-n.__v.__b}),ua=[],e.some(function(t){var n,r,o,i,a,s;t.__d&&(a=(i=(n=t).__v).__e,(s=n.__P)&&(r=[],(o=ui({},i)).__v=i.__v+1,Uh(s,i,o,n.__n,s.ownerSVGElement!==void 0,i.__h!=null?[a]:null,r,a??da(i),i.__h),e_(r,i),i.__e!=a&&K0(i)))})}function Z0(e,t,n,r,o,i,a,s,u,f){var l,p,y,g,v,S,M,P=r&&r.__k||X0,T=P.length;for(n.__k=[],l=0;l<t.length;l++)if((g=n.__k[l]=(g=t[l])==null||typeof g=="boolean"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?Ls(null,g,null,null,g):Array.isArray(g)?Ls(Xu,{children:g},null,null,null):g.__b>0?Ls(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null){if(g.__=n,g.__b=n.__b+1,(y=P[l])===null||y&&g.key==y.key&&g.type===y.type)P[l]=void 0;else for(p=0;p<T;p++){if((y=P[p])&&g.key==y.key&&g.type===y.type){P[p]=void 0;break}y=null}Uh(e,g,y=y||tu,o,i,a,s,u,f),v=g.__e,(p=g.ref)&&y.ref!=p&&(M||(M=[]),y.ref&&M.push(y.ref,null,g),M.push(p,g.__c||v,g)),v!=null?(S==null&&(S=v),typeof g.type=="function"&&g.__k===y.__k?g.__d=u=Q0(g,u,e):u=J0(e,g,y,P,v,u),typeof n.type=="function"&&(n.__d=u)):u&&y.__e==u&&u.parentNode!=e&&(u=da(y))}for(n.__e=S,l=T;l--;)P[l]!=null&&n_(P[l],P[l]);if(M)for(l=0;l<M.length;l++)t_(M[l],M[++l],M[++l])}function Q0(e,t,n){for(var r,o=e.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=e,t=typeof r.type=="function"?Q0(r,t,n):J0(n,r,r,o,r.__e,t));return t}function J0(e,t,n,r,o,i){var a,s,u;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(n==null||o!=i||o.parentNode==null)e:if(i==null||i.parentNode!==e)e.appendChild(o),a=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<r.length;u+=1)if(s==o)break e;e.insertBefore(o,i),a=i}return a!==void 0?a:o.nextSibling}function A2(e,t,n,r,o){var i;for(i in n)i==="children"||i==="key"||i in t||ru(e,i,null,n[i],r);for(i in t)o&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===t[i]||ru(e,i,t[i],n[i],r)}function wy(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||P2.test(t)?n:n+"px"}function ru(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||wy(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||wy(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?by:Ey,i):e.removeEventListener(t,i?by:Ey,i);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,n))}}function Ey(e){this.l[e.type+!1](Ve.event?Ve.event(e):e)}function by(e){this.l[e.type+!0](Ve.event?Ve.event(e):e)}function Uh(e,t,n,r,o,i,a,s,u){var f,l,p,y,g,v,S,M,P,T,m,x,b,I,d,L=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(u=n.__h,s=t.__e=n.__e,t.__h=null,i=[s]),(f=Ve.__b)&&f(t);try{e:if(typeof L=="function"){if(M=t.props,P=(f=L.contextType)&&r[f.__c],T=f?P?P.props.value:f.__:r,n.__c?S=(l=t.__c=n.__c).__=l.__E:("prototype"in L&&L.prototype.render?t.__c=l=new L(M,T):(t.__c=l=new ks(M,T),l.constructor=L,l.render=D2),P&&P.sub(l),l.props=M,l.state||(l.state={}),l.context=T,l.__n=r,p=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),L.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=ui({},l.__s)),ui(l.__s,L.getDerivedStateFromProps(M,l.__s))),y=l.props,g=l.state,p)L.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(L.getDerivedStateFromProps==null&&M!==y&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(M,T),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(M,l.__s,T)===!1||t.__v===n.__v){for(l.props=M,l.state=l.__s,t.__v!==n.__v&&(l.__d=!1),l.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(w){w&&(w.__=t)}),m=0;m<l._sb.length;m++)l.__h.push(l._sb[m]);l._sb=[],l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(M,l.__s,T),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(y,g,v)})}if(l.context=T,l.props=M,l.__v=t,l.__P=e,x=Ve.__r,b=0,"prototype"in L&&L.prototype.render){for(l.state=l.__s,l.__d=!1,x&&x(t),f=l.render(l.props,l.state,l.context),I=0;I<l._sb.length;I++)l.__h.push(l._sb[I]);l._sb=[]}else do l.__d=!1,x&&x(t),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++b<25);l.state=l.__s,l.getChildContext!=null&&(r=ui(ui({},r),l.getChildContext())),p||l.getSnapshotBeforeUpdate==null||(v=l.getSnapshotBeforeUpdate(y,g)),d=f!=null&&f.type===Xu&&f.key==null?f.props.children:f,Z0(e,Array.isArray(d)?d:[d],t,n,r,o,i,a,s,u),l.base=t.__e,t.__h=null,l.__h.length&&a.push(l),S&&(l.__E=l.__=null),l.__e=!1}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=O2(n.__e,t,n,r,o,i,a,u);(f=Ve.diffed)&&f(t)}catch(w){t.__v=null,(u||i!=null)&&(t.__e=s,t.__h=!!u,i[i.indexOf(s)]=null),Ve.__e(w,t,n)}}function e_(e,t){Ve.__c&&Ve.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){Ve.__e(r,n.__v)}})}function O2(e,t,n,r,o,i,a,s){var u,f,l,p=n.props,y=t.props,g=t.type,v=0;if(g==="svg"&&(o=!0),i!=null){for(;v<i.length;v++)if((u=i[v])&&"setAttribute"in u==!!g&&(g?u.localName===g:u.nodeType===3)){e=u,i[v]=null;break}}if(e==null){if(g===null)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,y.is&&y),i=null,s=!1}if(g===null)p===y||s&&e.data===y||(e.data=y);else{if(i=i&&Vu.call(e.childNodes),f=(p=n.props||tu).dangerouslySetInnerHTML,l=y.dangerouslySetInnerHTML,!s){if(i!=null)for(p={},v=0;v<e.attributes.length;v++)p[e.attributes[v].name]=e.attributes[v].value;(l||f)&&(l&&(f&&l.__html==f.__html||l.__html===e.innerHTML)||(e.innerHTML=l&&l.__html||""))}if(A2(e,y,p,o,s),l)t.__k=[];else if(v=t.props.children,Z0(e,Array.isArray(v)?v:[v],t,n,r,o&&g!=="foreignObject",i,a,i?i[0]:n.__k&&da(n,0),s),i!=null)for(v=i.length;v--;)i[v]!=null&&G0(i[v]);s||("value"in y&&(v=y.value)!==void 0&&(v!==e.value||g==="progress"&&!v||g==="option"&&v!==p.value)&&ru(e,"value",v,p.value,!1),"checked"in y&&(v=y.checked)!==void 0&&v!==e.checked&&ru(e,"checked",v,p.checked,!1))}return e}function t_(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){Ve.__e(r,n)}}function n_(e,t,n){var r,o;if(Ve.unmount&&Ve.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||t_(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){Ve.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&n_(r[o],t,n||typeof e.type!="function");n||e.__e==null||G0(e.__e),e.__=e.__e=e.__d=void 0}function D2(e,t,n){return this.constructor(e,n)}function r_(e,t,n){var r,o,i;Ve.__&&Ve.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,i=[],Uh(t,e=(!r&&n||t).__k=Y0(Xu,null,[e]),o||tu,tu,t.ownerSVGElement!==void 0,!r&&n?[n]:o?null:t.firstChild?Vu.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r),e_(i,e)}Vu=X0.slice,Ve={__e:function(e,t,n,r){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),a=o.__d),a)return o.__E=o}catch(s){e=s}throw e}},V0=0,ks.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ui({},this.state),typeof e=="function"&&(e=e(ui({},n),this.props)),e&&ui(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),xy(this))},ks.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),xy(this))},ks.prototype.render=Xu,ua=[],nu.__r=0;var i_=function(e,t,n,r){var o;t[0]=0;for(var i=1;i<t.length;i++){var a=t[i++],s=t[i]?(t[0]|=a?1:2,n[t[i++]]):t[++i];a===3?r[0]=s:a===4?r[1]=Object.assign(r[1]||{},s):a===5?(r[1]=r[1]||{})[t[++i]]=s:a===6?r[1][t[++i]]+=s+"":a?(o=e.apply(s,i_(e,s,n,["",null])),r.push(o),s[0]?t[0]|=2:(t[i-2]=0,t[i]=o)):r.push(s)}return r},Ty=new Map;function N2(e){var t=Ty.get(this);return t||(t=new Map,Ty.set(this,t)),(t=i_(this,t.get(e)||(t.set(e,t=function(n){for(var r,o,i=1,a="",s="",u=[0],f=function(y){i===1&&(y||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?u.push(0,y,a):i===3&&(y||a)?(u.push(3,y,a),i=2):i===2&&a==="..."&&y?u.push(4,y,0):i===2&&a&&!y?u.push(5,0,!0,a):i>=5&&((a||!y&&i===5)&&(u.push(i,0,a,o),i=6),y&&(u.push(i,y,0,o),i=6)),a=""},l=0;l<n.length;l++){l&&(i===1&&f(),f(l));for(var p=0;p<n[l].length;p++)r=n[l][p],i===1?r==="<"?(f(),u=[u],i=3):a+=r:i===4?a==="--"&&r===">"?(i=1,a=""):a=r+a[0]:s?r===s?s="":a+=r:r==='"'||r==="'"?s=r:r===">"?(f(),i=1):i&&(r==="="?(i=5,o=a,a=""):r==="/"&&(i<5||n[l][p+1]===">")?(f(),i===3&&(u=u[0]),i=u,(u=u[0]).push(2,0,i),i=0):r===" "||r==="	"||r===`
`||r==="\r"?(f(),i=2):a+=r),i===3&&a==="!--"&&(i=4,u=u[0])}return f(),u}(e)),t),arguments,[])).length>1?t:t[0]}var Pt=N2.bind(Y0),Ua,At,If,Sy,ga=0,o_=[],Bs=[],Cy=Ve.__b,My=Ve.__r,Ry=Ve.diffed,Py=Ve.__c,Ay=Ve.unmount;function Gu(e,t){Ve.__h&&Ve.__h(At,e,ga||t),ga=0;var n=At.__H||(At.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Bs}),n.__[e]}function Lf(e){return ga=1,I2(a_,e)}function I2(e,t,n){var r=Gu(Ua++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):a_(void 0,t),function(i){var a=r.__N?r.__N[0]:r.__[0],s=r.t(a,i);a!==s&&(r.__N=[s,r.__[1]],r.__c.setState({}))}],r.__c=At,!At.u)){At.u=!0;var o=At.shouldComponentUpdate;At.shouldComponentUpdate=function(i,a,s){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(l){return l.__c});if(u.every(function(l){return!l.__N}))return!o||o.call(this,i,a,s);var f=!1;return u.forEach(function(l){if(l.__N){var p=l.__[0];l.__=l.__N,l.__N=void 0,p!==l.__[0]&&(f=!0)}}),!(!f&&r.__c.props===i)&&(!o||o.call(this,i,a,s))}}return r.__N||r.__}function kf(e,t){var n=Gu(Ua++,3);!Ve.__s&&Wh(n.__H,t)&&(n.__=e,n.i=t,At.__H.__h.push(n))}function iu(e,t){var n=Gu(Ua++,4);!Ve.__s&&Wh(n.__H,t)&&(n.__=e,n.i=t,At.__h.push(n))}function qh(e){return ga=5,ya(function(){return{current:e}},[])}function ya(e,t){var n=Gu(Ua++,7);return Wh(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function go(e,t){return ga=8,ya(function(){return e},t)}function L2(){for(var e;e=o_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Fs),e.__H.__h.forEach(gl),e.__H.__h=[]}catch(t){e.__H.__h=[],Ve.__e(t,e.__v)}}Ve.__b=function(e){At=null,Cy&&Cy(e)},Ve.__r=function(e){My&&My(e),Ua=0;var t=(At=e.__c).__H;t&&(If===At?(t.__h=[],At.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Bs,n.__N=n.i=void 0})):(t.__h.forEach(Fs),t.__h.forEach(gl),t.__h=[])),If=At},Ve.diffed=function(e){Ry&&Ry(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(o_.push(t)!==1&&Sy===Ve.requestAnimationFrame||((Sy=Ve.requestAnimationFrame)||k2)(L2)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Bs&&(n.__=n.__V),n.i=void 0,n.__V=Bs})),If=At=null},Ve.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Fs),n.__h=n.__h.filter(function(r){return!r.__||gl(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],Ve.__e(r,n.__v)}}),Py&&Py(e,t)},Ve.unmount=function(e){Ay&&Ay(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Fs(r)}catch(o){t=o}}),n.__H=void 0,t&&Ve.__e(t,n.__v))};var Oy=typeof requestAnimationFrame=="function";function k2(e){var t,n=function(){clearTimeout(r),Oy&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Oy&&(t=requestAnimationFrame(n))}function Fs(e){var t=At,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),At=t}function gl(e){var t=At;e.__c=e.__(),At=t}function Wh(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function a_(e,t){return typeof t=="function"?t(e):t}function s_(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=s_(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function ou(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=s_(e))&&(r&&(r+=" "),r+=t);return r}function B2(e){const{entry:t,selected:n,onMouseEnter:r,onMouseLeave:o,onAction:i}=e;return Pt`
    <li
      class=${ou("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      onClick=${i}
      onMouseEnter=${r}
      onMouseLeave=${o}
      onDragStart=${a=>i(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${ou("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&Pt`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&Pt`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?Pt`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&Pt`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&Pt`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function F2(e){const{selectedEntry:t,setSelectedEntry:n,entries:r,...o}=e,i=qh(),a=ya(()=>j2(r),[r]);return iu(()=>{const s=i.current;if(!s)return;const u=s.querySelector(".selected");u&&$2(u)},[t]),Pt`
    <div class="djs-popup-results" ref=${i}>
      ${a.map(s=>Pt`
        ${s.name&&Pt`
          <div key=${s.id} class="entry-header" title=${s.name}>
            ${s.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${s.id}>
          ${s.entries.map(u=>Pt`
            <${B2}
              key=${u.id}
              entry=${u}
              selected=${u===t}
              onMouseEnter=${()=>n(u)}
              onMouseLeave=${()=>n(null)}
              ...${o}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function j2(e){const t=[],n=i=>t.find(a=>i.id===a.id),r=i=>!!n(i),o=i=>typeof i=="string"?{id:i}:i;return e.forEach(i=>{const a=i.group?o(i.group):{id:"default"};r(a)?n(a).entries.push(i):t.push({...a,entries:[i]})}),t}function $2(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function H2(e){const{onClose:t,onSelect:n,className:r,headerEntries:o,position:i,title:a,width:s,scale:u,search:f,entries:l,onOpened:p,onClosed:y}=e,g=ya(()=>$t(f)?l.length>5:!1,[f,l]),v=qh(),[S,M]=Lf(""),P=go((G,Y)=>{if(!g)return G;const q=fe=>{if(!Y)return(fe.rank||0)>=0;const Te=[fe.description||"",fe.label||"",fe.search||""].join("---").toLowerCase();return Y.toLowerCase().split(/\s/g).every(we=>Te.includes(we))};return G.filter(q)},[g]),[T,m]=Lf(P(l,S)),[x,b]=Lf(T[0]),I=go(G=>{(!x||!G.includes(x))&&b(G[0]),m(G)},[x,m,b]);kf(()=>{I(P(l,S))},[S,l]),kf(()=>{const G=Y=>{if(Y.key==="Escape")return Y.preventDefault(),t()};return document.documentElement.addEventListener("keydown",G),()=>{document.documentElement.removeEventListener("keydown",G)}},[]),iu(()=>{v.current&&v.current.focus()},[]);const d=go(G=>{let q=T.indexOf(x)+G;q<0&&(q=T.length-1),q>=T.length&&(q=0),b(T[q])},[T,x,b]),L=go(G=>{if(G.key==="Enter"&&x)return n(G,x);if(G.key==="ArrowUp"||G.key==="Tab"&&G.shiftKey)return d(-1),G.preventDefault();if(G.key==="ArrowDown"||G.key==="Tab")return d(1),G.preventDefault()},[n,t,x,d]),w=go(G=>{ca(G.target,"input")&&M(()=>G.target.value)},[M]);kf(()=>(p(),()=>{y()}),[]);const U=ya(()=>a||o.length>0,[a,o]);return Pt`
    <${Dy}
      onClose=${t}
      onKeyup=${w}
      onKeydown=${L}
      className=${r}
      position=${i}
      width=${s}
      scale=${u}
    >
      ${U&&Pt`
        <div class="djs-popup-header">
          <h3 class="djs-popup-title" title=${a}>${a}</h3>
          ${o.map(G=>Pt`
            <span
              class=${q2(G,G===x)}
              onClick=${Y=>n(Y,G)}
              title=${G.title||G.label}
              data-id=${G.id}
              onMouseEnter=${()=>b(G)}
              onMouseLeave=${()=>b(null)}
            >
              ${G.imageUrl?Pt`
                <img class="djs-popup-entry-icon" src=${G.imageUrl} alt="" />
              `:null}

              ${G.label?Pt`
                <span class="djs-popup-label">${G.label}</span>
              `:null}
            </span>
          `)}
        </div>
      `}
      ${l.length>0&&Pt`
        <div class="djs-popup-body">

          ${g&&Pt`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input
                ref=${v}
                type="text"
              />
          </div>
          `}

          <${F2}
            entries=${T}
            selectedEntry=${x}
            setSelectedEntry=${b}
            onAction=${n}
          />
        </div>
        ${T.length===0&&Pt`
          <div class="djs-popup-no-results">No matching entries found.</div>
        `}
      `}
    </${Dy}>
  `}function Dy(e){const{onClose:t,onKeydown:n,onKeyup:r,className:o,children:i,position:a}=e,s=qh(),u=go(f=>{Ir(f.target,".djs-popup",!0)||t()},[t]);return iu(()=>{if(typeof a!="function")return;const f=s.current,l=a(f);f.style.left=`${l.x}px`,f.style.top=`${l.y}px`},[s.current,a]),iu(()=>{s.current&&s.current.focus()},[]),Pt`
    <div
      class="djs-popup-backdrop"
      onClick=${u}
    >
      <div
        class=${ou("djs-popup",o)}
        style=${U2(e)}
        onKeydown=${n}
        onKeyup=${r}
        ref=${s}
        tabIndex="-1"
      >
        ${i}
      </div>
    </div>
  `}function U2(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`}}function q2(e,t){return ou("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}var W2="data-id",u_=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],z2=1e3;function wt(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var r=$t(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",o=>{const i=this.isOpen()&&this._current.target;o.element===i&&this._render()})}wt.$inject=["config.popupMenu","eventBus","canvas"];wt.prototype._render=function(){const{position:e,className:t,entries:n,headerEntries:r,options:o}=this._current,i=Object.entries(n).map(([p,y])=>({id:p,...y})),a=Object.entries(r).map(([p,y])=>({id:p,...y})),s=e&&(p=>this._ensureVisible(p,e)),u=this._updateScale(this._current.container);r_(Pt`
      <${H2}
        onClose=${p=>this.close(p)}
        onSelect=${(p,y,g)=>this.trigger(p,y,g)}
        position=${s}
        className=${t}
        entries=${i}
        headerEntries=${a}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};wt.prototype.open=function(e,t,n,r){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:o,headerEntries:i}=this._getContext(e,t);this._current={position:n,className:t,target:e,entries:o,headerEntries:i,container:this._createContainer({provider:t}),options:r},this._emit("open"),this._bindAutoClose(),this._render()};wt.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const r=this._getEntries(e,n),o=this._getHeaderEntries(e,n);return{entries:r,headerEntries:o,empty:!(Object.keys(r).length||Object.keys(o).length)}};wt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};wt.prototype.reset=function(){const e=this._current.container;r_(null,e),ur(e)};wt.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};wt.prototype._onOpened=function(){this._emit("opened")};wt.prototype._onClosed=function(){this._emit("closed")};wt.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const r=Bt(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(r),r};wt.prototype._bindAutoClose=function(){this._eventBus.once(u_,this.close,this)};wt.prototype._unbindAutoClose=function(){this._eventBus.off(u_,this.close,this)};wt.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,r,o=e;return t!==!0&&(t===!1?(n=1,r=1):(n=t.min,r=t.max),$t(n)&&e<n&&(o=n),$t(r)&&e>r&&(o=r)),o};wt.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect(),o={},i=t.x,a=t.y;return t.x+r.width>n.width&&(o.x=!0),t.y+r.height>n.height&&(o.y=!0),o.x&&o.y?(i=t.x-r.width,a=t.y-r.height):o.x?(i=t.x-r.width,a=t.y):o.y&&t.y<r.height?(i=t.x,a=10):o.y&&(i=t.x,a=t.y-r.height),{x:i,y:a}};wt.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};wt.prototype.registerProvider=function(e,t,n){n||(n=t,t=z2),this._eventBus.on("popupMenu.getProviders."+e,t,function(r){r.providers.push(n)})};wt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};wt.prototype._getEntries=function(e,t){var n={};return ne(t,function(r){if(!r.getPopupMenuEntries){ne(r.getEntries(e),function(i){var a=i.id;if(!a)throw new Error("entry ID is missing");n[a]=Dr(i,["id"])});return}var o=r.getPopupMenuEntries(e);Wt(o)?n=o(n):ne(o,function(i,a){n[a]=i})}),n};wt.prototype._getHeaderEntries=function(e,t){var n={};return ne(t,function(r){if(!r.getPopupMenuHeaderEntries){if(!r.getHeaderEntries)return;ne(r.getHeaderEntries(e),function(i){var a=i.id;if(!a)throw new Error("entry ID is missing");n[a]=Dr(i,["id"])});return}var o=r.getPopupMenuHeaderEntries(e);Wt(o)?n=o(n):ne(o,function(i,a){n[a]=i})}),n};wt.prototype.isOpen=function(){return!!this._current};wt.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let o=Ir(e.delegateTarget||e.target,".entry",!0),i=pn(o,W2);t={id:i,...this._getEntry(i)}}const r=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(Wt(r)){if(n==="click")return r(e,t)}else if(r[n])return r[n](e,t)}};wt.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const V2={__init__:["popupMenu"],popupMenu:["type",wt]};function no(e,t,n,r,o,i,a){this._popupMenu=e,this._modeling=t,this._moddle=n,this._dcrReplace=r,this._rules=o,this._translate=i,this._dcrRules=a,this.register()}no.$inject=["popupMenu","modeling","moddle","dcrReplace","rules","translate","dcrRules"];no.prototype.getHeaderEntries=function(e){const t=e.businessObject.get("pending")||!1,n=e.businessObject.get("included")||!1,r=e.businessObject.get("executed")||!1,o=e.businessObject.get("multi-instance")||!1;let i=[];return(!We(e,"dcr:SubProcess")||!o)&&i.push({id:"toggle-pending-state",className:"od-text-box-pending",title:"Pending State",active:t,action:(a,s)=>{this._modeling.updateProperties(e,{pending:!t})},loopType:"Pending"},{id:"toggle-included-state",className:"od-text-box-included",title:"Included State",active:n,action:(a,s)=>{this._modeling.updateProperties(e,{included:!n})},loopType:"Included"},{id:"toggle-executed-state",className:"od-text-box-executed",title:"Executed State",active:r,action:(a,s)=>{this._modeling.updateProperties(e,{executed:!r})},loopType:"Executed"}),i};no.prototype.getEntries=function(e){const t=e.businessObject.get("multi-instance")||!1,n=e.children.some(r=>We(r,"dcr:Nesting"));return We(e,"dcr:SubProcess")&&(t||We(e.parent,"dcr:DcrGraph"))&&(!t||!n)?[{id:"toggle-multi-instance-state",label:`Change to ${t?"Single":"Multi"}-Instance SubProcess`,action:(r,o)=>{this._modeling.updateProperties(e,{"multi-instance":!t})}}]:[]};no.prototype._createMenuEntry=function(e,t,n){var r=this._translate,o=this._postitReplace.replaceElement,i=function(){return o(t,e.target)};n=n||i;var a={label:r(e.label),className:e.className,id:e.actionName,action:n};return a};no.prototype._createMenuEntry=function(e,t,n){this._translate,this._dcrReplace.replaceElement};no.prototype.register=function(){this._popupMenu.registerProvider("dcr-object-popup",this)};function ro(e,t,n,r,o,i,a){this._popupMenu=e,this._modeling=t,this._moddle=n,this._dcrReplace=r,this._rules=o,this._translate=i,this._dcrRules=a,this.register()}ro.$inject=["popupMenu","modeling","moddle","dcrReplace","rules","translate","dcrRules"];ro.prototype.getHeaderEntries=function(e){const t=e.businessObject.get("pending")||!1,n=!!(e.businessObject.get("included")||e.businessObject.get("included")===void 0),r=e.businessObject.get("executed")||!1;let o=this;return[{id:"toggle-pending-state",className:"od-text-box-pending",title:"Pending State",active:t,action:(a,s)=>{o._modeling.updateProperties(e,{pending:!t}),e.children.forEach(u=>{o._modeling.updateProperties(u,{pending:!t})})},loopType:"Pending"},{id:"toggle-included-state",className:"od-text-box-included",title:"Included State",active:n,action:(a,s)=>{o._modeling.updateProperties(e,{included:!n}),e.children.forEach(u=>{o._modeling.updateProperties(u,{included:!n})})},loopType:"Included"},{id:"toggle-executed-state",className:"od-text-box-executed",title:"Executed State",active:r,action:(a,s)=>{o._modeling.updateProperties(e,{executed:!r}),e.children.forEach(u=>{o._modeling.updateProperties(u,{executed:!r})})},loopType:"Executed"}]};ro.prototype.getEntries=function(e){return[]};ro.prototype._createMenuEntry=function(e,t,n){var r=this._translate,o=this._postitReplace.replaceElement,i=function(){return o(t,e.target)};n=n||i;var a={label:r(e.label),className:e.className,id:e.actionName,action:n};return a};ro.prototype._createMenuEntry=function(e,t,n){this._translate,this._dcrReplace.replaceElement};ro.prototype.register=function(){this._popupMenu.registerProvider("dcr-nesting-popup",this)};function qa(e,t,n,r,o,i,a){this._popupMenu=e,this._modeling=t,this._moddle=n,this._dcrReplace=r,this._rules=o,this._translate=i,this._dcrRules=a,this.register()}qa.$inject=["popupMenu","modeling","moddle","dcrReplace","rules","translate","dcrRules"];qa.prototype.getHeaderEntries=function(e){return[]};qa.prototype.getEntries=function(e){const t=e.businessObject.get("type");let n=this;return[{id:"toggle-condition-flow",label:"Condition Relation",flowType:"condition",action:(o,i)=>{n._modeling.updateProperties(e,{type:i.flowType})}},{id:"toggle-response-flow",label:"Response Relation",flowType:"response",action:(o,i)=>{n._modeling.updateProperties(e,{type:i.flowType})}},{id:"toggle-include-flow",label:"Include Relation",flowType:"include",action:(o,i)=>{n._modeling.updateProperties(e,{type:i.flowType})}},{id:"toggle-exclude-flow",label:"Exclude Relation",flowType:"exclude",action:(o,i)=>{n._modeling.updateProperties(e,{type:i.flowType})}},{id:"toggle-milestone-flow",label:"Milestone Relation",flowType:"milestone",action:(o,i)=>{n._modeling.updateProperties(e,{type:i.flowType})}},{id:"toggle-spawn-flow",label:"Spawn Relation",flowType:"spawn",action:(o,i)=>{n._modeling.updateProperties(e,{type:i.flowType})}}].filter(o=>o.flowType!==t&&n._dcrRules.isLinkAllowed(e,o.flowType))};qa.prototype.register=function(){this._popupMenu.registerProvider("dcr-link-popup",this)};const X2={__depends__:[V2,d0],__init__:["subProcessPopupProvide","relationPopupProvider","nestingPopupProvider"],subProcessPopupProvide:["type",no],nestingPopupProvider:["type",ro],relationPopupProvider:["type",qa]},G2={useNewFlowIcons:!1};function c_(e,t){this.settings={...G2},this.get=r=>this.settings[r],this.set=(r,o)=>{e.execute("settings.update",{settings:this.settings,key:r,value:o})};const n=document.getElementById("js-toggle-flow-appearance");n==null||n.addEventListener("click",()=>{this.set("useNewFlowIcons",!this.get("useNewFlowIcons"))}),t.on(["commandStack.postExecute","commandStack.reverted"],r=>{if(r.command==="settings.update"){const{key:o,value:i}=r.context;o==="useNewFlowIcons"&&(this.get("useNewFlowIcons")?n==null||n.classList.add("button-active"):n==null||n.classList.remove("button-active"))}}),e.registerHandler("settings.update",Yu)}c_.$inject=["commandStack","eventBus"];function Yu(e){this._elementRegistry=e}Yu.$inject=["elementRegistry"];Yu.prototype.execute=function(e){return e.oldValue=e.settings[e.key],e.settings[e.key]=e.value,this._elementRegistry.filter(function(t){return We(t,"dcr:Relation")})};Yu.prototype.revert=function(e){return e.settings[e.key]=e.oldValue,this._elementRegistry.filter(function(t){return We(t,"dcr:Relation")})};const Y2={__depends__:[],__init__:["dcrSettings"],dcrSettings:["type",c_]};var K2=`<?xml version="1.0" encoding="UTF-8"?>
<dcr:definitions xmlns:dcr="http://tk/schema/dcr" xmlns:dcrDi="http://tk/schema/dcrDi">
    <dcr:dcrGraph id="Board_debug" />
    <dcrDi:dcrRootBoard id="RootBoard_debug">
        <dcrDi:dcrPlane id="Plane_debug" boardElement="Board_debug" />
    </dcrDi:dcrRootBoard>
</dcr:definitions>`;function ar(e){Ca.call(this,e)}ct(ar,Ca);ar.Viewer=Ei;ar.NavigatedViewer=ha;ar.prototype.createDiagram=function(){return this.importXML(K2)};ar.prototype._interactionModules=[om,cm,Fb,hm];ar.prototype._modelingModules=[PS,$b,Vb,yT,hh,ET,FT,Lm,Mu,YT,TS,SS,IS,GS,UM,KM,a2,c2,Km,R2,X2,Y2];ar.prototype._modules=[].concat(Ei.prototype._modules,ar.prototype._interactionModules,ar.prototype._modelingModules);const f_=`<?xml version="1.0" encoding="UTF-8"?>\r
<dcr:definitions xmlns:dcr="http://tk/schema/dcr" xmlns:dcrDi="http://tk/schema/dcrDi" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC">\r
    <dcr:dcrGraph id="Graph">\r
    </dcr:dcrGraph>\r
    <dcrDi:dcrRootBoard id="RootBoard">\r
        <dcrDi:dcrPlane id="Plane" boardElement="Board">\r
        </dcrDi:dcrPlane>\r
    </dcrDi:dcrRootBoard>\r
</dcr:definitions>\r
`;var Wa=new ar({container:"#canvas",keyboard:{bindTo:window}});function Z2(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function Q2(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}const Pr={fullScreen:!1,keyboardHelp:!1};document.getElementById("js-toggle-fullscreen").addEventListener("click",function(){Pr.fullScreen=!Pr.fullScreen,Pr.fullScreen?Z2(document.documentElement):Q2()});document.getElementById("js-toggle-keyboard-help").addEventListener("click",function(){Pr.keyboardHelp=!Pr.keyboardHelp;let e="none";Pr.keyboardHelp&&(e="block"),document.getElementById("io-dialog-main").style.display=e});document.getElementById("io-dialog-main").addEventListener("click",function(){Pr.keyboardHelp=!Pr.keyboardHelp;let e="none";Pr.keyboardHelp||(document.getElementById("io-dialog-main").style.display=e)});function J2(e,t){if(!window.FileReader)return window.alert("Looks like you use an older browser that does not support drag and drop. Try using a modern browser such as Chrome, Firefox or Internet Explorer > 10.");if(e){var n=new FileReader;n.onload=function(r){var o=r.target.result;t(o)},n.readAsText(e)}}var eR=nr('<input type="file" />').appendTo(document.body).css({width:1,height:1,display:"none",overflow:"hidden"}).on("change",function(e){J2(e.target.files[0],zh)});function zh(e){Wa.importXML(e).catch(function(t){if(t)return console.error("could not import dcr board",t)})}function tR(){return Wa.saveSVG()}function nR(){return Wa.saveXML({format:!0})}function rR(){return Wa.saveDCRXML()}nr(function(){var e=nr("#js-download-board"),t=nr("#js-download-dcr"),n=nr("#js-download-svg"),r=nr("#js-open-new"),o=nr("#js-open-board");nr(".buttons a").click(function(s){nr(this).is(".active")||(s.preventDefault(),s.stopPropagation())});function i(s,u,f){var l=encodeURIComponent(f);f?s.addClass("active").attr({href:"data:application/xml;charset=UTF-8,"+l,download:u}):s.removeClass("active")}var a=iR(function(){tR().then(function(s){i(n,"dcr-graph.svg",s.svg)}),nR().then(function(s){i(e,"dcr-board.xml",s.xml)}),rR().then(function(s){i(t,"dcr-graph-XML-format.xml",s.xml)})},500);Wa.on("commandStack.changed",a),r.on("click",function(){zh(f_)}),o.on("click",function(){var s=nr(eR);s.val(""),s.trigger("click")})});zh(f_);function iR(e,t){var n;return function(){n&&clearTimeout(n),n=setTimeout(e,t)}}
